(function(){window.requireStubs = window.requireStubs || []; window.rA = (window.rA || []).concat([["apps/components/layout/account-balance/bsl-notification/bsl-notification.view.html",[]],["apps/components/metaTags/templates/discover/discover-new/index.view.html",[]],["apps/components/metaTags/templates/discover/funds/index.view.html",[]],["apps/components/metaTags/templates/discover/market-cap.view.html",[]],["apps/components/metaTags/templates/discover/markets/cryptoCategoryResult.view.html",[]],["apps/components/metaTags/templates/discover/markets/index.view.html",[]],["apps/components/metaTags/templates/discover/markets/instrumentTypeResults.view.html",[]],["apps/components/metaTags/templates/discover/markets/market-movers.view.html",[]],["apps/components/metaTags/templates/discover/markets/results.view.html",[]],["apps/components/metaTags/templates/discover/markets/stocksExchangeResults.view.html",[]],["apps/components/metaTags/templates/discover/markets/stocksIndustryResults.view.html",[]],["apps/components/metaTags/templates/discover/people/index.view.html",[]],["apps/components/metaTags/templates/discover/people/results.view.html",[]],["apps/components/metaTags/templates/discover/popular.view.html",[]],["apps/components/metaTags/templates/discover/recently-added.view.html",[]],["apps/components/metaTags/templates/discover/trending.view.html",[]],["apps/components/metaTags/templates/feed/posts.view.html",[]],["apps/components/metaTags/templates/learn-more/learn-more.view.html",[]],["apps/components/metaTags/templates/login/login.view.html",[]],["apps/components/metaTags/templates/markets/chart.view.html",[]],["apps/components/metaTags/templates/markets/index.view.html",[]],["apps/components/metaTags/templates/markets/news.view.html",[]],["apps/components/metaTags/templates/markets/stats.view.html",[]],["apps/components/metaTags/templates/metaTagsDefaults.view.html",[]],["apps/components/metaTags/templates/people/index.view.html",[]],["apps/components/metaTags/templates/procharts/index.view.html",[]],["apps/components/metaTags/templates/sign-up/sign-up.view.html",[]],["apps/components/trading/buy-sell-buttons/buy-sell-buttons.view.html",[]],["apps/components/trading/copy-button/copy-button.view.html",[]],["apps/components/trading/open-trade-upsell-popup/open-trade-upsell-popup.view.html",[]],["apps/components/trading/restrict-trading/restrict-trading.view.html",[]],["apps/components/trading/trade-button/trade-button.view.html",[]],["apps/discovery/people/homeUS/copyTraderPopup/copytrader-popup.view.html",[]],["apps/priceAlerts/openPriceAlert/openPriceAlert.view.html",[]],["apps/procharts/dropdown/dropdown.view.html",[]],["apps/procharts/pro-charts/pro-charts.view.html",[]],["apps/settings/tabs/dialogs/oneClickTrading/editOneClickTrading.view.html",[]],["apps/settings/tabs/dialogs/oneClickTrading/oneClickTradingSearchDialog.view.html",[]],["apps/sign-up/sign-up-box.view.html",[]],["apps/sign-up/sign-up.view.html",[]],["apps/trader/history/instruments/instruments.view.html",[]],["apps/trader/history/mirrors/detailedView/detailedView.view.html",[]],["apps/trader/portfolio/close-all-positions/close-all-positions.view.html",[]],["apps/trader/portfolio/closePosition/closePosition.view.html",[]],["apps/trader/portfolio/detailedView/detailedView.view.html",[null,null,null,null]],["apps/trader/portfolio/detailedView/fund/chart/fund-detailed-view-chart.view.html",[]],["apps/trader/portfolio/detailedView/fund/detailed/detailed-list.view.html",[]],["apps/trader/portfolio/detailedView/fund/fund-list.view.html",[]],["apps/trader/portfolio/detailedView/fund/list/list.view.html",[]],["apps/trader/portfolio/detailedView/header/header.view.html",[]],["apps/trader/portfolio/detailedView/mirror/detailed/detailed-list.view.html",[]],["apps/trader/portfolio/detailedView/mirror/list/list.view.html",[]],["apps/trader/portfolio/detailedView/mirror/mirror.view.html",[]],["apps/trader/portfolio/detailedView/openTrades/openTrades.view.html",[]],["apps/trader/portfolio/empty/empty.view.html",[]],["apps/trader/portfolio/instrumentPreview/instrumentPreview.view.html",[]],["apps/trader/portfolio/openPosition/openPosition.view.html",[]],["apps/trader/portfolio/openPosition/openPositionInsufficientFunds.view.html",[]],["apps/trader/portfolio/overview/card/cardTrades.view.html",[]],["apps/trader/portfolio/overview/chart/chart.view.html",[]],["apps/trader/portfolio/overview/chart/detailedGraphDirective.view.html",[]],["apps/trader/portfolio/overview/chart/pieDirective.view.html",[]],["apps/trader/portfolio/overview/chart/smallGraphDirective.view.html",[]],["apps/trader/portfolio/overview/list/list.view.html",[]],["apps/trader/portfolio/overview/list/manualTrades.view.html",[]],["apps/trader/portfolio/overview/overview.view.html",[]],["apps/trader/portfolio/updatePosition/updatePosition.view.html",[]],["apps/trader/portfolio/widgets/demoNeedToDeposit/demoNeedToDeposit.view.html",[]],["apps/trader/portfolio/widgets/dropDownActions/dropDownActions.view.html",[]],["apps/trader/portfolio/widgets/dropDownActions/templates/instruments.view.html",[]],["apps/trader/portfolio/widgets/dropDownActions/templates/mirrors.view.html",[]],["apps/trader/portfolio/widgets/executionMessages/executionMessages.view.html",[]],["apps/trader/portfolio/widgets/executionMessages/templates/amount.view.html",[]],["apps/trader/portfolio/widgets/executionMessages/templates/leverage.view.html",[]],["apps/trader/portfolio/widgets/executionMessages/templates/mirrorAmount.view.html",[]],["apps/trader/portfolio/widgets/executionMessages/templates/mirrorStopLoss.view.html",[]],["apps/trader/portfolio/widgets/executionMessages/templates/stopLoss.view.html",[]],["apps/trader/portfolio/widgets/executionMessages/templates/takeProfit.view.html",[]],["apps/trader/portfolio/widgets/myPortfolio/myPortfolio.view.html",[]],["apps/trader/portfolio/widgets/porfolioChanged/porfolioChanged.view.html",[]],["apps/trader/portfolio/widgets/portfolioDropDown/portfolioDropDown.view.html",[]],["apps/trader/portfolio/widgets/redeemLimit/redeem-limit.view.html",[]],["apps/trader/tab-switch/tab-switch.view.html",[]],["apps/trader/view-mode/view-mode.view.html",[]],["apps/upgrades/components/buySellButtons/buy-sell-buttons.view.html",[]],["apps/upgrades/components/dropDownActions/dropDownActions.view.html",[]],["apps/upgrades/components/trade-buttons.view.html",[]],["apps/widgets/discover-people-embed/discover-people-embed.view.html",[]],["bl/factories/kyc/popups/usa-soon/usa-soon.view.html",[]],["bl/factories/kyc/popups/usa-states/usa-states.view.html",[]],["infrastruct/ui/digital-signature/digital-signature.view.html",[]],["infrastruct/ui/inputNumberIncrementer/inputNumberIncrementer.view.html",[]],["infrastruct/ui/table/editColumns/editColumns.view.html",[]],["infrastruct/ui/uiTabs/views/tab.view.html",[]],["infrastruct/ui/uiTabs/views/tabTitle.view.html",[]],["infrastruct/ui/uiTabs/views/tabWrapper.view.html",[]],["integrations/wallet/redeem/cancelPopup/cancel.redeem.popup.view.html",[]],["integrations/wallet/redeem/redeemPopup/redeem.popup.view.html",[]],["wrapper/components/forceUpdate/forceUpdate.view.html",[]],["wrapper/components/open-garden/open-garden-bubble.view.html",[]],["wrapper/components/rate-us/rate-us-feedback/rate-us-feedback.view.html",[]],["wrapper/components/rate-us/rate-us-prompt/rate-us-prompt.view.html",[]],["wrapper/components/rate-us/rate-us-screen/rate-us-screen.view.html",[]],["infrastruct/libs/angular/angular",[null]],["infrastruct/libs/highcharts/highcharts",[]],["apps/components/layout/layoutCtrl",[]],["apps/login/routes",[]],["apps/procharts/routes",[]],["apps/sign-up/routes",[]],["apps/sign-up/sign-up.component",[]],["apps/trader/view-mode/view-mode.component",[]],["apps/widgets/discover-people-embed/routes",[]],["apps/widgets/login/logout/logout-app",[]],["apps/widgets/login/logout/services/logout.service",[]],["apps/widgets/login/services/communication/post-message-comm",[]],["apps/widgets/login/services/login-decorator.service",[]],["apps/widgets/login/services/secure-storage-decorator.service",[]],["apps/widgets/login/services/session-decorator.service",[]],["apps/widgets/login/services/sms-verification-decorator.service",[]],["apps/widgets/login/services/wallet/http-cloudflare.decorator",[]],["apps/widgets/login/services/wallet/login-decorator.service",[]],["apps/widgets/login/services/wallet/maintenance-navigator-decorator",[]],["apps/widgets/login/services/wallet/session-storage-decorator.service",[]],["apps/widgets/login/services/wallet/social/apple.service",[]],["apps/widgets/login/services/wallet/social/fb.service",[]],["apps/widgets/login/services/wallet/social/google.service",[]],["apps/widgets/login/services/wallet/social/sso.service",[]],["bl/factories/session/base/session-ab-test-headers-interceptor.factory",[]],["bl/factories/session/base/session-auth-injector.factory",[]],["bl/factories/session/base/session-classification-injector.factory",[]],["bl/factories/session/base/session-headers-injector.factory",[]],["bl/factories/sign-up/index",[]],["bl/factories/sign-up/sign-up-validations.service",[]],["bl/factories/sign-up/sign-up.service",[]],["bl/factories/social/apple.service",[]],["bl/factories/social/fb.service",[]],["bl/factories/social/google.service",[]],["bl/factories/social/index",[]],["bl/factories/social/sso.service",[]],["bl/factories/social/wechat.service",[]],["bl/factories/trading/filters/filters",[]],["bl/factories/trading/instruments/rates/models/rateChange",[]],["bl/factories/trading/mirror-configurations/index",[]],["bl/factories/trading/mirror-configurations/mirror-configurations.service",[]],["bl/factories/trading/multi-currency/multi-currency",[]],["bl/factories/trading/oneClickTrading/oneClickTrading",[]],["bl/factories/trading/upsell/upsell.service",[]],["config/build-config",[]],["config/china",[]],["config/config-adjustment",[]],["config/static",[]],["config/usa",[]],["embed/discover-people",[]],["embed/etoro-connect/etoro-connect",[]],["embed/login",[]],["embed/sign-up",[]],["embed/sso-button/sso-button",[]],["embed/sso-button/sso-button.service",[]],["infrastruct/filters/currencyParser",[]],["infrastruct/filters/fees",[]],["infrastruct/filters/formatDate",[]],["infrastruct/filters/formatRate",[]],["infrastruct/filters/notAvailable",[]],["infrastruct/filters/nozero",[]],["infrastruct/filters/shortNumber",[]],["infrastruct/filters/tofixed",[]],["infrastruct/filters/tradingConventions",[]],["infrastruct/filters/unitsOpenClose",[]],["infrastruct/libs/angular/angular-animate",[]],["infrastruct/libs/angular/angular-cookies",[]],["infrastruct/libs/angular/angular-messages",[]],["infrastruct/libs/angular/angular-route",[]],["infrastruct/libs/angular/angular-sanitize",[]],["infrastruct/libs/chart-iq/chart-iq",[]],["infrastruct/libs/hammerjs/hammer.min",[]],["infrastruct/libs/hpack/hpack",[]],["infrastruct/libs/jquery/jquery",[]],["infrastruct/libs/json2/json2",[]],["infrastruct/libs/livereload/livereload",[]],["infrastruct/libs/prototypes_NEED_TO_REMOVE",[]],["infrastruct/libs/requirejs/etoro-bundle-require-decleration",[]],["infrastruct/libs/requirejs/etoro-bundle-require",[]],["infrastruct/libs/requirejs/etoro-require",[]],["infrastruct/libs/requirejs/require",[]],["infrastruct/libs/signature-pad/signature-pad",[]],["infrastruct/libs/swiper/swiper",[]],["infrastruct/libs/ua-parser/ua-parser",[]],["infrastruct/services/analytics/analyticsProvider",[]],["infrastruct/services/charts/charts",[]],["infrastruct/services/experiments/models/experiment",[]],["infrastruct/services/loader",[]],["infrastruct/services/utils/guid",[]],["infrastruct/ui/uiElementInView",[]],["integrations/embed/services/analyticslite",[]],["integrations/embed/services/config",[]],["integrations/embed/services/countries",[]],["integrations/embed/services/funnelslite",[]],["integrations/embed/services/httplite",[]],["integrations/embed/services/jqlite",[]],["integrations/embed/services/localization",[]],["integrations/embed/services/logger",[]],["integrations/embed/services/messagePubSub",[]],["integrations/embed/services/polyfills",[]],["integrations/embed/services/qlite",[]],["integrations/embed/services/recaptchalite",[]],["integrations/embed/services/securityIframeLoader",[]],["integrations/embed/services/sessionStorage",[]],["integrations/liveAgent/liveAgent.service",[]],["integrations/liveAgent/routes",[]],["loaders/client-silent-login",[]],["loaders/helpers/app-config",[]],["loaders/helpers/bootstrap-sign-up",[]],["loaders/helpers/image",[]],["loaders/helpers/json-support",[]],["loaders/helpers/network-request-accelerator",[]],["loaders/helpers/page-load-start",[]],["loaders/helpers/scripts",[]],["loaders/helpers/single-log",[]],["loaders/helpers/xhr",[]],["loaders/index",[]],["tools/browser-support",[]],["workers/push-worker",[]],["wrapper/bl/services/appoxee/appoxeeService",[]],["wrapper/bl/services/auth-check/auth-check.service",[]],["wrapper/bl/services/default-screen/default-screen.service",[]],["wrapper/bl/services/open-garden/open-garden.service",[]],["wrapper/bl/services/postRedirect/postRedirect",[]],["wrapper/bl/services/social/apple.service",[]],["wrapper/bl/services/social/fb.service",[]],["wrapper/bl/services/social/google.service",[]],["wrapper/bl/services/social/sso.service",[]],["wrapper/bl/services/social/wechat.service",[]],["wrapper/bl/services/wrapperService/wrapperService",[]],["wrapper/bl/services/wrapperStorage/wrapperStorage.service",[]],["wrapper/components/forceUpdate/forceUpdateCtrl",[]],["wrapper/components/keyboard",[]],["wrapper/components/open-garden/open-garden-bubble.component",[]],["wrapper/components/preloader",[]],["wrapper/components/rate-us/index",[]],["wrapper/components/rate-us/rate-us-feedback/rate-us-feedback.component",[]],["wrapper/components/rate-us/rate-us-prompt/rate-us-prompt.component",[]],["wrapper/components/rate-us/rate-us-screen/rate-us-screen.component",[]],["wrapper/components/rate-us/rate-us.service",[]],["wrapper/index",[]],["wrapper/infrastruct/services/appInfo/appInfoService",[]],["wrapper/infrastruct/services/appoxee/appoxeeService",[]],["wrapper/infrastruct/services/badge/badgeService",[]],["wrapper/infrastruct/services/in-app-urls/in-app-urls.service",[]],["wrapper/infrastruct/services/inAppBrowser/inAppBrowserService",[]],["wrapper/infrastruct/services/keyboard/keyboardService",[]],["wrapper/infrastruct/services/urban/urbanService",[]],["wrapper/infrastruct/wrapperConfig",[]],["wrapper/infrastruct/wrapperStorage",[]],["wrapper/integrations/liveAgent/liveAgent",[]],["wrapper/loader",[]],["wrapper/wrapperApp",[]],["infrastruct/libs/fastclick/fastclick",[]],["apps/components/layout/account-balance/bsl-notification/bsl-notification.component",[0]],["apps/components/layout/loader/loader.component",[null]],["apps/discovery/people/homeUS/copyTraderPopup/copytrader-popup.component",[32]],["apps/procharts/pro-charts/pro-charts.component",[35]],["apps/sign-up/sign-up-box.component",[38]],["apps/trader/portfolio/instrumentPreview/instrumentPreview.component",[55]],["apps/trader/tab-switch/tab-switch.component",[82]],["apps/upgrades/components/buySellButtons/buy-sell-buttons.components",[84]],["apps/upgrades/components/dropDownActions/dropDownActions.component",[85]],["apps/upgrades/components/trade-buttons.component",[86]],["apps/upgrades/routes",[]],["apps/widgets/login/services/communication/comm-iframe-child",[114]],["apps/widgets/login/services/communication/comm-iframe-parent",[114]],["apps/widgets/login/services/communication.service",[268]],["bl/factories/kyc/kyc.service",[]],["bl/factories/session/base/session-storage.service",[]],["bl/factories/trading/portfolio/models/portfolioGroup/groupAggregator",[]],["bl/factories/trading/portfolio-graph/models/graph-node",[]],["bl/factories/trading/upsell/index",[]],["config/dynamic-defaults",[149]],["config/native-android",[276]],["config/native-ios",[276]],["infrastruct/filters/math",[]],["infrastruct/models/base",[]],["infrastruct/services/experiments/experiments.service",[189]],["infrastruct/services/httpHandler",[]],["infrastruct/services/locationParams",[]],["infrastruct/services/utils/syncObjects",[]],["infrastruct/ui/click-outside",[]],["infrastruct/ui/tooltip",[]],["integrations/wallet/redeem/redeem.service",[]],["infrastruct/libs/jquery/jquery-ui",[]],["apps/procharts/dropdown/dropdown.component",[34]],["apps/settings/tabs/dialogs/oneClickTrading/editOneClickTradingCtrl",[]],["apps/trader/portfolio/detailedView/fund/chart/fund-detailed-view-chart.component",[45]],["apps/trader/portfolio/widgets/portfolioDropDown/portfolioDropDown",[80]],["bl/factories/countries/countries.service",[null]],["bl/factories/countries/models/country",[null]],["bl/factories/trading/execution/executionCalculator",[]],["bl/factories/trading/execution/tradingCalculator",[]],["infrastruct/services/sorter",[]],["infrastruct/ui/mobileInputType",[null]],["infrastruct/ui/sortable",[null]],["infrastruct/ui/sticky",[null]],["infrastruct/ui/uiSwipeActions/ui-swipe-actions-service",[174]],["integrations/zopim",[]],["infrastruct/libs/upgrade/upgrade-static",[]],["apps/discovery/funds/discoverFundsApp",[]],["apps/discovery/markets/routes",[]],["apps/payments/etoro-money/etoro-money.app",[]],["apps/payments/withdraw/withdrawApp",[]],["apps/priceAlerts/openPriceAlert/openPriceAlertCtrl",[null]],["apps/trader/portfolio/detailedView/fund/detailed/detailed-list.component",[46,null]],["apps/trader/portfolio/detailedView/fund/list/list.component",[48,null]],["apps/trader/portfolio/detailedView/mirror/detailed/detailed-list.component",[50,null]],["apps/trader/portfolio/detailedView/mirror/list/list.component",[51,null]],["apps/trader/portfolio/overview/overviewTimeLog",[null]],["apps/widgets/login/layout/layout.component",[]],["apps/widgets/login/services/copy-trader-funnel-mock.service",[]],["apps/widgets/login/services/funnel-loader-mock.service",[]],["apps/widgets/login/services/guideMock",[]],["apps/widgets/login/services/instruments-groups-factory-mock.service",[]],["apps/widgets/login/services/wallet/customize-links.service",[]],["apps/widgets/login/services/wallet/customize-routes.service",[]],["bl/factories/express-checkout/express-checkout.service",[]],["bl/factories/session/base/session-classification.service",[]],["bl/factories/session/base/session",[]],["bl/factories/session/copy-trader-funnel.service",[]],["bl/factories/session/default-screen.service",[]],["bl/factories/session/funnel-loader.service",[]],["bl/factories/trading/execution/mirrorsExecutionCalculator",[296,null]],["bl/factories/trading/restrictions/restrictions",[]],["infrastruct/filters/lowerThanMinimum",[]],["infrastruct/filters/percentageParser",[]],["infrastruct/filters/prittynumber",[]],["infrastruct/filters/tofixedNoZero",[]],["infrastruct/filters/zeroesFormater",[]],["infrastruct/libs/angular/angular-deps",[]],["infrastruct/services/analytics/analyticsDirective",[]],["infrastruct/services/analytics/ecommerce-tracking.service",[]],["infrastruct/services/auth-check.service",[]],["infrastruct/services/http-circuit-breaker",[]],["infrastruct/services/httpBackupUrlRetry",[]],["infrastruct/services/httpCloudFlare",[]],["infrastruct/services/httpFallback",[]],["infrastruct/services/httpRetries",[]],["infrastruct/services/new-angular-ready",[]],["infrastruct/services/roostNotifications",[]],["infrastruct/services/storage",[]],["infrastruct/services/viewKeeper",[]],["infrastruct/ui/clipboardCopy",[]],["infrastruct/ui/dialog",[]],["infrastruct/ui/forms/compareTo",[]],["infrastruct/ui/iframeOnLoad",[]],["infrastruct/ui/touch/touch",[null]],["infrastruct/utils/ctrl-inherit",[]],["infrastruct/utils/di-func-inherit",[]],["integrations/guide",[]],["integrations/intercom",[]],["infrastruct/utils/moduleDefiner",[]],["apps/components/trading/restrict-trading/restrict-trading.component",[30]],["apps/discovery/people/homeUS/copyTraderPopup/swipeDirection.directive",[]],["apps/trader/history/instruments/instrumentsCtrl",[]],["apps/trader/portfolio/BaseListCtrl",[]],["apps/trader/portfolio/closePosition/closePositionCtrl",[null,null]],["apps/trader/portfolio/detailedView/copyHistory/copyHistoryCtrl",[null,null]],["apps/trader/portfolio/overview/chart/chartCtrl",[null,296]],["apps/trader/portfolio/widgets/myPortfolio/myPortfolio",[null,78]],["apps/trader/portfolio/widgets/redeemLimit/redeem-limit.component",[81]],["apps/widgets/discover-people-embed/discover-people-embed.component",[87]],["apps/widgets/login/services/headers-injector",[null]],["apps/widgets/login/services/wallet/customize-ui.service",[null]],["bl/factories/express-checkout/express-checkout.module",[321]],["bl/factories/kyc/popups/usa-soon/usa-soon.component",[88]],["bl/factories/kyc/popups/usa-states/usa-states.component",[89]],["bl/factories/session/models/session-user.model",[191]],["bl/factories/session/session-account.service",[]],["bl/factories/trading/execution/calculators",[295,296,null]],["bl/factories/trading/instruments/models/shortBioAndLocalName",[]],["bl/factories/trading/portfolio/models/lostPositions/lostPositionsManager",[]],["infrastruct/services/analytics/providers/intercom",[null]],["infrastruct/services/experiments/experiments.module",[281]],["infrastruct/services/http-resource-version.factory",[null]],["infrastruct/services/httpBackup",[175]],["infrastruct/services/localeRouting",[null,334]],["infrastruct/services/localization/localizeFactory",[]],["infrastruct/services/postRedirect",[]],["infrastruct/services/securityIframeLoader",[null]],["infrastruct/ui/component-include",[]],["infrastruct/ui/infiniteScroll",[]],["infrastruct/ui/table/editColumns/editColumns.component",[92]],["infrastruct/ui/uiIfBreakpoint",[]],["infrastruct/utils/ctrl-resolver",[]],["integrations/wallet/redeem/cancelPopup/cancel.redeem.popup.component",[96]],["integrations/wallet/redeem/redeemPopup/redeem.popup.component",[97]],["apps/components/trading/buy-sell-buttons/buy-sell-buttons",[27]],["apps/components/trading/copy-button/copy-button.component",[28]],["apps/components/trading/open-trade-upsell-popup/open-trade-upsell-popup.component",[29]],["apps/components/trading/trade-button/trade-button.component",[31]],["apps/login/loginApp",[null,null]],["apps/payments/deposit/depositApp",[null]],["apps/procharts/prochartsApp",[260,173]],["apps/settings/settingsApp",[null,290]],["apps/sign-up/index",[261,null]],["apps/trader/history/mirrors/detailedView/detailedViewCtrl",[]],["apps/trader/portfolio/close-all-positions/close-all-positions.component",[42]],["apps/trader/portfolio/detailedView/detailedViewCtrl",[null,null,null]],["apps/trader/portfolio/detailedView/openTrades/openTradesCtrl",[null,null,null]],["apps/trader/portfolio/overview/overviewCtrl",[]],["apps/trader/portfolio/updatePosition/updatePositionCtrl",[null,null,null]],["apps/widgets/discover-people-embed/discoverPeopleEmbedApp",[null,366]],["apps/widgets/login/routes",[106,108]],["bl/factories/feed/share/shareChartFactory",[]],["bl/factories/feed/share/shareTextFactory",[]],["bl/factories/feed/share/shareWechatFactory",[]],["bl/factories/trading/instruments/candles/candlesFactoryV2",[]],["bl/factories/trading/instruments/instrumentsGroupsFactory",[]],["bl/factories/trading/instruments/models/marketView",[280]],["bl/factories/trading/instruments/rates/models/rate",[280,141]],["bl/factories/trading/instruments/rates/models/rateDiscounted",[415,141]],["bl/factories/trading/models/tradeItem/fund",[null]],["bl/factories/trading/models/tradeItem/instrument",[null]],["bl/factories/trading/models/tradeItem/user",[null]],["bl/factories/trading/portfolio/models/portfolioGroup/positionsGroup",[null]],["bl/factories/trading/portfolio/models/portfolioItem/order",[280]],["bl/factories/trading/portfolio/models/portfolioItem/position",[280]],["bl/factories/trading/users/stats",[]],["infrastruct/models/models",[280,null]],["infrastruct/services/analytics/providers/ga",[null,null]],["infrastruct/services/analytics/providers/mixpanel",[null]],["infrastruct/services/localization/localizeTemplatesDecorator",[]],["infrastruct/services/localization/localizeTemplatesFactory",[]],["infrastruct/services/maintenance-navigation",[null,null]],["infrastruct/services/qs",[191]],["infrastruct/services/toa-embed",[null,null]],["infrastruct/ui/digital-signature/digital-signature",[90,184]],["infrastruct/ui/inputScrollto",[186]],["infrastruct/ui/navigation",[351]],["infrastruct/ui/speech/speech",[]],["infrastruct/ui/uiReactToScroll",[351]],["infrastruct/ui/uiSwipeActions/ui-swipe-actions.directive",[301]],["infrastruct/ui/uiSwipeActions/ui-swipe.directive",[174]],["infrastruct/utils/appLogger",[null]],["infrastruct/utils/logger",[276]],["apps/discovery/people/discoverPeopleApp",[259,358]],["apps/priceAlerts/priceAlertsApp",[308]],["apps/trader/history/historyApp",[389,null]],["apps/trader/portfolio/detailedView/mirror/mirror.component",[312,311,52]],["apps/trader/portfolio/executePositionCtrl",[null,null,null,67]],["apps/trader/portfolio/overview/chart/detailedGraphDirective",[60]],["apps/trader/portfolio/overview/chart/pieDirective",[61]],["apps/trader/portfolio/overview/chart/smallGraphDirective",[62]],["apps/trader/portfolio/widgets/dropDownActions/dropDownActions",[null,68,69,70,265]],["apps/trader/rates/rates",[null]],["bl/factories/countries/countries.module",[293,null,294]],["bl/factories/trading/models/tradeItem/tradeItem",[280,423]],["bl/factories/trading/portfolio/models/portfolioGroup/fundGroup",[null,420]],["bl/factories/trading/portfolio-graph/portfolio-graph",[274,null]],["bl/factories/trading/users/portfolio",[296]],["bl/factories/trading/users/users",[419,417]],["infrastruct/infrastruct",[null,null,424]],["infrastruct/services/analytics/providers/googleTagManager",[null,440]],["infrastruct/ui/dropDownMenu",[351]],["infrastruct/ui/inputNumberIncrementer/inputNumberIncrementer",[351,91,null,433]],["infrastruct/ui/onOverflow",[351]],["infrastruct/ui/table/table",[387,388]],["infrastruct/ui/uiFunScroll",[351]],["integrations/wallet/wallet.module",[391,390,287]],["apps/components/layout/layout",[null,105,257,289]],["apps/components/metaTags/metaTags",[null,null,23]],["apps/trader/portfolio/detailedView/fund/fund.component",[310,309,291,47]],["apps/trader/portfolio/openPosition/openPositionCtrl",[null,null,445,348,57]],["bl/factories/feed/feed",[null,null,null,410,409,411]],["bl/factories/kyc/kyc.module",[432,271,370,371]],["bl/factories/login/login.module",[430,345,null,null]],["bl/factories/session/session-app.service",[353,323,372]],["bl/factories/trading/instruments/rates/ratesFactory",[415,416]],["bl/factories/trading/portfolio/models/portfolioGroup/portfolioGroup",[280,422,273]],["bl/factories/trading/portfolio/portfolio",[456,null,null,348,null,374]],["infrastruct/services/analytics/analytics",[187,335,336]],["infrastruct/services/localization/localization",[382,428,427,null]],["apps/trader/portfolio/widgets/executionMessages/executionMessages",[71,72,76,77,74,75,73]],["bl/factories/trading/instruments/instruments",[null,413,473,412,415,416,414]],["bl/factories/trading/instruments/instrumentsFactory",[418,414,375]],["bl/factories/trading/portfolio/models/portfolioGroup/mirrorGroup",[474,422,421,420]],["apps/people/peopleApp",[null,475,456,454]],["apps/trader/portfolio/overview/list/list.component",[475,null,63,64,360]],["bl/factories/trading/portfolio/models/portfolio",[280,421,420,481,453]],["bl/factories/trading/portfolio/portfolioFactory",[null,422,421,284]],["bl/factories/trading/trading",[null,479,456,423,374,475,275]],["infrastruct/services/utils/config",[276,150,186,345,191]],["infrastruct/ui/uiSwipeActions/index",[351,487,174,438,437]],["infrastruct/ui/uiTabs/tabs",[95,93,94,487]],["bl/factories/session/index",[475,null,472,373,325,324,326]],["bl/factories/trading/portfolio/models/privatePortfolio",[484,421,420,481,376,440]],["bl/factories/trading/models/models",[487,424,490,479,452,418,419,417,451,455]],["bl/factories/trading/portfolio/models/models",[424,479,474,420,481,273,422,421,484,491]],["apps/components/trading/index",[393,392,395,357,476,477,null,394,266,264]],["bl/factories/session/base/index",[334,381,353,487,431,323,130,128,272,129,322,127]],["apps/widgets/login/services/wallet/wallet-login.module",[487,368,319,320,429,340,124,125,123,126,121,122,120,119]],["apps/trader/portfolio/portfolioActionsEvents",[351,348,456,470,327,328,464,56,66,43,374,57,33]],["infrastruct/filters/filters",[477,163,331,165,167,161,158,166,279,162,330,332,329,164,159,333,160]],["infrastruct/ui/ui",[351,348,459,386,434,461,299,300,286,463,460,388,349,489,347,433,350,385,462,298,436,488,285]],["infrastruct/services/services",[346,283,430,190,188,191,337,342,341,384,380,340,383,297,345,487,378,476,425,377,426,458,477,379,429,338,343]],["apps/trader/traderApp",[313,486,475,450,405,403,404,468,445,406,361,483,363,448,446,447,364,449,497,478,500,292,443,263,467,262,402,464,365,444]],["apps/widgets/login/login-app",[334,191,476,477,381,383,350,439,282,340,396,400,496,429,430,190,314,408,117,367,115,116,118,315,348,316,475,146,270,317,318,343]],["apps/etoroApp",[334,179,353,305,267,107,111,108,106,208,487,381,339,439,389,482,501,442,396,441,304,397,307,306,466,400,465,469,494,490,470,328,354,355,425,500,282,457,499,399,282,369]]]); window.requireStubs.push([["require"] , function(){requireMap(window.rA,"/549.0.3/js_require/?r[]=infrastruct/libs/requirejs/etoro-require&r[]=amd-config&r[]=apps/etoroApp", true)}]);;
var requireBridge={};(function(r,e){function t(r,e){for(var t=[],n=0;n<e.length;n++){var i=m(e[n]);v.test(i)||r.specified(i)||t.push(i)}return u(r,s,t)}function n(r,e){for(var t=[],n=0;n<e.length;n++){var i=e[n],o=d[i];o?r.specified(o)||t.push(o?o:i):t.push(o?o:i)}return t}function i(r){return r=r.sort(),"https://cdn.etorostatic.com/549.0.3/js_files/?p[]="+(r.length>1?r.join("&p[]="):r[0])}function o(r,e,t,n){var i=e[n],u=i&&i.deps;if(u&&u.length)for(var a=0;a<u.length;a++){var s=m(u[a]);-1!=t.indexOf(s)||r.specified(n)||(t.push(s),o(r,e,t,s))}}function u(r,e,t){t=t||[];for(var n=0;n<t.length;n++){var i=m(t[n]);-1!=t.indexOf(i)||r.specified(i)||t.push(i),o(r,e,t,i)}return t}function a(e){return function(){c.config(l).apply(r,M[e])}}var s={},f=window,c=f.require,l={context:"etoro",onNodeCreated:function(r,e,t,n){0===n.indexOf("https://cdn.etorostatic.com/549.0.3")&&r.setAttribute("crossorigin","anonymous")}},p=f.define,g=c.config(l),v=/\/\//i,h=c.s.contexts.etoro.config,d={},y=[],x=[],q=function(r,t){var n=this;e.require[r]=function(){var e=arguments;return t?c[r].apply(n,t.apply(this,e)):c[r].apply(n,e)}},m=function(r){isNaN(r)||(r=sdfsdf[r]);var e=h.paths[r]||r;if(v.test(e)){e=g.toUrl(e);var t=e.split(h.baseUrl);return 1==t.length?t[0]:t[1]}return e};requirejs.onError=function(r){f.onModuleError&&f.onModuleError(r)};var B=e.require=function(r){var e,o=arguments,u=this,a={},s=g;if(r&&r.length&&(e=t(s,r)),e&&e.length){var f=i(n(s,e));return a[f]=e,c.config({context:"etoro",bundles:a}),g.apply(u,o)}return g.apply(u,o)};r.requireMap=function(r,e,t){function n(e){var t=[];if(e&&e.length)for(var n=0;n<=e.length;n++){var i=e[n],o=r[i];o&&t.push(o[0])}return t}if(t)for(var i=0;i<r.length;i++){var o,u=r[i],a=u[0],f=u[1],c=u[2];c&&(o={script:e,fy:c[0],ty:c[1],fx:c[2],tx:c[3]});var l=s[a];l&&l.position||(s[a]={deps:n(f),position:o})}else for(var p in r)s[p]={deps:r[p]}},B.all=function(r,e,t){var n=B.getModulesByRegex(r);return B(n,e,t)},B.getModulesByRegex=function(r){var e=[];for(var t in r){var n=r[t];for(var i in s)n.test(i)&&e.push(i)}return e},B.laterByRegex=function(r){x.push(r)},B.later=function(r){y=y.concat(r)},c.config({context:"etoro",baseUrl:"https://cdn.etorostatic.com/549.0.3/js_files/?p[]="}),r.depsMap=s,setTimeout(function(){function r(){var r=B.getModulesByRegex(x).concat(y);x.length=y.length=0,B.laterByRegex=B.all,B.later=B,g(r)}var e=h.requireLaterAt;!isNaN(e)&&e>0?setTimeout(r,2e3):r()},500),q("config",function(r){var e=r&&r.paths;if(e)for(var t in e)d[e[t]]=t;return arguments}),q("toUrl"),r.define=p;var M=r.requireStubs=f.requireStubs||[];if(M&&M.length)for(var b=0;b<M.length;b++)setTimeout(a(b),4);M.push=function(e){c.config(l).apply(r,e)}}).call(this,this,requireBridge);var require=requireBridge.require;requirejs.config({"waitSeconds":18,"context":"etoro","paths":{"underscore":"infrastruct/libs/underscore/underscore","moduleDefiner":rA[356][0],"angular":rA[103][0],"jquery":rA[176][0],"jquery-sortable":rA[288][0],"highcharts":rA[104][0],"fastClick":rA[256][0]},"withoutTrace":["angular","highcharts",rA[173][0],"underscore","jquery","infrastruct/libs/lightstreamer/lightstreamer",rA[183][0],"integrations/embed/*","embed/*","sem-etoro-ng/*"],"alwaysInclude":["angular","underscore","jquery","moduleDefiner"],"requireLaterAt":30000,"eToroRegisterMap":true,"shim":{"angular":{"deps":["jquery","fastClick"],"wrapCode":true,"exports":"angular"},"underscore":{"exports":"_"},"highcharts":{"exports":"Highcharts","deps":["jquery"]}}});define(rA[503][0],["moduleDefiner","angular","underscore",rA[334][0],rA[179][0],rA[353][0],rA[305][0],rA[267][0],rA[107][0],rA[111][0],rA[108][0],rA[106][0],rA[208][0],rA[487][0],rA[381][0],rA[339][0],rA[439][0],rA[389][0],rA[482][0],rA[501][0],rA[442][0],rA[396][0],rA[441][0],rA[304][0],rA[397][0],rA[307][0],rA[306][0],rA[466][0],rA[400][0],rA[465][0],rA[469][0],rA[494][0],rA[490][0],rA[470][0],rA[328][0],rA[354][0],rA[355][0],rA[425][0],rA[500][0],rA[282][0],rA[457][0],rA[499][0],rA[399][0],rA[282][0],rA[369][0]],function(e,r,s,o,t,n,i,a,c,u,p,l,d,g){"use strict";var f=s.toArray(arguments),v=13,m=f.slice(v,f.length),y=e("etoroApp",["ngCookies","ngRoute","ngSanitize","ngMessages",n.ngModule.name].concat(m));return y.constant("_",s),y.config(["$provide","$routeProvider","$httpProvider","$compileProvider","$locationProvider","$anchorScrollProvider","$analyticsProvider","infrastruct.services.configProvider","ctrlResolverProvider",function(e,r,s,o,t,n,f,v){var m;o.commentDirectivesEnabled(!1),o.cssClassDirectivesEnabled(!1),t.html5Mode({enabled:!0,requireBase:!1}),s.useApplyAsync(!0),s.defaults.headers["delete"]={"Content-Type":"application/json"},v.setInitialConfig(y.initialParams),f.firstPageview(!0),f.virtualPageviews(!0),m=[].concat(c,a,i,p,l,u,d,g),m.forEach(function(e){r.when(e.url,e.config)}),r.otherwise({redirectTo:"/"})}]),y.run(["$rootScope","$location","$log","$cookies","infrastruct.services.localization.localizeFactory","bl.factories.session.sessionFactory","infrastruct.services.config","$analytics","bl.factories.payments.kycProvider","bl.factories.trading.restrictions.service","infrastruct.services.authCheckService",function(e,r,s,o,t,n,i,a,c,u,p){function l(e,o,t,n){o.$$route&&"standalone"===o.$$route.id?(s.error("embed $routeChangeError",r.url()),o.$$route.resolve&&o.$$route.resolve.errorRedirectUrl?window.location=o.$$route.resolve.errorRedirectUrl():r.url("/app/error/standalone/standalonegeneric")):n&&"maintenance"===n.reason?r.url("/app/error/maintenance/"+n.source):(s.error("$routeChangeError",r.url()),r.url("/"))}function d(r,s){s?(clearTimeout(f),v&&location.reload()):f=setTimeout(function(){v=!0,e.$broadcast("app:shutdown")},18e5)}function g(){a.setGlobalEventProperties({Username:function(){return e.session.isLoggedIn?e.session.user.username:"Visitor"},UserToken:function(){return e.session.isLoggedIn?e.session.user.externalId:i.dynamics.userSession},Portfolio:function(){return e.session.isLoggedIn?e.session.user.portfolio.account.type:"Real"},AppVersion:i.statics.ApplicationVersion,Language:function(){return t.language},userCountry:function(){return e.session.isLoggedIn?e.session.user.country.displayName:"not available"},"Country Name":function(){return e.session.isLoggedIn?e.session.user.country.name:void 0},"Player Level ID":function(){return e.session.isLoggedIn?e.session.user.playerLevelId:void 0},"Regulation ID":function(){return e.session.isLoggedIn?e.session.user.regulationId:void 0},"Designated Regulation ID":function(){return e.session.isLoggedIn?e.session.user.designatedRegulationId:void 0}}),i.dynamics.whenReady().then(function(){var e=i.dynamics.rolloutVersion;if(e&&e.enabled){var r=o.get("rolloutVersion"),s=/(true|false)$/.exec(r);a.setGlobalEventProperties({"Rollout Group":s&&"true"===s[1]?"B":"A","Rollout ID":e.rolloutId,"Rollout Participant":!!s})}})}var f,v=!1;e.session=n,e.$on("$routeChangeStart",p.authCheck.bind(p)),e.$on("$routeChangeError",l),e.$on("app:visiblity:change",d),t.setLanguage(),g(),n.restore()["finally"](function(){e.$broadcast("app:ready"),window.etoroSplash&&window.etoroSplash.reportProgress(100),window.bootstrapTimer&&clearTimeout(window.bootstrapTimer)})}]),y});define("angular",["jquery","fastClick"],function(){return function(e){"use strict";function t(e,t){return t=t||Error,function(){var n,r,i=2,o=arguments,a=o[0],s="["+(e?e+":":"")+a+"] ",u=o[1];for(s+=u.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1),n=t+i;return n<o.length?yt(o[n]):e}),s+="\nhttp://errors.angularjs.org/1.5.11/"+(e?e+"/":"")+a,r=i,n="?";r<o.length;r++,n="&")s+=n+"p"+(r-i)+"="+encodeURIComponent(yt(o[r]));return new t(s)}}function n(e){if(null==e||A(e))return!1;if(ro(e)||w(e)||zi&&e instanceof zi)return!0;var t="length"in Object(e)&&e.length;return x(t)&&(t>=0&&(t-1 in e||e instanceof Array)||"function"==typeof e.item)}function r(e,t,i){var o,a;if(e)if(S(e))for(o in e)"prototype"===o||"length"===o||"name"===o||e.hasOwnProperty&&!e.hasOwnProperty(o)||t.call(i,e[o],o,e);else if(ro(e)||n(e)){var s="object"!=typeof e;for(o=0,a=e.length;a>o;o++)(s||o in e)&&t.call(i,e[o],o,e)}else if(e.forEach&&e.forEach!==r)e.forEach(t,i,e);else if(b(e))for(o in e)t.call(i,e[o],o,e);else if("function"==typeof e.hasOwnProperty)for(o in e)e.hasOwnProperty(o)&&t.call(i,e[o],o,e);else for(o in e)qi.call(e,o)&&t.call(i,e[o],o,e);return e}function i(e,t,n){for(var r=Object.keys(e).sort(),i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function o(e){return function(t,n){e(n,t)}}function a(){return++to}function s(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function u(e,t,n){for(var r=e.$$hashKey,i=0,o=t.length;o>i;++i){var a=t[i];if(y(a)||S(a))for(var c=Object.keys(a),l=0,f=c.length;f>l;l++){var h=c[l],p=a[h];n&&y(p)?C(p)?e[h]=new Date(p.valueOf()):E(p)?e[h]=new RegExp(p):p.nodeName?e[h]=p.cloneNode(!0):D(p)?e[h]=p.clone():(y(e[h])||(e[h]=ro(p)?[]:{}),u(e[h],[p],!0)):e[h]=p}}return s(e,r),e}function c(e){return u(e,Zi.call(arguments,1),!1)}function l(e){return u(e,Zi.call(arguments,1),!0)}function f(e){return parseInt(e,10)}function h(e,t){return c(Object.create(e),t)}function p(){}function d(e){return e}function $(e){return function(){return e}}function v(e){return S(e.toString)&&e.toString!==Ki}function m(e){return"undefined"==typeof e}function g(e){return"undefined"!=typeof e}function y(e){return null!==e&&"object"==typeof e}function b(e){return null!==e&&"object"==typeof e&&!Xi(e)}function w(e){return"string"==typeof e}function x(e){return"number"==typeof e}function C(e){return"[object Date]"===Ki.call(e)}function S(e){return"function"==typeof e}function E(e){return"[object RegExp]"===Ki.call(e)}function A(e){return e&&e.window===e}function k(e){return e&&e.$evalAsync&&e.$watch}function O(e){return"[object File]"===Ki.call(e)}function M(e){return"[object FormData]"===Ki.call(e)}function T(e){return"[object Blob]"===Ki.call(e)}function V(e){return"boolean"==typeof e}function j(e){return e&&S(e.then)}function N(e){return e&&x(e.length)&&io.test(Ki.call(e))}function I(e){return"[object ArrayBuffer]"===Ki.call(e)}function D(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function R(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}function P(e){return Ui(e.nodeName||e[0]&&e[0].nodeName)}function _(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n}function q(e,t){function n(e,t){var n,r=t.$$hashKey;if(ro(e))for(var o=0,a=e.length;a>o;o++)t.push(i(e[o]));else if(b(e))for(n in e)t[n]=i(e[n]);else if(e&&"function"==typeof e.hasOwnProperty)for(n in e)e.hasOwnProperty(n)&&(t[n]=i(e[n]));else for(n in e)qi.call(e,n)&&(t[n]=i(e[n]));return s(t,r),t}function i(e){if(!y(e))return e;var t=a.indexOf(e);if(-1!==t)return u[t];if(A(e)||k(e))throw Qi("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,i=o(e);return void 0===i&&(i=ro(e)?[]:Object.create(Xi(e)),r=!0),a.push(e),u.push(i),r?n(e,i):i}function o(e){switch(Ki.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(i(e.buffer),e.byteOffset,e.length);case"[object ArrayBuffer]":if(!e.slice){var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}return e.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":var n=new RegExp(e.source,e.toString().match(/[^/]*$/)[0]);return n.lastIndex=e.lastIndex,n;case"[object Blob]":return new e.constructor([e],{type:e.type})}return S(e.cloneNode)?e.cloneNode(!0):void 0}var a=[],u=[];if(t){if(N(t)||I(t))throw Qi("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===t)throw Qi("cpi","Can't copy! Source and destination are identical.");return ro(t)?t.length=0:r(t,function(e,n){"$$hashKey"!==n&&delete t[n]}),a.push(e),u.push(t),n(e,t)}return i(e)}function U(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var n,r,i,o=typeof e,a=typeof t;if(o===a&&"object"===o){if(!ro(e)){if(C(e))return C(t)?U(e.getTime(),t.getTime()):!1;if(E(e))return E(t)?e.toString()===t.toString():!1;if(k(e)||k(t)||A(e)||A(t)||ro(t)||C(t)||E(t))return!1;i=$t();for(r in e)if("$"!==r.charAt(0)&&!S(e[r])){if(!U(e[r],t[r]))return!1;i[r]=!0}for(r in t)if(!(r in i)&&"$"!==r.charAt(0)&&g(t[r])&&!S(t[r]))return!1;return!0}if(!ro(t))return!1;if((n=e.length)===t.length){for(r=0;n>r;r++)if(!U(e[r],t[r]))return!1;return!0}}return!1}function F(e,t,n){return e.concat(Zi.call(t,n))}function L(e,t){return Zi.call(e,t||0)}function H(e,t){var n=arguments.length>2?L(arguments,2):[];return!S(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,F(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function B(t,n){var r=n;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?r=void 0:A(n)?r="$WINDOW":n&&e.document===n?r="$DOCUMENT":k(n)&&(r="$SCOPE"),r}function z(e,t){return m(e)?void 0:(x(t)||(t=t?2:null),JSON.stringify(e,B,t))}function W(e){return w(e)?JSON.parse(e):e}function G(e,t){e=e.replace(co,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return no(n)?t:n}function Z(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function J(e,t,n){n=n?-1:1;var r=e.getTimezoneOffset(),i=G(t,r);return Z(e,n*(i-r))}function Y(e){e=zi(e).clone();try{e.empty()}catch(t){}var n=zi("<div>").append(e).html();try{return e[0].nodeType===mo?Ui(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(e,t){return"<"+Ui(t)})}catch(t){return Ui(n)}}function K(e){try{return decodeURIComponent(e)}catch(t){}}function X(e){var t={};return r((e||"").split("&"),function(e){var n,r,i;e&&(r=e=e.replace(/\+/g,"%20"),n=e.indexOf("="),-1!==n&&(r=e.substring(0,n),i=e.substring(n+1)),r=K(r),g(r)&&(i=g(i)?K(i):!0,qi.call(t,r)?ro(t[r])?t[r].push(i):t[r]=[t[r],i]:t[r]=i))}),t}function Q(e){var t=[];return r(e,function(e,n){ro(e)?r(e,function(e){t.push(tt(n,!0)+(e===!0?"":"="+tt(e,!0)))}):t.push(tt(n,!0)+(e===!0?"":"="+tt(e,!0)))}),t.length?t.join("&"):""}function et(e){return tt(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function tt(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function nt(e,t){var n,r,i=lo.length;for(r=0;i>r;++r)if(n=lo[r]+t,w(n=e.getAttribute(n)))return n;return null}function rt(e){var t=e.currentScript,n=t&&t.getAttribute("src");if(!n)return!0;var r=e.createElement("a");if(r.href=n,e.location.origin===r.origin)return!0;switch(r.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}function it(t,n){var i,o,a={};if(r(lo,function(e){var n=e+"app";!i&&t.hasAttribute&&t.hasAttribute(n)&&(i=t,o=t.getAttribute(n))}),r(lo,function(e){var n,r=e+"app";!i&&(n=t.querySelector("["+r.replace(":","\\:")+"]"))&&(i=n,o=n.getAttribute(r))}),i){if(!fo)return void e.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");a.strictDi=null!==nt(i,"strict-di"),n(i,o?[o]:[],a)}}function ot(t,n,i){y(i)||(i={});var o={strictDi:!1};i=c(o,i);var a=function(){if(t=zi(t),t.injector()){var r=t[0]===e.document?"document":Y(t);throw Qi("btstrpd","App already bootstrapped with this element '{0}'",r.replace(/</,"&lt;").replace(/>/,"&gt;"))}n=n||[],n.unshift(["$provide",function(e){e.value("$rootElement",t)}]),i.debugInfoEnabled&&n.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),n.unshift("ng");var o=on(n,i.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,r){e.$apply(function(){t.data("$injector",r),n(t)(e)})}]),o},s=/^NG_ENABLE_DEBUG_INFO!/,u=/^NG_DEFER_BOOTSTRAP!/;return e&&s.test(e.name)&&(i.debugInfoEnabled=!0,e.name=e.name.replace(s,"")),e&&!u.test(e.name)?a():(e.name=e.name.replace(u,""),eo.resumeBootstrap=function(e){return r(e,function(e){n.push(e)}),a()},void(S(eo.resumeDeferredBootstrap)&&eo.resumeDeferredBootstrap()))}function at(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function st(e){var t=eo.element(e).injector();if(!t)throw Qi("test","no injector found for element argument to getTestability");return t.get("$$testability")}function ut(e,t){return t=t||"_",e.replace(ho,function(e,n){return(n?t:"")+e.toLowerCase()})}function ct(){var t;if(!po){var n=uo();Wi=m(n)?e.jQuery:n?e[n]:void 0,Wi&&Wi.fn.on?(zi=Wi,c(Wi.fn,{scope:Ro.scope,isolateScope:Ro.isolateScope,controller:Ro.controller,injector:Ro.injector,inheritedData:Ro.inheritedData}),t=Wi.cleanData,Wi.cleanData=function(e){for(var n,r,i=0;null!=(r=e[i]);i++)n=Wi._data(r,"events"),n&&n.$destroy&&Wi(r).triggerHandler("$destroy");t(e)}):zi=Tt,eo.element=zi,po=!0}}function lt(e,t,n){if(!e)throw Qi("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function ft(e,t,n){return n&&ro(e)&&(e=e[e.length-1]),lt(S(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function ht(e,t){if("hasOwnProperty"===e)throw Qi("badname","hasOwnProperty is not a valid {0} name",t)}function pt(e,t,n){if(!t)return e;for(var r,i=t.split("."),o=e,a=i.length,s=0;a>s;s++)r=i[s],e&&(e=(o=e)[r]);return!n&&S(e)?H(o,e):e}function dt(e){for(var t,n=e[0],r=e[e.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(t||e[i]!==n)&&(t||(t=zi(Zi.call(e,0,i))),t.push(n));return t||e}function $t(){return Object.create(null)}function vt(e){function n(e,t,n){return e[t]||(e[t]=n())}var r=t("$injector"),i=t("ng"),o=n(e,"angular",Object);return o.$$minErr=o.$$minErr||t,n(o,"module",function(){var e={};return function(t,o,a){var s=function(e,t){if("hasOwnProperty"===e)throw i("badname","hasOwnProperty is not a valid {0} name",t)};return s(t,"module"),o&&e.hasOwnProperty(t)&&(e[t]=null),n(e,t,function(){function e(e,t,n,r){return r||(r=i),function(){return r[n||"push"]([e,t,arguments]),l}}function n(e,n){return function(r,o){return o&&S(o)&&(o.$$moduleName=t),i.push([e,n,arguments]),l}}if(!o)throw r("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",t);var i=[],s=[],u=[],c=e("$injector","invoke","push",s),l={_invokeQueue:i,_configBlocks:s,_runBlocks:u,requires:o,name:t,provider:n("$provide","provider"),factory:n("$provide","factory"),service:n("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),decorator:n("$provide","decorator"),animation:n("$animateProvider","register"),filter:n("$filterProvider","register"),controller:n("$controllerProvider","register"),directive:n("$compileProvider","directive"),component:n("$compileProvider","component"),config:c,run:function(e){return u.push(e),this}};return a&&c(a),l})}})}function mt(e,t){if(ro(e)){t=t||[];for(var n=0,r=e.length;r>n;n++)t[n]=e[n]}else if(y(e)){t=t||{};for(var i in e)("$"!==i.charAt(0)||"$"!==i.charAt(1))&&(t[i]=e[i])}return t||e}function gt(e){var t=[];return JSON.stringify(e,function(e,n){if(n=B(e,n),y(n)){if(t.indexOf(n)>=0)return"...";t.push(n)}return n})}function yt(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):m(e)?"undefined":"string"!=typeof e?gt(e):e}function bt(n){c(n,{bootstrap:ot,copy:q,extend:c,merge:l,equals:U,element:zi,forEach:r,injector:on,noop:p,bind:H,toJson:z,fromJson:W,identity:d,isUndefined:m,isDefined:g,isString:w,isFunction:S,isObject:y,isNumber:x,isElement:D,isArray:ro,version:wo,isDate:C,lowercase:Ui,uppercase:Fi,callbacks:{$$counter:0},getTestability:st,$$minErr:t,$$csp:so,reloadWithDebugInfo:at}),(Gi=vt(e))("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Ar}),e.provider("$compile",vn).directive({a:rs,input:xs,textarea:xs,form:us,script:mu,select:bu,option:wu,ngBind:Es,ngBindHtml:ks,ngBindTemplate:As,ngClass:Ms,ngClassEven:Vs,ngClassOdd:Ts,ngCloak:js,ngController:Ns,ngForm:cs,ngHide:lu,ngIf:Rs,ngInclude:Ps,ngInit:qs,ngNonBindable:tu,ngPluralize:ou,ngRepeat:au,ngShow:cu,ngStyle:fu,ngSwitch:hu,ngSwitchWhen:pu,ngSwitchDefault:du,ngOptions:iu,ngTransclude:vu,ngModel:Xs,ngList:Us,ngChange:Os,pattern:Cu,ngPattern:Cu,required:xu,ngRequired:xu,minlength:Eu,ngMinlength:Eu,maxlength:Su,ngMaxlength:Su,ngValue:Ss,ngModelOptions:eu}).directive({ngInclude:_s}).directive(is).directive(Is),e.provider({$anchorScroll:an,$animate:Xo,$animateCss:ta,$$animateJs:Yo,$$animateQueue:Ko,$$AnimateRunner:ea,$$animateAsyncRun:Qo,$browser:hn,$cacheFactory:pn,$controller:xn,$document:Cn,$exceptionHandler:Sn,$filter:Ur,$$forceReflow:sa,$interpolate:_n,$interval:qn,$http:In,$httpParamSerializer:An,$httpParamSerializerJQLike:kn,$httpBackend:Rn,$xhrFactory:Dn,$jsonpCallbacks:va,$location:er,$log:tr,$parse:br,$rootScope:Er,$q:wr,$$q:xr,$sce:Tr,$sceDelegate:Mr,$sniffer:Vr,$templateCache:dn,$templateRequest:jr,$$testability:Nr,$timeout:Ir,$window:Pr,$$rAF:Sr,$$jqLite:Kt,$$HashMap:Uo,$$cookieReader:qr})}])}function wt(){return++Co}function xt(e){return e.replace(Ao,function(e,t,n,r){return r?n.toUpperCase():n}).replace(ko,"Moz$1")}function Ct(e){return!Vo.test(e)}function St(e){var t=e.nodeType;return t===$o||!t||t===yo}function Et(e){for(var t in xo[e.ng339])return!0;return!1}function At(e){for(var t=0,n=e.length;n>t;t++)It(e[t])}function kt(e,t){var n,i,o,a,s=t.createDocumentFragment(),u=[];if(Ct(e))u.push(t.createTextNode(e));else{for(n=s.appendChild(t.createElement("div")),i=(jo.exec(e)||["",""])[1].toLowerCase(),o=Io[i]||Io._default,n.innerHTML=o[1]+e.replace(No,"<$1></$2>")+o[2],a=o[0];a--;)n=n.lastChild;u=F(u,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",r(u,function(e){s.appendChild(e)}),s}function Ot(t,n){n=n||e.document;var r;return(r=To.exec(t))?[n.createElement(r[1])]:(r=kt(t,n))?r.childNodes:[]}function Mt(e,t){var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)}function Tt(e){if(e instanceof Tt)return e;var t;if(w(e)&&(e=oo(e),t=!0),!(this instanceof Tt)){if(t&&"<"!==e.charAt(0))throw Mo("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Tt(e)}t?Ut(this,Ot(e)):Ut(this,e)}function Vt(e){return e.cloneNode(!0)}function jt(e,t){if(t||It(e),e.querySelectorAll)for(var n=e.querySelectorAll("*"),r=0,i=n.length;i>r;r++)It(n[r])}function Nt(e,t,n,i){if(g(i))throw Mo("offargs","jqLite#off() does not support the `selector` argument");var o=Dt(e),a=o&&o.events,s=o&&o.handle;if(s)if(t){var u=function(t){var r=a[t];g(n)&&_(r||[],n),g(n)&&r&&r.length>0||(Eo(e,t,s),delete a[t])};r(t.split(" "),function(e){u(e),Oo[e]&&u(Oo[e])})}else for(t in a)"$destroy"!==t&&Eo(e,t,s),delete a[t]}function It(e,t){var n=e.ng339,r=n&&xo[n];if(r){if(t)return void delete r.data[t];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),Nt(e)),delete xo[n],e.ng339=void 0}}function Dt(e,t){var n=e.ng339,r=n&&xo[n];return t&&!r&&(e.ng339=n=wt(),r=xo[n]={events:{},data:{},handle:void 0}),r}function Rt(e,t,n){if(St(e)){var r=g(n),i=!r&&t&&!y(t),o=!t,a=Dt(e,!i),s=a&&a.data;if(r)s[t]=n;else{if(o)return s;if(i)return s&&s[t];c(s,t)}}}function Pt(e,t){return e.getAttribute?(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1:!1}function _t(e,t){t&&e.setAttribute&&r(t.split(" "),function(t){e.setAttribute("class",oo((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+oo(t)+" "," ")))})}function qt(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");r(t.split(" "),function(e){e=oo(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",oo(n))}}function Ut(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var r=0;n>r;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function Ft(e,t){return Lt(e,"$"+(t||"ngController")+"Controller")}function Lt(e,t,n){e.nodeType===yo&&(e=e.documentElement);for(var r=ro(t)?t:[t];e;){for(var i=0,o=r.length;o>i;i++)if(g(n=zi.data(e,r[i])))return n;e=e.parentNode||e.nodeType===bo&&e.host}}function Ht(e){for(jt(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function Bt(e,t){t||jt(e);var n=e.parentNode;n&&n.removeChild(e)}function zt(t,n){n=n||e,"complete"===n.document.readyState?n.setTimeout(t):zi(n).on("load",t)}function Wt(e,t){var n=Po[t.toLowerCase()];return n&&_o[P(e)]&&n}function Gt(e){return qo[e]}function Zt(e,t){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=t[r||n.type],o=i?i.length:0;if(o){if(m(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0};var s=i.specialHandlerWrapper||Jt;o>1&&(i=mt(i));for(var u=0;o>u;u++)n.isImmediatePropagationStopped()||s(e,n,i[u])}};return n.elem=e,n}function Jt(e,t,n){n.call(e,t)}function Yt(e,t,n){var r=t.relatedTarget;(!r||r!==e&&!Do.call(e,r))&&n.call(e,t)}function Kt(){this.$get=function(){return c(Tt,{hasClass:function(e,t){return e.attr&&(e=e[0]),Pt(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),qt(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),_t(e,t)}})}}function Xt(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var r=typeof e;return n="function"===r||"object"===r&&null!==e?e.$$hashKey=r+":"+(t||a)():r+":"+e}function Qt(e,t){if(t){var n=0;this.nextUid=function(){return++n}}r(e,this.put,this)}function en(e){return Function.prototype.toString.call(e)+" "}function tn(e){var t=en(e).replace(zo,""),n=t.match(Fo)||t.match(Lo);return n}function nn(e){var t=tn(e);return t?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function rn(e,t,n){var i,o,a;if("function"==typeof e){if(!(i=e.$inject)){if(i=[],e.length){if(t)throw w(n)&&n||(n=e.name||nn(e)),Wo("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);o=tn(e),r(o[1].split(Ho),function(e){e.replace(Bo,function(e,t,n){i.push(n)})})}e.$inject=i}}else ro(e)?(a=e.length-1,ft(e[a],"fn"),i=e.slice(0,a)):ft(e,"fn",!0);return i}function on(e,t){function n(e){return function(t,n){return y(t)?void r(t,o(e)):e(t,n)}}function i(e,t){if(ht(e,"service"),(S(t)||ro(t))&&(t=C.instantiate(t)),!t.$get)throw Wo("pget","Provider '{0}' must define $get factory method.",e);return x[e+v]=t}function a(e,t){return function(){var n=k.invoke(t,this);if(m(n))throw Wo("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}function s(e,t,n){return i(e,{$get:n!==!1?a(e,t):t})}function u(e,t){return s(e,["$injector",function(e){return e.instantiate(t)}])}function c(e,t){return s(e,$(t),!1)}function l(e,t){ht(e,"constant"),x[e]=t,E[e]=t}function f(e,t){var n=C.get(e+v),r=n.$get;n.$get=function(){var e=k.invoke(r,n);return k.invoke(t,null,{$delegate:e})}}function h(e){lt(m(e)||ro(e),"modulesToLoad","not an array");var t,n=[];return r(e,function(e){function r(e){var t,n;for(t=0,n=e.length;n>t;t++){var r=e[t],i=C.get(r[0]);i[r[1]].apply(i,r[2])}}if(!b.get(e)){b.put(e,!0);try{w(e)?(t=Gi(e),n=n.concat(h(t.requires)).concat(t._runBlocks),r(t._invokeQueue),r(t._configBlocks)):S(e)?n.push(C.invoke(e)):ro(e)?n.push(C.invoke(e)):ft(e,"module")}catch(i){throw ro(e)&&(e=e[e.length-1]),i.message&&i.stack&&-1===i.stack.indexOf(i.message)&&(i=i.message+"\n"+i.stack),Wo("modulerr","Failed to instantiate module {0} due to:\n{1}",e,i.stack||i.message||i)}}}),n}function p(e,n){function r(t,r){if(e.hasOwnProperty(t)){if(e[t]===d)throw Wo("cdep","Circular dependency found: {0}",t+" <- "+g.join(" <- "));return e[t]}try{return g.unshift(t),e[t]=d,e[t]=n(t,r),e[t]}catch(i){throw e[t]===d&&delete e[t],i}finally{g.shift()}}function i(e,n,i){for(var o=[],a=on.$$annotate(e,t,i),s=0,u=a.length;u>s;s++){var c=a[s];if("string"!=typeof c)throw Wo("itkn","Incorrect injection token! Expected service name as string, got {0}",c);o.push(n&&n.hasOwnProperty(c)?n[c]:r(c,i))}return o}function o(e){return 11>=Bi?!1:"function"==typeof e&&/^(?:class\b|constructor\()/.test(en(e))}function a(e,t,n,r){"string"==typeof n&&(r=n,n=null);var a=i(e,n,r);return ro(e)&&(e=e[e.length-1]),o(e)?(a.unshift(null),new(Function.prototype.bind.apply(e,a))):e.apply(t,a)}function s(e,t,n){var r=ro(e)?e[e.length-1]:e,o=i(e,t,n);return o.unshift(null),new(Function.prototype.bind.apply(r,o))}return{invoke:a,instantiate:s,get:r,annotate:on.$$annotate,has:function(t){return x.hasOwnProperty(t+v)||e.hasOwnProperty(t)}}}t=t===!0;var d={},v="Provider",g=[],b=new Qt([],!0),x={$provide:{provider:n(i),factory:n(s),service:n(u),value:n(c),constant:n(l),decorator:f}},C=x.$injector=p(x,function(e,t){throw eo.isString(t)&&g.push(t),Wo("unpr","Unknown provider: {0}",g.join(" <- "))}),E={},A=p(E,function(e,t){var n=C.get(e+v,t);return k.invoke(n.$get,n,void 0,e)}),k=A;return x["$injector"+v]={$get:$(A)},A.loadDelayedModules=function(e){var n=h(e);k=A.get("$injector"),k.strictDi=t,r(n,function(e){e&&k.invoke(e)})},A.hasModule=function(e){return!!b.get(e)},k.strictDi=t,k.loadDelayedModules(e),k.strictDi=t,k}function an(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,r){function i(e){var t=null;return Array.prototype.some.call(e,function(e){return"a"===P(e)?(t=e,!0):void 0}),t}function o(){var e=s.yOffset;if(S(e))e=e();else if(D(e)){var n=e[0],r=t.getComputedStyle(n);e="fixed"!==r.position?0:n.getBoundingClientRect().bottom}else x(e)||(e=0);return e}function a(e){if(e){e.scrollIntoView();var n=o();if(n){var r=e.getBoundingClientRect().top;t.scrollBy(0,r-n)}}else t.scrollTo(0,0)}function s(e){e=w(e)?e:x(e)?e.toString():n.hash();var t;e?(t=u.getElementById(e))?a(t):(t=i(u.getElementsByName(e)))?a(t):"top"===e&&a(null):a(null)}var u=t.document;return e&&r.$watch(function(){return n.hash()},function(e,t){(e!==t||""!==e)&&zt(function(){r.$evalAsync(s)})}),s}]}function sn(e,t){return e||t?e?t?(ro(e)&&(e=e.join(" ")),ro(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function un(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===Zo)return n}}function cn(e){w(e)&&(e=e.split(" "));var t=$t();return r(e,function(e){e.length&&(t[e]=!0)}),t}function ln(e){return y(e)?e:{}}function fn(e,t,n,i){function o(e){try{e.apply(null,L(arguments,1))}finally{if(g--,0===g)for(;y.length;)try{y.pop()()}catch(t){n.error(t)}}}function a(e){var t=e.indexOf("#");return-1===t?"":e.substr(t)}function s(){S=null,u(),c()}function u(){b=E(),b=m(b)?null:b,U(b,O)&&(b=O),O=b}function c(){(x!==l.url()||w!==b)&&(x=l.url(),w=b,r(A,function(e){e(l.url(),b)}))}var l=this,f=e.location,h=e.history,d=e.setTimeout,$=e.clearTimeout,v={};l.isMock=!1;var g=0,y=[];l.$$completeOutstandingRequest=o,l.$$incOutstandingRequestCount=function(){g++},l.notifyWhenNoOutstandingRequests=function(e){0===g?e():y.push(e)};var b,w,x=f.href,C=t.find("base"),S=null,E=i.history?function(){try{return h.state}catch(e){}}:p;u(),w=b,l.url=function(t,n,r){if(m(r)&&(r=null),f!==e.location&&(f=e.location),h!==e.history&&(h=e.history),t){var o=w===r;if(x===t&&(!i.history||o))return l;var s=x&&zn(x)===zn(t);return x=t,w=r,!i.history||s&&o?(s||(S=t),n?f.replace(t):s?f.hash=a(t):f.href=t,f.href!==t&&(S=t)):(h[n?"replaceState":"pushState"](r,"",t),u(),w=b),S&&(S=t),l}return S||f.href.replace(/%27/g,"'")},l.state=function(){return b};var A=[],k=!1,O=null;l.onUrlChange=function(t){return k||(i.history&&zi(e).on("popstate",s),zi(e).on("hashchange",s),k=!0),A.push(t),t},l.$$applicationDestroyed=function(){zi(e).off("hashchange popstate",s)},l.$$checkUrlChange=c,l.baseHref=function(){var e=C.attr("href");return e?e.replace(/^(https?:)?\/\/[^/]*/,""):""},l.defer=function(e,t){var n;return g++,n=d(function(){delete v[n],o(e)},t||0),v[n]=!0,n},l.defer.cancel=function(e){return v[e]?(delete v[e],$(e),o(p),!0):!1}}function hn(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new fn(e,r,t,n)}]}function pn(){this.$get=function(){function e(e,r){function i(e){e!==h&&(p?p===e&&(p=e.n):p=e,o(e.n,e.p),o(e,h),h=e,h.n=null)}function o(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}if(e in n)throw t("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var a=0,s=c({},r,{id:e}),u=$t(),l=r&&r.capacity||Number.MAX_VALUE,f=$t(),h=null,p=null;return n[e]={put:function(e,t){if(!m(t)){if(l<Number.MAX_VALUE){var n=f[e]||(f[e]={key:e});i(n)}return e in u||a++,u[e]=t,a>l&&this.remove(p.key),t}},get:function(e){if(l<Number.MAX_VALUE){var t=f[e];if(!t)return;i(t)}return u[e]},remove:function(e){if(l<Number.MAX_VALUE){var t=f[e];if(!t)return;t===h&&(h=t.p),t===p&&(p=t.n),o(t.n,t.p),delete f[e]}e in u&&(delete u[e],a--)},removeAll:function(){u=$t(),a=0,f=$t(),h=p=null},destroy:function(){u=null,s=null,f=null,delete n[e]},info:function(){return c({},s,{size:a})}}}var n={};return e.info=function(){var e={};return r(n,function(t,n){e[n]=t.info()}),e},e.get=function(e){return n[e]},e}}function dn(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function $n(){}function vn(t,n){function i(e,t,n){var i=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,o=$t();return r(e,function(e,r){if(e in O)return void(o[r]=O[e]);var a=e.match(i);if(!a)throw na("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,r,e,n?"controller bindings definition":"isolate scope definition");o[r]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||r},a[4]&&(O[e]=o[r])}),o}function a(e,t){var n={isolateScope:null,bindToController:null};if(y(e.scope)&&(e.bindToController===!0?(n.bindToController=i(e.scope,t,!0),n.isolateScope={}):n.isolateScope=i(e.scope,t,!1)),y(e.bindToController)&&(n.bindToController=i(e.bindToController,t,!0)),n.bindToController&&!e.controller)throw na("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);return n}function s(e){var t=e.charAt(0);if(!t||t!==Ui(t))throw na("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw na("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}function u(e){var t=e.require||e.controller&&e.name;return!ro(t)&&y(t)&&r(t,function(e,n){var r=e.match(E),i=e.substring(r[0].length);i||(t[n]=r[0]+n)}),t}function l(e,t){if(e&&(!w(e)||!/[EACM]/.test(e)))throw na("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",e,t);return e||"EA"}var f={},v="Directive",b=/^\s*directive:\s*([\w-]+)\s+(.*)$/,x=/(([\w-]+)(?::([^;]+))?;?)/,C=R("ngSrc,ngSrcset,src,srcset"),E=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,A=/^(on[a-z]+|formaction)$/,O=$t();this.directive=function D(e,n){return lt(e,"name"),ht(e,"directive"),w(e)?(s(e),lt(n,"directiveFactory"),f.hasOwnProperty(e)||(f[e]=[],t.factory(e+v,["$injector","$exceptionHandler",function(t,n){var i=[];return r(f[e],function(r,o){try{var a=t.invoke(r);S(a)?a={compile:$(a)}:!a.compile&&a.link&&(a.compile=$(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||e,a.require=u(a),a.restrict=l(a.restrict,e),a.$$moduleName=r.$$moduleName,i.push(a)}catch(s){n(s)}}),i}])),f[e].push(n)):r(e,o(D)),this},this.component=function(e,t){function n(e){function n(t){return S(t)||ro(t)?function(n,r){return e.invoke(t,this,{$element:n,$attrs:r})}:t}var o=t.template||t.templateUrl?t.template:"",a={controller:i,controllerAs:wn(t.controller)||t.controllerAs||"$ctrl",template:n(o),templateUrl:n(t.templateUrl),transclude:t.transclude,scope:{},bindToController:t.bindings||{},restrict:"E",require:t.require};return r(t,function(e,t){"$"===t.charAt(0)&&(a[t]=e)}),a}var i=t.controller||function(){};return r(t,function(e,t){"$"===t.charAt(0)&&(n[t]=e,S(i)&&(i[t]=e))}),n.$inject=["$injector"],this.directive(e,n)},this.aHrefSanitizationWhitelist=function(e){return g(e)?(n.aHrefSanitizationWhitelist(e),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return g(e)?(n.imgSrcSanitizationWhitelist(e),this):n.imgSrcSanitizationWhitelist()};var M=!0;this.debugInfoEnabled=function(e){return g(e)?(M=e,this):M};var T=!0;this.preAssignBindingsEnabled=function(e){return g(e)?(T=e,this):T};var j=10;this.onChangesTtl=function(e){return arguments.length?(j=e,this):j};var N=!0;this.commentDirectivesEnabled=function(e){return arguments.length?(N=e,this):N};var I=!0;this.cssClassDirectivesEnabled=function(e){return arguments.length?(I=e,this):I},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(t,n,i,o,s,u,l,$,O,D){function R(){try{if(!--Ot)throw xt=void 0,na("infchng","{0} $onChanges() iterations reached. Aborting!\n",j);l.$apply(function(){for(var e=[],t=0,n=xt.length;n>t;++t)try{xt[t]()}catch(r){e.push(r)}if(xt=void 0,e.length)throw e})}finally{Ot++}}function q(e,t){if(t){var n,r,i,o=Object.keys(t);for(n=0,r=o.length;r>n;n++)i=o[n],this[i]=t[i]}else this.$attr={};this.$$element=e}function F(e,t,n){Et.innerHTML="<span "+t+">";var r=Et.firstChild.attributes,i=r[0];r.removeNamedItem(i.name),i.value=n,e.attributes.setNamedItem(i)}function B(e,t){try{e.addClass(t)}catch(n){}}function z(t,n,r,i,o){t instanceof zi||(t=zi(t));for(var a=/\S+/,s=0,u=t.length;u>s;s++){var c=t[s];c.nodeType===mo&&c.nodeValue.match(a)&&Mt(c,t[s]=e.document.createElement("span"))}var l=G(t,n,t,r,i,o);z.$$addScopeClass(t);var f=null;return function(e,n,r){lt(e,"scope"),o&&o.needsNewScope&&(e=e.$parent.$new()),r=r||{};var i=r.parentBoundTranscludeFn,a=r.transcludeControllers,s=r.futureParentElement;i&&i.$$boundTransclude&&(i=i.$$boundTransclude),f||(f=W(s));var u;if(u="html"!==f?zi(dt(f,zi("<div>").append(t).html())):n?Ro.clone.call(t):t,a)for(var c in a)u.data("$"+c+"Controller",a[c].instance);return z.$$addScopeInfo(u,e),n&&n(u,e),l&&l(e,u,u,i),u}}function W(e){var t=e&&e[0];return t&&"foreignobject"!==P(t)&&Ki.call(t).match(/SVG/)?"svg":"html"}function G(e,t,n,r,i,o){function a(e,n,r,i){var o,a,s,u,c,l,f,h,$;if(p){var v=n.length;for($=new Array(v),c=0;c<d.length;c+=3)f=d[c],$[f]=n[f]}else $=n;for(c=0,l=d.length;l>c;)s=$[d[c++]],o=d[c++],a=d[c++],o?(o.scope?(u=e.$new(),z.$$addScopeInfo(zi(s),u)):u=e,h=o.transcludeOnThisElement?Z(e,o.transclude,i):!o.templateOnThisElement&&i?i:!i&&t?Z(e,t):null,o(a,u,s,r,h)):a&&a(e,s.childNodes,void 0,i)}for(var s,u,c,l,f,h,p,d=[],$=0;$<e.length;$++)s=new q,u=J(e[$],[],s,0===$?r:void 0,i),c=u.length?tt(u,e[$],s,t,n,null,[],[],o):null,c&&c.scope&&z.$$addScopeClass(s.$$element),f=c&&c.terminal||!(l=e[$].childNodes)||!l.length?null:G(l,c?(c.transcludeOnThisElement||!c.templateOnThisElement)&&c.transclude:t),(c||f)&&(d.push($,c,f),h=!0,p=p||c),o=null;return h?a:null}function Z(e,t,n){function r(r,i,o,a,s){return r||(r=e.$new(!1,s),r.$$transcluded=!0),t(r,i,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})}var i=r.$$slots=$t();for(var o in t.$$slots)i[o]=t.$$slots[o]?Z(e,t.$$slots[o],n):null;return r}function J(e,t,n,r,i){var o,a,s,u=e.nodeType,c=n.$attr;switch(u){case $o:a=P(e),ot(t,gn(a),"E",r,i);for(var l,f,h,p,d,$,v=e.attributes,m=0,g=v&&v.length;g>m;m++){var b=!1,C=!1;l=v[m],f=l.name,d=oo(l.value),p=gn(f),$=It.test(p),$&&(f=f.replace(ia,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var S=p.match(Dt);S&&at(S[1])&&(b=f,C=f.substr(0,f.length-5)+"end",f=f.substr(0,f.length-6)),h=gn(f.toLowerCase()),c[h]=f,($||!n.hasOwnProperty(h))&&(n[h]=d,Wt(e,h)&&(n[h]=!0)),mt(e,t,d,h,$),ot(t,h,"A",r,i,b,C)}if("input"===a&&"hidden"===e.getAttribute("type")&&e.setAttribute("autocomplete","off"),!kt)break;if(s=e.className,y(s)&&(s=s.animVal),w(s)&&""!==s)for(;o=x.exec(s);)h=gn(o[2]),ot(t,h,"C",r,i)&&(n[h]=oo(o[3])),s=s.substr(o.index+o[0].length);break;case mo:if(11===Bi)for(;e.parentNode&&e.nextSibling&&e.nextSibling.nodeType===mo;)e.nodeValue=e.nodeValue+e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);pt(t,e.nodeValue);break;case go:if(!At)break;K(e,t,n,r,i)}return t.sort(ft),t}function K(e,t,n,r,i){try{var o=b.exec(e.nodeValue);if(o){var a=gn(o[1]);ot(t,a,"M",r,i)&&(n[a]=oo(o[2]))}}catch(s){}}function X(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw na("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType===$o&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(i>0)}else r.push(e);return zi(r)}function Q(e,t,n){return function(r,i,o,a,s){return i=X(i[0],t,n),e(r,i,o,a,s)}}function et(e,t,n,r,i,o){var a;return e?z(t,n,r,i,o):function(){return a||(a=z(t,n,r,i,o),t=n=o=null),a.apply(this,arguments)}}function tt(e,t,n,o,a,s,u,l,f){function h(e,t,n,r){e&&(n&&(e=Q(e,n,r)),e.require=d.require,e.directiveName=$,(E===d||d.$$isolateScope)&&(e=yt(e,{isolateScope:!0})),u.push(e)),t&&(n&&(t=Q(t,n,r)),t.require=d.require,t.directiveName=$,(E===d||d.$$isolateScope)&&(t=yt(t,{isolateScope:!0})),l.push(t))}function p(e,o,a,s,f){function h(e,t,n,r){var i;if(k(e)||(r=n,n=t,t=e,e=void 0),j&&(i=b),n||(n=j?O.parent():O),!r)return f(e,t,i,n,_);var o=f.$$slots[r];if(o)return o(e,t,i,n,_);if(m(o))throw na("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,Y(O))}var p,d,$,v,g,b,w,O,M,V;t===a?(M=n,O=n.$$element):(O=zi(a),M=new q(O,n)),g=o,E?v=o.$new(!0):x&&(g=o.$parent),f&&(w=h,w.$$boundTransclude=f,w.isSlotFilled=function(e){return!!f.$$slots[e]}),C&&(b=rt(O,M,w,C,v,o,E)),E&&(z.$$addScopeInfo(O,v,!0,!(A&&(A===E||A===E.$$originalDirective))),z.$$addScopeClass(O,!0),v.$$isolateBindings=E.$$isolateBindings,V=wt(o,M,v,v.$$isolateBindings,E),V.removeWatches&&v.$on("$destroy",V.removeWatches));for(var N in b){var I=C[N],D=b[N],R=I.$$bindings.bindToController;if(T){D.bindingInfo=R?wt(g,M,D.instance,R,I):{};var P=D();P!==D.instance&&(D.instance=P,O.data("$"+I.name+"Controller",P),D.bindingInfo.removeWatches&&D.bindingInfo.removeWatches(),D.bindingInfo=wt(g,M,D.instance,R,I))}else D.instance=D(),O.data("$"+I.name+"Controller",D.instance),D.bindingInfo=wt(g,M,D.instance,R,I)}for(r(C,function(e,t){var n=e.require;e.bindToController&&!ro(n)&&y(n)&&c(b[t].instance,nt(t,n,O,b))}),r(b,function(e){var t=e.instance;if(S(t.$onChanges))try{t.$onChanges(e.bindingInfo.initialChanges)}catch(n){i(n)}if(S(t.$onInit))try{t.$onInit()}catch(n){i(n)}S(t.$doCheck)&&(g.$watch(function(){t.$doCheck()}),t.$doCheck()),S(t.$onDestroy)&&g.$on("$destroy",function(){t.$onDestroy()})}),p=0,d=u.length;d>p;p++)$=u[p],bt($,$.isolateScope?v:o,O,M,$.require&&nt($.directiveName,$.require,O,b),w);var _=o;for(E&&(E.template||null===E.templateUrl)&&(_=v),e&&e(_,a.childNodes,void 0,f),p=l.length-1;p>=0;p--)$=l[p],bt($,$.isolateScope?v:o,O,M,$.require&&nt($.directiveName,$.require,O,b),w);r(b,function(e){var t=e.instance;S(t.$postLink)&&t.$postLink()})}f=f||{};for(var d,$,v,g,b,w=-Number.MAX_VALUE,x=f.newScopeDirective,C=f.controllerDirectives,E=f.newIsolateScopeDirective,A=f.templateDirective,O=f.nonTlbTranscludeDirective,M=!1,V=!1,j=f.hasElementTranscludeDirective,N=n.$$element=zi(t),I=s,D=o,R=!1,_=!1,U=0,F=e.length;F>U;U++){d=e[U];var B=d.$$start,W=d.$$end;if(B&&(N=X(t,B,W)),v=void 0,w>d.priority)break;if(b=d.scope,b&&(d.templateUrl||(y(b)?(ht("new/isolated scope",E||x,d,N),E=d):ht("new/isolated scope",E,d,N)),x=x||d),$=d.name,!R&&(d.replace&&(d.templateUrl||d.template)||d.transclude&&!d.$$tlb)){for(var G,Z=U+1;G=e[Z++];)if(G.transclude&&!G.$$tlb||G.replace&&(G.templateUrl||G.template)){_=!0;break}R=!0}if(!d.templateUrl&&d.controller&&(C=C||$t(),ht("'"+$+"' controller",C[$],d,N),C[$]=d),b=d.transclude)if(M=!0,d.$$tlb||(ht("transclusion",O,d,N),O=d),"element"===b)j=!0,w=d.priority,v=N,N=n.$$element=zi(z.$$createComment($,n[$])),t=N[0],gt(a,L(v),t),v[0].$$parentNode=v[0].parentNode,D=et(_,v,o,w,I&&I.name,{nonTlbTranscludeDirective:O});else{var K=$t();if(v=zi(Vt(t)).contents(),y(b)){v=[];var tt=$t(),ot=$t();r(b,function(e,t){var n="?"===e.charAt(0);e=n?e.substring(1):e,tt[e]=t,K[t]=null,ot[t]=n}),r(N.contents(),function(e){var t=tt[gn(P(e))];t?(ot[t]=!0,K[t]=K[t]||[],K[t].push(e)):v.push(e)}),r(ot,function(e,t){if(!e)throw na("reqslot","Required transclusion slot `{0}` was not filled.",t)});for(var at in K)K[at]&&(K[at]=et(_,K[at],o))}N.empty(),D=et(_,v,o,void 0,void 0,{needsNewScope:d.$$isolateScope||d.$$newScope}),D.$$slots=K}if(d.template)if(V=!0,ht("template",A,d,N),A=d,b=S(d.template)?d.template(N,n):d.template,b=Nt(b),d.replace){if(I=d,v=Ct(b)?[]:bn(dt(d.templateNamespace,oo(b))),t=v[0],1!==v.length||t.nodeType!==$o)throw na("tplrt","Template for directive '{0}' must have exactly one root element. {1}",$,"");gt(a,N,t);var ut={$attr:{}},lt=J(t,[],ut),ft=e.splice(U+1,e.length-(U+1));(E||x)&&it(lt,E,x),e=e.concat(lt).concat(ft),st(n,ut),F=e.length}else N.html(b);if(d.templateUrl)V=!0,ht("template",A,d,N),A=d,d.replace&&(I=d),p=ct(e.splice(U,e.length-U),N,n,a,M&&D,u,l,{controllerDirectives:C,newScopeDirective:x!==d&&x,newIsolateScopeDirective:E,templateDirective:A,nonTlbTranscludeDirective:O}),F=e.length;else if(d.compile)try{g=d.compile(N,n,D);var pt=d.$$originalDirective||d;S(g)?h(null,H(pt,g),B,W):g&&h(H(pt,g.pre),H(pt,g.post),B,W)}catch(vt){i(vt,Y(N))}d.terminal&&(p.terminal=!0,w=Math.max(w,d.priority))}return p.scope=x&&x.scope===!0,p.transcludeOnThisElement=M,p.templateOnThisElement=V,p.transclude=D,f.hasElementTranscludeDirective=j,p}function nt(e,t,n,i){var o;if(w(t)){var a=t.match(E),s=t.substring(a[0].length),u=a[1]||a[3],c="?"===a[2];if("^^"===u?n=n.parent():(o=i&&i[s],o=o&&o.instance),!o){var l="$"+s+"Controller";o=u?n.inheritedData(l):n.data(l)}if(!o&&!c)throw na("ctreq","Controller '{0}', required by directive '{1}', can't be found!",s,e)}else if(ro(t)){o=[];for(var f=0,h=t.length;h>f;f++)o[f]=nt(e,t[f],n,i)}else y(t)&&(o={},r(t,function(t,r){o[r]=nt(e,t,n,i)}));return o||null}function rt(e,t,n,r,i,o,a){var s=$t();for(var c in r){var l=r[c],f={$scope:l===a||l.$$isolateScope?i:o,$element:e,$attrs:t,$transclude:n},h=l.controller;"@"===h&&(h=t[l.name]);var p=u(h,f,!0,l.controllerAs);s[l.name]=p,e.data("$"+l.name+"Controller",p.instance)}return s}function it(e,t,n){for(var r=0,i=e.length;i>r;r++)e[r]=h(e[r],{$$isolateScope:t,$$newScope:n})}function ot(e,n,r,i,o,s,u){if(n===o)return null;var c=null;if(f.hasOwnProperty(n))for(var l,p=t.get(n+v),d=0,$=p.length;$>d;d++)if(l=p[d],(m(i)||i>l.priority)&&-1!==l.restrict.indexOf(r)){if(s&&(l=h(l,{$$start:s,$$end:u})),!l.$$bindings){var g=l.$$bindings=a(l,l.name);y(g.isolateScope)&&(l.$$isolateBindings=g.isolateScope)}e.push(l),c=l}return c}function at(e){if(f.hasOwnProperty(e))for(var n,r=t.get(e+v),i=0,o=r.length;o>i;i++)if(n=r[i],n.multiElement)return!0;return!1}function st(e,t){var n=t.$attr,i=e.$attr;r(e,function(r,i){"$"!==i.charAt(0)&&(t[i]&&t[i]!==r&&(r+=("style"===i?";":" ")+t[i]),e.$set(i,r,!0,n[i]))}),r(t,function(t,r){e.hasOwnProperty(r)||"$"===r.charAt(0)||(e[r]=t,"class"!==r&&"style"!==r&&(i[r]=n[r]))})}function ct(e,t,n,i,a,s,u,c){var l,f,p=[],d=t[0],$=e.shift(),v=h($,{templateUrl:null,transclude:null,replace:null,$$originalDirective:$}),m=S($.templateUrl)?$.templateUrl(t,n):$.templateUrl,g=$.templateNamespace;return t.empty(),o(m).then(function(o){var h,b,w,x;if(o=Nt(o),$.replace){if(w=Ct(o)?[]:bn(dt(g,oo(o))),h=w[0],1!==w.length||h.nodeType!==$o)throw na("tplrt","Template for directive '{0}' must have exactly one root element. {1}",$.name,m);b={$attr:{}},gt(i,t,h);var C=J(h,[],b);y($.scope)&&it(C,!0),e=C.concat(e),st(n,b)}else h=d,t.html(o);for(e.unshift(v),l=tt(e,h,n,a,t,$,s,u,c),r(i,function(e,n){e===h&&(i[n]=t[0])}),f=G(t[0].childNodes,a);p.length;){var S=p.shift(),E=p.shift(),A=p.shift(),k=p.shift(),O=t[0];if(!S.$$destroyed){if(E!==d){var M=E.className;c.hasElementTranscludeDirective&&$.replace||(O=Vt(h)),gt(A,zi(E),O),B(zi(O),M)}x=l.transcludeOnThisElement?Z(S,l.transclude,k):k,l(f,S,O,i,x)}}p=null}),function(e,t,n,r,i){var o=i;t.$$destroyed||(p?p.push(t,n,r,o):(l.transcludeOnThisElement&&(o=Z(t,l.transclude,i)),l(f,t,n,r,o)))}}function ft(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function ht(e,t,n,r){function i(e){return e?" (module: "+e+")":""}if(t)throw na("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,i(t.$$moduleName),n.name,i(n.$$moduleName),e,Y(r))}function pt(e,t){var r=n(t,!0);r&&e.push({priority:0,compile:function(e){var t=e.parent(),n=!!t.length;return n&&z.$$addBindingClass(t),function(e,t){var i=t.parent();n||z.$$addBindingClass(i),z.$$addBindingInfo(i,r.expressions),e.$watch(r,function(e){t[0].nodeValue=e})}}})}function dt(t,n){switch(t=Ui(t||"html")){case"svg":case"math":var r=e.document.createElement("div");return r.innerHTML="<"+t+">"+n+"</"+t+">",r.childNodes[0].childNodes;default:return n}}function vt(e,t){if("srcdoc"===t)return $.HTML;var n=P(e);if("src"===t||"ngSrc"===t){if(-1===["img","video","audio","source","track"].indexOf(n))return $.RESOURCE_URL}else if("xlinkHref"===t||"form"===n&&"action"===t)return $.RESOURCE_URL}function mt(e,t,r,i,o){var a=vt(e,i),s=!o,u=C[i]||o,c=n(r,s,a,u);if(c){if("multiple"===i&&"select"===P(e))throw na("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Y(e));t.push({priority:100,compile:function(){return{pre:function(e,t,o){var s=o.$$observers||(o.$$observers=$t());if(A.test(i))throw na("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var l=o[i];l!==r&&(c=l&&n(l,!0,a,u),r=l),c&&(o[i]=c(e),(s[i]||(s[i]=[])).$$inter=!0,(o.$$observers&&o.$$observers[i].$$scope||e).$watch(c,function(e,t){"class"===i&&e!==t?o.$updateClass(e,t):o.$set(i,e)}))}}}})}}function gt(t,n,r){var i,o,a=n[0],s=n.length,u=a.parentNode;if(t)for(i=0,o=t.length;o>i;i++)if(t[i]===a){t[i++]=r;for(var c=i,l=c+s-1,f=t.length;f>c;c++,l++)f>l?t[c]=t[l]:delete t[c];t.length-=s-1,t.context===a&&(t.context=r);break}u&&u.replaceChild(r,a);var h=e.document.createDocumentFragment();for(i=0;s>i;i++)h.appendChild(n[i]);for(zi.hasData(a)&&(zi.data(r,zi.data(a)),zi(a).off("$destroy")),zi.cleanData(h.querySelectorAll("*")),i=1;s>i;i++)delete n[i];n[0]=r,n.length=1}function yt(e,t){return c(function(){return e.apply(null,arguments)},e,t)}function bt(e,t,n,r,o,a){try{e(t,n,r,o,a)}catch(s){i(s,Y(n))}}function wt(e,t,i,o,a){function u(t,n,r){!S(i.$onChanges)||n===r||n!==n&&r!==r||(xt||(e.$$postDigest(R),xt=[]),l||(l={},xt.push(c)),l[t]&&(r=l[t].previousValue),l[t]=new mn(r,n))}function c(){i.$onChanges(l),l=void 0}var l,f=[],h={};return r(o,function(r,o){var c,l,d,$,v,m=r.attrName,g=r.optional,y=r.mode;switch(y){case"@":g||qi.call(t,m)||(i[o]=t[m]=void 0),v=t.$observe(m,function(e){if(w(e)||V(e)){var t=i[o];u(o,e,t),i[o]=e}}),t.$$observers[m].$$scope=e,c=t[m],w(c)?i[o]=n(c)(e):V(c)&&(i[o]=c),h[o]=new mn(ra,i[o]),f.push(v);break;case"=":if(!qi.call(t,m)){if(g)break;t[m]=void 0}if(g&&!t[m])break;l=s(t[m]),$=l.literal?U:function(e,t){return e===t||e!==e&&t!==t},d=l.assign||function(){throw c=i[o]=l(e),na("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",t[m],m,a.name)},c=i[o]=l(e);var b=function(t){return $(t,i[o])||($(t,c)?d(e,t=i[o]):i[o]=t),c=t};b.$stateful=!0,v=r.collection?e.$watchCollection(t[m],b):e.$watch(s(t[m],b),null,l.literal),f.push(v);break;case"<":if(!qi.call(t,m)){if(g)break;t[m]=void 0}if(g&&!t[m])break;l=s(t[m]);var x=l.literal,C=i[o]=l(e);h[o]=new mn(ra,i[o]),v=e.$watch(l,function(e,t){if(t===e){if(t===C||x&&U(t,C))return;t=C}u(o,e,t),i[o]=e},x),f.push(v);break;case"&":if(l=t.hasOwnProperty(m)?s(t[m]):p,l===p&&g)break;i[o]=function(t){return l(e,t)}}}),{initialChanges:h,removeWatches:f.length&&function(){for(var e=0,t=f.length;t>e;++e)f[e]()}}}var xt,St=/^\w/,Et=e.document.createElement("div"),At=N,kt=I,Ot=j;q.prototype={$normalize:gn,$addClass:function(e){e&&e.length>0&&O.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&O.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=yn(e,t);n&&n.length&&O.addClass(this.$$element,n);var r=yn(t,e);r&&r.length&&O.removeClass(this.$$element,r)},$set:function(e,t,n,o){var a,s=this.$$element[0],u=Wt(s,e),c=Gt(e),l=e;if(u?(this.$$element.prop(e,t),o=u):c&&(this[c]=t,l=c),this[e]=t,o?this.$attr[e]=o:(o=this.$attr[e],o||(this.$attr[e]=o=ut(e,"-"))),a=P(this.$$element),"a"===a&&("href"===e||"xlinkHref"===e)||"img"===a&&"src"===e)this[e]=t=D(t,"src"===e);else if("img"===a&&"srcset"===e&&g(t)){for(var f="",h=oo(t),p=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,d=/\s/.test(h)?p:/(,)/,$=h.split(d),v=Math.floor($.length/2),y=0;v>y;y++){var b=2*y;f+=D(oo($[b]),!0),f+=" "+oo($[b+1])}var w=oo($[2*y]).split(/\s/);f+=D(oo(w[0]),!0),2===w.length&&(f+=" "+oo(w[1])),this[e]=t=f}n!==!1&&(null===t||m(t)?this.$$element.removeAttr(o):St.test(o)?this.$$element.attr(o,t):F(this.$$element[0],o,t));var x=this.$$observers;x&&r(x[l],function(e){try{e(t)}catch(n){i(n)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers=$t()),i=r[e]||(r[e]=[]);return i.push(t),l.$evalAsync(function(){i.$$inter||!n.hasOwnProperty(e)||m(n[e])||t(n[e])}),function(){_(i,t)}}};var Tt=n.startSymbol(),jt=n.endSymbol(),Nt="{{"===Tt&&"}}"===jt?d:function(e){return e.replace(/\{\{/g,Tt).replace(/}}/g,jt)},It=/^ngAttr[A-Z]/,Dt=/^(.+)Start$/;return z.$$addBindingInfo=M?function(e,t){var n=e.data("$binding")||[];ro(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:p,z.$$addBindingClass=M?function(e){B(e,"ng-binding")}:p,z.$$addScopeInfo=M?function(e,t,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(i,t)}:p,z.$$addScopeClass=M?function(e,t){B(e,t?"ng-isolate-scope":"ng-scope")}:p,z.$$createComment=function(t,n){var r="";return M&&(r=" "+(t||"")+": ",n&&(r+=n+" ")),e.document.createComment(r)},z}]}function mn(e,t){this.previousValue=e,this.currentValue=t}function gn(e){return xt(e.replace(ia,""))}function yn(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var o=0;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a===i[s])continue e;n+=(n.length>0?" ":"")+a}return n}function bn(e){e=zi(e);var t=e.length;if(1>=t)return e;for(;t--;){var n=e[t];(n.nodeType===go||n.nodeType===mo&&""===n.nodeValue.trim())&&Ji.call(e,t,1)}return e}function wn(e,t){if(t&&w(t))return t;if(w(e)){var n=aa.exec(e);if(n)return n[3]}}function xn(){var e={},n=!1;this.has=function(t){return e.hasOwnProperty(t)},this.register=function(t,n){ht(t,"controller"),y(t)?c(e,t):e[t]=n},this.allowGlobals=function(){n=!0},this.$get=["$injector","$window",function(r,i){function o(e,n,r,i){if(!e||!y(e.$scope))throw t("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,n);e.$scope[n]=r}return function(t,a,s,u){var l,f,h,p;if(s=s===!0,u&&w(u)&&(p=u),w(t)){if(f=t.match(aa),!f)throw oa("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",t);if(h=f[1],p=p||f[3],t=e.hasOwnProperty(h)?e[h]:pt(a.$scope,h,!0)||(n?pt(i,h,!0):void 0),!t)throw oa("ctrlreg","The controller with the name '{0}' is not registered.",h);ft(t,h,!0)}if(s){var d=(ro(t)?t[t.length-1]:t).prototype;return l=Object.create(d||null),p&&o(a,p,l,h||t.name),c(function(){var e=r.invoke(t,l,a,h);return e!==l&&(y(e)||S(e))&&(l=e,p&&o(a,p,l,h||t.name)),l},{instance:l,identifier:p})}return l=r.instantiate(t,a,h),p&&o(a,p,l,h||t.name),l}}]}function Cn(){this.$get=["$window",function(e){return zi(e.document)}]}function Sn(){this.$get=["$log",function(e){return function(){e.error.apply(e,arguments)}}]}function En(e){return y(e)?C(e)?e.toISOString():z(e):e}function An(){this.$get=function(){return function(e){if(!e)return"";var t=[];return i(e,function(e,n){null===e||m(e)||(ro(e)?r(e,function(e){t.push(tt(n)+"="+tt(En(e)))}):t.push(tt(n)+"="+tt(En(e))))}),t.join("&")}}}function kn(){this.$get=function(){return function(e){function t(e,o,a){null===e||m(e)||(ro(e)?r(e,function(e,n){t(e,o+"["+(y(e)?n:"")+"]")}):y(e)&&!C(e)?i(e,function(e,n){t(e,o+(a?"":"[")+n+(a?"":"]"))}):n.push(tt(o)+"="+tt(En(e))))}if(!e)return"";var n=[];return t(e,"",!0),n.join("&")}}}function On(e,t){if(w(e)){var n=e.replace(ha,"").trim();if(n){var r=t("Content-Type");(r&&0===r.indexOf(ua)||Mn(n))&&(e=W(n))}}return e}function Mn(e){var t=e.match(la);return t&&fa[t[0]].test(e)}function Tn(e){function t(e,t){e&&(i[e]=i[e]?i[e]+", "+t:t)}var n,i=$t();return w(e)?r(e.split("\n"),function(e){n=e.indexOf(":"),t(Ui(oo(e.substr(0,n))),oo(e.substr(n+1)))}):y(e)&&r(e,function(e,n){t(Ui(n),oo(e))}),i}function Vn(e){var t;return function(n){if(t||(t=Tn(e)),n){var r=t[Ui(n)];return void 0===r&&(r=null),r}return t}}function jn(e,t,n,i){return S(i)?i(e,t,n):(r(i,function(r){e=r(e,t,n)}),e)}function Nn(e){return e>=200&&300>e}function In(){var e=this.defaults={transformResponse:[On],transformRequest:[function(e){return!y(e)||O(e)||T(e)||M(e)?e:z(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:mt(ca),put:mt(ca),patch:mt(ca)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},n=!1;this.useApplyAsync=function(e){return g(e)?(n=!!e,this):n};var i=!0;this.useLegacyPromiseExtensions=function(e){return g(e)?(i=!!e,this):i};var o=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(a,s,u,l,f,h){function p(n){function o(e,t){for(var n=0,r=t.length;r>n;){var i=t[n++],o=t[n++];e=e.then(i,o)}return t.length=0,e}function a(e,t){var n,i={};return r(e,function(e,r){S(e)?(n=e(t),null!=n&&(i[r]=n)):i[r]=e}),i}function s(t){var n,r,i,o=e.headers,s=c({},t.headers);o=c({},o.common,o[Ui(t.method)]);e:for(n in o){r=Ui(n);for(i in s)if(Ui(i)===r)continue e;s[n]=o[n]}return a(s,mt(t))}function u(t){var n=t.headers,i=jn(t.data,Vn(n),void 0,t.transformRequest);return m(i)&&r(n,function(e,t){"content-type"===Ui(t)&&delete n[t]}),m(t.withCredentials)&&!m(e.withCredentials)&&(t.withCredentials=e.withCredentials),v(t,i).then(l,l)}function l(e){var t=c({},e);return t.data=jn(e.data,e.headers,e.status,p.transformResponse),Nn(e.status)?t:f.reject(t)}if(!y(n))throw t("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!w(n.url))throw t("$http")("badreq","Http request configuration url must be a string.  Received: {0}",n.url);var p=c({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer},n);p.headers=s(n),p.method=Fi(p.method),p.paramSerializer=w(p.paramSerializer)?h.get(p.paramSerializer):p.paramSerializer;var d=[],$=[],g=f.when(p);return r(C,function(e){(e.request||e.requestError)&&d.unshift(e.request,e.requestError),(e.response||e.responseError)&&$.push(e.response,e.responseError)}),g=o(g,d),g=g.then(u),g=o(g,$),i?(g.success=function(e){return ft(e,"fn"),g.then(function(t){e(t.data,t.status,t.headers,p)}),g},g.error=function(e){return ft(e,"fn"),g.then(null,function(t){e(t.data,t.status,t.headers,p)}),g}):(g.success=da("success"),g.error=da("error")),g}function d(){r(arguments,function(e){p[e]=function(t,n){return p(c({},n||{},{method:e,url:t}))}})}function $(){r(arguments,function(e){p[e]=function(t,n,r){return p(c({},r||{},{method:e,url:t,data:n}))}})}function v(t,i){function o(e){if(e){var t={};return r(e,function(e,r){t[r]=function(t){function r(){e(t)}n?l.$applyAsync(r):l.$$phase?r():l.$apply(r)}}),t}}function u(e,t,r,i){function o(){c(t,e,r,i)}$&&(Nn(e)?$.put(E,[e,t,Tn(r),i]):$.remove(E)),n?l.$applyAsync(o):(o(),l.$$phase||l.$apply())}function c(e,n,r,i){n=n>=-1?n:0,(Nn(n)?w.resolve:w.reject)({data:e,status:n,headers:Vn(r),config:t,statusText:i})}function h(e){c(e.data,e.status,mt(e.headers()),e.statusText)}function d(){var e=p.pendingRequests.indexOf(t);-1!==e&&p.pendingRequests.splice(e,1)}var $,v,w=f.defer(),C=w.promise,S=t.headers,E=b(t.url,t.paramSerializer(t.params));if(p.pendingRequests.push(t),C.then(d,d),!t.cache&&!e.cache||t.cache===!1||"GET"!==t.method&&"JSONP"!==t.method||($=y(t.cache)?t.cache:y(e.cache)?e.cache:x),$&&(v=$.get(E),g(v)?j(v)?v.then(h,h):ro(v)?c(v[1],v[0],mt(v[2]),v[3]):c(v,200,{},"OK"):$.put(E,C)),m(v)){var A=Rr(t.url)?s()[t.xsrfCookieName||e.xsrfCookieName]:void 0;A&&(S[t.xsrfHeaderName||e.xsrfHeaderName]=A),a(t.method,E,i,u,S,t.timeout,t.withCredentials,t.responseType,o(t.eventHandlers),o(t.uploadEventHandlers))}return C}function b(e,t){return t.length>0&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}var x=u("$http");e.paramSerializer=w(e.paramSerializer)?h.get(e.paramSerializer):e.paramSerializer;var C=[];return r(o,function(e){C.unshift(w(e)?h.get(e):h.invoke(e))}),p.pendingRequests=[],d("get","delete","head","jsonp"),$("post","put","patch"),p.defaults=e,p}]}function Dn(){this.$get=function(){return function(){return new e.XMLHttpRequest}}}function Rn(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(e,t,n,r){return Pn(e,r,e.defer,t,n[0])}]}function Pn(e,t,n,i,o){function a(e,t,n){e=e.replace("JSON_CALLBACK",t);var r=o.createElement("script"),a=null;return r.type="text/javascript",r.src=e,r.async=!0,a=function(e){Eo(r,"load",a),Eo(r,"error",a),o.body.removeChild(r),r=null;var s=-1,u="unknown";e&&("load"!==e.type||i.wasCalled(t)||(e={type:"error"}),u=e.type,s="error"===e.type?404:200),n&&n(s,u)},So(r,"load",a),So(r,"error",a),o.body.appendChild(r),a}return function(o,s,u,c,l,f,h,d,$,v){function y(){x&&x(),C&&C.abort()}function b(t,r,i,o,a){g(A)&&n.cancel(A),x=C=null,t(r,i,o,a),e.$$completeOutstandingRequest(p)}if(e.$$incOutstandingRequestCount(),s=s||e.url(),"jsonp"===Ui(o))var w=i.createCallback(s),x=a(s,w,function(e,t){var n=200===e&&i.getResponse(w);b(c,e,n,"",t),i.removeCallback(w)});else{var C=t(o,s);C.open(o,s,!0),r(l,function(e,t){g(e)&&C.setRequestHeader(t,e)}),C.onload=function(){var e=C.statusText||"",t="response"in C?C.response:C.responseText,n=1223===C.status?204:C.status;0===n&&(n=t?200:"file"===Dr(s).protocol?404:0),b(c,n,t,C.getAllResponseHeaders(),e)};var S=function(){b(c,-1,null,null,"")};if(C.onerror=S,C.onabort=S,C.ontimeout=S,r($,function(e,t){C.addEventListener(t,e)}),r(v,function(e,t){C.upload.addEventListener(t,e)}),h&&(C.withCredentials=!0),d)try{C.responseType=d}catch(E){if("json"!==d)throw E}C.send(m(u)?null:u)}if(f>0)var A=n(y,f);else j(f)&&f.then(y)}}function _n(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function o(e){return"\\\\\\"+e}function a(n){return n.replace(p,e).replace(d,t)}function s(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=z(e)}return e}function u(e,t,n,r){var i=e.$watch(function(e){return i(),r(e)},t,n);return i}function l(o,l,p,d){function v(e){try{return e=j(e),d&&!g(e)?e:s(e)}catch(t){r($a.interr(o,t))}}if(!o.length||-1===o.indexOf(e)){var y;if(!l){var b=a(o);y=$(b),y.exp=o,y.expressions=[],y.$$watchDelegate=u}return y}d=!!d;for(var w,x,C,E=0,A=[],k=[],O=o.length,M=[],T=[];O>E;){if(-1===(w=o.indexOf(e,E))||-1===(x=o.indexOf(t,w+f))){E!==O&&M.push(a(o.substring(E)));break}E!==w&&M.push(a(o.substring(E,w))),C=o.substring(w+f,x),A.push(C),k.push(n(C,v)),E=x+h,T.push(M.length),M.push("")}if(p&&M.length>1&&$a.throwNoconcat(o),!l||A.length){var V=function(e){for(var t=0,n=A.length;n>t;t++){if(d&&m(e[t]))return;M[T[t]]=e[t]}return M.join("")},j=function(e){return p?i.getTrusted(p,e):i.valueOf(e)};return c(function(e){var t=0,n=A.length,i=new Array(n);try{for(;n>t;t++)i[t]=k[t](e);return V(i)}catch(a){r($a.interr(o,a))}},{exp:o,expressions:A,$$watchDelegate:function(e,t){var n;return e.$watchGroup(k,function(r,i){var o=V(r);S(t)&&t.call(this,o,r!==i?n:o,e),n=o})}})}}var f=e.length,h=t.length,p=new RegExp(e.replace(/./g,o),"g"),d=new RegExp(t.replace(/./g,o),"g");return l.startSymbol=function(){return e},l.endSymbol=function(){return t},l}]}function qn(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(e,t,n,r,i){function o(o,s,u,c){function l(){f?o.apply(null,h):o($)}var f=arguments.length>4,h=f?L(arguments,4):[],p=t.setInterval,d=t.clearInterval,$=0,v=g(c)&&!c,m=(v?r:n).defer(),y=m.promise;return u=g(u)?u:0,y.$$intervalId=p(function(){v?i.defer(l):e.$evalAsync(l),m.notify($++),u>0&&$>=u&&(m.resolve($),d(y.$$intervalId),delete a[y.$$intervalId]),v||e.$apply()},s),a[y.$$intervalId]=m,y}var a={};return o.cancel=function(e){return e&&e.$$intervalId in a?(a[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete a[e.$$intervalId],!0):!1},o}]}function Un(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=et(t[n]);return t.join("/")}function Fn(e,t){var n=Dr(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=f(n.port)||ga[n.protocol]||null}function Ln(e,t){if(ba.test(e))throw ya("badpath",'Invalid url "{0}".',e);var n="/"!==e.charAt(0);n&&(e="/"+e);var r=Dr(e);t.$$path=decodeURIComponent(n&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),t.$$search=X(r.search),t.$$hash=decodeURIComponent(r.hash),t.$$path&&"/"!==t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function Hn(e,t){return e.slice(0,t.length)===t}function Bn(e,t){return Hn(t,e)?t.substr(e.length):void 0}function zn(e){var t=e.indexOf("#");return-1===t?e:e.substr(0,t)}function Wn(e){return e.replace(/(#.+)|#$/,"$1")}function Gn(e){return e.substr(0,zn(e).lastIndexOf("/")+1)}function Zn(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function Jn(e,t,n){this.$$html5=!0,n=n||"",Fn(e,this),this.$$parse=function(e){var n=Bn(t,e);if(!w(n))throw ya("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,t);Ln(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=Q(this.$$search),n=this.$$hash?"#"+et(this.$$hash):"";this.$$url=Un(this.$$path)+(e?"?"+e:"")+n,this.$$absUrl=t+this.$$url.substr(1)},this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,a,s;return g(o=Bn(e,r))?(a=o,s=n&&g(o=Bn(n,o))?t+(Bn("/",o)||o):e+a):g(o=Bn(t,r))?s=t+o:t===r+"/"&&(s=t),s&&this.$$parse(s),!!s}}function Yn(e,t,n){Fn(e,this),this.$$parse=function(r){function i(e,t,n){var r,i=/^\/[A-Z]:(\/.*)/;return Hn(t,n)&&(t=t.replace(n,"")),i.exec(t)?e:(r=i.exec(e),r?r[1]:e)}var o,a=Bn(e,r)||Bn(t,r);m(a)||"#"!==a.charAt(0)?this.$$html5?o=a:(o="",m(a)&&(e=r,this.replace())):(o=Bn(n,a),m(o)&&(o=a)),Ln(o,this),this.$$path=i(this.$$path,o,e),this.$$compose()},this.$$compose=function(){var t=Q(this.$$search),r=this.$$hash?"#"+et(this.$$hash):"";this.$$url=Un(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+(this.$$url?n+this.$$url:"")},this.$$parseLinkUrl=function(t){return zn(e)===zn(t)?(this.$$parse(t),!0):!1}}function Kn(e,t,n){this.$$html5=!0,Yn.apply(this,arguments),this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,a;return e===zn(r)?o=r:(a=Bn(t,r))?o=e+n+a:t===r+"/"&&(o=t),o&&this.$$parse(o),!!o},this.$$compose=function(){var t=Q(this.$$search),r=this.$$hash?"#"+et(this.$$hash):"";this.$$url=Un(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+n+this.$$url}}function Xn(e){return function(){return this[e]}}function Qn(e,t){return function(n){return m(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function er(){var e="",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return g(t)?(e=t,this):e},this.html5Mode=function(e){return V(e)?(t.enabled=e,this):y(e)?(V(e.enabled)&&(t.enabled=e.enabled),V(e.requireBase)&&(t.requireBase=e.requireBase),(V(e.rewriteLinks)||w(e.rewriteLinks))&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,o,a){function s(e,t,n){var i=c.url(),o=c.$$state;try{r.url(e,t,n),c.$$state=r.state()}catch(a){throw c.url(i),c.$$state=o,a}}function u(e,t){n.$broadcast("$locationChangeSuccess",c.absUrl(),e,c.$$state,t)}var c,l,f,h=r.baseHref(),p=r.url();if(t.enabled){if(!h&&t.requireBase)throw ya("nobase","$location in HTML5 mode requires a <base> tag to be present!");f=Zn(p)+(h||"/"),l=i.history?Jn:Kn}else f=zn(p),l=Yn;var d=Gn(f);c=new l(f,d,"#"+e),c.$$parseLinkUrl(p,p),c.$$state=r.state();var $=/^\s*(javascript|mailto):/i;o.on("click",function(e){var i=t.rewriteLinks;if(i&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!==e.which&&2!==e.button){for(var s=zi(e.target);"a"!==P(s[0]);)if(s[0]===o[0]||!(s=s.parent())[0])return;if(!w(i)||!m(s.attr(i))){var u=s.prop("href"),l=s.attr("href")||s.attr("xlink:href");y(u)&&"[object SVGAnimatedString]"===u.toString()&&(u=Dr(u.animVal).href),$.test(u)||!u||s.attr("target")||e.isDefaultPrevented()||c.$$parseLinkUrl(u,l)&&(e.preventDefault(),c.absUrl()!==r.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}}),Wn(c.absUrl())!==Wn(p)&&r.url(c.absUrl(),!0);var v=!0;return r.onUrlChange(function(e,t){return m(Bn(d,e))?void(a.location.href=e):(n.$evalAsync(function(){var r,i=c.absUrl(),o=c.$$state;e=Wn(e),c.$$parse(e),c.$$state=t,r=n.$broadcast("$locationChangeStart",e,i,t,o).defaultPrevented,c.absUrl()===e&&(r?(c.$$parse(i),c.$$state=o,s(i,!1,o)):(v=!1,u(i,o)))}),void(n.$$phase||n.$digest()))}),n.$watch(function(){var e=Wn(r.url()),t=Wn(c.absUrl()),o=r.state(),a=c.$$replace,l=e!==t||c.$$html5&&i.history&&o!==c.$$state;(v||l)&&(v=!1,n.$evalAsync(function(){var t=c.absUrl(),r=n.$broadcast("$locationChangeStart",t,e,c.$$state,o).defaultPrevented;c.absUrl()===t&&(r?(c.$$parse(e),c.$$state=o):(l&&s(t,a,o===c.$$state?null:c.$$state),u(e,o)))})),c.$$replace=!1}),c}]}function tr(){var e=!0,t=this;this.debugEnabled=function(t){return g(t)?(e=t,this):e},this.$get=["$window",function(n){function i(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function o(e){var t=n.console||{},o=t[e]||t.log||p,a=!1;try{a=!!o.apply}catch(s){}return a?function(){var e=[];return r(arguments,function(t){e.push(i(t))}),o.apply(t,e)}:function(e,t){o(e,null==t?"":t)}}return{log:o("log"),info:o("info"),warn:o("warn"),error:o("error"),debug:function(){var n=o("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function nr(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw xa("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function rr(e){return e+""}function ir(e,t){if(e){if(e.constructor===e)throw xa("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.window===e)throw xa("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw xa("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw xa("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}function or(e,t){if(e){if(e.constructor===e)throw xa("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===Da||e===Ra||e===Pa)throw xa("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function ar(e,t){if(e&&(e===Ca||e===Sa||e===Ea||e===Aa||e===ka||e===Oa||e===Ma||e===Ta||e===Va||e===ja||e===Na||e===Ia))throw xa("isecaf","Assigning to a constructor or its prototype is disallowed! Expression: {0}",t)}function sr(e,t){return"undefined"!=typeof e?e:t}function ur(e,t){return"undefined"==typeof e?t:"undefined"==typeof t?e:e+t}function cr(e,t){var n=e(t);return!n.$stateful}function lr(e,t){var n,i,o;switch(e.type){case La.Program:n=!0,r(e.body,function(e){lr(e.expression,t),n=n&&e.expression.constant}),e.constant=n;break;case La.Literal:e.constant=!0,e.toWatch=[];break;case La.UnaryExpression:lr(e.argument,t),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case La.BinaryExpression:lr(e.left,t),lr(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case La.LogicalExpression:lr(e.left,t),lr(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case La.ConditionalExpression:lr(e.test,t),lr(e.alternate,t),lr(e.consequent,t),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case La.Identifier:e.constant=!1,e.toWatch=[e];break;case La.MemberExpression:lr(e.object,t),e.computed&&lr(e.property,t),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=[e];break;case La.CallExpression:o=e.filter?cr(t,e.callee.name):!1,n=o,i=[],r(e.arguments,function(e){lr(e,t),n=n&&e.constant,e.constant||i.push.apply(i,e.toWatch)}),e.constant=n,e.toWatch=o?i:[e];break;case La.AssignmentExpression:lr(e.left,t),lr(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case La.ArrayExpression:n=!0,i=[],r(e.elements,function(e){lr(e,t),n=n&&e.constant,e.constant||i.push.apply(i,e.toWatch)}),e.constant=n,e.toWatch=i;break;case La.ObjectExpression:n=!0,i=[],r(e.properties,function(e){lr(e.value,t),n=n&&e.value.constant&&!e.computed,e.value.constant||i.push.apply(i,e.value.toWatch)}),e.constant=n,e.toWatch=i;break;case La.ThisExpression:e.constant=!1,e.toWatch=[];break;case La.LocalsExpression:e.constant=!1,e.toWatch=[]}}function fr(e){if(1===e.length){var t=e[0].expression,n=t.toWatch;return 1!==n.length?n:n[0]!==t?n:void 0}}function hr(e){return e.type===La.Identifier||e.type===La.MemberExpression}function pr(e){return 1===e.body.length&&hr(e.body[0].expression)?{type:La.AssignmentExpression,left:e.body[0].expression,right:{type:La.NGValueParameter},operator:"="}:void 0}function dr(e){return 0===e.body.length||1===e.body.length&&(e.body[0].expression.type===La.Literal||e.body[0].expression.type===La.ArrayExpression||e.body[0].expression.type===La.ObjectExpression)}function $r(e){return e.constant}function vr(e,t){this.astBuilder=e,this.$filter=t}function mr(e,t){this.astBuilder=e,this.$filter=t}function gr(e){return"constructor"===e}function yr(e){return S(e.valueOf)?e.valueOf():_a.call(e)}function br(){var e,t,n=$t(),i=$t(),o={"true":!0,"false":!1,"null":null,undefined:void 0};this.addLiteral=function(e,t){o[e]=t},this.setIdentifierFns=function(n,r){return e=n,t=r,this},this.$get=["$filter",function(a){function s(e,t,r){var o,s,c;switch(r=r||b,typeof e){case"string":e=e.trim(),c=e;var v=r?i:n;if(o=v[c],!o){":"===e.charAt(0)&&":"===e.charAt(1)&&(s=!0,e=e.substring(2));var g=r?y:m,w=new Fa(g),x=new Ha(w,a,g);o=x.parse(e),o.constant?o.$$watchDelegate=d:s?o.$$watchDelegate=o.literal?h:f:o.inputs&&(o.$$watchDelegate=l),r&&(o=u(o)),v[c]=o}return $(o,t);case"function":return $(e,t);default:return $(p,t)}}function u(e){function t(t,n,r,i){var o=b;b=!0;try{return e(t,n,r,i)}finally{b=o}}if(!e)return e;t.$$watchDelegate=e.$$watchDelegate,t.assign=u(e.assign),t.constant=e.constant,t.literal=e.literal;for(var n=0;e.inputs&&n<e.inputs.length;++n)e.inputs[n]=u(e.inputs[n]);return t.inputs=e.inputs,t}function c(e,t){return null==e||null==t?e===t:"object"==typeof e&&(e=yr(e),"object"==typeof e)?!1:e===t||e!==e&&t!==t}function l(e,t,n,r,i){var o,a=r.inputs;if(1===a.length){var s=c;return a=a[0],e.$watch(function(e){var t=a(e);return c(t,s)||(o=r(e,void 0,void 0,[t]),s=t&&yr(t)),o},t,n,i)}for(var u=[],l=[],f=0,h=a.length;h>f;f++)u[f]=c,l[f]=null;return e.$watch(function(e){for(var t=!1,n=0,i=a.length;i>n;n++){var s=a[n](e);(t||(t=!c(s,u[n])))&&(l[n]=s,u[n]=s&&yr(s))}return t&&(o=r(e,void 0,void 0,l)),o},t,n,i)}function f(e,t,n,r){var i,o;return i=e.$watch(function(e){return r(e)},function(e,n,r){o=e,S(t)&&t.apply(this,arguments),g(e)&&r.$$postDigest(function(){g(o)&&i()})},n)}function h(e,t,n,i){function o(e){var t=!0;return r(e,function(e){g(e)||(t=!1)}),t}var a,s;return a=e.$watch(function(e){return i(e)},function(e,n,r){s=e,S(t)&&t.call(this,e,n,r),o(e)&&r.$$postDigest(function(){o(s)&&a()})},n)}function d(e,t,n,r){var i=e.$watch(function(e){return i(),r(e)},t,n);return i}function $(e,t){if(!t)return e;var n=e.$$watchDelegate,r=!1,i=n!==h&&n!==f,o=i?function(n,i,o,a){var s=r&&a?a[0]:e(n,i,o,a);return t(s,n,i)}:function(n,r,i,o){var a=e(n,r,i,o),s=t(a,n,r);return g(a)?s:a};return e.$$watchDelegate&&e.$$watchDelegate!==l?o.$$watchDelegate=e.$$watchDelegate:t.$stateful||(o.$$watchDelegate=l,r=!e.inputs,o.inputs=e.inputs?e.inputs:[e]),o}var v=so().noUnsafeEval,m={csp:v,expensiveChecks:!1,literals:q(o),isIdentifierStart:S(e)&&e,isIdentifierContinue:S(t)&&t},y={csp:v,expensiveChecks:!0,literals:q(o),isIdentifierStart:S(e)&&e,isIdentifierContinue:S(t)&&t},b=!1;return s.$$runningExpensiveChecks=function(){return b},s}]}function wr(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return Cr(function(t){e.$evalAsync(t)},t)}]}function xr(){this.$get=["$browser","$exceptionHandler",function(e,t){return Cr(function(t){e.defer(t)},t)}]}function Cr(e,n){function i(){var e=new l;return e.resolve=a(e,e.resolve),e.reject=a(e,e.reject),e.notify=a(e,e.notify),e}function o(){this.$$state={status:0}}function a(e,t){return function(n){t.call(e,n)}}function s(e){var t,r,i;i=e.pending,e.processScheduled=!1,e.pending=void 0;for(var o=0,a=i.length;a>o;++o){r=i[o][0],t=i[o][e.status];try{S(t)?r.resolve(t(e.value)):1===e.status?r.resolve(e.value):r.reject(e.value)}catch(s){r.reject(s),n(s)}}}function u(t){!t.processScheduled&&t.pending&&(t.processScheduled=!0,e(function(){s(t)}))}function l(){this.promise=new o}function f(e){var t=new l;return t.reject(e),t.promise}function h(e,t,n){var r=null;try{S(n)&&(r=n())}catch(i){return f(i)}return j(r)?r.then(function(){return t(e)},f):t(e)}function p(e,t,n,r){var i=new l;return i.resolve(e),i.promise.then(t,n,r)}function d(e){var t=new l,n=0,i=ro(e)?[]:{};return r(e,function(e,r){n++,p(e).then(function(e){i[r]=e,--n||t.resolve(i)},function(e){t.reject(e)})}),0===n&&t.resolve(i),t.promise}function $(e){var t=i();return r(e,function(e){p(e).then(t.resolve,t.reject)}),t.promise}function v(e){function t(e){r.resolve(e)}function n(e){r.reject(e)}if(!S(e))throw g("norslvr","Expected resolverFn, got '{0}'",e);var r=new l;return e(t,n),r.promise}var g=t("$q",TypeError);c(o.prototype,{then:function(e,t,n){if(m(e)&&m(t)&&m(n))return this;var r=new l;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),this.$$state.status>0&&u(this.$$state),r.promise},"catch":function(e){return this.then(null,e)},"finally":function(e,t){return this.then(function(t){return h(t,b,e)},function(t){return h(t,f,e)},t)}}),c(l.prototype,{resolve:function(e){this.promise.$$state.status||(e===this.promise?this.$$reject(g("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):this.$$resolve(e))},$$resolve:function(e){function t(e){s||(s=!0,o.$$resolve(e))}function r(e){s||(s=!0,o.$$reject(e))}var i,o=this,s=!1;try{(y(e)||S(e))&&(i=e&&e.then),S(i)?(this.promise.$$state.status=-1,i.call(e,t,r,a(this,this.notify))):(this.promise.$$state.value=e,this.promise.$$state.status=1,u(this.promise.$$state))}catch(c){r(c),n(c)}},reject:function(e){this.promise.$$state.status||this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,u(this.promise.$$state)},notify:function(t){var r=this.promise.$$state.pending;this.promise.$$state.status<=0&&r&&r.length&&e(function(){for(var e,i,o=0,a=r.length;a>o;o++){i=r[o][0],e=r[o][3];try{i.notify(S(e)?e(t):t)}catch(s){n(s)}}})}});var b=p;return v.prototype=o.prototype,v.defer=i,v.reject=f,v.when=p,v.resolve=b,v.all=d,v.race=$,v}function Sr(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return o.supported=i,o}]}function Er(){function e(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=a(),this.$$ChildScope=null}return t.prototype=e,t}var i=10,o=t("$rootScope"),s=null,u=null;this.digestTtl=function(e){return arguments.length&&(i=e),i},this.$get=["$exceptionHandler","$parse","$browser",function(t,c,l){function f(e){e.currentScope.$$destroyed=!0}function h(e){9===Bi&&(e.$$childHead&&h(e.$$childHead),e.$$nextSibling&&h(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}function d(){this.$id=a(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function $(e){if(E.$$phase)throw o("inprog","{0} already in progress",E.$$phase);E.$$phase=e}function v(){E.$$phase=null}function g(e,t){do e.$$watchersCount+=t;while(e=e.$parent)}function b(e,t,n){do e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n];while(e=e.$parent)}function w(){}function x(){for(;O.length;)try{O.shift()()}catch(e){t(e)}u=null}function C(){null===u&&(u=l.defer(function(){E.$apply(x)}))}d.prototype={constructor:d,$new:function(t,n){var r;return n=n||this,t?(r=new d,r.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=e(this)),r=new this.$$ChildScope),r.$parent=n,r.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=r,n.$$childTail=r):n.$$childHead=n.$$childTail=r,(t||n!==this)&&r.$on("$destroy",f),r},$watch:function(e,t,n,r){var i=c(e);if(i.$$watchDelegate)return i.$$watchDelegate(this,t,n,i,e);var o=this,a=o.$$watchers,u={fn:t,last:w,get:i,exp:r||e,eq:!!n};return s=null,S(t)||(u.fn=p),a||(a=o.$$watchers=[],a.$$digestWatchIndex=-1),a.unshift(u),a.$$digestWatchIndex++,g(this,1),function(){var e=_(a,u);e>=0&&(g(o,-1),e<a.$$digestWatchIndex&&a.$$digestWatchIndex--),s=null}},$watchGroup:function(e,t){function n(){u=!1,c?(c=!1,t(o,o,s)):t(o,i,s)}var i=new Array(e.length),o=new Array(e.length),a=[],s=this,u=!1,c=!0;if(!e.length){var l=!0;return s.$evalAsync(function(){l&&t(o,o,s)}),function(){l=!1}}return 1===e.length?this.$watch(e[0],function(e,n,r){o[0]=e,i[0]=n,t(o,e===n?o:i,r)}):(r(e,function(e,t){var r=s.$watch(e,function(e,r){o[t]=e,i[t]=r,u||(u=!0,s.$evalAsync(n))});a.push(r)}),function(){for(;a.length;)a.shift()()})},$watchCollection:function(e,t){function r(e){o=e;var t,r,i,s,u;if(!m(o)){if(y(o))if(n(o)){a!==p&&(a=p,v=a.length=0,f++),t=o.length,v!==t&&(f++,a.length=v=t);for(var c=0;t>c;c++)u=a[c],s=o[c],i=u!==u&&s!==s,i||u===s||(f++,a[c]=s)}else{a!==d&&(a=d={},v=0,f++),t=0;for(r in o)qi.call(o,r)&&(t++,s=o[r],u=a[r],r in a?(i=u!==u&&s!==s,i||u===s||(f++,a[r]=s)):(v++,a[r]=s,f++));if(v>t){f++;for(r in a)qi.call(o,r)||(v--,delete a[r])}}else a!==o&&(a=o,f++);return f}}function i(){if($?($=!1,t(o,o,u)):t(o,s,u),l)if(y(o))if(n(o)){s=new Array(o.length);for(var e=0;e<o.length;e++)s[e]=o[e]}else{s={};for(var r in o)qi.call(o,r)&&(s[r]=o[r])}else s=o}r.$stateful=!0;var o,a,s,u=this,l=t.length>1,f=0,h=c(e,r),p=[],d={},$=!0,v=0;return this.$watch(h,i)},$digest:function(){var e,n,r,a,c,f,h,p,d,m,g,y=i,b=this,C=[];$("$digest"),l.$$checkUrlChange(),this===E&&null!==u&&(l.defer.cancel(u),x()),s=null;do{h=!1,d=b;for(var O=0;O<A.length;O++){try{g=A[O],g.scope.$eval(g.expression,g.locals)}catch(T){t(T)}s=null}A.length=0;e:do{if(f=d.$$watchers)for(f.$$digestWatchIndex=f.length;f.$$digestWatchIndex--;)try{if(e=f[f.$$digestWatchIndex])if(c=e.get,(n=c(d))===(r=e.last)||(e.eq?U(n,r):no(n)&&no(r))){if(e===s){h=!1;break e}}else h=!0,s=e,e.last=e.eq?q(n,null):n,a=e.fn,a(n,r===w?n:r,d),5>y&&(m=4-y,C[m]||(C[m]=[]),C[m].push({msg:S(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:n,oldVal:r}))}catch(T){t(T)}if(!(p=d.$$watchersCount&&d.$$childHead||d!==b&&d.$$nextSibling))for(;d!==b&&!(p=d.$$nextSibling);)d=d.$parent}while(d=p);if((h||A.length)&&!y--)throw v(),o("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",i,C)}while(h||A.length);for(v();M<k.length;)try{k[M++]()}catch(T){t(T)}k.length=M=0},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===E&&l.$$applicationDestroyed(),g(this,-this.$$watchersCount);for(var t in this.$$listenerCount)b(this,this.$$listenerCount[t],t);e&&e.$$childHead===this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail===this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=p,this.$on=this.$watch=this.$watchGroup=function(){return p},this.$$listeners={},this.$$nextSibling=null,h(this)}},$eval:function(e,t){return c(e)(this,t)},$evalAsync:function(e,t){E.$$phase||A.length||l.defer(function(){A.length&&E.$digest()}),A.push({scope:this,expression:c(e),locals:t})},$$postDigest:function(e){k.push(e)},$apply:function(e){try{$("$apply");try{return this.$eval(e)}finally{v()}}catch(n){t(n)}finally{try{E.$digest()}catch(n){throw t(n),n}}},$applyAsync:function(e){function t(){n.$eval(e)}var n=this;e&&O.push(t),e=c(e),C()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++;while(r=r.$parent);var i=this;return function(){var r=n.indexOf(t);-1!==r&&(n[r]=null,b(i,1,e))}},$emit:function(e){var n,r,i,o=[],a=this,s=!1,u={name:e,targetScope:a,stopPropagation:function(){s=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},c=F([u],arguments,1);do{for(n=a.$$listeners[e]||o,u.currentScope=a,r=0,i=n.length;i>r;r++)if(n[r])try{n[r].apply(null,c)}catch(l){t(l)}else n.splice(r,1),r--,i--;if(s)return u.currentScope=null,u;a=a.$parent}while(a);return u.currentScope=null,u},$broadcast:function(e){var n=this,r=n,i=n,o={name:e,targetScope:n,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[e])return o;for(var a,s,u,c=F([o],arguments,1);r=i;){for(o.currentScope=r,a=r.$$listeners[e]||[],s=0,u=a.length;u>s;s++)if(a[s])try{a[s].apply(null,c)}catch(l){t(l)}else a.splice(s,1),s--,u--;if(!(i=r.$$listenerCount[e]&&r.$$childHead||r!==n&&r.$$nextSibling))for(;r!==n&&!(i=r.$$nextSibling);)r=r.$parent}return o.currentScope=null,o}};var E=new d,A=E.$$asyncQueue=[],k=E.$$postDigestQueue=[],O=E.$$applyAsyncQueue=[],M=0;return E}]}function Ar(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return g(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return g(e)?(t=e,this):t},this.$get=function(){return function(n,r){var i,o=r?t:e;return i=Dr(n).href,""===i||i.match(o)?n:"unsafe:"+i}}}function kr(e){if("self"===e)return e;if(w(e)){if(e.indexOf("***")>-1)throw Ba("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=ao(e).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+e+"$")}if(E(e))return new RegExp("^"+e.source+"$");throw Ba("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Or(e){var t=[];return g(e)&&r(e,function(e){t.push(kr(e))}),t}function Mr(){this.SCE_CONTEXTS=za;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Or(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=Or(e)),t},this.$get=["$injector",function(n){function r(e,t){return"self"===e?Rr(t):!!e.exec(t.href)}function i(n){var i,o,a=Dr(n.toString()),s=!1;for(i=0,o=e.length;o>i;i++)if(r(e[i],a)){s=!0;break}if(s)for(i=0,o=t.length;o>i;i++)if(r(t[i],a)){s=!1;break}return s}function o(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function a(e,t){var n=f.hasOwnProperty(e)?f[e]:null;if(!n)throw Ba("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||m(t)||""===t)return t;if("string"!=typeof t)throw Ba("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)}function s(e){return e instanceof l?e.$$unwrapTrustedValue():e}function u(e,t){if(null===t||m(t)||""===t)return t;var n=f.hasOwnProperty(e)?f[e]:null;if(n&&t instanceof n)return t.$$unwrapTrustedValue();if(e===za.RESOURCE_URL){if(i(t))return t;throw Ba("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===za.HTML)return c(t);throw Ba("unsafe","Attempting to use an unsafe value in a safe context.")}var c=function(){throw Ba("unsafe","Attempting to use an unsafe value in a safe context.")};n.has("$sanitize")&&(c=n.get("$sanitize"));var l=o(),f={};return f[za.HTML]=o(l),f[za.CSS]=o(l),f[za.URL]=o(l),f[za.JS]=o(l),f[za.RESOURCE_URL]=o(f[za.URL]),{trustAs:a,getTrusted:u,valueOf:s}}]}function Tr(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&8>Bi)throw Ba("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=mt(za);i.isEnabled=function(){return e},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,e||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=d),i.parseAs=function(e,n){var r=t(n);return r.literal&&r.constant?r:t(n,function(t){return i.getTrusted(e,t)})};var o=i.parseAs,a=i.getTrusted,s=i.trustAs;return r(za,function(e,t){var n=Ui(t);i[xt("parse_as_"+n)]=function(t){return o(e,t)},i[xt("get_trusted_"+n)]=function(t){return a(e,t)},i[xt("trust_as_"+n)]=function(t){return s(e,t)}}),i}]}function Vr(){this.$get=["$window","$document",function(e,t){var n,r,i={},o=e.chrome&&(e.chrome.app&&e.chrome.app.runtime||!e.chrome.app&&e.chrome.runtime&&e.chrome.runtime.id),a=!o&&e.history&&e.history.pushState,s=f((/android (\d+)/.exec(Ui((e.navigator||{}).userAgent))||[])[1]),u=/Boxee/i.test((e.navigator||{}).userAgent),c=t[0]||{},l=/^(Moz|webkit|ms)(?=[A-Z])/,h=c.body&&c.body.style,p=!1,d=!1;if(h){for(var $ in h)if(r=l.exec($)){n=r[0],n=n[0].toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in h&&"webkit"),p=!!("transition"in h||n+"Transition"in h),d=!!("animation"in h||n+"Animation"in h),!s||p&&d||(p=w(h.webkitTransition),d=w(h.webkitAnimation))}return{history:!(!a||4>s||u),hasEvent:function(e){if("input"===e&&11>=Bi)return!1;if(m(i[e])){var t=c.createElement("div");i[e]="on"+e in t}return i[e]},csp:so(),vendorPrefix:n,transitions:p,animations:d,android:s}}]}function jr(){var e;this.httpOptions=function(t){return t?(e=t,this):e},this.$get=["$templateCache","$http","$q","$sce",function(t,n,r,i){function o(a,s){function u(e){if(!s)throw Wa("tpload","Failed to load template: {0} (HTTP status: {1} {2})",a,e.status,e.statusText);return r.reject(e)}o.totalPendingRequests++,(!w(a)||m(t.get(a)))&&(a=i.getTrustedResourceUrl(a));var l=n.defaults&&n.defaults.transformResponse;return ro(l)?l=l.filter(function(e){return e!==On}):l===On&&(l=null),n.get(a,c({cache:t,transformResponse:l},e))["finally"](function(){o.totalPendingRequests--}).then(function(e){return t.put(a,e.data),e.data},u)}return o.totalPendingRequests=0,o}]}function Nr(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var i={};return i.findBindings=function(e,t,n){var i=e.getElementsByClassName("ng-binding"),o=[];return r(i,function(e){var i=eo.element(e).data("$binding");i&&r(i,function(r){if(n){var i=new RegExp("(^|\\s)"+ao(t)+"(\\s|\\||$)");i.test(r)&&o.push(e)}else-1!==r.indexOf(t)&&o.push(e)})}),o},i.findModels=function(e,t,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o=n?"=":"*=",a="["+r[i]+"model"+o+'"'+t+'"]',s=e.querySelectorAll(a);if(s.length)return s}},i.getLocation=function(){return n.url()},i.setLocation=function(t){t!==n.url()&&(n.url(t),e.$digest())},i.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},i}]}function Ir(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,r,i){function o(o,s,u){S(o)||(u=s,s=o,o=p);var c,l=L(arguments,3),f=g(u)&&!u,h=(f?r:n).defer(),d=h.promise;return c=t.defer(function(){try{h.resolve(o.apply(null,l))}catch(t){h.reject(t),i(t)}finally{delete a[d.$$timeoutId]}f||e.$apply()},s),d.$$timeoutId=c,a[c]=h,d}var a={};return o.cancel=function(e){return e&&e.$$timeoutId in a?(a[e.$$timeoutId].reject("canceled"),delete a[e.$$timeoutId],t.defer.cancel(e.$$timeoutId)):!1},o}]}function Dr(e){var t=e;return Bi&&(Ga.setAttribute("href",t),t=Ga.href),Ga.setAttribute("href",t),{href:Ga.href,protocol:Ga.protocol?Ga.protocol.replace(/:$/,""):"",host:Ga.host,search:Ga.search?Ga.search.replace(/^\?/,""):"",hash:Ga.hash?Ga.hash.replace(/^#/,""):"",hostname:Ga.hostname,port:Ga.port,pathname:"/"===Ga.pathname.charAt(0)?Ga.pathname:"/"+Ga.pathname}}function Rr(e){var t=w(e)?Dr(e):e;return t.protocol===Za.protocol&&t.host===Za.host}function Pr(){this.$get=$(e)}function _r(e){function t(e){try{return e.cookie||""}catch(t){return""}}function n(e){try{return decodeURIComponent(e)}catch(t){return e}}var r=e[0]||{},i={},o="";return function(){var e,a,s,u,c,l=t(r);if(l!==o)for(o=l,e=o.split("; "),i={},s=0;s<e.length;s++)a=e[s],u=a.indexOf("="),u>0&&(c=n(a.substring(0,u)),m(i[c])&&(i[c]=n(a.substring(u+1))));return i}}function qr(){this.$get=_r}function Ur(e){function t(i,o){if(y(i)){var a={};return r(i,function(e,n){a[n]=t(n,e)}),a}return e.factory(i+n,o)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",zr),t("date",ai),t("filter",Fr),t("json",si),t("limitTo",ui),t("lowercase",ts),t("number",Wr),t("orderBy",li),t("uppercase",ns)}function Fr(){return function(e,r,i,o){if(!n(e)){if(null==e)return e;throw t("filter")("notarray","Expected array but received: {0}",e)}o=o||"$";var a,s,u=Br(r);switch(u){case"function":a=r;break;case"boolean":case"null":case"number":case"string":s=!0;case"object":a=Lr(r,i,o,s);break;default:return e}return Array.prototype.filter.call(e,a)}}function Lr(e,t,n,r){var i,o=y(e)&&n in e;return t===!0?t=U:S(t)||(t=function(e,t){return m(e)?!1:null===e||null===t?e===t:y(t)||y(e)&&!v(e)?!1:(e=Ui(""+e),t=Ui(""+t),-1!==e.indexOf(t))}),i=function(i){return o&&!y(i)?Hr(i,e[n],t,n,!1):Hr(i,e,t,n,r)}}function Hr(e,t,n,r,i,o){var a=Br(e),s=Br(t);if("string"===s&&"!"===t.charAt(0))return!Hr(e,t.substring(1),n,r,i);if(ro(e))return e.some(function(e){return Hr(e,t,n,r,i)});switch(a){case"object":var u;if(i){for(u in e)if("$"!==u.charAt(0)&&Hr(e[u],t,n,r,!0))return!0;return o?!1:Hr(e,t,n,r,!1)}if("object"===s){for(u in t){var c=t[u];if(!S(c)&&!m(c)){var l=u===r,f=l?e:e[u];if(!Hr(f,c,n,r,l,l))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function Br(e){return null===e?"null":typeof e}function zr(e){var t=e.NUMBER_FORMATS;return function(e,n,r){return m(n)&&(n=t.CURRENCY_SYM),m(r)&&(r=t.PATTERNS[1].maxFrac),null==e?e:Jr(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function Wr(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:Jr(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function Gr(e){var t,n,r,i,o,a=0;for((n=e.indexOf(Ya))>-1&&(e=e.replace(Ya,"")),(r=e.search(/e/i))>0?(0>n&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):0>n&&(n=e.length),r=0;e.charAt(r)===Ka;r++);if(r===(o=e.length))t=[0],n=1;else{for(o--;e.charAt(o)===Ka;)o--;for(n-=r,t=[],i=0;o>=r;r++,i++)t[i]=+e.charAt(r)}return n>Ja&&(t=t.splice(0,Ja-1),a=n-1,n=1),{d:t,e:a,i:n}}function Zr(e,t,n,r){var i=e.d,o=i.length-e.i;t=m(t)?Math.min(Math.max(n,o),r):+t;var a=t+e.i,s=i[a];if(a>0){i.splice(Math.max(e.i,a));for(var u=a;u<i.length;u++)i[u]=0}else{o=Math.max(0,o),e.i=1,i.length=Math.max(1,a=t+1),i[0]=0;for(var c=1;a>c;c++)i[c]=0}if(s>=5)if(0>a-1){for(var l=0;l>a;l--)i.unshift(0),e.i++;i.unshift(1),e.i++}else i[a-1]++;for(;o<Math.max(0,t);o++)i.push(0);var f=i.reduceRight(function(e,t,n,r){return t+=e,r[n]=t%10,Math.floor(t/10)},0);f&&(i.unshift(f),e.i++)}function Jr(e,t,n,r,i){if(!w(e)&&!x(e)||isNaN(e))return"";var o,a=!isFinite(e),s=!1,u=Math.abs(e)+"",c="";if(a)c="";else{o=Gr(u),Zr(o,i,t.minFrac,t.maxFrac);var l=o.d,f=o.i,h=o.e,p=[];for(s=l.reduce(function(e,t){return e&&!t},!0);0>f;)l.unshift(0),f++;f>0?p=l.splice(f,l.length):(p=l,l=[0]);var d=[];for(l.length>=t.lgSize&&d.unshift(l.splice(-t.lgSize,l.length).join(""));l.length>t.gSize;)d.unshift(l.splice(-t.gSize,l.length).join(""));l.length&&d.unshift(l.join("")),c=d.join(n),p.length&&(c+=r+p.join("")),h&&(c+="e+"+h)}return 0>e&&!s?t.negPre+c+t.negSuf:t.posPre+c+t.posSuf}function Yr(e,t,n,r){var i="";for((0>e||r&&0>=e)&&(r?e=-e+1:(e=-e,i="-")),e=""+e;e.length<t;)e=Ka+e;return n&&(e=e.substr(e.length-t)),i+e}function Kr(e,t,n,r,i){return n=n||0,function(o){var a=o["get"+e]();return(n>0||a>-n)&&(a+=n),0===a&&-12===n&&(a=12),Yr(a,t,r,i)}}function Xr(e,t,n){return function(r,i){var o=r["get"+e](),a=(n?"STANDALONE":"")+(t?"SHORT":""),s=Fi(a+e);return i[s][o]}}function Qr(e,t,n){var r=-1*n,i=r>=0?"+":"";return i+=Yr(Math[r>0?"floor":"ceil"](r/60),2)+Yr(Math.abs(r%60),2)}function ei(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(4>=t?5:12)-t)}function ti(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function ni(e){return function(t){var n=ei(t.getFullYear()),r=ti(t),i=+r-+n,o=1+Math.round(i/6048e5);return Yr(o,e)}}function ri(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function ii(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function oi(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}function ai(e){function t(e){var t;if(t=e.match(n)){var r=new Date(0),i=0,o=0,a=t[8]?r.setUTCFullYear:r.setFullYear,s=t[8]?r.setUTCHours:r.setHours;t[9]&&(i=f(t[9]+t[10]),o=f(t[9]+t[11])),a.call(r,f(t[1]),f(t[2])-1,f(t[3]));var u=f(t[4]||0)-i,c=f(t[5]||0)-o,l=f(t[6]||0),h=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(r,u,c,l,h),r}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i,o){var a,s,u="",c=[];if(i=i||"mediumDate",i=e.DATETIME_FORMATS[i]||i,w(n)&&(n=es.test(n)?f(n):t(n)),x(n)&&(n=new Date(n)),!C(n)||!isFinite(n.getTime()))return n;for(;i;)s=Qa.exec(i),s?(c=F(c,s,1),i=c.pop()):(c.push(i),i=null);var l=n.getTimezoneOffset();return o&&(l=G(o,l),n=J(n,o,!0)),r(c,function(t){a=Xa[t],u+=a?a(n,e.DATETIME_FORMATS,l):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}}function si(){return function(e,t){return m(t)&&(t=2),z(e,t)}}function ui(){return function(e,t,r){return t=1/0===Math.abs(Number(t))?Number(t):f(t),no(t)?e:(x(e)&&(e=e.toString()),n(e)?(r=!r||isNaN(r)?0:f(r),r=0>r?Math.max(0,e.length+r):r,t>=0?ci(e,r,r+t):0===r?ci(e,t,e.length):ci(e,Math.max(0,r+t),r)):e)}}function ci(e,t,n){return w(e)?e.slice(t,n):Zi.call(e,t,n)}function li(e){function r(t){return t.map(function(t){var n=1,r=d;if(S(t))r=t;else if(w(t)&&(("+"===t.charAt(0)||"-"===t.charAt(0))&&(n="-"===t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(r=e(t),r.constant))){var i=r();r=function(e){return e[i]}}return{get:r,descending:n}})}function i(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function o(e){return S(e.valueOf)&&(e=e.valueOf(),i(e))?e:v(e)&&(e=e.toString(),i(e))?e:e}function a(e,t){var n=typeof e;return null===e?(n="string",e="null"):"object"===n&&(e=o(e)),{value:e,type:n,index:t}}function s(e,t){var n=0,r=e.type,i=t.type;if(r===i){var o=e.value,a=t.value;"string"===r?(o=o.toLowerCase(),a=a.toLowerCase()):"object"===r&&(y(o)&&(o=e.index),y(a)&&(a=t.index)),o!==a&&(n=a>o?-1:1)}else n=i>r?-1:1;return n}return function(e,i,o,u){function c(e,t){return{value:e,tieBreaker:{value:t,type:"number",index:t},predicateValues:f.map(function(n){return a(n.get(e),t)})}}function l(e,t){for(var n=0,r=f.length;r>n;n++){var i=p(e.predicateValues[n],t.predicateValues[n]);if(i)return i*f[n].descending*h}return p(e.tieBreaker,t.tieBreaker)*h}if(null==e)return e;if(!n(e))throw t("orderBy")("notarray","Expected array but received: {0}",e);ro(i)||(i=[i]),0===i.length&&(i=["+"]);var f=r(i),h=o?-1:1,p=S(u)?u:s,d=Array.prototype.map.call(e,c);return d.sort(l),e=d.map(function(e){return e.value})}}function fi(e){return S(e)&&(e={link:e}),e.restrict=e.restrict||"AC",$(e)}function hi(e,t){e.$name=t}function pi(e,t,n,i,o){var a=this,s=[];a.$error={},a.$$success={},a.$pending=void 0,a.$name=o(t.name||t.ngForm||"")(n),a.$dirty=!1,a.$pristine=!0,a.$valid=!0,a.$invalid=!1,a.$submitted=!1,a.$$parentForm=os,a.$rollbackViewValue=function(){r(s,function(e){e.$rollbackViewValue()})},a.$commitViewValue=function(){r(s,function(e){e.$commitViewValue()})},a.$addControl=function(e){ht(e.$name,"input"),s.push(e),e.$name&&(a[e.$name]=e),e.$$parentForm=a},a.$$renameControl=function(e,t){var n=e.$name;a[n]===e&&delete a[n],a[t]=e,e.$name=t},a.$removeControl=function(e){e.$name&&a[e.$name]===e&&delete a[e.$name],r(a.$pending,function(t,n){a.$setValidity(n,null,e)}),r(a.$error,function(t,n){a.$setValidity(n,null,e)}),r(a.$$success,function(t,n){a.$setValidity(n,null,e)}),_(s,e),e.$$parentForm=os},Ii({ctrl:this,$element:e,set:function(e,t,n){var r=e[t];if(r){var i=r.indexOf(n);-1===i&&r.push(n)}else e[t]=[n]},unset:function(e,t,n){var r=e[t];r&&(_(r,n),0===r.length&&delete e[t])},$animate:i}),a.$setDirty=function(){i.removeClass(e,Hs),i.addClass(e,Bs),a.$dirty=!0,a.$pristine=!1,a.$$parentForm.$setDirty()},a.$setPristine=function(){i.setClass(e,Hs,Bs+" "+as),a.$dirty=!1,a.$pristine=!0,a.$submitted=!1,r(s,function(e){e.$setPristine()})},a.$setUntouched=function(){r(s,function(e){e.$setUntouched()})},a.$setSubmitted=function(){i.addClass(e,as),a.$submitted=!0,a.$$parentForm.$setSubmitted()}}function di(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function $i(e,t,n,r,i,o){vi(e,t,n,r,i,o),di(r)}function vi(e,t,n,r,i,o){var a=Ui(t[0].type);if(!i.android){var s=!1;t.on("compositionstart",function(){s=!0}),t.on("compositionend",function(){s=!1,c()})}var u,c=function(e){if(u&&(o.defer.cancel(u),u=null),!s){var i=t.val(),c=e&&e.type;"password"===a||n.ngTrim&&"false"===n.ngTrim||(i=oo(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,c)}};if(i.hasEvent("input"))t.on("input",c);else{var l=function(e,t,n){u||(u=o.defer(function(){u=null,t&&t.value===n||c(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||t>15&&19>t||t>=37&&40>=t||l(e,this,this.value)}),i.hasEvent("paste")&&t.on("paste cut",l)}t.on("change",c),bs[a]&&r.$$hasNativeValidators&&a===n.type&&t.on(ys,function(e){if(!u){var t=this[_i],n=t.badInput,r=t.typeMismatch;u=o.defer(function(){u=null,(t.badInput!==n||t.typeMismatch!==r)&&c(e)})}}),r.$render=function(){var e=r.$isEmpty(r.$viewValue)?"":r.$viewValue;t.val()!==e&&t.val(e)}}function mi(e,t){if(C(e))return e;if(w(e)){vs.lastIndex=0;var n=vs.exec(e);if(n){var r=+n[1],i=+n[2],o=0,a=0,s=0,u=0,c=ei(r),l=7*(i-1);return t&&(o=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),u=t.getMilliseconds()),new Date(r,0,c.getDate()+l,o,a,s,u)}}return 0/0}function gi(e,t){return function(n,i){var o,a;if(C(n))return n;if(w(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),ls.test(n))return new Date(n);if(e.lastIndex=0,o=e.exec(n))return o.shift(),a=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},r(o,function(e,n){n<t.length&&(a[t[n]]=+e)}),new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0)}return 0/0}}function yi(e,t,n,r){return function(i,o,a,s,u,c,l){function f(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function h(e){return g(e)&&!C(e)?n(e)||void 0:e}bi(i,o,a,s),vi(i,o,a,s,u,c);var p,d=s&&s.$options&&s.$options.timezone;if(s.$$parserName=e,s.$parsers.push(function(e){if(s.$isEmpty(e))return null;if(t.test(e)){var r=n(e,p);return d&&(r=J(r,d)),r}return void 0}),s.$formatters.push(function(e){if(e&&!C(e))throw Ys("datefmt","Expected `{0}` to be a date",e);return f(e)?(p=e,p&&d&&(p=J(p,d,!0)),l("date")(e,r,d)):(p=null,"")}),g(a.min)||a.ngMin){var $;s.$validators.min=function(e){return!f(e)||m($)||n(e)>=$},a.$observe("min",function(e){$=h(e),s.$validate()})}if(g(a.max)||a.ngMax){var v;s.$validators.max=function(e){return!f(e)||m(v)||n(e)<=v},a.$observe("max",function(e){v=h(e),s.$validate()})}}}function bi(e,t,n,r){var i=t[0],o=r.$$hasNativeValidators=y(i.validity);o&&r.$parsers.push(function(e){var n=t.prop(_i)||{};return n.badInput||n.typeMismatch?void 0:e})}function wi(e){e.$$parserName="number",e.$parsers.push(function(t){return e.$isEmpty(t)?null:ps.test(t)?parseFloat(t):void 0}),e.$formatters.push(function(t){if(!e.$isEmpty(t)){if(!x(t))throw Ys("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t})}function xi(e){return g(e)&&!x(e)&&(e=parseFloat(e)),no(e)?void 0:e}function Ci(e){return(0|e)===e}function Si(e){var t=e.toString(),n=t.indexOf(".");if(-1===n){if(e>-1&&1>e){var r=/e-(\d+)$/.exec(t);if(r)return Number(r[1])}return 0}return t.length-n-1}function Ei(e,t,n){var r=Number(e);if(!Ci(r)||!Ci(t)||!Ci(n)){var i=Math.max(Si(r),Si(t),Si(n)),o=Math.pow(10,i);r*=o,t*=o,n*=o}return(r-t)%n===0}function Ai(e,t,n,r,i,o){bi(e,t,n,r),vi(e,t,n,r,i,o),wi(r);var a,s;(g(n.min)||n.ngMin)&&(r.$validators.min=function(e){return r.$isEmpty(e)||m(a)||e>=a},n.$observe("min",function(e){a=xi(e),r.$validate()})),(g(n.max)||n.ngMax)&&(r.$validators.max=function(e){return r.$isEmpty(e)||m(s)||s>=e},n.$observe("max",function(e){s=xi(e),r.$validate()}))}function ki(e,t,n,r,i,o){function a(e,r){t.attr(e,n[e]),n.$observe(e,r)}function s(e){if(f=xi(e),!no(r.$modelValue))if(l){var n=t.val();f>n&&(n=f,t.val(n)),r.$setViewValue(n)}else r.$validate()}function u(e){if(h=xi(e),!no(r.$modelValue))if(l){var n=t.val();n>h&&(t.val(h),n=f>h?f:h),r.$setViewValue(n)}else r.$validate()}function c(e){p=xi(e),no(r.$modelValue)||(l&&r.$viewValue!==t.val()?r.$setViewValue(t.val()):r.$validate())}bi(e,t,n,r),wi(r),vi(e,t,n,r,i,o);var l=r.$$hasNativeValidators&&"range"===t[0].type,f=l?0:void 0,h=l?100:void 0,p=l?1:void 0,d=t[0].validity,$=g(n.min),v=g(n.max),y=g(n.step),b=r.$render;r.$render=l&&g(d.rangeUnderflow)&&g(d.rangeOverflow)?function(){b(),r.$setViewValue(t.val())}:b,$&&(r.$validators.min=l?function(){return!0}:function(e,t){return r.$isEmpty(t)||m(f)||t>=f},a("min",s)),v&&(r.$validators.max=l?function(){return!0}:function(e,t){return r.$isEmpty(t)||m(h)||h>=t},a("max",u)),y&&(r.$validators.step=l?function(){return!d.stepMismatch}:function(e,t){return r.$isEmpty(t)||m(p)||Ei(t,f||0,p)},a("step",c))}function Oi(e,t,n,r,i,o){vi(e,t,n,r,i,o),di(r),r.$$parserName="url",r.$validators.url=function(e,t){var n=e||t;return r.$isEmpty(n)||fs.test(n)}}function Mi(e,t,n,r,i,o){vi(e,t,n,r,i,o),di(r),r.$$parserName="email",r.$validators.email=function(e,t){var n=e||t;return r.$isEmpty(n)||hs.test(n)}}function Ti(e,t,n,r){m(n.name)&&t.attr("name",a());var i=function(e){t[0].checked&&r.$setViewValue(n.value,e&&e.type)};t.on("click",i),r.$render=function(){var e=n.value;t[0].checked=e==r.$viewValue},n.$observe("value",r.$render)}function Vi(e,t,n,r,i){var o;if(g(r)){if(o=e(r),!o.constant)throw Ys("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return o(t)}return i}function ji(e,t,n,r,i,o,a,s){var u=Vi(s,e,"ngTrueValue",n.ngTrueValue,!0),c=Vi(s,e,"ngFalseValue",n.ngFalseValue,!1),l=function(e){r.$setViewValue(t[0].checked,e&&e.type)};t.on("click",l),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return e===!1},r.$formatters.push(function(e){return U(e,u)}),r.$parsers.push(function(e){return e?u:c})}function Ni(e,t){return e="ngClass"+e,["$animate",function(n){function i(e,t){var n=[];e:for(var r=0;r<e.length;r++){for(var i=e[r],o=0;o<t.length;o++)if(i===t[o])continue e;n.push(i)}return n}function o(e){var t=[];return ro(e)?(r(e,function(e){t=t.concat(o(e))}),t):w(e)?e.split(" "):y(e)?(r(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t):e}return{restrict:"AC",link:function(a,s,u){function c(e){var t=f(e,1);u.$addClass(t)}function l(e){var t=f(e,-1);u.$removeClass(t)}function f(e,t){var n=s.data("$classCounts")||$t(),i=[];return r(e,function(e){(t>0||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(t>0)&&i.push(e))}),s.data("$classCounts",n),i.join(" ")}function h(e,t){var r=i(t,e),o=i(e,t);r=f(r,1),o=f(o,-1),r&&r.length&&n.addClass(s,r),o&&o.length&&n.removeClass(s,o)}function p(e){if(t===!0||(1&a.$index)===t){var n=o(e||[]);if(d){if(!U(e,d)){var r=o(d);h(r,n)}}else c(n)}d=ro(e)?e.map(function(e){return mt(e)}):mt(e)}var d;u.$observe("class",function(){p(a.$eval(u[e]))}),"ngClass"!==e&&a.$watch("$index",function(e,n){var r=1&e;if(r!==(1&n)){var i=o(d);r===t?c(i):l(i)}}),a.$watch(u[e],p,!0)}}}]}function Ii(e){function t(e,t,s){m(t)?n("$pending",e,s):r("$pending",e,s),V(t)?t?(l(a.$error,e,s),c(a.$$success,e,s)):(c(a.$error,e,s),l(a.$$success,e,s)):(l(a.$error,e,s),l(a.$$success,e,s)),a.$pending?(i(Gs,!0),a.$valid=a.$invalid=void 0,o("",null)):(i(Gs,!1),a.$valid=Di(a.$error),a.$invalid=!a.$valid,o("",a.$valid));var u;u=a.$pending&&a.$pending[e]?void 0:a.$error[e]?!1:a.$$success[e]?!0:null,o(e,u),a.$$parentForm.$setValidity(e,u,a)}function n(e,t,n){a[e]||(a[e]={}),c(a[e],t,n)}function r(e,t,n){a[e]&&l(a[e],t,n),Di(a[e])&&(a[e]=void 0)}function i(e,t){t&&!u[e]?(f.addClass(s,e),u[e]=!0):!t&&u[e]&&(f.removeClass(s,e),u[e]=!1)}function o(e,t){e=e?"-"+ut(e,"-"):"",i(Fs+e,t===!0),i(Ls+e,t===!1)}var a=e.ctrl,s=e.$element,u={},c=e.set,l=e.unset,f=e.$animate;u[Ls]=!(u[Fs]=s.hasClass(Fs)),a.$setValidity=t}function Di(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function Ri(e){e[0].hasAttribute("selected")&&(e[0].selected=!0)}var Pi=/^\/(.+)\/([a-z]*)$/,_i="validity",qi=Object.prototype.hasOwnProperty,Ui=function(e){return w(e)?e.toLowerCase():e},Fi=function(e){return w(e)?e.toUpperCase():e},Li=function(e){return w(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},Hi=function(e){return w(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(Ui=Li,Fi=Hi);var Bi,zi,Wi,Gi,Zi=[].slice,Ji=[].splice,Yi=[].push,Ki=Object.prototype.toString,Xi=Object.getPrototypeOf,Qi=t("ng"),eo=e.angular||(e.angular={}),to=0;Bi=e.document.documentMode;var no=Number.isNaN||function(e){return e!==e};p.$inject=[],d.$inject=[];var ro=Array.isArray,io=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,oo=function(e){return w(e)?e.trim():e},ao=function(e){return e.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},so=function(){function t(){try{return new Function(""),!1}catch(e){return!0}}if(!g(so.rules)){var n=e.document.querySelector("[ng-csp]")||e.document.querySelector("[data-ng-csp]");if(n){var r=n.getAttribute("ng-csp")||n.getAttribute("data-ng-csp");so.rules={noUnsafeEval:!r||-1!==r.indexOf("no-unsafe-eval"),noInlineStyle:!r||-1!==r.indexOf("no-inline-style")}}else so.rules={noUnsafeEval:t(),noInlineStyle:!1}}return so.rules},uo=function(){if(g(uo.name_))return uo.name_;var t,n,r,i,o=lo.length;for(n=0;o>n;++n)if(r=lo[n],t=e.document.querySelector("["+r.replace(":","\\:")+"jq]")){i=t.getAttribute(r+"jq");break}return uo.name_=i},co=/:/g,lo=["ng-","data-ng-","ng:","x-ng-"],fo=rt(e.document),ho=/[A-Z]/g,po=!1,$o=1,vo=2,mo=3,go=8,yo=9,bo=11,wo={full:"1.5.11",major:1,minor:5,dot:11,codeName:"princely-quest"};Tt.expando="ng339";var xo=Tt.cache={},Co=1,So=function(e,t,n){e.addEventListener(t,n,!1)},Eo=function(e,t,n){e.removeEventListener(t,n,!1)};Tt._data=function(e){return this.cache[e[this.expando]]||{}};var Ao=/([:\-_]+(.))/g,ko=/^moz([A-Z])/,Oo={mouseleave:"mouseout",mouseenter:"mouseover"},Mo=t("jqLite"),To=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Vo=/<|&#?\w+;/,jo=/<([\w:-]+)/,No=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Io={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Io.optgroup=Io.option,Io.tbody=Io.tfoot=Io.colgroup=Io.caption=Io.thead,Io.th=Io.td;var Do=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))},Ro=Tt.prototype={ready:function(t){function n(){r||(r=!0,t())}var r=!1;"complete"===e.document.readyState?e.setTimeout(n):(this.on("DOMContentLoaded",n),Tt(e).on("load",n))},toString:function(){var e=[];return r(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return zi(e>=0?this[e]:this[this.length+e])},length:0,push:Yi,sort:[].sort,splice:[].splice},Po={};r("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Po[Ui(e)]=e});var _o={};r("input,select,option,textarea,button,form,details".split(","),function(e){_o[e]=!0});var qo={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};r({data:Rt,removeData:It,hasData:Et,cleanData:At},function(e,t){Tt[t]=e}),r({data:Rt,inheritedData:Lt,scope:function(e){return zi.data(e,"$scope")||Lt(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return zi.data(e,"$isolateScope")||zi.data(e,"$isolateScopeNoTemplate")},controller:Ft,injector:function(e){return Lt(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:Pt,css:function(e,t,n){return t=xt(t),g(n)?void(e.style[t]=n):e.style[t]},attr:function(e,t,n){var r=e.nodeType;if(r!==mo&&r!==vo&&r!==go){var i=Ui(t);if(Po[i]){if(!g(n))return e[t]||(e.attributes.getNamedItem(t)||p).specified?i:void 0;n?(e[t]=!0,e.setAttribute(t,i)):(e[t]=!1,e.removeAttribute(i))}else if(g(n))e.setAttribute(t,n);else if(e.getAttribute){var o=e.getAttribute(t,2);return null===o?void 0:o}}},prop:function(e,t,n){return g(n)?void(e[t]=n):e[t]},text:function(){function e(e,t){if(m(t)){var n=e.nodeType;return n===$o||n===mo?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(m(t)){if(e.multiple&&"select"===P(e)){var n=[];return r(e.options,function(e){e.selected&&n.push(e.value||e.text)}),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){return m(t)?e.innerHTML:(jt(e,!0),void(e.innerHTML=t))},empty:Ht},function(e,t){Tt.prototype[t]=function(t,n){var r,i,o=this.length;if(e!==Ht&&m(2===e.length&&e!==Pt&&e!==Ft?t:n)){if(y(t)){for(r=0;o>r;r++)if(e===Rt)e(this[r],t);else for(i in t)e(this[r],i,t[i]);return this}for(var a=e.$dv,s=m(a)?Math.min(o,1):o,u=0;s>u;u++){var c=e(this[u],t,n);a=a?a+c:c}return a}for(r=0;o>r;r++)e(this[r],t,n);return this}}),r({removeData:It,on:function(e,t,n,r){if(g(r))throw Mo("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(St(e)){var i=Dt(e,!0),o=i.events,a=i.handle;a||(a=i.handle=Zt(e,o));for(var s=t.indexOf(" ")>=0?t.split(" "):[t],u=s.length,c=function(t,r,i){var s=o[t];s||(s=o[t]=[],s.specialHandlerWrapper=r,"$destroy"===t||i||So(e,t,a)),s.push(n)};u--;)t=s[u],Oo[t]?(c(Oo[t],Yt),c(t,void 0,!0)):c(t)}},off:Nt,one:function(e,t,n){e=zi(e),e.on(t,function r(){e.off(t,n),e.off(t,r)}),e.on(t,n)},replaceWith:function(e,t){var n,i=e.parentNode;jt(e),r(new Tt(t),function(t){n?i.insertBefore(t,n.nextSibling):i.replaceChild(t,e),n=t})},children:function(e){var t=[];return r(e.childNodes,function(e){e.nodeType===$o&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===$o||n===bo){t=new Tt(t);for(var r=0,i=t.length;i>r;r++){var o=t[r];e.appendChild(o)}}},prepend:function(e,t){if(e.nodeType===$o){var n=e.firstChild;r(new Tt(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){Mt(e,zi(t).eq(0).clone()[0])},remove:Bt,detach:function(e){Bt(e,!0)},after:function(e,t){var n=e,r=e.parentNode;if(r){t=new Tt(t);for(var i=0,o=t.length;o>i;i++){var a=t[i];r.insertBefore(a,n.nextSibling),n=a}}},addClass:qt,removeClass:_t,toggleClass:function(e,t,n){t&&r(t.split(" "),function(t){var r=n;m(r)&&(r=!Pt(e,t)),(r?qt:_t)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==bo?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:Vt,triggerHandler:function(e,t,n){var i,o,a,s=t.type||t,u=Dt(e),l=u&&u.events,f=l&&l[s];f&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:p,type:s,target:e},t.type&&(i=c(i,t)),o=mt(f),a=n?[i].concat(n):[i],r(o,function(t){i.isImmediatePropagationStopped()||t.apply(e,a)}))}},function(e,t){Tt.prototype[t]=function(t,n,r){for(var i,o=0,a=this.length;a>o;o++)m(i)?(i=e(this[o],t,n,r),g(i)&&(i=zi(i))):Ut(i,e(this[o],t,n,r));return g(i)?i:this}}),Tt.prototype.bind=Tt.prototype.on,Tt.prototype.unbind=Tt.prototype.off,Qt.prototype={put:function(e,t){this[Xt(e,this.nextUid)]=t},get:function(e){return this[Xt(e,this.nextUid)]},remove:function(e){var t=this[e=Xt(e,this.nextUid)];return delete this[e],t}};var Uo=[function(){this.$get=[function(){return Qt}]}],Fo=/^([^(]+?)=>/,Lo=/^[^(]*\(\s*([^)]*)\)/m,Ho=/,/,Bo=/^\s*(_?)(\S+?)\1\s*$/,zo=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Wo=t("$injector");on.$$annotate=rn;var Go=t("$animate"),Zo=1,Jo="ng-animate",Yo=function(){this.$get=p},Ko=function(){var e=new Qt,t=[];this.$get=["$$AnimateRunner","$rootScope",function(n,i){function o(e,t,n){var i=!1;return t&&(t=w(t)?t.split(" "):ro(t)?t:[],r(t,function(t){t&&(i=!0,e[t]=n)})),i}function a(){r(t,function(t){var n=e.get(t);if(n){var i=cn(t.attr("class")),o="",a="";r(n,function(e,t){var n=!!i[t];e!==n&&(e?o+=(o.length?" ":"")+t:a+=(a.length?" ":"")+t)}),r(t,function(e){o&&qt(e,o),a&&_t(e,a)}),e.remove(t)}}),t.length=0}function s(n,r,s){var u=e.get(n)||{},c=o(u,r,!0),l=o(u,s,!1);(c||l)&&(e.put(n,u),t.push(n),1===t.length&&i.$$postDigest(a))}return{enabled:p,on:p,off:p,pin:p,push:function(e,t,r,i){i&&i(),r=r||{},r.from&&e.css(r.from),r.to&&e.css(r.to),(r.addClass||r.removeClass)&&s(e,r.addClass,r.removeClass);var o=new n;return o.complete(),o}}}]},Xo=["$provide",function(e){var t=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw Go("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";t.$$registeredAnimations[n.substr(1)]=i,e.factory(i,r)},this.classNameFilter=function(e){if(1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null,this.$$classNameFilter)){var t=new RegExp("(\\s+|\\/)"+Jo+"(\\s+|\\/)");if(t.test(this.$$classNameFilter.toString()))throw Go("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',Jo)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(e){function t(e,t,n){if(n){var r=un(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){e.end&&e.end()},enter:function(n,r,i,o){return r=r&&zi(r),i=i&&zi(i),r=r||i.parent(),t(n,r,i),e.push(n,"enter",ln(o))},move:function(n,r,i,o){return r=r&&zi(r),i=i&&zi(i),r=r||i.parent(),t(n,r,i),e.push(n,"move",ln(o))},leave:function(t,n){return e.push(t,"leave",ln(n),function(){t.remove()})},addClass:function(t,n,r){return r=ln(r),r.addClass=sn(r.addclass,n),e.push(t,"addClass",r)},removeClass:function(t,n,r){return r=ln(r),r.removeClass=sn(r.removeClass,n),e.push(t,"removeClass",r)},setClass:function(t,n,r,i){return i=ln(i),i.addClass=sn(i.addClass,n),i.removeClass=sn(i.removeClass,r),e.push(t,"setClass",i)},animate:function(t,n,r,i,o){return o=ln(o),o.from=o.from?c(o.from,n):n,o.to=o.to?c(o.to,r):r,i=i||"ng-inline-animate",o.tempClasses=sn(o.tempClasses,i),e.push(t,"animate",o)}}}]}],Qo=function(){this.$get=["$$rAF",function(e){function t(t){n.push(t),n.length>1||e(function(){for(var e=0;e<n.length;e++)n[e]();n=[]})}var n=[];return function(){var e=!1;return t(function(){e=!0}),function(n){e?n():t(n)}}}]},ea=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(e,t,n,i,o){function a(e){this.setHost(e);var t=n(),r=function(e){o(e,0,!1)};this._doneCallbacks=[],this._tick=function(e){var n=i[0];n&&n.hidden?r(e):t(e)},this._state=0}var s=0,u=1,c=2;return a.chain=function(e,t){function n(){return r===e.length?void t(!0):void e[r](function(e){return e===!1?void t(!1):(r++,void n())})}var r=0;n()},a.all=function(e,t){function n(n){o=o&&n,++i===e.length&&t(o)}var i=0,o=!0;r(e,function(e){e.done(n)})},a.prototype={setHost:function(e){this.host=e||{}},done:function(e){this._state===c?e():this._doneCallbacks.push(e)},progress:p,getPromise:function(){if(!this.promise){var t=this;this.promise=e(function(e,n){t.done(function(t){t===!1?n():e()})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},"catch":function(e){return this.getPromise()["catch"](e)},"finally":function(e){return this.getPromise()["finally"](e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;t._state===s&&(t._state=u,t._tick(function(){t._resolve(e)}))},_resolve:function(e){this._state!==c&&(r(this._doneCallbacks,function(t){t(e)}),this._doneCallbacks.length=0,this._state=c)}},a}]},ta=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(e,t,n){return function(t,r){function i(){return e(function(){o(),s||u.complete(),s=!0}),u}function o(){a.addClass&&(t.addClass(a.addClass),a.addClass=null),a.removeClass&&(t.removeClass(a.removeClass),a.removeClass=null),a.to&&(t.css(a.to),a.to=null)}var a=r||{};a.$$prepared||(a=q(a)),a.cleanupStyles&&(a.from=a.to=null),a.from&&(t.css(a.from),a.from=null);var s,u=new n;return{start:i,end:i}}}]},na=t("$compile"),ra=new $n;vn.$inject=["$provide","$$sanitizeUriProvider"],mn.prototype.isFirstChange=function(){return this.previousValue===ra};var ia=/^((?:x|data)[:\-_])/i,oa=t("$controller"),aa=/^(\S+)(\s+as\s+([\w$]+))?$/,sa=function(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof zi&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]},ua="application/json",ca={"Content-Type":ua+";charset=utf-8"},la=/^\[|^\{(?!\{)/,fa={"[":/]$/,"{":/}$/},ha=/^\)]\}',?\n/,pa=t("$http"),da=function(e){return function(){throw pa("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",e)}},$a=eo.$interpolateMinErr=t("$interpolate");$a.throwNoconcat=function(e){throw $a("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},$a.interr=function(e,t){return $a("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var va=function(){this.$get=["$window",function(e){function t(e){var t=function(e){t.data=e,t.called=!0};return t.id=e,t}var n=e.angular.callbacks,r={};return{createCallback:function(){var e="_"+(n.$$counter++).toString(36),i="angular.callbacks."+e,o=t(e);return r[i]=n[e]=o,i},wasCalled:function(e){return r[e].called},getResponse:function(e){return r[e].data},removeCallback:function(e){var t=r[e];delete n[t.id],delete r[e]}}}]},ma=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,ga={http:80,https:443,ftp:21},ya=t("$location"),ba=/^\s*[\\/]{2,}/,wa={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:Xn("$$absUrl"),url:function(e){if(m(e))return this.$$url;var t=ma.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:Xn("$$protocol"),host:Xn("$$host"),port:Xn("$$port"),path:Qn("$$path",function(e){return e=null!==e?e.toString():"","/"===e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(w(e)||x(e))e=e.toString(),this.$$search=X(e);else{if(!y(e))throw ya("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");e=q(e,{}),r(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:m(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:Qn("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};r([Kn,Yn,Jn],function(e){e.prototype=Object.create(wa),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==Jn||!this.$$html5)throw ya("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=m(t)?null:t,this}});var xa=t("$parse"),Ca=[].constructor,Sa=(!1).constructor,Ea=Function.constructor,Aa=0..constructor,ka={}.constructor,Oa="".constructor,Ma=Ca.prototype,Ta=Sa.prototype,Va=Ea.prototype,ja=Aa.prototype,Na=ka.prototype,Ia=Oa.prototype,Da=Va.call,Ra=Va.apply,Pa=Va.bind,_a=Na.valueOf,qa=$t();r("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){qa[e]=!0});var Ua={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Fa=function(e){this.options=e};Fa.prototype={constructor:Fa,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),i=qa[t],o=qa[n],a=qa[r];if(i||o||a){var s=a?r:o?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(e){return e>="0"&&"9">=e&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"	"===e||"\n"===e||""===e||""===e},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||"_"===e||"$"===e},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var n=e.charCodeAt(0),r=t.charCodeAt(0);return n>=55296&&56319>=n&&r>=56320&&57343>=r?e+t:e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=g(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw xa("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=Ui(this.text.charAt(this.index));if("."===n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{var s=Ua[o];n+=s||o}i=!1}else if("\\"===o)i=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",t)}};var La=function(e,t){this.lexer=e,this.options=t};La.Program="Program",La.ExpressionStatement="ExpressionStatement",La.AssignmentExpression="AssignmentExpression",La.ConditionalExpression="ConditionalExpression",La.LogicalExpression="LogicalExpression",La.BinaryExpression="BinaryExpression",La.UnaryExpression="UnaryExpression",La.CallExpression="CallExpression",La.MemberExpression="MemberExpression",La.Identifier="Identifier",La.Literal="Literal",La.ArrayExpression="ArrayExpression",La.Property="Property",La.ObjectExpression="ObjectExpression",La.ThisExpression="ThisExpression",La.LocalsExpression="LocalsExpression",La.NGValueParameter="NGValueParameter",La.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:La.Program,body:e}},expressionStatement:function(){return{type:La.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();if(this.expect("=")){if(!hr(e))throw xa("lval","Trying to assign a value to a non l-value");e={type:La.AssignmentExpression,left:e,right:this.assignment(),operator:"="}}return e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:La.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:La.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:La.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:La.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:La.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:La.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:La.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:La.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=q(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:La.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t;t=this.expect("(","[",".");)"("===t.text?(e={type:La.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:La.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:La.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],n={type:La.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return n},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)do e.push(this.filterChain());while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:La.Identifier,name:e.text}},constant:function(){return{type:La.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:La.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:La.Property,kind:"init"},this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e)}while(this.expect(","));return this.consume("}"),{type:La.ObjectExpression,properties:t}},throwError:function(e,t){throw xa("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw xa("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw xa("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)},peekAhead:function(e,t,n,r,i){if(this.tokens.length>e){var o=this.tokens[e],a=o.text;if(a===t||a===n||a===r||a===i||!t&&!n&&!r&&!i)return o}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return i?(this.tokens.shift(),i):!1},selfReferential:{"this":{type:La.ThisExpression},$locals:{type:La.LocalsExpression}}},vr.prototype={compile:function(e,t){var n=this,i=this.astBuilder.ast(e);this.state={nextId:0,filters:{},expensiveChecks:t,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},lr(i,n.$filter);var o,a="";if(this.stage="assign",o=pr(i)){this.state.computing="assign";var s=this.nextId();this.recurse(o,s),this.return_(s),a="fn.assign="+this.generateFunction("assign","s,v,l")}var u=fr(i.body);n.stage="inputs",r(u,function(e,t){var r="fn"+t;n.state[r]={vars:[],body:[],own:{}},n.state.computing=r;var i=n.nextId();n.recurse(e,i),n.return_(i),n.state.inputs.push(r),e.watchId=t}),this.state.computing="fn",this.stage="main",this.recurse(i);var c='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+a+this.watchFns()+"return fn;",l=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",c)(this.$filter,nr,ir,or,rr,ar,sr,ur,e);return this.state=this.stage=void 0,l.literal=dr(i),l.constant=$r(i),l},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return r(t,function(t){e.push("var "+t+"="+n.generateFunction(t,"s"))}),t.length&&e.push("fn.inputs=["+t.join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return r(this.state.filters,function(n,r){e.push(n+"=$filter("+t.escape(r)+")")}),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,n,i,o,a){var s,u,c,l,f,h=this;if(i=i||p,!a&&g(e.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,n,i,o,!0));switch(e.type){case La.Program:r(e.body,function(t,n){h.recurse(t.expression,void 0,void 0,function(e){u=e}),n!==e.body.length-1?h.current().body.push(u,";"):h.return_(u)});break;case La.Literal:l=this.escape(e.value),this.assign(t,l),i(l);break;case La.UnaryExpression:this.recurse(e.argument,void 0,void 0,function(e){u=e}),l=e.operator+"("+this.ifDefined(u,0)+")",this.assign(t,l),i(l);break;case La.BinaryExpression:this.recurse(e.left,void 0,void 0,function(e){s=e}),this.recurse(e.right,void 0,void 0,function(e){u=e}),l="+"===e.operator?this.plus(s,u):"-"===e.operator?this.ifDefined(s,0)+e.operator+this.ifDefined(u,0):"("+s+")"+e.operator+"("+u+")",this.assign(t,l),i(l);break;case La.LogicalExpression:t=t||this.nextId(),h.recurse(e.left,t),h.if_("&&"===e.operator?t:h.not(t),h.lazyRecurse(e.right,t)),i(t);break;case La.ConditionalExpression:t=t||this.nextId(),h.recurse(e.test,t),h.if_(t,h.lazyRecurse(e.alternate,t),h.lazyRecurse(e.consequent,t)),i(t);break;case La.Identifier:t=t||this.nextId(),n&&(n.context="inputs"===h.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),n.computed=!1,n.name=e.name),nr(e.name),h.if_("inputs"===h.stage||h.not(h.getHasOwnProperty("l",e.name)),function(){h.if_("inputs"===h.stage||"s",function(){o&&1!==o&&h.if_(h.not(h.nonComputedMember("s",e.name)),h.lazyAssign(h.nonComputedMember("s",e.name),"{}")),h.assign(t,h.nonComputedMember("s",e.name))})},t&&h.lazyAssign(t,h.nonComputedMember("l",e.name))),(h.state.expensiveChecks||gr(e.name))&&h.addEnsureSafeObject(t),i(t);break;case La.MemberExpression:s=n&&(n.context=this.nextId())||this.nextId(),t=t||this.nextId(),h.recurse(e.object,s,void 0,function(){h.if_(h.notNull(s),function(){o&&1!==o&&h.addEnsureSafeAssignContext(s),e.computed?(u=h.nextId(),h.recurse(e.property,u),h.getStringValue(u),h.addEnsureSafeMemberName(u),o&&1!==o&&h.if_(h.not(h.computedMember(s,u)),h.lazyAssign(h.computedMember(s,u),"{}")),l=h.ensureSafeObject(h.computedMember(s,u)),h.assign(t,l),n&&(n.computed=!0,n.name=u)):(nr(e.property.name),o&&1!==o&&h.if_(h.not(h.nonComputedMember(s,e.property.name)),h.lazyAssign(h.nonComputedMember(s,e.property.name),"{}")),l=h.nonComputedMember(s,e.property.name),(h.state.expensiveChecks||gr(e.property.name))&&(l=h.ensureSafeObject(l)),h.assign(t,l),n&&(n.computed=!1,n.name=e.property.name))},function(){h.assign(t,"undefined")}),i(t)},!!o);break;case La.CallExpression:t=t||this.nextId(),e.filter?(u=h.filter(e.callee.name),c=[],r(e.arguments,function(e){var t=h.nextId();h.recurse(e,t),c.push(t)}),l=u+"("+c.join(",")+")",h.assign(t,l),i(t)):(u=h.nextId(),s={},c=[],h.recurse(e.callee,u,s,function(){h.if_(h.notNull(u),function(){h.addEnsureSafeFunction(u),r(e.arguments,function(e){h.recurse(e,h.nextId(),void 0,function(e){c.push(h.ensureSafeObject(e))})}),s.name?(h.state.expensiveChecks||h.addEnsureSafeObject(s.context),l=h.member(s.context,s.name,s.computed)+"("+c.join(",")+")"):l=u+"("+c.join(",")+")",l=h.ensureSafeObject(l),h.assign(t,l)},function(){h.assign(t,"undefined")}),i(t)}));break;case La.AssignmentExpression:u=this.nextId(),s={},this.recurse(e.left,void 0,s,function(){h.if_(h.notNull(s.context),function(){h.recurse(e.right,u),h.addEnsureSafeObject(h.member(s.context,s.name,s.computed)),h.addEnsureSafeAssignContext(s.context),l=h.member(s.context,s.name,s.computed)+e.operator+u,h.assign(t,l),i(t||l)})},1);break;case La.ArrayExpression:c=[],r(e.elements,function(e){h.recurse(e,h.nextId(),void 0,function(e){c.push(e)})}),l="["+c.join(",")+"]",this.assign(t,l),i(l);break;case La.ObjectExpression:c=[],f=!1,r(e.properties,function(e){e.computed&&(f=!0)}),f?(t=t||this.nextId(),this.assign(t,"{}"),r(e.properties,function(e){e.computed?(s=h.nextId(),h.recurse(e.key,s)):s=e.key.type===La.Identifier?e.key.name:""+e.key.value,u=h.nextId(),h.recurse(e.value,u),h.assign(h.member(t,s,e.computed),u)})):(r(e.properties,function(t){h.recurse(t.value,e.constant?void 0:h.nextId(),void 0,function(e){c.push(h.escape(t.key.type===La.Identifier?t.key.name:""+t.key.value)+":"+e)})}),l="{"+c.join(",")+"}",this.assign(t,l)),i(t||l);break;case La.ThisExpression:this.assign(t,"s"),i("s");break;case La.LocalsExpression:this.assign(t,"l"),i("l");break;case La.NGValueParameter:this.assign(t,"v"),i("v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),r[n]},assign:function(e,t){return e?(this.current().body.push(e,"=",t,";"),e):void 0},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(e===!0)t();else{var r=this.current().body;r.push("if(",e,"){"),t(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(e){return"!("+e+")"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){var n=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/,r=/[^$_a-zA-Z0-9]/g;return n.test(t)?e+"."+t:e+'["'+t.replace(r,this.stringEscapeFn)+'"]'},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},addEnsureSafeObject:function(e){this.current().body.push(this.ensureSafeObject(e),";")},addEnsureSafeMemberName:function(e){this.current().body.push(this.ensureSafeMemberName(e),";")},addEnsureSafeFunction:function(e){this.current().body.push(this.ensureSafeFunction(e),";")},addEnsureSafeAssignContext:function(e){this.current().body.push(this.ensureSafeAssignContext(e),";")},ensureSafeObject:function(e){return"ensureSafeObject("+e+",text)"},ensureSafeMemberName:function(e){return"ensureSafeMemberName("+e+",text)"},ensureSafeFunction:function(e){return"ensureSafeFunction("+e+",text)"},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},ensureSafeAssignContext:function(e){return"ensureSafeAssignContext("+e+",text)"},lazyRecurse:function(e,t,n,r,i,o){var a=this;return function(){a.recurse(e,t,n,r,i,o)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(w(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(x(e))return e.toString();if(e===!0)return"true";if(e===!1)return"false";if(null===e)return"null";if("undefined"==typeof e)return"undefined";throw xa("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},mr.prototype={compile:function(e,t){var n=this,i=this.astBuilder.ast(e);this.expression=e,this.expensiveChecks=t,lr(i,n.$filter);var o,a;(o=pr(i))&&(a=this.recurse(o));var s,u=fr(i.body);u&&(s=[],r(u,function(e,t){var r=n.recurse(e);e.input=r,s.push(r),e.watchId=t}));var c=[];r(i.body,function(e){c.push(n.recurse(e.expression))});var l=0===i.body.length?p:1===i.body.length?c[0]:function(e,t){var n;return r(c,function(r){n=r(e,t)}),n};return a&&(l.assign=function(e,t,n){return a(e,n,t)}),s&&(l.inputs=s),l.literal=dr(i),l.constant=$r(i),l},recurse:function(e,t,n){var i,o,a,s=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case La.Literal:return this.value(e.value,t);case La.UnaryExpression:return o=this.recurse(e.argument),this["unary"+e.operator](o,t);case La.BinaryExpression:return i=this.recurse(e.left),o=this.recurse(e.right),this["binary"+e.operator](i,o,t);case La.LogicalExpression:return i=this.recurse(e.left),o=this.recurse(e.right),this["binary"+e.operator](i,o,t);case La.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case La.Identifier:return nr(e.name,s.expression),s.identifier(e.name,s.expensiveChecks||gr(e.name),t,n,s.expression);case La.MemberExpression:return i=this.recurse(e.object,!1,!!n),e.computed||(nr(e.property.name,s.expression),o=e.property.name),e.computed&&(o=this.recurse(e.property)),e.computed?this.computedMember(i,o,t,n,s.expression):this.nonComputedMember(i,o,s.expensiveChecks,t,n,s.expression);case La.CallExpression:return a=[],r(e.arguments,function(e){a.push(s.recurse(e))}),e.filter&&(o=this.$filter(e.callee.name)),e.filter||(o=this.recurse(e.callee,!0)),e.filter?function(e,n,r,i){for(var s=[],u=0;u<a.length;++u)s.push(a[u](e,n,r,i));var c=o.apply(void 0,s,i);return t?{context:void 0,name:void 0,value:c}:c}:function(e,n,r,i){var u,c=o(e,n,r,i);if(null!=c.value){ir(c.context,s.expression),or(c.value,s.expression);for(var l=[],f=0;f<a.length;++f)l.push(ir(a[f](e,n,r,i),s.expression));u=ir(c.value.apply(c.context,l),s.expression)}return t?{value:u}:u};case La.AssignmentExpression:return i=this.recurse(e.left,!0,1),o=this.recurse(e.right),function(e,n,r,a){var u=i(e,n,r,a),c=o(e,n,r,a);return ir(u.value,s.expression),ar(u.context),u.context[u.name]=c,t?{value:c}:c};case La.ArrayExpression:return a=[],r(e.elements,function(e){a.push(s.recurse(e))}),function(e,n,r,i){for(var o=[],s=0;s<a.length;++s)o.push(a[s](e,n,r,i));return t?{value:o}:o};case La.ObjectExpression:return a=[],r(e.properties,function(e){a.push(e.computed?{key:s.recurse(e.key),computed:!0,value:s.recurse(e.value)}:{key:e.key.type===La.Identifier?e.key.name:""+e.key.value,computed:!1,value:s.recurse(e.value)})}),function(e,n,r,i){for(var o={},s=0;s<a.length;++s)a[s].computed?o[a[s].key(e,n,r,i)]=a[s].value(e,n,r,i):o[a[s].key]=a[s].value(e,n,r,i);return t?{value:o}:o};case La.ThisExpression:return function(e){return t?{value:e}:e};case La.LocalsExpression:return function(e,n){return t?{value:n}:n};case La.NGValueParameter:return function(e,n,r){return t?{value:r}:r}}},"unary+":function(e,t){return function(n,r,i,o){var a=e(n,r,i,o);return a=g(a)?+a:0,t?{value:a}:a}},"unary-":function(e,t){return function(n,r,i,o){var a=e(n,r,i,o);return a=g(a)?-a:0,t?{value:a}:a}},"unary!":function(e,t){return function(n,r,i,o){var a=!e(n,r,i,o);return t?{value:a}:a}},"binary+":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a),u=t(r,i,o,a),c=ur(s,u);return n?{value:c}:c}},"binary-":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a),u=t(r,i,o,a),c=(g(s)?s:0)-(g(u)?u:0);return n?{value:c}:c}},"binary*":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)*t(r,i,o,a);return n?{value:s}:s}},"binary/":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)/t(r,i,o,a);return n?{value:s}:s}},"binary%":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)%t(r,i,o,a);return n?{value:s}:s}},"binary===":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)===t(r,i,o,a);return n?{value:s}:s}},"binary!==":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)!==t(r,i,o,a);return n?{value:s}:s}},"binary==":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)==t(r,i,o,a);return n?{value:s}:s}},"binary!=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)!=t(r,i,o,a);return n?{value:s}:s}},"binary<":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)<t(r,i,o,a);return n?{value:s}:s}},"binary>":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)>t(r,i,o,a);return n?{value:s}:s}},"binary<=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)<=t(r,i,o,a);return n?{value:s}:s}},"binary>=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)>=t(r,i,o,a);return n?{value:s}:s}},"binary&&":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)&&t(r,i,o,a);return n?{value:s}:s}},"binary||":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)||t(r,i,o,a);return n?{value:s}:s}},"ternary?:":function(e,t,n,r){return function(i,o,a,s){var u=e(i,o,a,s)?t(i,o,a,s):n(i,o,a,s);return r?{value:u}:u}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(e,t,n,r,i){return function(o,a){var s=a&&e in a?a:o;r&&1!==r&&s&&!s[e]&&(s[e]={});var u=s?s[e]:void 0;return t&&ir(u,i),n?{context:s,name:e,value:u}:u}},computedMember:function(e,t,n,r,i){return function(o,a,s,u){var c,l,f=e(o,a,s,u);return null!=f&&(c=t(o,a,s,u),c=rr(c),nr(c,i),r&&1!==r&&(ar(f),f&&!f[c]&&(f[c]={})),l=f[c],ir(l,i)),n?{context:f,name:c,value:l}:l}},nonComputedMember:function(e,t,n,r,i,o){return function(a,s,u,c){var l=e(a,s,u,c);i&&1!==i&&(ar(l),l&&!l[t]&&(l[t]={}));var f=null!=l?l[t]:void 0;return(n||gr(t))&&ir(f,o),r?{context:l,name:t,value:f}:f}},inputs:function(e,t){return function(n,r,i,o){return o?o[t]:e(n,r,i)}}};var Ha=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n,this.ast=new La(e,n),this.astCompiler=n.csp?new mr(this.ast,t):new vr(this.ast,t)};Ha.prototype={constructor:Ha,parse:function(e){return this.astCompiler.compile(e,this.options.expensiveChecks)}};var Ba=t("$sce"),za={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Wa=t("$compile"),Ga=e.document.createElement("a"),Za=Dr(e.location.href);_r.$inject=["$document"],Ur.$inject=["$provide"];var Ja=22,Ya=".",Ka="0";zr.$inject=["$locale"],Wr.$inject=["$locale"];var Xa={yyyy:Kr("FullYear",4,0,!1,!0),yy:Kr("FullYear",2,0,!0,!0),y:Kr("FullYear",1,0,!1,!0),MMMM:Xr("Month"),MMM:Xr("Month",!0),MM:Kr("Month",2,1),M:Kr("Month",1,1),LLLL:Xr("Month",!1,!0),dd:Kr("Date",2),d:Kr("Date",1),HH:Kr("Hours",2),H:Kr("Hours",1),hh:Kr("Hours",2,-12),h:Kr("Hours",1,-12),mm:Kr("Minutes",2),m:Kr("Minutes",1),ss:Kr("Seconds",2),s:Kr("Seconds",1),sss:Kr("Milliseconds",3),EEEE:Xr("Day"),EEE:Xr("Day",!0),a:ri,Z:Qr,ww:ni(2),w:ni(1),G:ii,GG:ii,GGG:ii,GGGG:oi},Qa=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,es=/^-?\d+$/;ai.$inject=["$locale"];var ts=$(Ui),ns=$(Fi);li.$inject=["$parse"];var rs=$({restrict:"E",compile:function(e,t){return t.href||t.xlinkHref?void 0:function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===Ki.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),is={};r(Po,function(e,t){function n(e,n,i){e.$watch(i[r],function(e){i.$set(t,!!e)})}if("multiple"!==e){var r=gn("ng-"+t),i=n;"checked"===e&&(i=function(e,t,i){i.ngModel!==i[r]&&n(e,t,i)}),is[r]=function(){return{restrict:"A",priority:100,link:i}}}}),r(qo,function(e,t){is[t]=function(){return{priority:100,link:function(e,n,r){if("ngPattern"===t&&"/"===r.ngPattern.charAt(0)){var i=r.ngPattern.match(Pi);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}e.$watch(r[t],function(e){r.$set(t,e)})}}}}),r(["src","srcset","href"],function(e){var t=gn("ng-"+e);is[t]=function(){return{priority:99,link:function(n,r,i){var o=e,a=e;"href"===e&&"[object SVGAnimatedString]"===Ki.call(r.prop("href"))&&(a="xlinkHref",i.$attr[a]="xlink:href",o=null),i.$observe(t,function(t){return t?(i.$set(a,t),void(Bi&&o&&r.prop(o,i[a]))):void("href"===e&&i.$set(a,null))})}}}});var os={$addControl:p,$$renameControl:hi,$removeControl:p,$setValidity:p,$setDirty:p,$setPristine:p,$setSubmitted:p},as="ng-submitted";pi.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var ss=function(e){return["$timeout","$parse",function(t,n){function r(e){return""===e?n('this[""]').assign:n(e).assign||p}var i={name:"form",restrict:e?"EAC":"E",require:["form","^^?form"],controller:pi,compile:function(n,i){n.addClass(Hs).addClass(Fs);var o=i.name?"name":e&&i.ngForm?"ngForm":!1;return{pre:function(e,n,i,a){var s=a[0];if(!("action"in i)){var u=function(t){e.$apply(function(){s.$commitViewValue(),s.$setSubmitted()}),t.preventDefault()};So(n[0],"submit",u),n.on("$destroy",function(){t(function(){Eo(n[0],"submit",u)},0,!1)})}var l=a[1]||s.$$parentForm;l.$addControl(s);var f=o?r(s.$name):p;o&&(f(e,s),i.$observe(o,function(t){s.$name!==t&&(f(e,void 0),s.$$parentForm.$$renameControl(s,t),(f=r(s.$name))(e,s))})),n.on("$destroy",function(){s.$$parentForm.$removeControl(s),f(e,void 0),c(s,os)})}}}};return i}]},us=ss(),cs=ss(!0),ls=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,fs=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,hs=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,ps=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,ds=/^(\d{4,})-(\d{2})-(\d{2})$/,$s=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,vs=/^(\d{4,})-W(\d\d)$/,ms=/^(\d{4,})-(\d\d)$/,gs=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ys="keydown wheel mousedown",bs=$t();r("date,datetime-local,month,time,week".split(","),function(e){bs[e]=!0});var ws={text:$i,date:yi("date",ds,gi(ds,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":yi("datetimelocal",$s,gi($s,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:yi("time",gs,gi(gs,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:yi("week",vs,mi,"yyyy-Www"),month:yi("month",ms,gi(ms,["yyyy","MM"]),"yyyy-MM"),number:Ai,url:Oi,email:Mi,radio:Ti,range:ki,checkbox:ji,hidden:p,button:p,submit:p,reset:p,file:p},xs=["$browser","$sniffer","$filter","$parse",function(e,t,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,a,s){if(s[0]){var u=Ui(a.type);"range"!==u||a.hasOwnProperty("ngInputRange")||(u="text"),(ws[u]||ws.text)(i,o,a,s[0],t,e,n,r)}}}}}],Cs=/^(true|false|\d+)$/,Ss=function(){return{restrict:"A",priority:100,compile:function(e,t){return Cs.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e)})}}}},Es=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,n,r){e.$$addBindingInfo(n,r.ngBind),n=n[0],t.$watch(r.ngBind,function(e){n.textContent=m(e)?"":e})}}}}],As=["$interpolate","$compile",function(e,t){return{compile:function(n){return t.$$addBindingClass(n),function(n,r,i){var o=e(r.attr(i.$attr.ngBindTemplate));t.$$addBindingInfo(r,o.expressions),r=r[0],i.$observe("ngBindTemplate",function(e){r.textContent=m(e)?"":e})}}}}],ks=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(r,i){var o=t(i.ngBindHtml),a=t(i.ngBindHtml,function(t){return e.valueOf(t)});return n.$$addBindingClass(r),function(t,r,i){n.$$addBindingInfo(r,i.ngBindHtml),t.$watch(a,function(){var n=o(t);r.html(e.getTrustedHtml(n)||"")})}}}}],Os=$({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),Ms=Ni("",!0),Ts=Ni("Odd",0),Vs=Ni("Even",1),js=fi({compile:function(e,t){t.$set("ngCloak",void 0),e.removeClass("ng-cloak")}}),Ns=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Is={},Ds={blur:!0,focus:!0};r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=gn("ng-"+e);Is[t]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,o){var a=n(o[t],null,!0);return function(t,n){n.on(e,function(n){var i=function(){a(t,{$event:n})};Ds[e]&&r.$$phase?t.$evalAsync(i):t.$apply(i)})}}}}]});var Rs=["$animate","$compile",function(e,t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var s,u,c;n.$watch(i.ngIf,function(n){n?u||a(function(n,o){u=o,n[n.length++]=t.$$createComment("end ngIf",i.ngIf),s={clone:n},e.enter(n,r.parent(),r)}):(c&&(c.remove(),c=null),u&&(u.$destroy(),u=null),s&&(c=dt(s.clone),e.leave(c).done(function(e){e!==!1&&(c=null)}),s=null))})}}}],Ps=["$templateRequest","$anchorScroll","$animate",function(e,t,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:eo.noop,compile:function(r,i){var o=i.ngInclude||i.src,a=i.onload||"",s=i.autoscroll;return function(r,i,u,c,l){var f,h,p,d=0,$=function(){h&&(h.remove(),h=null),f&&(f.$destroy(),f=null),p&&(n.leave(p).done(function(e){e!==!1&&(h=null)}),h=p,p=null)};r.$watch(o,function(o){var u=function(e){e===!1||!g(s)||s&&!r.$eval(s)||t()},h=++d;o?(e(o,!0).then(function(e){if(!r.$$destroyed&&h===d){var t=r.$new();c.template=e;var s=l(t,function(e){$(),n.enter(e,null,i).done(u)});f=t,p=s,f.$emit("$includeContentLoaded",o),r.$eval(a)}},function(){r.$$destroyed||h===d&&($(),r.$emit("$includeContentError",o))}),r.$emit("$includeContentRequested",o)):($(),c.template=null)})}}}}],_s=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,o){return Ki.call(r[0]).match(/SVG/)?(r.empty(),void t(kt(o.template,e.document).childNodes)(n,function(e){r.append(e)},{futureParentElement:r})):(r.html(o.template),void t(r.contents())(n))}}}],qs=fi({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),Us=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,n,i){var o=t.attr(n.$attr.ngList)||", ",a="false"!==n.ngTrim,s=a?oo(o):o,u=function(e){if(!m(e)){var t=[];return e&&r(e.split(s),function(e){e&&t.push(a?oo(e):e)}),t}};i.$parsers.push(u),i.$formatters.push(function(e){return ro(e)?e.join(o):void 0}),i.$isEmpty=function(e){return!e||!e.length}}}},Fs="ng-valid",Ls="ng-invalid",Hs="ng-pristine",Bs="ng-dirty",zs="ng-untouched",Ws="ng-touched",Gs="ng-pending",Zs="ng-empty",Js="ng-not-empty",Ys=t("ngModel"),Ks=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(e,t,n,i,o,a,s,u,c,l){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=l(n.name||"",!1)(e),this.$$parentForm=os;var f,h=o(n.ngModel),d=h.assign,$=h,v=d,y=null,b=this;this.$$setOptions=function(e){if(b.$options=e,e&&e.getterSetter){var t=o(n.ngModel+"()"),r=o(n.ngModel+"($$$p)");$=function(e){var n=h(e);return S(n)&&(n=t(e)),n},v=function(e,t){S(h(e))?r(e,{$$$p:t}):d(e,t)}}else if(!h.assign)throw Ys("nonassign","Expression '{0}' is non-assignable. Element: {1}",n.ngModel,Y(i))},this.$render=p,this.$isEmpty=function(e){return m(e)||""===e||null===e||e!==e},this.$$updateEmptyClasses=function(e){b.$isEmpty(e)?(a.removeClass(i,Js),a.addClass(i,Zs)):(a.removeClass(i,Zs),a.addClass(i,Js))};var w=0;Ii({ctrl:this,$element:i,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]},$animate:a}),this.$setPristine=function(){b.$dirty=!1,b.$pristine=!0,a.removeClass(i,Bs),a.addClass(i,Hs)},this.$setDirty=function(){b.$dirty=!0,b.$pristine=!1,a.removeClass(i,Hs),a.addClass(i,Bs),b.$$parentForm.$setDirty()},this.$setUntouched=function(){b.$touched=!1,b.$untouched=!0,a.setClass(i,zs,Ws)},this.$setTouched=function(){b.$touched=!0,b.$untouched=!1,a.setClass(i,Ws,zs)},this.$rollbackViewValue=function(){s.cancel(y),b.$viewValue=b.$$lastCommittedViewValue,b.$render()},this.$validate=function(){if(!no(b.$modelValue)){var e=b.$$lastCommittedViewValue,t=b.$$rawModelValue,n=b.$valid,r=b.$modelValue,i=b.$options&&b.$options.allowInvalid;b.$$runValidators(t,e,function(e){i||n===e||(b.$modelValue=e?t:void 0,b.$modelValue!==r&&b.$$writeModelToScope())})}},this.$$runValidators=function(e,t,n){function i(){var e=b.$$parserName||"parse";return m(f)?(s(e,null),!0):(f||(r(b.$validators,function(e,t){s(t,null)}),r(b.$asyncValidators,function(e,t){s(t,null)})),s(e,f),f)}function o(){var n=!0;return r(b.$validators,function(r,i){var o=r(e,t);n=n&&o,s(i,o)}),n?!0:(r(b.$asyncValidators,function(e,t){s(t,null)}),!1)}function a(){var n=[],i=!0;r(b.$asyncValidators,function(r,o){var a=r(e,t);if(!j(a))throw Ys("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",a);s(o,void 0),n.push(a.then(function(){s(o,!0)},function(){i=!1,s(o,!1)}))}),n.length?c.all(n).then(function(){u(i)},p):u(!0)}function s(e,t){l===w&&b.$setValidity(e,t)}function u(e){l===w&&n(e)}w++;var l=w;return i()&&o()?void a():void u(!1)},this.$commitViewValue=function(){var e=b.$viewValue;s.cancel(y),(b.$$lastCommittedViewValue!==e||""===e&&b.$$hasNativeValidators)&&(b.$$updateEmptyClasses(e),b.$$lastCommittedViewValue=e,b.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function t(){b.$modelValue!==o&&b.$$writeModelToScope()}var n=b.$$lastCommittedViewValue,r=n;if(f=m(r)?void 0:!0)for(var i=0;i<b.$parsers.length;i++)if(r=b.$parsers[i](r),m(r)){f=!1;break}no(b.$modelValue)&&(b.$modelValue=$(e));var o=b.$modelValue,a=b.$options&&b.$options.allowInvalid;b.$$rawModelValue=r,a&&(b.$modelValue=r,t()),b.$$runValidators(r,b.$$lastCommittedViewValue,function(e){a||(b.$modelValue=e?r:void 0,t())})},this.$$writeModelToScope=function(){v(e,b.$modelValue),r(b.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}})},this.$setViewValue=function(e,t){b.$viewValue=e,(!b.$options||b.$options.updateOnDefault)&&b.$$debounceViewValueCommit(t)},this.$$debounceViewValueCommit=function(t){var n,r=0,i=b.$options;i&&g(i.debounce)&&(n=i.debounce,x(n)?r=n:x(n[t])?r=n[t]:x(n["default"])&&(r=n["default"])),s.cancel(y),r?y=s(function(){b.$commitViewValue()},r):u.$$phase?b.$commitViewValue():e.$apply(function(){b.$commitViewValue()})},e.$watch(function(){var t=$(e);if(t!==b.$modelValue&&(b.$modelValue===b.$modelValue||t===t)){b.$modelValue=b.$$rawModelValue=t,f=void 0;for(var n=b.$formatters,r=n.length,i=t;r--;)i=n[r](i);b.$viewValue!==i&&(b.$$updateEmptyClasses(i),b.$viewValue=b.$$lastCommittedViewValue=i,b.$render(),b.$$runValidators(b.$modelValue,b.$viewValue,p))}return t})}],Xs=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Ks,priority:1,compile:function(t){return t.addClass(Hs).addClass(zs).addClass(Fs),{pre:function(e,t,n,r){var i=r[0],o=r[1]||i.$$parentForm;i.$$setOptions(r[2]&&r[2].$options),o.$addControl(i),n.$observe("name",function(e){i.$name!==e&&i.$$parentForm.$$renameControl(i,e)}),e.$on("$destroy",function(){i.$$parentForm.$removeControl(i)})},post:function(t,n,r,i){var o=i[0];o.$options&&o.$options.updateOn&&n.on(o.$options.updateOn,function(e){o.$$debounceViewValueCommit(e&&e.type)}),n.on("blur",function(){o.$touched||(e.$$phase?t.$evalAsync(o.$setTouched):t.$apply(o.$setTouched))})}}}}}],Qs=/(\s+|^)default(\s+|$)/,eu=function(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var n=this;this.$options=q(e.$eval(t.ngModelOptions)),g(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=oo(this.$options.updateOn.replace(Qs,function(){return n.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},tu=fi({terminal:!0,priority:1e3}),nu=t("ngOptions"),ru=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,iu=["$compile","$document","$parse",function(t,i,o){function a(e,t,r){function i(e,t,n,r,i){this.selectValue=e,this.viewValue=t,this.label=n,this.group=r,this.disabled=i}function a(e){var t;if(!c&&n(e))t=e;else{t=[];for(var r in e)e.hasOwnProperty(r)&&"$"!==r.charAt(0)&&t.push(r)}return t}var s=e.match(ru);if(!s)throw nu("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,Y(t));var u=s[5]||s[7],c=s[6],l=/ as /.test(s[0])&&s[1],f=s[9],h=o(s[2]?s[1]:u),p=l&&o(l),d=p||h,$=f&&o(f),v=f?function(e,t){return $(r,t)}:function(e){return Xt(e)},m=function(e,t){return v(e,C(e,t))},g=o(s[2]||s[1]),y=o(s[3]||""),b=o(s[4]||""),w=o(s[8]),x={},C=c?function(e,t){return x[c]=t,x[u]=e,x}:function(e){return x[u]=e,x};return{trackBy:f,getTrackByValue:m,getWatchables:o(w,function(e){var t=[];e=e||[];for(var n=a(e),i=n.length,o=0;i>o;o++){var u=e===n?o:n[o],c=e[u],l=C(c,u),f=v(c,l);if(t.push(f),s[2]||s[1]){var h=g(r,l);t.push(h)}if(s[4]){var p=b(r,l);t.push(p)}}return t}),getOptions:function(){for(var e=[],t={},n=w(r)||[],o=a(n),s=o.length,u=0;s>u;u++){var c=n===o?u:o[u],l=n[c],h=C(l,c),p=d(r,h),$=v(p,h),x=g(r,h),S=y(r,h),E=b(r,h),A=new i($,p,x,S,E);e.push(A),t[$]=A}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[m(e)]},getViewValueFromOption:function(e){return f?q(e.viewValue):e.viewValue}}}}}function s(e,n,o,s){function l(e,t){var n=u.cloneNode(!1);t.appendChild(n),f(e,n)}function f(e,t){e.element=t,t.disabled=e.disabled,e.label!==t.label&&(t.label=e.label,t.textContent=e.label),t.value=e.selectValue}function h(){var e=S&&d.readValue();if(S)for(var t=S.items.length-1;t>=0;t--){var r=S.items[t];Bt(g(r.group)?r.element.parentNode:r.element)}S=E.getOptions();var i={};if(w&&n.prepend(p),S.items.forEach(function(e){var t;g(e.group)?(t=i[e.group],t||(t=c.cloneNode(!1),A.appendChild(t),t.label=null===e.group?"null":e.group,i[e.group]=t),l(e,t)):l(e,A)}),n[0].appendChild(A),$.$render(),!$.$isEmpty(e)){var o=d.readValue(),a=E.trackBy||v;(a?U(e,o):e===o)||($.$setViewValue(o),$.$render())}}for(var p,d=s[0],$=s[1],v=o.multiple,m=0,y=n.children(),b=y.length;b>m;m++)if(""===y[m].value){p=y.eq(m);break}var w=!!p,x=!1,C=zi(u.cloneNode(!1));C.val("?");var S,E=a(o.ngOptions,n,e),A=i[0].createDocumentFragment(),k=function(){w||n.prepend(p),n.val(""),x&&(p.prop("selected",!0),p.attr("selected",!0))},O=function(){w?x&&p.removeAttr("selected"):p.remove()},M=function(){n.prepend(C),n.val("?"),C.prop("selected",!0),C.attr("selected",!0)},T=function(){C.remove()};v?($.$isEmpty=function(e){return!e||0===e.length},d.writeValue=function(e){S.items.forEach(function(e){e.element.selected=!1}),e&&e.forEach(function(e){var t=S.getOptionFromViewValue(e);t&&(t.element.selected=!0)})},d.readValue=function(){var e=n.val()||[],t=[];return r(e,function(e){var n=S.selectValueMap[e];n&&!n.disabled&&t.push(S.getViewValueFromOption(n))}),t},E.trackBy&&e.$watchCollection(function(){return ro($.$viewValue)?$.$viewValue.map(function(e){return E.getTrackByValue(e)}):void 0},function(){$.$render()})):(d.writeValue=function(e){var t=S.selectValueMap[n.val()],r=S.getOptionFromViewValue(e);t&&t.element.removeAttribute("selected"),r?(n[0].value!==r.selectValue&&(T(),O(),n[0].value=r.selectValue,r.element.selected=!0),r.element.setAttribute("selected","selected")):null===e||w?(T(),k()):(O(),M())},d.readValue=function(){var e=S.selectValueMap[n.val()];return e&&!e.disabled?(O(),T(),S.getViewValueFromOption(e)):null},E.trackBy&&e.$watch(function(){return E.getTrackByValue($.$viewValue)},function(){$.$render()})),w?(p.remove(),t(p)(e),p[0].nodeType===go?(x=!1,d.registerOption=function(e,t){""===t.val()&&(x=!0,p=t,p.removeClass("ng-scope"),$.$render(),t.on("$destroy",function(){p=void 0,x=!1}))}):(p.removeClass("ng-scope"),x=!0)):p=zi(u.cloneNode(!1)),n.empty(),h(),e.$watchCollection(E.getWatchables,h)}var u=e.document.createElement("option"),c=e.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(e,t,n,r){r[0].registerOption=p},post:s}}}],ou=["$locale","$interpolate","$log",function(e,t,n){var i=/{}/g,o=/^when(Minus)?(.+)$/;return{link:function(a,s,u){function c(e){s.text(e||"")}var l,f=u.count,h=u.$attr.when&&s.attr(u.$attr.when),d=u.offset||0,$=a.$eval(h)||{},v={},g=t.startSymbol(),y=t.endSymbol(),b=g+f+"-"+d+y,w=eo.noop;r(u,function(e,t){var n=o.exec(t);if(n){var r=(n[1]?"-":"")+Ui(n[2]);$[r]=s.attr(u.$attr[t])}}),r($,function(e,n){v[n]=t(e.replace(i,b))}),a.$watch(f,function(t){var r=parseFloat(t),i=no(r);if(i||r in $||(r=e.pluralCat(r-d)),!(r===l||i&&no(l))){w();var o=v[r];m(o)?(null!=t&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+h),w=p,c()):w=a.$watch(o,c),l=r}})}}}],au=["$parse","$animate","$compile",function(e,i,o){var a="$$NG_REMOVED",s=t("ngRepeat"),u=function(e,t,n,r,i,o,a){e[n]=r,i&&(e[i]=o),e.$index=t,e.$first=0===t,e.$last=t===a-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0===(1&t))},c=function(e){return e.clone[0]},l=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(t,f){var h=f.ngRepeat,p=o.$$createComment("end ngRepeat",h),d=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!d)throw s("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",h);var $=d[1],v=d[2],m=d[3],g=d[4];if(d=$.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/),!d)throw s("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",$);var y=d[3]||d[1],b=d[2];if(m&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(m)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(m)))throw s("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",m);var w,x,C,S,E={$id:Xt};return g?w=e(g):(C=function(e,t){return Xt(t)},S=function(e){return e}),function(e,t,o,f,d){w&&(x=function(t,n,r){return b&&(E[b]=t),E[y]=n,E.$index=r,w(e,E)});var $=$t();e.$watchCollection(v,function(o){var f,v,g,w,E,A,k,O,M,T,V,j,N=t[0],I=$t();if(m&&(e[m]=o),n(o))M=o,O=x||C;else{O=x||S,M=[];for(var D in o)qi.call(o,D)&&"$"!==D.charAt(0)&&M.push(D)}for(w=M.length,V=new Array(w),f=0;w>f;f++)if(E=o===M?f:M[f],A=o[E],k=O(E,A,f),$[k])T=$[k],delete $[k],I[k]=T,V[f]=T;else{if(I[k])throw r(V,function(e){e&&e.scope&&($[e.id]=e)}),s("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",h,k,A);V[f]={id:k,scope:void 0,clone:void 0},I[k]=!0}for(var R in $){if(T=$[R],j=dt(T.clone),i.leave(j),j[0].parentNode)for(f=0,v=j.length;v>f;f++)j[f][a]=!0;T.scope.$destroy()}for(f=0;w>f;f++)if(E=o===M?f:M[f],A=o[E],T=V[f],T.scope){g=N;do g=g.nextSibling;while(g&&g[a]);c(T)!==g&&i.move(dt(T.clone),null,N),N=l(T),u(T.scope,f,y,A,b,E,w)}else d(function(e,t){T.scope=t;var n=p.cloneNode(!1);e[e.length++]=n,i.enter(e,null,N),N=n,T.clone=e,I[T.id]=T,u(T.scope,f,y,A,b,E,w)});$=I})}}}}],su="ng-hide",uu="ng-hide-animate",cu=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngShow,function(t){e[t?"removeClass":"addClass"](n,su,{tempClasses:uu})})}}}],lu=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngHide,function(t){e[t?"addClass":"removeClass"](n,su,{tempClasses:uu})})}}}],fu=fi(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&r(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),hu=["$animate","$compile",function(e,t){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,i,o,a){var s=o.ngSwitch||o.on,u=[],c=[],l=[],f=[],h=function(e,t){return function(n){n!==!1&&e.splice(t,1)}};n.$watch(s,function(n){for(var i,o;l.length;)e.cancel(l.pop());for(i=0,o=f.length;o>i;++i){var s=dt(c[i].clone);f[i].$destroy();var p=l[i]=e.leave(s);p.done(h(l,i))}c.length=0,f.length=0,(u=a.cases["!"+n]||a.cases["?"])&&r(u,function(n){n.transclude(function(r,i){f.push(i);var o=n.element;r[r.length++]=t.$$createComment("end ngSwitchWhen");var a={clone:r};c.push(a),e.enter(r,o.parent(),o)})})})}}}],pu=fi({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,o){var a=n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(e,t,n){return n[t-1]!==e});r(a,function(e){i.cases["!"+e]=i.cases["!"+e]||[],i.cases["!"+e].push({transclude:o,element:t})})}}),du=fi({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),$u=t("ngTransclude"),vu=["$compile",function(e){return{restrict:"EAC",terminal:!0,compile:function(t){var n=e(t.contents());return t.empty(),function(e,t,r,i,o){function a(e,n){e.length?t.append(e):(s(),n.$destroy())}function s(){n(e,function(e){t.append(e)})}if(!o)throw $u("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Y(t));r.ngTransclude===r.$attr.ngTransclude&&(r.ngTransclude="");var u=r.ngTransclude||r.ngTranscludeSlot;o(a,null,u),u&&!o.isSlotFilled(u)&&s()}}}}],mu=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"===n.type){var r=n.id,i=t[0].text;e.put(r,i)}}}}],gu={$setViewValue:p,$render:p},yu=["$element","$scope",function(t,n){var r=this,i=new Qt;r.ngModelCtrl=gu,r.unknownOption=zi(e.document.createElement("option")),r.renderUnknownOption=function(e){var n="? "+Xt(e)+" ?";r.unknownOption.val(n),t.prepend(r.unknownOption),t.val(n)},n.$on("$destroy",function(){r.renderUnknownOption=p}),r.removeUnknownOption=function(){r.unknownOption.parent()&&r.unknownOption.remove()},r.readValue=function(){return r.removeUnknownOption(),t.val()},r.writeValue=function(e){r.hasOption(e)?(r.removeUnknownOption(),t.val(e),""===e&&r.emptyOption.prop("selected",!0)):null==e&&r.emptyOption?(r.removeUnknownOption(),t.val("")):r.renderUnknownOption(e)},r.addOption=function(e,t){if(t[0].nodeType!==go){ht(e,'"option value"'),""===e&&(r.emptyOption=t);var n=i.get(e)||0;i.put(e,n+1),r.ngModelCtrl.$render(),Ri(t)}},r.removeOption=function(e){var t=i.get(e);t&&(1===t?(i.remove(e),""===e&&(r.emptyOption=void 0)):i.put(e,t-1))},r.hasOption=function(e){return!!i.get(e)},r.registerOption=function(e,t,n,i,o){if(i){var a;n.$observe("value",function(e){g(a)&&r.removeOption(a),a=e,r.addOption(e,t)})}else o?e.$watch(o,function(e,i){n.$set("value",e),i!==e&&r.removeOption(i),r.addOption(e,t)}):r.addOption(n.value,t);t.on("$destroy",function(){r.removeOption(n.value),r.ngModelCtrl.$render()})}}],bu=function(){function e(e,t,n,i){var o=i[1];if(o){var a=i[0];if(a.ngModelCtrl=o,t.on("change",function(){e.$apply(function(){o.$setViewValue(a.readValue())})}),n.multiple){a.readValue=function(){var e=[];return r(t.find("option"),function(t){t.selected&&e.push(t.value)}),e},a.writeValue=function(e){var n=new Qt(e);r(t.find("option"),function(e){e.selected=g(n.get(e.value))})};var s,u=0/0;e.$watch(function(){u!==o.$viewValue||U(s,o.$viewValue)||(s=mt(o.$viewValue),o.$render()),u=o.$viewValue}),o.$isEmpty=function(e){return!e||0===e.length}}}}function t(e,t,n,r){var i=r[1];if(i){var o=r[0];i.$render=function(){o.writeValue(i.$viewValue)}}}return{restrict:"E",require:["select","?ngModel"],controller:yu,priority:1,link:{pre:e,post:t}}},wu=["$interpolate",function(e){return{restrict:"E",priority:100,compile:function(t,n){var r,i;return g(n.ngValue)?r=!0:g(n.value)?r=e(n.value,!0):(i=e(t.text(),!0),i||n.$set("value",t.text())),function(e,t,n){var o="$selectController",a=t.parent(),s=a.data(o)||a.parent().data(o);s&&s.registerOption(e,t,n,r,i)}}}}],xu=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){r&&(n.required=!0,r.$validators.required=function(e,t){return!n.required||!r.$isEmpty(t)},n.$observe("required",function(){r.$validate()}))}}},Cu=function(){return{restrict:"A",require:"?ngModel",link:function(e,n,r,i){if(i){var o,a=r.ngPattern||r.pattern;r.$observe("pattern",function(e){if(w(e)&&e.length>0&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw t("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,e,Y(n));o=e||void 0,i.$validate()}),i.$validators.pattern=function(e,t){return i.$isEmpty(t)||m(o)||o.test(t)}}}}},Su=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=-1;n.$observe("maxlength",function(e){var t=f(e);i=no(t)?-1:t,r.$validate()}),r.$validators.maxlength=function(e,t){return 0>i||r.$isEmpty(t)||t.length<=i}}}}},Eu=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=0;n.$observe("minlength",function(e){i=f(e)||0,r.$validate()}),r.$validators.minlength=function(e,t){return r.$isEmpty(t)||t.length>=i}}}}};return e.angular.bootstrap?void(e.console&&console.log("WARNING: Tried to load angular more than once.")):(ct(),bt(eo),eo.module("ngLocale",[],["$provide",function(e){function t(e){e+="";var t=e.indexOf(".");return-1==t?0:e.length-t-1}function n(e,n){var r=n;void 0===r&&(r=Math.min(t(e),3));var i=Math.pow(10,r),o=(e*i|0)%i;return{v:r,f:o}}var r={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,t){var i=0|e,o=n(e,t);return 1==i&&0==o.v?r.ONE:r.OTHER}})}]),void zi(e.document).ready(function(){it(e.document,ot)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),angular});(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=b(e,i,4);var o=!k(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=x(r,e);for(var u=O(t),i=n>0?0:u-1;i>=0&&u>i;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t,r){return function(e,u,i){var o=0,a=O(e);if("number"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return i=r(e,u),e[i]===u?i:-1;if(u!==u)return i=t(l.call(e,o,a),m.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&a>i;i+=n)if(e[i]===u)return i;return-1}}function e(n,t){var r=I.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||a,i="constructor";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)i=I[r],i in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var u=this,i=u._,o=Array.prototype,a=Object.prototype,c=Function.prototype,f=o.push,l=o.slice,s=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,g=c.bind,y=Object.create,d=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):u._=m,m.VERSION="1.8.3";var b=function(n,t,r){if(void 0===t)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},x=function(n,t,r){return null==n?m.identity:m.isFunction(n)?b(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return x(n,t,1/0)};var _=function(n,t){return function(r){var e=arguments.length;if(2>e||null==r)return r;for(var u=1;e>u;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;a>c;c++){var f=o[c];t&&void 0!==r[f]||(r[f]=i[f])}return r}},j=function(n){if(!m.isObject(n))return{};if(y)return y(n);d.prototype=n;var t=new d;return d.prototype=null,t},w=function(n){return function(t){return null==t?void 0:t[n]}},A=Math.pow(2,53)-1,O=w("length"),k=function(n){var t=O(n);return"number"==typeof t&&t>=0&&A>=t};m.each=m.forEach=function(n,t,r){t=b(t,r);var e,u;if(k(n))for(e=0,u=n.length;u>e;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;return e=k(n)?m.findIndex(n,t,r):m.findKey(n,t,r),void 0!==e&&-1!==e?n[e]:void 0},m.filter=m.select=function(n,t,r){var e=[];return t=x(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(x(t)),r)},m.every=m.all=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r,e){return k(n)||(n=m.values(n)),("number"!=typeof r||e)&&(r=0),m.indexOf(n,t,r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-1/0,o=-1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],e>i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],i>e&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(o>u||1/0===u&&1/0===i)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=k(n)?n:m.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(k(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=x(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=x(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=F(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=F(function(n,t,r){n[r]=t}),m.countBy=F(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):k(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:k(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=x(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var S=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=O(n);a>o;o++){var c=n[o];if(k(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=S(c,t,r));var f=0,l=c.length;for(u.length+=l;l>f;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return S(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=x(r,e));for(var u=[],i=[],o=0,a=O(n);a>o;o++){var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?m.contains(i,f)||(i.push(f),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(S(arguments,!0,!0))},m.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=O(n);u>e;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;r>o&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=S(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,O).length||0,r=Array(t),e=0;t>e;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=O(n);u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=x(r,e,1);for(var u=r(t),i=0,o=O(n);o>i;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.indexOf=r(1,m.findIndex,m.sortedIndex),m.lastIndexOf=r(-1,m.findLastIndex),m.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var E=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=j(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(g&&n.bind===g)return g.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),e=function(){return E(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;u>o;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return E(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(t=1;e>t;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=""+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=m.now();a||r.leading!==!1||(a=f);var l=t-(f-a);return e=this,u=arguments,0>=l||l>t?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||r.trailing===!1||(o=setTimeout(c,l)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var f=m.now()-o;t>f&&f>=0?e=setTimeout(c,t-f):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var f=r&&!e;return e||(e=setTimeout(c,t)),f&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}},m.once=m.partial(m.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(n){if(!m.isObject(n))return[];if(v)return v(n);var t=[];for(var r in n)m.has(n,r)&&t.push(r);return M&&e(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var r in n)t.push(r);return M&&e(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;i>a;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=0,o=u.length;o>i;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=b(t,r)):(u=S(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;c>a;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(S(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=_(m.allKeys,!0),m.create=function(n,t){var r=j(n);return t&&m.extendOwn(r,t),r},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;e>i;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if(c=n.length,c!==t.length)return!1;for(;c--;)if(!N(n[c],t[c],r,e))return!1}else{var f,l=m.keys(n);if(c=l.length,m.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!m.has(t,f)||!N(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return N(n,t)},m.isEmpty=function(n){return null==n?!0:k(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=h||function(n){return"[object Array]"===s.call(n)},m.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){m["is"+n]=function(t){return s.call(t)==="[object "+n+"]"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(n){return"function"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===s.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return void 0===n},m.has=function(n,t){return null!=n&&p.call(n,t)},m.noConflict=function(){return u._=i,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=w,m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=b(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=m.invert(B),R=function(n){var t=function(t){return n[t]},r="(?:"+m.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};m.escape=R(B),m.unescape=R(T),m.result=function(n,t,r){var e=null==n?void 0:n[t];return void 0===e&&(e=r),m.isFunction(e)?e.call(n):e};var q=0;m.uniqueId=function(n){var t=++q+"";return n?n+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,L=function(n){return"\\"+z[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||K).source,(t.interpolate||K).source,(t.evaluate||K).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(D,L),u=a+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(a){throw a.source=i,a}var c=function(n){return o.call(this,n,m)},f=t.variable||"obj";return c.source="function("+f+"){\n"+i+"}",c},m.chain=function(n){var t=m(n);return t._chain=!0,t};var P=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return f.apply(n,arguments),P(this,r.apply(m,n))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=o[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],P(this,r)}}),m.each(["concat","join","slice"],function(n){var t=o[n];m.prototype[n]=function(){return P(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this);!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=st.type(e);return"function"===n||st.isWindow(e)?!1:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function r(e,t,n){if(st.isFunction(t))return st.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return st.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(mt.test(t))return st.filter(t,e,n);t=st.filter(t,e)}return st.grep(e,function(e){return et.call(t,e)>-1!==n})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t={};return st.each(e.match(Tt)||[],function(e,n){t[n]=!0}),t}function s(){Q.removeEventListener("DOMContentLoaded",s),e.removeEventListener("load",s),st.ready()}function a(){this.expando=st.expando+a.uid++}function u(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Dt,"-$&").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:jt.test(n)?st.parseJSON(n):n}catch(i){}St.set(e,t,n)}else n=void 0;return n}function l(e,t,n,r){var i,o=1,s=20,a=r?function(){return r.cur()}:function(){return st.css(e,t,"")},u=a(),l=n&&n[3]||(st.cssNumber[t]?"":"px"),c=(st.cssNumber[t]||"px"!==l&&+u)&&qt.exec(st.css(e,t));if(c&&c[3]!==l){l=l||c[3],n=n||[],c=+u||1;do o=o||".5",c/=o,st.style(e,t,c+l);while(o!==(o=a()/u)&&1!==o&&--s)}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}function c(e,t){var n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&st.nodeName(e,t)?st.merge([e],n):n}function f(e,t){for(var n=0,r=e.length;r>n;n++)Nt.set(e[n],"globalEval",!t||Nt.get(t[n],"globalEval"))}function p(e,t,n,r,i){for(var o,s,a,u,l,p,d=t.createDocumentFragment(),h=[],g=0,m=e.length;m>g;g++)if(o=e[g],o||0===o)if("object"===st.type(o))st.merge(h,o.nodeType?[o]:o);else if(Mt.test(o)){for(s=s||d.appendChild(t.createElement("div")),a=(Ft.exec(o)||["",""])[1].toLowerCase(),u=Rt[a]||Rt._default,s.innerHTML=u[1]+st.htmlPrefilter(o)+u[2],p=u[0];p--;)s=s.lastChild;st.merge(h,s.childNodes),s=d.firstChild,s.textContent=""}else h.push(t.createTextNode(o));for(d.textContent="",g=0;o=h[g++];)if(r&&st.inArray(o,r)>-1)i&&i.push(o);else if(l=st.contains(o.ownerDocument,o),s=c(d.appendChild(o),"script"),l&&f(s),n)for(p=0;o=s[p++];)Pt.test(o.type||"")&&n.push(o);return d}function d(){return!0}function h(){return!1}function g(){try{return Q.activeElement}catch(e){}}function m(e,t,n,r,i,o){var s,a;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(a in t)m(e,a,n,r,t[a],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),i===!1)i=h;else if(!i)return e;return 1===o&&(s=i,i=function(e){return st().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=st.guid++)),e.each(function(){st.event.add(this,t,i,r,n)})}function v(e,t){return st.nodeName(e,"table")&&st.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function y(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function x(e){var t=zt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function b(e,t){var n,r,i,o,s,a,u,l;if(1===t.nodeType){if(Nt.hasData(e)&&(o=Nt.access(e),s=Nt.set(t,o),l=o.events)){delete s.handle,s.events={};for(i in l)for(n=0,r=l[i].length;r>n;n++)st.event.add(t,i,l[i][n])}St.hasData(e)&&(a=St.access(e),u=st.extend({},a),St.set(t,u))}}function w(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ot.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function T(e,t,n,r){t=K.apply([],t);var i,o,s,a,u,l,f=0,d=e.length,h=d-1,g=t[0],m=st.isFunction(g);if(m||d>1&&"string"==typeof g&&!it.checkClone&&Xt.test(g))return e.each(function(i){var o=e.eq(i);m&&(t[0]=g.call(this,i,o.html())),T(o,t,n,r)});if(d&&(i=p(t,e[0].ownerDocument,!1,e,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=st.map(c(i,"script"),y),a=s.length;d>f;f++)u=i,f!==h&&(u=st.clone(u,!0,!0),a&&st.merge(s,c(u,"script"))),n.call(e[f],u,f);if(a)for(l=s[s.length-1].ownerDocument,st.map(s,x),f=0;a>f;f++)u=s[f],Pt.test(u.type||"")&&!Nt.access(u,"globalEval")&&st.contains(l,u)&&(u.src?st._evalUrl&&st._evalUrl(u.src):st.globalEval(u.textContent.replace(Ut,"")))}return e}function C(e,t,n){for(var r,i=t?st.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||st.cleanData(c(r)),r.parentNode&&(n&&st.contains(r.ownerDocument,r)&&f(c(r,"script")),r.parentNode.removeChild(r));return e}function k(e,t){var n=st(t.createElement(e)).appendTo(t.body),r=st.css(n[0],"display");return n.detach(),r}function E(e){var t=Q,n=Yt[e];return n||(n=k(e,t),"none"!==n&&n||(Vt=(Vt||st("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Vt[0].contentDocument,t.write(),t.close(),n=k(e,t),Vt.detach()),Yt[e]=n),n}function N(e,t,n){var r,i,o,s,a=e.style;return n=n||Jt(e),s=n?n.getPropertyValue(t)||n[t]:void 0,""!==s&&void 0!==s||st.contains(e.ownerDocument,e)||(s=st.style(e,t)),n&&!it.pixelMarginRight()&&Qt.test(s)&&Gt.test(t)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o),void 0!==s?s+"":s}function S(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function j(e){if(e in on)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=rn.length;n--;)if(e=rn[n]+t,e in on)return e}function D(e,t,n){var r=qt.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function A(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=st.css(e,n+Lt[o],!0,i)),r?("content"===n&&(s-=st.css(e,"padding"+Lt[o],!0,i)),"margin"!==n&&(s-=st.css(e,"border"+Lt[o]+"Width",!0,i))):(s+=st.css(e,"padding"+Lt[o],!0,i),"padding"!==n&&(s+=st.css(e,"border"+Lt[o]+"Width",!0,i)));return s}function q(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Jt(e),s="border-box"===st.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=N(e,t,o),(0>i||null==i)&&(i=e.style[t]),Qt.test(i))return i;r=s&&(it.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+A(e,t,n||(s?"border":"content"),r,o)+"px"}function L(e,t){for(var n,r,i,o=[],s=0,a=e.length;a>s;s++)r=e[s],r.style&&(o[s]=Nt.get(r,"olddisplay"),n=r.style.display,t?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&Ht(r)&&(o[s]=Nt.access(r,"olddisplay",E(r.nodeName)))):(i=Ht(r),"none"===n&&i||Nt.set(r,"olddisplay",i?n:st.css(r,"display"))));for(s=0;a>s;s++)r=e[s],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[s]||"":"none"));return e}function H(e,t,n,r,i){return new H.prototype.init(e,t,n,r,i)}function O(){return e.setTimeout(function(){sn=void 0}),sn=st.now()}function P(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=Lt[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function R(e,t,n){for(var r,i=(W.tweeners[t]||[]).concat(W.tweeners["*"]),o=0,s=i.length;s>o;o++)if(r=i[o].call(n,t,e))return r}function M(e,t,n){var r,i,o,s,a,u,l,c,f=this,p={},d=e.style,h=e.nodeType&&Ht(e),g=Nt.get(e,"fxshow");n.queue||(a=st._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,st.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],l=st.css(e,"display"),c="none"===l?Nt.get(e,"olddisplay")||E(e.nodeName):l,"inline"===c&&"none"===st.css(e,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],un.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(h?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;h=!0}p[r]=g&&g[r]||st.style(e,r)}else l=void 0;if(st.isEmptyObject(p))"inline"===("none"===l?E(e.nodeName):l)&&(d.display=l);else{g?"hidden"in g&&(h=g.hidden):g=Nt.access(e,"fxshow",{}),o&&(g.hidden=!h),h?st(e).show():f.done(function(){st(e).hide()}),f.done(function(){var t;Nt.remove(e,"fxshow");for(t in p)st.style(e,t,p[t])});for(r in p)s=R(h?g[r]:0,r,f),r in g||(g[r]=s.start,h&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}}function I(e,t){var n,r,i,o,s;for(n in e)if(r=st.camelCase(n),i=t[r],o=e[n],st.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),s=st.cssHooks[r],s&&"expand"in s){o=s.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function W(e,t,n){var r,i,o=0,s=W.prefilters.length,a=st.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=sn||O(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,s=0,u=l.tweens.length;u>s;s++)l.tweens[s].run(o);return a.notifyWith(e,[l,o,n]),1>o&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:st.extend({},t),opts:st.extend(!0,{specialEasing:{},easing:st.easing._default},n),originalProperties:t,originalOptions:n,startTime:sn||O(),duration:n.duration,tweens:[],createTween:function(t,n){var r=st.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?(a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l,t])):a.rejectWith(e,[l,t]),this}}),c=l.props;for(I(c,l.opts.specialEasing);s>o;o++)if(r=W.prefilters[o].call(l,e,c,l.opts))return st.isFunction(r.stop)&&(st._queueHooks(l.elem,l.opts.queue).stop=st.proxy(r.stop,r)),r;return st.map(c,R,l),st.isFunction(l.opts.start)&&l.opts.start.call(e,l),st.fx.timer(st.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function $(e){return e.getAttribute&&e.getAttribute("class")||""}function B(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(Tt)||[];if(st.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function _(e,t,n,r){function i(a){var u;return o[a]=!0,st.each(e[a]||[],function(e,a){var l=a(t,n,r);return"string"!=typeof l||s||o[l]?s?!(u=l):void 0:(t.dataTypes.unshift(l),i(l),!1)}),u}var o={},s=e===jn;return i(t.dataTypes[0])||!o["*"]&&i("*")}function X(e,t){var n,r,i=st.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&st.extend(!0,e,r),e}function z(e,t,n){for(var r,i,o,s,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function U(e,t,n,r){var i,o,s,a,u,l={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=l[u+" "+o]||l["* "+o],!s)for(i in l)if(a=i.split(" "),a[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[i]:l[i]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(f){return{state:"parsererror",error:s?f:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function V(e,t,n,r){var i;if(st.isArray(t))st.each(t,function(t,i){n||Ln.test(e)?r(e,i):V(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==st.type(t))r(e,t);else for(i in t)V(e+"["+i+"]",t[i],n,r)}function Y(e){return st.isWindow(e)?e:9===e.nodeType&&e.defaultView}var G=[],Q=e.document,J=G.slice,K=G.concat,Z=G.push,et=G.indexOf,tt={},nt=tt.toString,rt=tt.hasOwnProperty,it={},ot="2.2.4",st=function(e,t){return new st.fn.init(e,t)},at=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ut=/^-ms-/,lt=/-([\da-z])/gi,ct=function(e,t){return t.toUpperCase()};st.fn=st.prototype={jquery:ot,constructor:st,selector:"",length:0,toArray:function(){return J.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:J.call(this)},pushStack:function(e){var t=st.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return st.each(this,e)},map:function(e){return this.pushStack(st.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(J.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:Z,sort:G.sort,splice:G.splice},st.extend=st.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||st.isFunction(s)||(s={}),a===u&&(s=this,a--);u>a;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],r=e[t],s!==r&&(l&&r&&(st.isPlainObject(r)||(i=st.isArray(r)))?(i?(i=!1,o=n&&st.isArray(n)?n:[]):o=n&&st.isPlainObject(n)?n:{},s[t]=st.extend(l,o,r)):void 0!==r&&(s[t]=r));return s},st.extend({expando:"jQuery"+(ot+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===st.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!st.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==st.type(e)||e.nodeType||st.isWindow(e))return!1;if(e.constructor&&!rt.call(e,"constructor")&&!rt.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||rt.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?tt[nt.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=st.trim(e),e&&(1===e.indexOf("use strict")?(t=Q.createElement("script"),t.text=e,Q.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(ut,"ms-").replace(lt,ct)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var r,i=0;if(n(e))for(r=e.length;r>i&&t.call(e[i],i,e[i])!==!1;i++);else for(i in e)if(t.call(e[i],i,e[i])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(at,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?st.merge(r,"string"==typeof e?[e]:e):Z.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:et.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,s=e.length,a=!n;s>o;o++)r=!t(e[o],o),r!==a&&i.push(e[o]);return i},map:function(e,t,r){var i,o,s=0,a=[];if(n(e))for(i=e.length;i>s;s++)o=t(e[s],s,r),null!=o&&a.push(o);else for(s in e)o=t(e[s],s,r),null!=o&&a.push(o);return K.apply([],a)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),st.isFunction(e)?(r=J.call(arguments,2),i=function(){return e.apply(t||this,r.concat(J.call(arguments)))},i.guid=e.guid=e.guid||st.guid++,i):void 0},now:Date.now,support:it}),"function"==typeof Symbol&&(st.fn[Symbol.iterator]=G[Symbol.iterator]),st.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){tt["[object "+t+"]"]=t.toLowerCase()});var ft=function(e){function t(e,t,n,r){var i,o,s,a,u,l,f,d,h=t&&t.ownerDocument,g=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==g&&9!==g&&11!==g)return n;if(!r&&((t?t.ownerDocument||t:W)!==L&&q(t),t=t||L,O)){if(11!==g&&(l=vt.exec(e)))if(i=l[1]){if(9===g){if(!(s=t.getElementById(i)))return n;if(s.id===i)return n.push(s),n}else if(h&&(s=h.getElementById(i))&&M(t,s)&&s.id===i)return n.push(s),n}else{if(l[2])return K.apply(n,t.getElementsByTagName(e)),n;if((i=l[3])&&w.getElementsByClassName&&t.getElementsByClassName)return K.apply(n,t.getElementsByClassName(i)),n}if(!(!w.qsa||z[e+" "]||F&&F.test(e))){if(1!==g)h=t,d=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(xt,"\\$&"):t.setAttribute("id",a=I),f=E(e),o=f.length,u=pt.test(a)?"#"+a:"[id='"+a+"']";o--;)f[o]=u+" "+p(f[o]);d=f.join(","),h=yt.test(e)&&c(t.parentNode)||t}if(d)try{return K.apply(n,h.querySelectorAll(d)),n}catch(m){}finally{a===I&&t.removeAttribute("id")}}}return S(e.replace(at,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>T.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[I]=!0,e}function i(e){var t=L.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=n.length;r--;)T.attrHandle[n[r]]=t}function s(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||V)-(~e.sourceIndex||V);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function f(){}function p(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function d(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=B++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,s){var a,u,l,c=[$,o];if(s){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,s))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(l=t[I]||(t[I]={}),u=l[t.uniqueID]||(l[t.uniqueID]={}),(a=u[r])&&a[0]===$&&a[1]===o)return c[2]=a[2];if(u[r]=c,c[2]=e(t,n,s))return!0}}}function h(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function g(e,n,r){for(var i=0,o=n.length;o>i;i++)t(e,n[i],r);return r}function m(e,t,n,r,i){for(var o,s=[],a=0,u=e.length,l=null!=t;u>a;a++)(o=e[a])&&(!n||n(o,r,i))&&(s.push(o),l&&t.push(a));return s}function v(e,t,n,i,o,s){return i&&!i[I]&&(i=v(i)),o&&!o[I]&&(o=v(o,s)),r(function(r,s,a,u){var l,c,f,p=[],d=[],h=s.length,v=r||g(t||"*",a.nodeType?[a]:a,[]),y=!e||!r&&t?v:m(v,p,e,a,u),x=n?o||(r?e:h||i)?[]:s:y;if(n&&n(y,x,a,u),i)for(l=m(x,d),i(l,[],a,u),c=l.length;c--;)(f=l[c])&&(x[d[c]]=!(y[d[c]]=f));if(r){if(o||e){if(o){for(l=[],c=x.length;c--;)(f=x[c])&&l.push(y[c]=f);o(null,x=[],l,u)}for(c=x.length;c--;)(f=x[c])&&(l=o?et(r,f):p[c])>-1&&(r[l]=!(s[l]=f))}}else x=m(x===s?x.splice(h,x.length):x),o?o(null,s,x,u):K.apply(s,x)})}function y(e){for(var t,n,r,i=e.length,o=T.relative[e[0].type],s=o||T.relative[" "],a=o?1:0,u=d(function(e){return e===t},s,!0),l=d(function(e){return et(t,e)>-1},s,!0),c=[function(e,n,r){var i=!o&&(r||n!==j)||((t=n).nodeType?u(e,n,r):l(e,n,r));return t=null,i}];i>a;a++)if(n=T.relative[e[a].type])c=[d(h(c),n)];else{if(n=T.filter[e[a].type].apply(null,e[a].matches),n[I]){for(r=++a;i>r&&!T.relative[e[r].type];r++);return v(a>1&&h(c),a>1&&p(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(at,"$1"),n,r>a&&y(e.slice(a,r)),i>r&&y(e=e.slice(r)),i>r&&p(e))}c.push(n)}return h(c)}function x(e,n){var i=n.length>0,o=e.length>0,s=function(r,s,a,u,l){var c,f,p,d=0,h="0",g=r&&[],v=[],y=j,x=r||o&&T.find.TAG("*",l),b=$+=null==y?1:Math.random()||.1,w=x.length;for(l&&(j=s===L||s||l);h!==w&&null!=(c=x[h]);h++){if(o&&c){for(f=0,s||c.ownerDocument===L||(q(c),a=!O);p=e[f++];)if(p(c,s||L,a)){u.push(c);break}l&&($=b)}i&&((c=!p&&c)&&d--,r&&g.push(c))}if(d+=h,i&&h!==d){for(f=0;p=n[f++];)p(g,v,s,a);if(r){if(d>0)for(;h--;)g[h]||v[h]||(v[h]=Q.call(u));v=m(v)}K.apply(u,v),l&&!r&&v.length>0&&d+n.length>1&&t.uniqueSort(u)}return l&&($=b,j=y),g};return i?r(s):s}var b,w,T,C,k,E,N,S,j,D,A,q,L,H,O,F,P,R,M,I="sizzle"+1*new Date,W=e.document,$=0,B=0,_=n(),X=n(),z=n(),U=function(e,t){return e===t&&(A=!0),0},V=1<<31,Y={}.hasOwnProperty,G=[],Q=G.pop,J=G.push,K=G.push,Z=G.slice,et=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},tt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",it="\\["+nt+"*("+rt+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+rt+"))|)"+nt+"*\\]",ot=":("+rt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+it+")*)|.*)\\)|)",st=new RegExp(nt+"+","g"),at=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),ut=new RegExp("^"+nt+"*,"+nt+"*"),lt=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ct=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ft=new RegExp(ot),pt=new RegExp("^"+rt+"$"),dt={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt+"|[*])"),ATTR:new RegExp("^"+it),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+tt+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},ht=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,mt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,xt=/'|\\/g,bt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),wt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Tt=function(){q()};try{K.apply(G=Z.call(W.childNodes),W.childNodes),G[W.childNodes.length].nodeType}catch(Ct){K={apply:G.length?function(e,t){J.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},k=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},q=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:W;return r!==L&&9===r.nodeType&&r.documentElement?(L=r,H=L.documentElement,O=!k(L),(n=L.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Tt,!1):n.attachEvent&&n.attachEvent("onunload",Tt)),w.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=i(function(e){return e.appendChild(L.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=mt.test(L.getElementsByClassName),w.getById=i(function(e){return H.appendChild(e).id=I,!L.getElementsByName||!L.getElementsByName(I).length}),w.getById?(T.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&O){var n=t.getElementById(e);return n?[n]:[]}},T.filter.ID=function(e){var t=e.replace(bt,wt);return function(e){return e.getAttribute("id")===t}}):(delete T.find.ID,T.filter.ID=function(e){var t=e.replace(bt,wt);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),T.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},T.find.CLASS=w.getElementsByClassName&&function(e,t){return"undefined"!=typeof t.getElementsByClassName&&O?t.getElementsByClassName(e):void 0},P=[],F=[],(w.qsa=mt.test(L.querySelectorAll))&&(i(function(e){H.appendChild(e).innerHTML="<a id='"+I+"'></a><select id='"+I+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&F.push("[*^$]="+nt+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||F.push("\\["+nt+"*(?:value|"+tt+")"),e.querySelectorAll("[id~="+I+"-]").length||F.push("~="),e.querySelectorAll(":checked").length||F.push(":checked"),e.querySelectorAll("a#"+I+"+*").length||F.push(".#.+[+~]")}),i(function(e){var t=L.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&F.push("name"+nt+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||F.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),F.push(",.*:")})),(w.matchesSelector=mt.test(R=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&i(function(e){w.disconnectedMatch=R.call(e,"div"),R.call(e,"[s!='']:x"),P.push("!=",ot)}),F=F.length&&new RegExp(F.join("|")),P=P.length&&new RegExp(P.join("|")),t=mt.test(H.compareDocumentPosition),M=t||mt.test(H.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},U=t?function(e,t){if(e===t)return A=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===L||e.ownerDocument===W&&M(W,e)?-1:t===L||t.ownerDocument===W&&M(W,t)?1:D?et(D,e)-et(D,t):0:4&n?-1:1)}:function(e,t){if(e===t)return A=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],u=[t];if(!i||!o)return e===L?-1:t===L?1:i?-1:o?1:D?et(D,e)-et(D,t):0;if(i===o)return s(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;a[r]===u[r];)r++;return r?s(a[r],u[r]):a[r]===W?-1:u[r]===W?1:0},L):L},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==L&&q(e),n=n.replace(ct,"='$1']"),!(!w.matchesSelector||!O||z[n+" "]||P&&P.test(n)||F&&F.test(n)))try{var r=R.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return t(n,L,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==L&&q(e),M(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==L&&q(e);var n=T.attrHandle[t.toLowerCase()],r=n&&Y.call(T.attrHandle,t.toLowerCase())?n(e,t,!O):void 0;return void 0!==r?r:w.attributes||!O?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(A=!w.detectDuplicates,D=!w.sortStable&&e.slice(0),e.sort(U),A){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return D=null,e},C=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=C(t);return n},T=t.selectors={cacheLength:50,createPseudo:r,match:dt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(bt,wt),e[3]=(e[3]||e[4]||e[5]||"").replace(bt,wt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return dt.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ft.test(n)&&(t=E(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(bt,wt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=_[e+" "];return t||(t=new RegExp("(^|"+nt+")"+e+"("+nt+"|$)"))&&_(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:n?(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(st," ")+" ").indexOf(r)>-1:"|="===n?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==s?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!u&&!a,x=!1;if(m){if(o){for(;g;){for(p=t;p=p[g];)if(a?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[s?m.firstChild:m.lastChild],s&&y){for(p=m,f=p[I]||(p[I]={}),c=f[p.uniqueID]||(f[p.uniqueID]={}),l=c[e]||[],d=l[0]===$&&l[1],x=d&&l[2],p=d&&m.childNodes[d];p=++d&&p&&p[g]||(x=d=0)||h.pop();)if(1===p.nodeType&&++x&&p===t){c[e]=[$,d,x];break}}else if(y&&(p=t,f=p[I]||(p[I]={}),c=f[p.uniqueID]||(f[p.uniqueID]={}),l=c[e]||[],d=l[0]===$&&l[1],x=d),x===!1)for(;(p=++d&&p&&p[g]||(x=d=0)||h.pop())&&((a?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++x||(y&&(f=p[I]||(p[I]={}),c=f[p.uniqueID]||(f[p.uniqueID]={}),c[e]=[$,x]),p!==t)););return x-=i,x===r||x%r===0&&x/r>=0}}},PSEUDO:function(e,n){var i,o=T.pseudos[e]||T.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[I]?o(n):o.length>1?(i=[e,e,"",n],T.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),s=i.length;s--;)r=et(e,i[s]),e[r]=!(t[r]=i[s])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=N(e.replace(at,"$1"));return i[I]?r(function(e,t,n,r){for(var o,s=i(e,null,r,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(bt,wt),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:r(function(e){return pt.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(bt,wt).toLowerCase(),function(t){var n;do if(n=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===H},focus:function(e){return e===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return gt.test(e.nodeName)},input:function(e){return ht.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},T.pseudos.nth=T.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})T.pseudos[b]=u(b);return f.prototype=T.filters=T.pseudos,T.setFilters=new f,E=t.tokenize=function(e,n){var r,i,o,s,a,u,l,c=X[e+" "];if(c)return n?0:c.slice(0);for(a=e,u=[],l=T.preFilter;a;){(!r||(i=ut.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),r=!1,(i=lt.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(at," ")}),a=a.slice(r.length));for(s in T.filter)!(i=dt[s].exec(a))||l[s]&&!(i=l[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?t.error(e):X(e,u).slice(0)},N=t.compile=function(e,t){var n,r=[],i=[],o=z[e+" "];if(!o){for(t||(t=E(e)),n=t.length;n--;)o=y(t[n]),o[I]?r.push(o):i.push(o);o=z(e,x(i,r)),o.selector=e}return o},S=t.select=function(e,t,n,r){var i,o,s,a,u,l="function"==typeof e&&e,f=!r&&E(e=l.selector||e);if(n=n||[],1===f.length){if(o=f[0]=f[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&w.getById&&9===t.nodeType&&O&&T.relative[o[1].type]){if(t=(T.find.ID(s.matches[0].replace(bt,wt),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=dt.needsContext.test(e)?0:o.length;i--&&(s=o[i],!T.relative[a=s.type]);)if((u=T.find[a])&&(r=u(s.matches[0].replace(bt,wt),yt.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&p(o),!e)return K.apply(n,r),n;break}}return(l||N(e,f))(r,t,!O,n,!t||yt.test(e)&&c(t.parentNode)||t),n},w.sortStable=I.split("").sort(U).join("")===I,w.detectDuplicates=!!A,q(),w.sortDetached=i(function(e){return 1&e.compareDocumentPosition(L.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(tt,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);st.find=ft,st.expr=ft.selectors,st.expr[":"]=st.expr.pseudos,st.uniqueSort=st.unique=ft.uniqueSort,st.text=ft.getText,st.isXMLDoc=ft.isXML,st.contains=ft.contains;var pt=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&st(e).is(n))break;r.push(e)}return r},dt=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},ht=st.expr.match.needsContext,gt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,mt=/^.[^:#\[\.,]*$/;st.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?st.find.matchesSelector(r,e)?[r]:[]:st.find.matches(e,st.grep(t,function(e){return 1===e.nodeType}))},st.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(st(e).filter(function(){for(t=0;n>t;t++)if(st.contains(i[t],this))return!0}));for(t=0;n>t;t++)st.find(e,i[t],r);return r=this.pushStack(n>1?st.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&ht.test(e)?st(e):e||[],!1).length}});var vt,yt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,xt=st.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||vt,"string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:yt.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof st?t[0]:t,st.merge(this,st.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:Q,!0)),gt.test(r[1])&&st.isPlainObject(t))for(r in t)st.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=Q.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=Q,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):st.isFunction(e)?void 0!==n.ready?n.ready(e):e(st):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),st.makeArray(e,this))};xt.prototype=st.fn,vt=st(Q);var bt=/^(?:parents|prev(?:Until|All))/,wt={children:!0,contents:!0,next:!0,prev:!0};st.fn.extend({has:function(e){var t=st(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(st.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],s=ht.test(e)||"string"!=typeof e?st(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&st.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?st.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?et.call(st(e),this[0]):et.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(st.uniqueSort(st.merge(this.get(),st(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),st.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return pt(e,"parentNode")},parentsUntil:function(e,t,n){return pt(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return pt(e,"nextSibling")},prevAll:function(e){return pt(e,"previousSibling")},nextUntil:function(e,t,n){return pt(e,"nextSibling",n)},prevUntil:function(e,t,n){return pt(e,"previousSibling",n)},siblings:function(e){return dt((e.parentNode||{}).firstChild,e)},children:function(e){return dt(e.firstChild)},contents:function(e){return e.contentDocument||st.merge([],e.childNodes)}},function(e,t){st.fn[e]=function(n,r){var i=st.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=st.filter(r,i)),this.length>1&&(wt[e]||st.uniqueSort(i),bt.test(e)&&i.reverse()),this.pushStack(i)}});var Tt=/\S+/g;st.Callbacks=function(e){e="string"==typeof e?o(e):st.extend({},e);var t,n,r,i,s=[],a=[],u=-1,l=function(){for(i=e.once,r=t=!0;a.length;u=-1)for(n=a.shift();++u<s.length;)s[u].apply(n[0],n[1])===!1&&e.stopOnFalse&&(u=s.length,n=!1);e.memory||(n=!1),t=!1,i&&(s=n?[]:"")},c={add:function(){return s&&(n&&!t&&(u=s.length-1,a.push(n)),function r(t){st.each(t,function(t,n){st.isFunction(n)?e.unique&&c.has(n)||s.push(n):n&&n.length&&"string"!==st.type(n)&&r(n)})}(arguments),n&&!t&&l()),this},remove:function(){return st.each(arguments,function(e,t){for(var n;(n=st.inArray(t,s,n))>-1;)s.splice(n,1),u>=n&&u--}),this},has:function(e){return e?st.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return i=a=[],s=n="",this},disabled:function(){return!s},lock:function(){return i=a=[],n||(s=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=n||[],n=[e,n.slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},st.extend({Deferred:function(e){var t=[["resolve","done",st.Callbacks("once memory"),"resolved"],["reject","fail",st.Callbacks("once memory"),"rejected"],["notify","progress",st.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return st.Deferred(function(n){st.each(t,function(t,o){var s=st.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&st.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?st.extend(e,r):r}},i={};return r.pipe=r.then,st.each(t,function(e,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=J.call(arguments),s=o.length,a=1!==s||e&&st.isFunction(e.promise)?s:0,u=1===a?e:st.Deferred(),l=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?J.call(arguments):i,r===t?u.notifyWith(n,r):--a||u.resolveWith(n,r)}};if(s>1)for(t=new Array(s),n=new Array(s),r=new Array(s);s>i;i++)o[i]&&st.isFunction(o[i].promise)?o[i].promise().progress(l(i,n,t)).done(l(i,r,o)).fail(u.reject):--a;return a||u.resolveWith(r,o),u.promise()}});var Ct;st.fn.ready=function(e){return st.ready.promise().done(e),this},st.extend({isReady:!1,readyWait:1,holdReady:function(e){e?st.readyWait++:st.ready(!0)},ready:function(e){(e===!0?--st.readyWait:st.isReady)||(st.isReady=!0,e!==!0&&--st.readyWait>0||(Ct.resolveWith(Q,[st]),st.fn.triggerHandler&&(st(Q).triggerHandler("ready"),st(Q).off("ready"))))}}),st.ready.promise=function(t){return Ct||(Ct=st.Deferred(),"complete"===Q.readyState||"loading"!==Q.readyState&&!Q.documentElement.doScroll?e.setTimeout(st.ready):(Q.addEventListener("DOMContentLoaded",s),e.addEventListener("load",s))),Ct.promise(t)},st.ready.promise();var kt=function(e,t,n,r,i,o,s){var a=0,u=e.length,l=null==n;if("object"===st.type(n)){i=!0;for(a in n)kt(e,t,a,n[a],!0,o,s)}else if(void 0!==r&&(i=!0,st.isFunction(r)||(s=!0),l&&(s?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(st(e),n)})),t))for(;u>a;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:l?t.call(e):u?t(e[0],n):o},Et=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};a.uid=1,a.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!Et(e))return{};var t=e[this.expando];return t||(t={},Et(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[t]=n;else for(r in t)i[r]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?(r=this.get(e,t),void 0!==r?r:this.get(e,st.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=e[this.expando];if(void 0!==o){if(void 0===t)this.register(e);else{st.isArray(t)?r=t.concat(t.map(st.camelCase)):(i=st.camelCase(t),t in o?r=[t,i]:(r=i,r=r in o?[r]:r.match(Tt)||[])),n=r.length;for(;n--;)delete o[r[n]]}(void 0===t||st.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!st.isEmptyObject(t)}};var Nt=new a,St=new a,jt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Dt=/[A-Z]/g;st.extend({hasData:function(e){return St.hasData(e)||Nt.hasData(e)},data:function(e,t,n){return St.access(e,t,n)},removeData:function(e,t){St.remove(e,t)},_data:function(e,t,n){return Nt.access(e,t,n)},_removeData:function(e,t){Nt.remove(e,t)}}),st.fn.extend({data:function(e,t){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(i=St.get(o),1===o.nodeType&&!Nt.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(r=s[n].name,0===r.indexOf("data-")&&(r=st.camelCase(r.slice(5)),u(o,r,i[r])));Nt.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){St.set(this,e)}):kt(this,function(t){var n,r;if(o&&void 0===t){if(n=St.get(o,e)||St.get(o,e.replace(Dt,"-$&").toLowerCase()),void 0!==n)return n;if(r=st.camelCase(e),n=St.get(o,r),void 0!==n)return n;if(n=u(o,r,void 0),void 0!==n)return n}else r=st.camelCase(e),this.each(function(){var n=St.get(this,r);St.set(this,r,t),e.indexOf("-")>-1&&void 0!==n&&St.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){St.remove(this,e)})}}),st.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=Nt.get(e,t),n&&(!r||st.isArray(n)?r=Nt.access(e,t,st.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=st.queue(e,t),r=n.length,i=n.shift(),o=st._queueHooks(e,t),s=function(){st.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Nt.get(e,n)||Nt.access(e,n,{empty:st.Callbacks("once memory").add(function(){Nt.remove(e,[t+"queue",n])})})}}),st.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?st.queue(this[0],e):void 0===t?this:this.each(function(){var n=st.queue(this,e,t);st._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&st.dequeue(this,e)})},dequeue:function(e){return this.each(function(){st.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=st.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=Nt.get(o[s],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var At=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,qt=new RegExp("^(?:([+-])=|)("+At+")([a-z%]*)$","i"),Lt=["Top","Right","Bottom","Left"],Ht=function(e,t){return e=t||e,"none"===st.css(e,"display")||!st.contains(e.ownerDocument,e)},Ot=/^(?:checkbox|radio)$/i,Ft=/<([\w:-]+)/,Pt=/^$|\/(?:java|ecma)script/i,Rt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Rt.optgroup=Rt.option,Rt.tbody=Rt.tfoot=Rt.colgroup=Rt.caption=Rt.thead,Rt.th=Rt.td;var Mt=/<|&#?\w+;/;!function(){var e=Q.createDocumentFragment(),t=e.appendChild(Q.createElement("div")),n=Q.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),it.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",it.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var It=/^key/,Wt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,$t=/^([^.]*)(?:\.(.+)|)/;st.event={global:{},add:function(e,t,n,r,i){var o,s,a,u,l,c,f,p,d,h,g,m=Nt.get(e);if(m)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=st.guid++),(u=m.events)||(u=m.events={}),(s=m.handle)||(s=m.handle=function(t){return"undefined"!=typeof st&&st.event.triggered!==t.type?st.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Tt)||[""],l=t.length;l--;)a=$t.exec(t[l])||[],d=g=a[1],h=(a[2]||"").split(".").sort(),d&&(f=st.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=st.event.special[d]||{},c=st.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&st.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||(p=u[d]=[],p.delegateCount=0,f.setup&&f.setup.call(e,r,h,s)!==!1||e.addEventListener&&e.addEventListener(d,s)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),st.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,s,a,u,l,c,f,p,d,h,g,m=Nt.hasData(e)&&Nt.get(e);if(m&&(u=m.events)){for(t=(t||"").match(Tt)||[""],l=t.length;l--;)if(a=$t.exec(t[l])||[],d=g=a[1],h=(a[2]||"").split(".").sort(),d){for(f=st.event.special[d]||{},d=(r?f.delegateType:f.bindType)||d,p=u[d]||[],a=a[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;o--;)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));s&&!p.length&&(f.teardown&&f.teardown.call(e,h,m.handle)!==!1||st.removeEvent(e,d,m.handle),delete u[d])}else for(d in u)st.event.remove(e,d+t[l],n,r,!0);st.isEmptyObject(u)&&Nt.remove(e,"handle events")}},dispatch:function(e){e=st.event.fix(e);var t,n,r,i,o,s=[],a=J.call(arguments),u=(Nt.get(this,"events")||{})[e.type]||[],l=st.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(s=st.event.handlers.call(this,e,u),t=0;(i=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.rnamespace||e.rnamespace.test(o.namespace))&&(e.handleObj=o,e.data=o.data,r=((st.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a),void 0!==r&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,s=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==e.type)){for(r=[],n=0;a>n;n++)o=t[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?st(i,this).index(u)>-1:st.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&s.push({elem:u,handlers:r})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||Q,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[st.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=Wt.test(i)?this.mouseHooks:It.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new st.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=Q),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==g()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===g()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&st.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return st.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},st.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},st.Event=function(e,t){return this instanceof st.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?d:h):this.type=e,t&&st.extend(this,t),this.timeStamp=e&&e.timeStamp||st.now(),void(this[st.expando]=!0)):new st.Event(e,t)},st.Event.prototype={constructor:st.Event,isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=d,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=d,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=d,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},st.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){st.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!st.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),st.fn.extend({on:function(e,t,n,r){return m(this,e,t,n,r)},one:function(e,t,n,r){return m(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,st(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=h),this.each(function(){st.event.remove(this,e,n,t)})}});var Bt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,_t=/<script|<style|<link/i,Xt=/checked\s*(?:[^=]|=\s*.checked.)/i,zt=/^true\/(.*)/,Ut=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;st.extend({htmlPrefilter:function(e){return e.replace(Bt,"<$1></$2>")},clone:function(e,t,n){var r,i,o,s,a=e.cloneNode(!0),u=st.contains(e.ownerDocument,e);if(!(it.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||st.isXMLDoc(e)))for(s=c(a),o=c(e),r=0,i=o.length;i>r;r++)w(o[r],s[r]);if(t)if(n)for(o=o||c(e),s=s||c(a),r=0,i=o.length;i>r;r++)b(o[r],s[r]);else b(e,a);return s=c(a,"script"),s.length>0&&f(s,!u&&c(e,"script")),a},cleanData:function(e){for(var t,n,r,i=st.event.special,o=0;void 0!==(n=e[o]);o++)if(Et(n)){if(t=n[Nt.expando]){if(t.events)for(r in t.events)i[r]?st.event.remove(n,r):st.removeEvent(n,r,t.handle);n[Nt.expando]=void 0}n[St.expando]&&(n[St.expando]=void 0)}}}),st.fn.extend({domManip:T,detach:function(e){return C(this,e,!0)},remove:function(e){return C(this,e)},text:function(e){return kt(this,function(e){return void 0===e?st.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return T(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.appendChild(e)}})},prepend:function(){return T(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return T(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return T(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(st.cleanData(c(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return st.clone(this,e,t)})},html:function(e){return kt(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!_t.test(e)&&!Rt[(Ft.exec(e)||["",""])[1].toLowerCase()]){e=st.htmlPrefilter(e);try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(st.cleanData(c(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return T(this,arguments,function(t){var n=this.parentNode;st.inArray(this,e)<0&&(st.cleanData(c(this)),n&&n.replaceChild(t,this))},e)}}),st.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){st.fn[e]=function(e){for(var n,r=[],i=st(e),o=i.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),st(i[s])[t](n),Z.apply(r,n.get());return this.pushStack(r)}});var Vt,Yt={HTML:"block",BODY:"block"},Gt=/^margin/,Qt=new RegExp("^("+At+")(?!px)[a-z%]+$","i"),Jt=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Kt=function(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=s[o];return i},Zt=Q.documentElement;!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Zt.appendChild(s);var t=e.getComputedStyle(a);n="1%"!==t.top,o="2px"===t.marginLeft,r="4px"===t.width,a.style.marginRight="50%",i="4px"===t.marginRight,Zt.removeChild(s)}var n,r,i,o,s=Q.createElement("div"),a=Q.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",it.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(a),st.extend(it,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==r&&t(),r},pixelMarginRight:function(){return null==r&&t(),i},reliableMarginLeft:function(){return null==r&&t(),o},reliableMarginRight:function(){var t,n=a.appendChild(Q.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",Zt.appendChild(s),t=!parseFloat(e.getComputedStyle(n).marginRight),Zt.removeChild(s),a.removeChild(n),t}}))}();var en=/^(none|table(?!-c[ea]).+)/,tn={position:"absolute",visibility:"hidden",display:"block"},nn={letterSpacing:"0",fontWeight:"400"},rn=["Webkit","O","Moz","ms"],on=Q.createElement("div").style;st.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=N(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=st.camelCase(t),u=e.style;return t=st.cssProps[a]||(st.cssProps[a]=j(a)||a),s=st.cssHooks[t]||st.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:u[t]:(o=typeof n,"string"===o&&(i=qt.exec(n))&&i[1]&&(n=l(e,t,i),o="number"),null!=n&&n===n&&("number"===o&&(n+=i&&i[3]||(st.cssNumber[a]?"":"px")),it.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r))||(u[t]=n)),void 0)}},css:function(e,t,n,r){var i,o,s,a=st.camelCase(t);return t=st.cssProps[a]||(st.cssProps[a]=j(a)||a),s=st.cssHooks[t]||st.cssHooks[a],s&&"get"in s&&(i=s.get(e,!0,n)),void 0===i&&(i=N(e,t,r)),"normal"===i&&t in nn&&(i=nn[t]),""===n||n?(o=parseFloat(i),n===!0||isFinite(o)?o||0:i):i}}),st.each(["height","width"],function(e,t){st.cssHooks[t]={get:function(e,n,r){return n?en.test(st.css(e,"display"))&&0===e.offsetWidth?Kt(e,tn,function(){return q(e,t,r)}):q(e,t,r):void 0},set:function(e,n,r){var i,o=r&&Jt(e),s=r&&A(e,t,r,"border-box"===st.css(e,"boxSizing",!1,o),o);return s&&(i=qt.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=st.css(e,t)),D(e,n,s)}}}),st.cssHooks.marginLeft=S(it.reliableMarginLeft,function(e,t){return t?(parseFloat(N(e,"marginLeft"))||e.getBoundingClientRect().left-Kt(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),st.cssHooks.marginRight=S(it.reliableMarginRight,function(e,t){return t?Kt(e,{display:"inline-block"},N,[e,"marginRight"]):void 0}),st.each({margin:"",padding:"",border:"Width"},function(e,t){st.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+Lt[r]+t]=o[r]||o[r-2]||o[0];return i}},Gt.test(e)||(st.cssHooks[e+t].set=D)}),st.fn.extend({css:function(e,t){return kt(this,function(e,t,n){var r,i,o={},s=0;if(st.isArray(t)){for(r=Jt(e),i=t.length;i>s;s++)o[t[s]]=st.css(e,t[s],!1,r);return o}return void 0!==n?st.style(e,t,n):st.css(e,t)},e,t,arguments.length>1)},show:function(){return L(this,!0)},hide:function(){return L(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ht(this)?st(this).show():st(this).hide()})}}),st.Tween=H,H.prototype={constructor:H,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||st.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(st.cssNumber[n]?"":"px")},cur:function(){var e=H.propHooks[this.prop];return e&&e.get?e.get(this):H.propHooks._default.get(this)},run:function(e){var t,n=H.propHooks[this.prop];return this.pos=t=this.options.duration?st.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):H.propHooks._default.set(this),this}},H.prototype.init.prototype=H.prototype,H.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=st.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){st.fx.step[e.prop]?st.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[st.cssProps[e.prop]]&&!st.cssHooks[e.prop]?e.elem[e.prop]=e.now:st.style(e.elem,e.prop,e.now+e.unit)}}},H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},st.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},st.fx=H.prototype.init,st.fx.step={};var sn,an,un=/^(?:toggle|show|hide)$/,ln=/queueHooks$/;st.Animation=st.extend(W,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return l(n.elem,e,qt.exec(t),n),n}]},tweener:function(e,t){st.isFunction(e)?(t=e,e=["*"]):e=e.match(Tt);for(var n,r=0,i=e.length;i>r;r++)n=e[r],W.tweeners[n]=W.tweeners[n]||[],W.tweeners[n].unshift(t)},prefilters:[M],prefilter:function(e,t){t?W.prefilters.unshift(e):W.prefilters.push(e)}}),st.speed=function(e,t,n){var r=e&&"object"==typeof e?st.extend({},e):{complete:n||!n&&t||st.isFunction(e)&&e,duration:e,easing:n&&t||t&&!st.isFunction(t)&&t};return r.duration=st.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in st.fx.speeds?st.fx.speeds[r.duration]:st.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){st.isFunction(r.old)&&r.old.call(this),r.queue&&st.dequeue(this,r.queue)},r},st.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Ht).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=st.isEmptyObject(e),o=st.speed(t,n,r),s=function(){var t=W(this,st.extend({},e),o);(i||Nt.get(this,"finish"))&&t.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=st.timers,s=Nt.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&ln.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&st.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=Nt.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=st.timers,s=r?r.length:0;for(n.finish=!0,st.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),st.each(["toggle","show","hide"],function(e,t){var n=st.fn[t];st.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(P(t,!0),e,r,i)}}),st.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){st.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),st.timers=[],st.fx.tick=function(){var e,t=0,n=st.timers;for(sn=st.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||st.fx.stop(),sn=void 0},st.fx.timer=function(e){st.timers.push(e),e()?st.fx.start():st.timers.pop()},st.fx.interval=13,st.fx.start=function(){an||(an=e.setInterval(st.fx.tick,st.fx.interval))},st.fx.stop=function(){e.clearInterval(an),an=null},st.fx.speeds={slow:600,fast:200,_default:400},st.fn.delay=function(t,n){return t=st.fx?st.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=Q.createElement("input"),t=Q.createElement("select"),n=t.appendChild(Q.createElement("option"));e.type="checkbox",it.checkOn=""!==e.value,it.optSelected=n.selected,t.disabled=!0,it.optDisabled=!n.disabled,e=Q.createElement("input"),e.value="t",e.type="radio",it.radioValue="t"===e.value}();var cn,fn=st.expr.attrHandle;st.fn.extend({attr:function(e,t){return kt(this,st.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){st.removeAttr(this,e)})}}),st.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?st.prop(e,t,n):(1===o&&st.isXMLDoc(e)||(t=t.toLowerCase(),i=st.attrHooks[t]||(st.expr.match.bool.test(t)?cn:void 0)),void 0!==n?null===n?void st.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=st.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!it.radioValue&&"radio"===t&&st.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(Tt);if(o&&1===e.nodeType)for(;n=o[i++];)r=st.propFix[n]||n,st.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)}}),cn={set:function(e,t,n){return t===!1?st.removeAttr(e,n):e.setAttribute(n,n),n}},st.each(st.expr.match.bool.source.match(/\w+/g),function(e,t){var n=fn[t]||st.find.attr;fn[t]=function(e,t,r){var i,o;return r||(o=fn[t],fn[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,fn[t]=o),i}});var pn=/^(?:input|select|textarea|button)$/i,dn=/^(?:a|area)$/i;st.fn.extend({prop:function(e,t){return kt(this,st.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[st.propFix[e]||e]})}}),st.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&st.isXMLDoc(e)||(t=st.propFix[t]||t,i=st.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=st.find.attr(e,"tabindex");return t?parseInt(t,10):pn.test(e.nodeName)||dn.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),it.optSelected||(st.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),st.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){st.propFix[this.toLowerCase()]=this});var hn=/[\t\r\n\f]/g;st.fn.extend({addClass:function(e){var t,n,r,i,o,s,a,u=0;if(st.isFunction(e))return this.each(function(t){st(this).addClass(e.call(this,t,$(this)))});if("string"==typeof e&&e)for(t=e.match(Tt)||[];n=this[u++];)if(i=$(n),r=1===n.nodeType&&(" "+i+" ").replace(hn," ")){for(s=0;o=t[s++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");a=st.trim(r),i!==a&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,r,i,o,s,a,u=0;if(st.isFunction(e))return this.each(function(t){st(this).removeClass(e.call(this,t,$(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Tt)||[];n=this[u++];)if(i=$(n),r=1===n.nodeType&&(" "+i+" ").replace(hn," ")){for(s=0;o=t[s++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");a=st.trim(r),i!==a&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(st.isFunction(e)?function(n){st(this).toggleClass(e.call(this,n,$(this),t),t)}:function(){var t,r,i,o;if("string"===n)for(r=0,i=st(this),o=e.match(Tt)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(void 0===e||"boolean"===n)&&(t=$(this),t&&Nt.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":Nt.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+$(n)+" ").replace(hn," ").indexOf(t)>-1)return!0;return!1}});var gn=/\r/g,mn=/[\x20\t\r\n\f]+/g;st.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=st.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,st(this).val()):e,null==i?i="":"number"==typeof i?i+="":st.isArray(i)&&(i=st.map(i,function(e){return null==e?"":e+""})),t=st.valHooks[this.type]||st.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=st.valHooks[i.type]||st.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(gn,""):null==n?"":n)}}}),st.extend({valHooks:{option:{get:function(e){var t=st.find.attr(e,"value");return null!=t?t:st.trim(st.text(e)).replace(mn," ")}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,s=o?null:[],a=o?i+1:r.length,u=0>i?a:o?i:0;a>u;u++)if(n=r[u],!(!n.selected&&u!==i||(it.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&st.nodeName(n.parentNode,"optgroup"))){if(t=st(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=st.makeArray(t),s=i.length;s--;)r=i[s],(r.selected=st.inArray(st.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),st.each(["radio","checkbox"],function(){st.valHooks[this]={set:function(e,t){return st.isArray(t)?e.checked=st.inArray(st(e).val(),t)>-1:void 0}},it.checkOn||(st.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var vn=/^(?:focusinfocus|focusoutblur)$/;st.extend(st.event,{trigger:function(t,n,r,i){var o,s,a,u,l,c,f,p=[r||Q],d=rt.call(t,"type")?t.type:t,h=rt.call(t,"namespace")?t.namespace.split("."):[];if(s=a=r=r||Q,3!==r.nodeType&&8!==r.nodeType&&!vn.test(d+st.event.triggered)&&(d.indexOf(".")>-1&&(h=d.split("."),d=h.shift(),h.sort()),l=d.indexOf(":")<0&&"on"+d,t=t[st.expando]?t:new st.Event(d,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=h.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:st.makeArray(n,[t]),f=st.event.special[d]||{},i||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!i&&!f.noBubble&&!st.isWindow(r)){for(u=f.delegateType||d,vn.test(u+d)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(r.ownerDocument||Q)&&p.push(a.defaultView||a.parentWindow||e)}for(o=0;(s=p[o++])&&!t.isPropagationStopped();)t.type=o>1?u:f.bindType||d,c=(Nt.get(s,"events")||{})[t.type]&&Nt.get(s,"handle"),c&&c.apply(s,n),c=l&&s[l],c&&c.apply&&Et(s)&&(t.result=c.apply(s,n),t.result===!1&&t.preventDefault());return t.type=d,i||t.isDefaultPrevented()||f._default&&f._default.apply(p.pop(),n)!==!1||!Et(r)||l&&st.isFunction(r[d])&&!st.isWindow(r)&&(a=r[l],a&&(r[l]=null),st.event.triggered=d,r[d](),st.event.triggered=void 0,a&&(r[l]=a)),t.result}},simulate:function(e,t,n){var r=st.extend(new st.Event,n,{type:e,isSimulated:!0});st.event.trigger(r,null,t)}}),st.fn.extend({trigger:function(e,t){return this.each(function(){st.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?st.event.trigger(e,t,n,!0):void 0}}),st.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){st.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),st.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),it.focusin="onfocusin"in e,it.focusin||st.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){st.event.simulate(t,e.target,st.event.fix(e))};st.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=Nt.access(r,t);i||r.addEventListener(e,n,!0),Nt.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=Nt.access(r,t)-1;i?Nt.access(r,t,i):(r.removeEventListener(e,n,!0),Nt.remove(r,t))}}});var yn=e.location,xn=st.now(),bn=/\?/;st.parseJSON=function(e){return JSON.parse(e+"")},st.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(r){n=void 0}return(!n||n.getElementsByTagName("parsererror").length)&&st.error("Invalid XML: "+t),n};var wn=/#.*$/,Tn=/([?&])_=[^&]*/,Cn=/^(.*?):[ \t]*([^\r\n]*)$/gm,kn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,En=/^(?:GET|HEAD)$/,Nn=/^\/\//,Sn={},jn={},Dn="*/".concat("*"),An=Q.createElement("a");An.href=yn.href,st.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn.href,type:"GET",isLocal:kn.test(yn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":st.parseJSON,"text xml":st.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?X(X(e,st.ajaxSettings),t):X(st.ajaxSettings,e)},ajaxPrefilter:B(Sn),ajaxTransport:B(jn),ajax:function(t,n){function r(t,n,r,a){var l,f,y,x,w,C=n;2!==b&&(b=2,u&&e.clearTimeout(u),i=void 0,s=a||"",T.readyState=t>0?4:0,l=t>=200&&300>t||304===t,r&&(x=z(p,T,r)),x=U(p,x,T,l),l?(p.ifModified&&(w=T.getResponseHeader("Last-Modified"),w&&(st.lastModified[o]=w),w=T.getResponseHeader("etag"),w&&(st.etag[o]=w)),204===t||"HEAD"===p.type?C="nocontent":304===t?C="notmodified":(C=x.state,f=x.data,y=x.error,l=!y)):(y=C,(t||!C)&&(C="error",0>t&&(t=0))),T.status=t,T.statusText=(n||C)+"",l?g.resolveWith(d,[f,C,T]):g.rejectWith(d,[T,C,y]),T.statusCode(v),v=void 0,c&&h.trigger(l?"ajaxSuccess":"ajaxError",[T,p,l?f:y]),m.fireWith(d,[T,C]),c&&(h.trigger("ajaxComplete",[T,p]),--st.active||st.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,o,s,a,u,l,c,f,p=st.ajaxSetup({},n),d=p.context||p,h=p.context&&(d.nodeType||d.jquery)?st(d):st.event,g=st.Deferred(),m=st.Callbacks("once memory"),v=p.statusCode||{},y={},x={},b=0,w="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!a)for(a={};t=Cn.exec(s);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=x[n]=x[n]||e,y[e]=t),this},overrideMimeType:function(e){return b||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)v[t]=[v[t],e[t]];else T.always(e[T.status]);return this},abort:function(e){var t=e||w;return i&&i.abort(t),r(0,t),this}};if(g.promise(T).complete=m.add,T.success=T.done,T.error=T.fail,p.url=((t||p.url||yn.href)+"").replace(wn,"").replace(Nn,yn.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=st.trim(p.dataType||"*").toLowerCase().match(Tt)||[""],null==p.crossDomain){l=Q.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=An.protocol+"//"+An.host!=l.protocol+"//"+l.host}catch(C){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=st.param(p.data,p.traditional)),_(Sn,p,n,T),2===b)return T;c=st.event&&p.global,c&&0===st.active++&&st.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!En.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=Tn.test(o)?o.replace(Tn,"$1_="+xn++):o+(bn.test(o)?"&":"?")+"_="+xn++)),p.ifModified&&(st.lastModified[o]&&T.setRequestHeader("If-Modified-Since",st.lastModified[o]),st.etag[o]&&T.setRequestHeader("If-None-Match",st.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&T.setRequestHeader("Content-Type",p.contentType),T.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Dn+"; q=0.01":""):p.accepts["*"]);for(f in p.headers)T.setRequestHeader(f,p.headers[f]);if(p.beforeSend&&(p.beforeSend.call(d,T,p)===!1||2===b))return T.abort();w="abort";for(f in{success:1,error:1,complete:1})T[f](p[f]);if(i=_(jn,p,n,T)){if(T.readyState=1,c&&h.trigger("ajaxSend",[T,p]),2===b)return T;p.async&&p.timeout>0&&(u=e.setTimeout(function(){T.abort("timeout")},p.timeout));try{b=1,i.send(y,r)}catch(C){if(!(2>b))throw C;r(-1,C)}}else r(-1,"No Transport");return T},getJSON:function(e,t,n){return st.get(e,t,n,"json")},getScript:function(e,t){return st.get(e,void 0,t,"script")}}),st.each(["get","post"],function(e,t){st[t]=function(e,n,r,i){return st.isFunction(n)&&(i=i||r,r=n,n=void 0),st.ajax(st.extend({url:e,type:t,dataType:i,data:n,success:r},st.isPlainObject(e)&&e))}}),st._evalUrl=function(e){return st.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},st.fn.extend({wrapAll:function(e){var t;return st.isFunction(e)?this.each(function(t){st(this).wrapAll(e.call(this,t))}):(this[0]&&(t=st(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(st.isFunction(e)?function(t){st(this).wrapInner(e.call(this,t))}:function(){var t=st(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=st.isFunction(e);return this.each(function(n){st(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){st.nodeName(this,"body")||st(this).replaceWith(this.childNodes)}).end()}}),st.expr.filters.hidden=function(e){return!st.expr.filters.visible(e)},st.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var qn=/%20/g,Ln=/\[\]$/,Hn=/\r?\n/g,On=/^(?:submit|button|image|reset|file)$/i,Fn=/^(?:input|select|textarea|keygen)/i;st.param=function(e,t){var n,r=[],i=function(e,t){t=st.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=st.ajaxSettings&&st.ajaxSettings.traditional),st.isArray(e)||e.jquery&&!st.isPlainObject(e))st.each(e,function(){i(this.name,this.value)});else for(n in e)V(n,e[n],t,i);return r.join("&").replace(qn,"+")},st.fn.extend({serialize:function(){return st.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=st.prop(this,"elements");return e?st.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!st(this).is(":disabled")&&Fn.test(this.nodeName)&&!On.test(e)&&(this.checked||!Ot.test(e))}).map(function(e,t){var n=st(this).val();return null==n?null:st.isArray(n)?st.map(n,function(e){return{name:t.name,value:e.replace(Hn,"\r\n")}}):{name:t.name,value:n.replace(Hn,"\r\n")}}).get()}}),st.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var Pn={0:200,1223:204},Rn=st.ajaxSettings.xhr();it.cors=!!Rn&&"withCredentials"in Rn,it.ajax=Rn=!!Rn,st.ajaxTransport(function(t){var n,r;return it.cors||Rn&&!t.crossDomain?{send:function(i,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(s in i)a.setRequestHeader(s,i[s]);n=function(e){return function(){n&&(n=r=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Pn[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),r=a.onerror=n("error"),void 0!==a.onabort?a.onabort=r:a.onreadystatechange=function(){4===a.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{a.send(t.hasContent&&t.data||null)}catch(u){if(n)throw u}},abort:function(){n&&n()}}:void 0}),st.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return st.globalEval(e),e}}}),st.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),st.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=st("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),Q.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Mn=[],In=/(=)\?(?=&|$)|\?\?/;st.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Mn.pop()||st.expando+"_"+xn++;return this[e]=!0,e}}),st.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,s,a=t.jsonp!==!1&&(In.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&In.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=st.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(In,"$1"+i):t.jsonp!==!1&&(t.url+=(bn.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||st.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){s=arguments},r.always(function(){void 0===o?st(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Mn.push(i)),s&&st.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),st.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||Q;var r=gt.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=p([e],t,i),i&&i.length&&st(i).remove(),st.merge([],r.childNodes))};var Wn=st.fn.load;st.fn.load=function(e,t,n){if("string"!=typeof e&&Wn)return Wn.apply(this,arguments);var r,i,o,s=this,a=e.indexOf(" ");return a>-1&&(r=st.trim(e.slice(a)),e=e.slice(0,a)),st.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),s.length>0&&st.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?st("<div>").append(st.parseHTML(e)).find(r):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},st.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){st.fn[t]=function(e){return this.on(t,e)}}),st.expr.filters.animated=function(e){return st.grep(st.timers,function(t){return e===t.elem}).length},st.offset={setOffset:function(e,t,n){var r,i,o,s,a,u,l,c=st.css(e,"position"),f=st(e),p={};"static"===c&&(e.style.position="relative"),a=f.offset(),o=st.css(e,"top"),u=st.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(r=f.position(),s=r.top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),st.isFunction(t)&&(t=t.call(e,n,st.extend({},a))),null!=t.top&&(p.top=t.top-a.top+s),null!=t.left&&(p.left=t.left-a.left+i),"using"in t?t.using.call(e,p):f.css(p)}},st.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){st.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;if(o)return t=o.documentElement,st.contains(t,r)?(i=r.getBoundingClientRect(),n=Y(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===st.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),st.nodeName(e[0],"html")||(r=e.offset()),r.top+=st.css(e[0],"borderTopWidth",!0),r.left+=st.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-st.css(n,"marginTop",!0),left:t.left-r.left-st.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===st.css(e,"position");)e=e.offsetParent;return e||Zt})}}),st.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;st.fn[e]=function(r){return kt(this,function(e,r,i){var o=Y(e);return void 0===i?o?o[t]:e[r]:void(o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i)},e,r,arguments.length)}}),st.each(["top","left"],function(e,t){st.cssHooks[t]=S(it.pixelPosition,function(e,n){return n?(n=N(e,t),Qt.test(n)?st(e).position()[t]+"px":n):void 0})}),st.each({Height:"height",Width:"width"},function(e,t){st.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){st.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(r===!0||i===!0?"margin":"border");return kt(this,function(t,n,r){var i;return st.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?st.css(t,n,s):st.style(t,n,r,s)},t,o?r:void 0,o,null)}})}),st.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),st.fn.andSelf=st.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return st});var $n=e.jQuery,Bn=e.$;return st.noConflict=function(t){return e.$===st&&(e.$=Bn),F,t&&e.jQuery===st&&(e.jQuery=$n),st},t||(e.jQuery=e.$=st),st});define("moduleDefiner",["angular"],function(r){function n(n){try{return r.module(n)}catch(e){return null}}function e(t,u){var o=r.isObject(t)?t:n(t);return u=e.names(u),o?u.length>0&&r.forEach(u,function(r){-1===o.requires.indexOf(r)&&o.requires.push(r)}):o=r.module(t,u||[]),o}var t=r.module;return r.module=function(){var n=t.apply(r,arguments);return n.inheritController=function(r,n,e){return this.controller(r,["$scope","$controller","$injector",function(r,t,u){var o={$scope:r};return e.prototype=t(n,o),o.superCtrl=e.prototype,u.instantiate(e,o)}]),this},n},e.names=function(n){var e,t,u,o=[];if(!n)return o;for(t=0,u=n.length;u>t;t++)e=n[t],r.isString(e)?o.push(e):e&&e.name&&o.push(e.name);return o},e});!function(){var n=function(){!function(n,e){"use strict";function t(n,e,t){if(!n)throw pe("areq","Argument '{0}' is {1}",e||"?",t||"required");return n}function r(n,e){return n||e?n?e?(V(n)&&(n=n.join(" ")),V(e)&&(e=e.join(" ")),n+" "+e):n:e:""}function a(n){var e={};return n&&(n.to||n.from)&&(e.to=n.to,e.from=n.from),e}function i(n,e,t){var r="";return n=V(n)?n:n&&ne(n)&&n.length?n.split(/\s+/):[],G(n,function(n,a){n&&n.length>0&&(r+=a>0?" ":"",r+=t?e+n:n+e)}),r}function o(n,e){var t=n.indexOf(e);e>=0&&n.splice(t,1)}function s(n){if(n instanceof te)switch(n.length){case 0:return n;case 1:if(n[0].nodeType===R)return n;break;default:return te(u(n))}return n.nodeType===R?te(n):void 0}function u(n){if(!n[0])return n;for(var e=0;e<n.length;e++){var t=n[e];if(t.nodeType===R)return t}}function l(n,e,t){G(e,function(e){n.addClass(e,t)})}function c(n,e,t){G(e,function(e){n.removeClass(e,t)})}function f(n){return function(e,t){t.addClass&&(l(n,e,t.addClass),t.addClass=null),t.removeClass&&(c(n,e,t.removeClass),t.removeClass=null)}}function d(n){if(n=n||{},!n.$$prepared){var e=n.domOperation||re;n.domOperation=function(){n.$$domOperationFired=!0,e(),e=re},n.$$prepared=!0}return n}function m(n,e){v(n,e),p(n,e)}function v(n,e){e.from&&(n.css(e.from),e.from=null)}function p(n,e){e.to&&(n.css(e.to),e.to=null)}function h(n,e,t){var r=e.options||{},a=t.options||{},i=(r.addClass||"")+" "+(a.addClass||""),o=(r.removeClass||"")+" "+(a.removeClass||""),s=g(n.attr("class"),i,o);a.preparationClasses&&(r.preparationClasses=D(a.preparationClasses,r.preparationClasses),delete a.preparationClasses);var u=r.domOperation!==re?r.domOperation:null;return Q(r,a),u&&(r.domOperation=u),r.addClass=s.addClass?s.addClass:null,r.removeClass=s.removeClass?s.removeClass:null,e.addClass=r.addClass,e.removeClass=r.removeClass,r}function g(n,e,t){function r(n){ne(n)&&(n=n.split(" "));var e={};return G(n,function(n){n.length&&(e[n]=!0)}),e}var a=1,i=-1,o={};n=r(n),e=r(e),G(e,function(n,e){o[e]=a}),t=r(t),G(t,function(n,e){o[e]=o[e]===a?null:i});var s={addClass:"",removeClass:""};return G(o,function(e,t){var r,o;e===a?(r="addClass",o=!n[t]||n[t+L]):e===i&&(r="removeClass",o=n[t]||n[t+q]),o&&(s[r].length&&(s[r]+=" "),s[r]+=t)}),s}function $(n){return n instanceof te?n[0]:n}function C(n,e,t){var r="";e&&(r=i(e,U,!0)),t.addClass&&(r=D(r,i(t.addClass,q))),t.removeClass&&(r=D(r,i(t.removeClass,L))),r.length&&(t.preparationClasses=r,n.addClass(r))}function y(n,e){e.preparationClasses&&(n.removeClass(e.preparationClasses),e.preparationClasses=null),e.activeClasses&&(n.removeClass(e.activeClasses),e.activeClasses=null)}function b(n,e){var t=e?"-"+e+"s":"";return k(n,[me,t]),[me,t]}function w(n,e){var t=e?"paused":"",r=I+le;return k(n,[r,t]),[r,t]}function k(n,e){var t=e[0],r=e[1];n.style[t]=r}function D(n,e){return n?e?n+" "+e:n:e}function x(n){return[de,n+"s"]}function A(n,e){var t=e?fe:me;return[t,n+"s"]}function S(n,e,t){var r=Object.create(null),a=n.getComputedStyle(e)||{};return G(t,function(n,e){var t=a[n];if(t){var i=t.charAt(0);("-"===i||"+"===i||i>=0)&&(t=T(t)),0===t&&(t=null),r[e]=t}}),r}function T(n){var e=0,t=n.split(/\s*,\s*/);return G(t,function(n){"s"===n.charAt(n.length-1)&&(n=n.substring(0,n.length-1)),n=parseFloat(n)||0,e=e?Math.max(n,e):n}),e}function M(n){return 0===n||null!=n}function j(n,e){var t=P,r=n+"s";return e?t+=ae:r+=" linear all",[t,r]}function O(){var n=Object.create(null);return{flush:function(){n=Object.create(null)},count:function(e){var t=n[e];return t?t.total:0},get:function(e){var t=n[e];return t&&t.value},put:function(e,t){n[e]?n[e].total++:n[e]={total:1,value:t}}}}function E(n,e,t){G(t,function(t){n[t]=_(n[t])?n[t]:e.style.getPropertyValue(t)})}var P,N,I,F,R=1,q="-add",L="-remove",U="ng-",z="-active",H="-prepare",B="ng-animate",J="$$ngAnimateChildren",W="";void 0===n.ontransitionend&&void 0!==n.onwebkittransitionend?(W="-webkit-",P="WebkitTransition",N="webkitTransitionEnd transitionend"):(P="transition",N="transitionend"),void 0===n.onanimationend&&void 0!==n.onwebkitanimationend?(W="-webkit-",I="WebkitAnimation",F="webkitAnimationEnd animationend"):(I="animation",F="animationend");var K,Q,G,V,_,X,Y,Z,ne,ee,te,re,ae="Duration",ie="Property",oe="Delay",se="TimingFunction",ue="IterationCount",le="PlayState",ce=9999,fe=I+oe,de=I+ae,me=P+oe,ve=P+ae,pe=e.$$minErr("ng"),he=["$$rAF",function(n){function e(n){r=r.concat(n),t()}function t(){if(r.length){for(var e=r.shift(),i=0;i<e.length;i++)e[i]();a||n(function(){a||t()})}}var r,a;return r=e.queue=[],e.waitUntilQuiet=function(e){a&&a(),a=n(function(){a=null,e(),t()})},e}],ge=["$interpolate",function(n){return{link:function(e,t,r){function a(n){n="on"===n||"true"===n,t.data(J,n)}var i=r.ngAnimateChildren;ne(i)&&0===i.length?t.data(J,!0):(a(n(i)(e)),r.$observe("ngAnimateChildren",a))}}}],$e="$$animateCss",Ce=1e3,ye=3,be=1.5,we={transitionDuration:ve,transitionDelay:me,transitionProperty:P+ie,animationDuration:de,animationDelay:fe,animationIterationCount:I+ue},ke={transitionDuration:ve,transitionDelay:me,animationDuration:de,animationDelay:fe},De=["$animateProvider",function(){var n=O(),e=O();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(t,r,s,u,l,c,h,g){function C(n,e){var t="$$ngAnimateParentKey",r=n.parentNode,a=r[t]||(r[t]=++H);return a+"-"+n.getAttribute("class")+"-"+e}function y(e,r,a,i){var o=n.get(a);return o||(o=S(t,e,i),"infinite"===o.animationIterationCount&&(o.animationIterationCount=1)),n.put(a,o),o}function D(a,o,s,u){var l;if(n.count(s)>0&&(l=e.get(s),!l)){var c=i(o,"-stagger");r.addClass(a,c),l=S(t,a,u),l.animationDuration=Math.max(l.animationDuration,0),l.transitionDuration=Math.max(l.transitionDuration,0),r.removeClass(a,c),e.put(s,l)}return l||{}}function T(t){B.push(t),h.waitUntilQuiet(function(){n.flush(),e.flush();for(var t=l(),r=0;r<B.length;r++)B[r](t);B.length=0})}function O(n,e,t){var r=y(n,e,t,we),a=r.animationDelay,i=r.transitionDelay;return r.maxDelay=a&&i?Math.max(a,i):a||i,r.maxDuration=Math.max(r.animationDuration*r.animationIterationCount,r.transitionDuration),r}var R=f(r),H=0,B=[];return function(e,t){function l(){h()}function f(){h(!0)}function h(n){if(!(_||Y&&X)){_=!0,X=!1,J.$$skipPreparationClasses||r.removeClass(e,we),r.removeClass(e,xe),w(Q,!1),b(Q,!1),G(le,function(n){Q.style[n[0]]=""}),R(e,J),m(e,J),Object.keys(W).length&&G(W,function(n,e){n?Q.style.setProperty(e,n):Q.style.removeProperty(e)}),J.onDone&&J.onDone(),me&&me.length&&e.off(me.join(" "),H);var t=e.data($e);t&&(u.cancel(t[0].timer),e.removeData($e)),Z&&Z.complete(!n)}}function y(n){Le.blockTransition&&b(Q,n),Le.blockKeyframeAnimation&&w(Q,!!n)}function S(){return Z=new s({end:l,cancel:f}),T(re),h(),{$$willAnimate:!1,start:function(){return Z},end:l}}function H(n){n.stopPropagation();var e=n.originalEvent||n,t=e.$manualTimeStamp||Date.now(),r=parseFloat(e.elapsedTime.toFixed(ye));Math.max(t-ue,0)>=te&&r>=ae&&(Y=!0,h())}function B(){function n(){if(!_){if(y(!1),G(le,function(n){var e=n[0],t=n[1];Q.style[e]=t}),R(e,J),r.addClass(e,xe),Le.recalculateTimingStyles){if(De=Q.className+" "+we,Te=C(Q,De),Re=O(Q,De,Te),qe=Re.maxDelay,ee=Math.max(qe,0),ae=Re.maxDuration,0===ae)return void h();Le.hasTransitions=Re.transitionDuration>0,Le.hasAnimations=Re.animationDuration>0}if(Le.applyAnimationDelay&&(qe="boolean"!=typeof J.delay&&M(J.delay)?parseFloat(J.delay):qe,ee=Math.max(qe,0),Re.animationDelay=qe,Ue=A(qe,!0),le.push(Ue),Q.style[Ue[0]]=Ue[1]),te=ee*Ce,oe=ae*Ce,J.easing){var n,a=J.easing;Le.hasTransitions&&(n=P+se,le.push([n,a]),Q.style[n]=a),Le.hasAnimations&&(n=I+se,le.push([n,a]),Q.style[n]=a)}Re.transitionDuration&&me.push(N),Re.animationDuration&&me.push(F),ue=Date.now();var i=te+be*oe,o=ue+i,s=e.data($e)||[],l=!0;if(s.length){var c=s[0];l=o>c.expectedEndTime,l?u.cancel(c.timer):s.push(h)}if(l){var f=u(t,i,!1);s[0]={timer:f,expectedEndTime:o},s.push(h),e.data($e,s)}me.length&&e.on(me.join(" "),H),J.to&&(J.cleanupStyles&&E(W,Q,Object.keys(J.to)),p(e,J))}}function t(){var n=e.data($e);if(n){for(var t=1;t<n.length;t++)n[t]();e.removeData($e)}}if(!_){if(!Q.parentNode)return void h();var a=function(n){if(Y)X&&n&&(X=!1,h());else if(X=!n,Re.animationDuration){var e=w(Q,X);X?le.push(e):o(le,e)}},i=Ie>0&&(Re.transitionDuration&&0===Me.transitionDuration||Re.animationDuration&&0===Me.animationDuration)&&Math.max(Me.animationDelay,Me.transitionDelay);i?u(n,Math.floor(i*Ie*Ce),!1):n(),ne.resume=function(){a(!0)},ne.pause=function(){a(!1)}}}var J=t||{};J.$$prepared||(J=d(K(J)));var W={},Q=$(e);if(!Q||!Q.parentNode||!g.enabled())return S();var _,X,Y,Z,ne,ee,te,ae,oe,ue,le=[],fe=e.attr("class"),de=a(J),me=[];if(0===J.duration||!c.animations&&!c.transitions)return S();var ve=J.event&&V(J.event)?J.event.join(" "):J.event,pe=ve&&J.structural,he="",ge="";pe?he=i(ve,U,!0):ve&&(he=ve),J.addClass&&(ge+=i(J.addClass,q)),J.removeClass&&(ge.length&&(ge+=" "),ge+=i(J.removeClass,L)),J.applyClassesEarly&&ge.length&&R(e,J);var we=[he,ge].join(" ").trim(),De=fe+" "+we,xe=i(we,z),Ae=de.to&&Object.keys(de.to).length>0,Se=(J.keyframeStyle||"").length>0;if(!Se&&!Ae&&!we)return S();var Te,Me;if(J.stagger>0){var je=parseFloat(J.stagger);Me={transitionDelay:je,animationDelay:je,transitionDuration:0,animationDuration:0}}else Te=C(Q,De),Me=D(Q,we,Te,ke);J.$$skipPreparationClasses||r.addClass(e,we);var Oe;if(J.transitionStyle){var Ee=[P,J.transitionStyle];k(Q,Ee),le.push(Ee)}if(J.duration>=0){Oe=Q.style[P].length>0;var Pe=j(J.duration,Oe);k(Q,Pe),le.push(Pe)}if(J.keyframeStyle){var Ne=[I,J.keyframeStyle];k(Q,Ne),le.push(Ne)}var Ie=Me?J.staggerIndex>=0?J.staggerIndex:n.count(Te):0,Fe=0===Ie;Fe&&!J.skipBlocking&&b(Q,ce);var Re=O(Q,De,Te),qe=Re.maxDelay;ee=Math.max(qe,0),ae=Re.maxDuration;var Le={};if(Le.hasTransitions=Re.transitionDuration>0,Le.hasAnimations=Re.animationDuration>0,Le.hasTransitionAll=Le.hasTransitions&&"all"===Re.transitionProperty,Le.applyTransitionDuration=Ae&&(Le.hasTransitions&&!Le.hasTransitionAll||Le.hasAnimations&&!Le.hasTransitions),Le.applyAnimationDuration=J.duration&&Le.hasAnimations,Le.applyTransitionDelay=M(J.delay)&&(Le.applyTransitionDuration||Le.hasTransitions),Le.applyAnimationDelay=M(J.delay)&&Le.hasAnimations,Le.recalculateTimingStyles=ge.length>0,(Le.applyTransitionDuration||Le.applyAnimationDuration)&&(ae=J.duration?parseFloat(J.duration):ae,Le.applyTransitionDuration&&(Le.hasTransitions=!0,Re.transitionDuration=ae,Oe=Q.style[P+ie].length>0,le.push(j(ae,Oe))),Le.applyAnimationDuration&&(Le.hasAnimations=!0,Re.animationDuration=ae,le.push(x(ae)))),0===ae&&!Le.recalculateTimingStyles)return S();if(null!=J.delay){var Ue;"boolean"!=typeof J.delay&&(Ue=parseFloat(J.delay),ee=Math.max(Ue,0)),Le.applyTransitionDelay&&le.push(A(Ue)),Le.applyAnimationDelay&&le.push(A(Ue,!0))}return null==J.duration&&Re.transitionDuration>0&&(Le.recalculateTimingStyles=Le.recalculateTimingStyles||Fe),te=ee*Ce,oe=ae*Ce,J.skipBlocking||(Le.blockTransition=Re.transitionDuration>0,Le.blockKeyframeAnimation=Re.animationDuration>0&&Me.animationDelay>0&&0===Me.animationDuration),J.from&&(J.cleanupStyles&&E(W,Q,Object.keys(J.from)),v(e,J)),Le.blockTransition||Le.blockKeyframeAnimation?y(ae):J.skipBlocking||b(Q,!1),{$$willAnimate:!0,end:l,start:function(){return _?void 0:(ne={end:l,cancel:f,resume:null,pause:null},Z=new s(ne),T(B),Z)}}}}]}],xe=["$$animationProvider",function(n){function e(n){return n.parentNode&&11===n.parentNode.nodeType}n.drivers.push("$$animateCssDriver");var t="ng-animate-shim",r="ng-anchor",a="ng-anchor-out",i="ng-anchor-in";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(n,o,s,u,l,c,f){function d(n){return n.replace(/\bng-\S+\b/g,"")}function m(n,e){return ne(n)&&(n=n.split(" ")),ne(e)&&(e=e.split(" ")),n.filter(function(n){return-1===e.indexOf(n)}).join(" ")}function v(e,o,u){function l(n){var e={},t=$(n).getBoundingClientRect();return G(["width","height","top","left"],function(n){var r=t[n];switch(n){case"top":r+=g.scrollTop;break;case"left":r+=g.scrollLeft}e[n]=Math.floor(r)+"px"}),e}function c(){var e=n(h,{addClass:a,delay:!0,from:l(o)});return e.$$willAnimate?e:null}function f(n){return n.attr("class")||""}function v(){var e=d(f(u)),t=m(e,C),r=m(C,e),o=n(h,{to:l(u),addClass:i+" "+t,removeClass:a+" "+r,delay:!0});return o.$$willAnimate?o:null}function p(){h.remove(),o.removeClass(t),u.removeClass(t)}var h=te($(o).cloneNode(!0)),C=d(f(h));o.addClass(t),u.addClass(t),h.addClass(r),y.append(h);var b,w=c();if(!w&&(b=v(),!b))return p();var k=w||b;return{start:function(){function n(){t&&t.end()}var e,t=k.start();return t.done(function(){return t=null,!b&&(b=v())?(t=b.start(),t.done(function(){t=null,p(),e.complete()}),t):(p(),void e.complete())}),e=new s({end:n,cancel:n})}}}function p(n,e,t,r){var a=h(n,re),i=h(e,re),o=[];return G(r,function(n){var e=n.out,r=n["in"],a=v(t,e,r);a&&o.push(a)}),a||i||0!==o.length?{start:function(){function n(){G(e,function(n){n.end()})}var e=[];a&&e.push(a.start()),i&&e.push(i.start()),G(o,function(n){e.push(n.start())});var t=new s({end:n,cancel:n});return s.all(e,function(n){t.complete(n)}),t}}:void 0}function h(e){var t=e.element,r=e.options||{};e.structural&&(r.event=e.event,r.structural=!0,r.applyClassesEarly=!0,"leave"===e.event&&(r.onDone=r.domOperation)),r.preparationClasses&&(r.event=D(r.event,r.preparationClasses));var a=n(t,r);return a.$$willAnimate?a:null}if(!l.animations&&!l.transitions)return re;var g=f[0].body,C=$(u),y=te(e(C)||g.contains(C)?C:g);return function(n){return n.from&&n.to?p(n.from,n.to,n.classes,n.anchors):h(n)}}]}],Ae=["$animateProvider",function(n){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(e,t,r){function a(t){t=V(t)?t:t.split(" ");for(var r=[],a={},i=0;i<t.length;i++){var o=t[i],s=n.$$registeredAnimations[o];s&&!a[o]&&(r.push(e.get(s)),a[o]=!0)}return r}var i=f(r);return function(n,e,r,o){function s(){o.domOperation(),i(n,o)}function u(){v=!0,s(),m(n,o)}function l(n,e,r,a,i){var o;switch(r){case"animate":o=[e,a.from,a.to,i];break;case"setClass":o=[e,g,$,i];break;case"addClass":o=[e,g,i];break;case"removeClass":o=[e,$,i];break;default:o=[e,i]}o.push(a);var s=n.apply(n,o);if(s)if(Y(s.start)&&(s=s.start()),s instanceof t)s.done(i);else if(Y(s))return s;return re}function c(n,e,r,a,i){var o=[];return G(a,function(a){var s=a[i];s&&o.push(function(){var a,i,o=!1,u=function(n){o||(o=!0,(i||re)(n),a.complete(!n))};return a=new t({end:function(){u()},cancel:function(){u(!0)}}),i=l(s,n,e,r,function(n){var e=n===!1;u(e)}),a})}),o}function f(n,e,r,a,i){var o=c(n,e,r,a,i);if(0===o.length){var s,u;"beforeSetClass"===i?(s=c(n,"removeClass",r,a,"beforeRemoveClass"),u=c(n,"addClass",r,a,"beforeAddClass")):"setClass"===i&&(s=c(n,"removeClass",r,a,"removeClass"),u=c(n,"addClass",r,a,"addClass")),s&&(o=o.concat(s)),u&&(o=o.concat(u))}return 0!==o.length?function(n){var e=[];return o.length&&G(o,function(n){e.push(n())}),e.length?t.all(e,n):n(),function(n){G(e,function(e){n?e.cancel():e.end()})}}:void 0}var v=!1;3===arguments.length&&Z(r)&&(o=r,r=null),o=d(o),r||(r=n.attr("class")||"",o.addClass&&(r+=" "+o.addClass),o.removeClass&&(r+=" "+o.removeClass));var p,h,g=o.addClass,$=o.removeClass,C=a(r);if(C.length){var y,b;"leave"===e?(b="leave",y="afterLeave"):(b="before"+e.charAt(0).toUpperCase()+e.substr(1),y=e),"enter"!==e&&"move"!==e&&(p=f(n,e,o,C,b)),h=f(n,e,o,C,y)}if(p||h){var w;return{$$willAnimate:!0,end:function(){return w?w.end():(u(),w=new t,w.complete(!0)),w},start:function(){function n(n){u(n),w.complete(n)}function e(e){v||((r||re)(e),n(e))}if(w)return w;w=new t;var r,a=[];return p&&a.push(function(n){r=p(n)}),a.length?a.push(function(n){s(),n(!0)}):s(),h&&a.push(function(n){r=h(n)}),w.setHost({end:function(){e()},cancel:function(){e(!0)}}),t.chain(a,n),w}}}}}]}],Se=["$$animationProvider",function(n){n.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(n,e){function t(e){var t=e.element,r=e.event,a=e.options,i=e.classes;return n(t,r,i,a)}return function(n){if(n.from&&n.to){var r=t(n.from),a=t(n.to);if(!r&&!a)return;return{start:function(){function n(){return function(){G(i,function(n){n.end()})}}function t(n){o.complete(n)}var i=[];r&&i.push(r.start()),a&&i.push(a.start()),e.all(i,t);var o=new e({end:n(),cancel:n()});return o}}}return t(n)}}]}],Te="data-ng-animate",Me="$ngAnimatePin",je=["$animateProvider",function(e){function r(n){if(!n)return null;var e=n.split(v),t=Object.create(null);return G(e,function(n){t[n]=!0}),t}function a(n,e){if(n&&e){var t=r(e);return n.split(v).some(function(n){return t[n]})}}function i(n,e,t,r){return p[n].some(function(n){return n(e,t,r)})}function o(n,e){var t=(n.addClass||"").length>0,r=(n.removeClass||"").length>0;return e?t&&r:t||r}var l=1,c=2,v=" ",p=this.rules={skip:[],cancel:[],join:[]};p.join.push(function(n,e){return!e.structural&&o(e)}),p.skip.push(function(n,e){return!e.structural&&!o(e)}),p.skip.push(function(n,e,t){return"leave"===t.event&&e.structural}),p.skip.push(function(n,e,t){return t.structural&&t.state===c&&!e.structural}),p.cancel.push(function(n,e,t){return t.structural&&e.structural}),p.cancel.push(function(n,e,t){return t.state===c&&e.structural}),p.cancel.push(function(n,e,t){if(t.structural)return!1;var r=e.addClass,i=e.removeClass,o=t.addClass,s=t.removeClass;return ee(r)&&ee(i)||ee(o)&&ee(s)?!1:a(r,s)||a(i,o)}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$HashMap","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow",function(r,a,v,p,g,b,w,k,D){function x(){var n=!1;return function(e){n?e():a.$$postDigest(function(){n=!0,e()})}}function A(n,e){return h(n,e,{})}function S(n,e,t){var r=$(e),a=$(n),i=[],o=z[t];return o&&G(o,function(n){Y.call(n.node,r)?i.push(n.callback):"leave"===t&&Y.call(n.node,a)&&i.push(n.callback)}),i}function T(n,e,t){var r=u(e);return n.filter(function(n){var e=n.node===r&&(!t||n.callback===t);return!e})}function M(n,e){"close"!==n||e[0].parentNode||re.off(e)}function j(n,e,t){function u(e,t,a,i){T(function(){var e=S(g,n,t);e.length?r(function(){G(e,function(e){e(n,a,i)}),M(a,n)}):M(a,n)}),e.progress(t,a,i)}function f(e){y(n,k),W(n,k),m(n,k),k.domOperation(),D.complete(!e)}var v,g,k=K(t);n=s(n),n&&(v=$(n),g=n.parent()),k=d(k);var D=new w,T=x();if(V(k.addClass)&&(k.addClass=k.addClass.join(" ")),k.addClass&&!ne(k.addClass)&&(k.addClass=null),V(k.removeClass)&&(k.removeClass=k.removeClass.join(" ")),k.removeClass&&!ne(k.removeClass)&&(k.removeClass=null),k.from&&!Z(k.from)&&(k.from=null),k.to&&!Z(k.to)&&(k.to=null),!v)return f(),D;var j=[v.className,k.addClass,k.removeClass].join(" ");if(!B(j))return f(),D;var P=["enter","move","leave"].indexOf(e)>=0,R=p[0].hidden,U=!L||R||q.get(v),z=!U&&F.get(v)||{},H=!!z.state;if(U||H&&z.state===l||(U=!N(n,g,e)),U)return R&&u(D,e,"start"),f(),R&&u(D,e,"close"),D;P&&O(n);var J={structural:P,element:n,event:e,addClass:k.addClass,removeClass:k.removeClass,close:f,options:k,runner:D};if(H){var Q=i("skip",n,J,z);if(Q)return z.state===c?(f(),D):(h(n,z,J),z.runner);var _=i("cancel",n,J,z);if(_)if(z.state===c)z.runner.end();else{if(!z.structural)return h(n,z,J),z.runner;z.close()}else{var X=i("join",n,J,z);if(X){if(z.state!==c)return C(n,P?e:null,k),e=J.event=z.event,k=h(n,z,J),z.runner;A(n,J)}}}else A(n,J);var Y=J.structural;if(Y||(Y="animate"===J.event&&Object.keys(J.options.to||{}).length>0||o(J)),!Y)return f(),E(n),D;var ee=(z.counter||0)+1;return J.counter=ee,I(n,l,J),a.$$postDigest(function(){var t=F.get(v),r=!t;t=t||{};var a=n.parent()||[],i=a.length>0&&("animate"===t.event||t.structural||o(t));if(r||t.counter!==ee||!i)return r&&(W(n,k),m(n,k)),(r||P&&t.event!==e)&&(k.domOperation(),D.end()),void(i||E(n));e=!t.structural&&o(t,!0)?"setClass":t.event,I(n,c);var s=b(n,e,t.options);D.setHost(s),u(D,e,"start",{}),s.done(function(t){f(!t);var r=F.get(v);r&&r.counter===ee&&E($(n)),u(D,e,"close",{})})}),D}function O(n){var e=$(n),t=e.querySelectorAll("["+Te+"]");G(t,function(n){var e=parseInt(n.getAttribute(Te),10),t=F.get(n);if(t)switch(e){case c:t.runner.end();case l:F.remove(n)}})}function E(n){var e=$(n);e.removeAttribute(Te),F.remove(e)}function P(n,e){return $(n)===$(e)}function N(n,e){var t,r=te(p[0].body),a=P(n,r)||"HTML"===n[0].nodeName,i=P(n,v),o=!1,s=q.get($(n)),u=te.data(n[0],Me);for(u&&(e=u),e=$(e);e&&(i||(i=P(e,v)),e.nodeType===R);){var l=F.get(e)||{};if(!o){var c=q.get(e);if(c===!0&&s!==!1){s=!0;break}c===!1&&(s=!1),o=l.structural}if(ee(t)||t===!0){var f=te.data(e,J);_(f)&&(t=f)}if(o&&t===!1)break;if(a||(a=P(e,r)),a&&i)break;e=i||!(u=te.data(e,Me))?e.parentNode:$(u)}var d=(!o||t)&&s!==!0;return d&&i&&a}function I(n,e,t){t=t||{},t.state=e;var r=$(n);r.setAttribute(Te,e);var a=F.get(r),i=a?Q(a,t):t;F.put(r,i)}var F=new g,q=new g,L=null,U=a.$watch(function(){return 0===k.totalPendingRequests},function(n){n&&(U(),a.$$postDigest(function(){a.$$postDigest(function(){null===L&&(L=!0)})}))}),z=Object.create(null),H=e.classNameFilter(),B=H?function(n){return H.test(n)}:function(){return!0},W=f(D),Y=n.Node.prototype.contains||function(n){return this===n||!!(16&this.compareDocumentPosition(n))},re={on:function(n,e,t){var r=u(e);z[n]=z[n]||[],z[n].push({node:r,callback:t}),te(e).on("$destroy",function(){var a=F.get(r);a||re.off(n,e,t)})},off:function(n,e,t){if(1!==arguments.length||ne(arguments[0])){var r=z[n];r&&(z[n]=1===arguments.length?null:T(r,e,t))}else{e=arguments[0];for(var a in z)z[a]=T(z[a],e)}},pin:function(n,e){t(X(n),"element","not an element"),t(X(e),"parentElement","not an element"),n.data(Me,e)},push:function(n,e,t,r){return t=t||{},t.domOperation=r,j(n,e,t)},enabled:function(n,e){var t=arguments.length;if(0===t)e=!!L;else{var r=X(n);if(r){var a=$(n);1===t?e=!q.get(a):q.put(a,!e)}else e=L=!!n}return e}};return re}]}],Oe=["$animateProvider",function(){function n(n,e){n.data(o,e)}function e(n){n.removeData(o)}function t(n){return n.data(o)}var a="ng-animate-ref",i=this.drivers=[],o="$$animationRunner";this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$HashMap","$$rAFScheduler",function(o,s,u,l,c,v){function p(n){function e(n){if(n.processed)return n;n.processed=!0;var t=n.domNode,r=t.parentNode;i.put(t,n);for(var o;r;){if(o=i.get(r)){o.processed||(o=e(o));break}r=r.parentNode}return(o||a).children.push(n),n}function t(n){var e,t=[],r=[];for(e=0;e<n.children.length;e++)r.push(n.children[e]);var a=r.length,i=0,o=[];for(e=0;e<r.length;e++){var s=r[e];0>=a&&(a=i,i=0,t.push(o),o=[]),o.push(s.fn),s.children.forEach(function(n){i++,r.push(n)}),a--}return o.length&&t.push(o),t}var r,a={children:[]},i=new c;for(r=0;r<n.length;r++){var o=n[r];i.put(o.domNode,n[r]={domNode:o.domNode,fn:o.fn,children:[]})}for(r=0;r<n.length;r++)e(n[r]);return t(a)}var h=[],g=f(o);return function(c,f,C){function y(n){var e="["+a+"]",t=n.hasAttribute(a)?[n]:n.querySelectorAll(e),r=[];return G(t,function(n){var e=n.getAttribute(a);e&&e.length&&r.push(n)}),r}function b(n){var e=[],t={};G(n,function(n,r){var i=n.element,o=$(i),s=n.event,u=["enter","move"].indexOf(s)>=0,l=n.structural?y(o):[];if(l.length){var c=u?"to":"from";G(l,function(n){var e=n.getAttribute(a);t[e]=t[e]||{},t[e][c]={animationID:r,element:te(n)}})}else e.push(n)});var r={},i={};return G(t,function(t){var a=t.from,o=t.to;if(!a||!o){var s=a?a.animationID:o.animationID,u=s.toString();return void(r[u]||(r[u]=!0,e.push(n[s])))}var l=n[a.animationID],c=n[o.animationID],f=a.animationID.toString();if(!i[f]){var d=i[f]={structural:!0,beforeStart:function(){l.beforeStart(),c.beforeStart()},close:function(){l.close(),c.close()},classes:w(l.classes,c.classes),from:l,to:c,anchors:[]};d.classes.length?e.push(d):(e.push(l),e.push(c))}i[f].anchors.push({out:a.element,"in":o.element})}),e}function w(n,e){n=n.split(" "),e=e.split(" ");for(var t=[],r=0;r<n.length;r++){var a=n[r];if("ng-"!==a.substring(0,3))for(var i=0;i<e.length;i++)if(a===e[i]){t.push(a);break}}return t.join(" ")}function k(n){for(var e=i.length-1;e>=0;e--){var t=i[e],r=u.get(t),a=r(n);if(a)return a}}function D(){c.addClass(B),O&&o.addClass(c,O),E&&(o.removeClass(c,E),E=null)}function x(n,e){function r(n){var r=t(n);r&&r.setHost(e)}n.from&&n.to?(r(n.from.element),r(n.to.element)):r(n.element)}function A(){var n=t(c);!n||"leave"===f&&C.$$domOperationFired||n.end()}function S(n){c.off("$destroy",A),e(c),g(c,C),m(c,C),C.domOperation(),O&&o.removeClass(c,O),c.removeClass(B),M.complete(!n)}C=d(C);var T=["enter","move","leave"].indexOf(f)>=0,M=new l({end:function(){S()},cancel:function(){S(!0)}});if(!i.length)return S(),M;n(c,M);var j=r(c.attr("class"),r(C.addClass,C.removeClass)),O=C.tempClasses;O&&(j+=" "+O,C.tempClasses=null);var E;return T&&(E="ng-"+f+H,o.addClass(c,E)),h.push({element:c,classes:j,event:f,structural:T,options:C,beforeStart:D,close:S}),c.on("$destroy",A),h.length>1?M:(s.$$postDigest(function(){var n=[];G(h,function(e){t(e.element)?n.push(e):e.close()}),h.length=0;var e=b(n),r=[];G(e,function(n){r.push({domNode:$(n.from?n.from.element:n.element),fn:function(){n.beforeStart();var e,r=n.close,a=n.anchors?n.from.element||n.to.element:n.element;if(t(a)){var i=k(n);i&&(e=i.start)}if(e){var o=e();o.done(function(n){r(!n)}),x(n,o)}else r()}})}),v(p(r))}),M)}}]}],Ee=["$animate","$rootScope",function(n){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(e,t,r,a,i){var o,s;e.$watchCollection(r.ngAnimateSwap||r["for"],function(r){o&&n.leave(o),s&&(s.$destroy(),s=null),(r||0===r)&&(s=e.$new(),i(s,function(e){o=e,n.enter(e,null,t)}))})}}}];e.module("ngAnimate",[],function(){re=e.noop,K=e.copy,Q=e.extend,te=e.element,G=e.forEach,V=e.isArray,ne=e.isString,Z=e.isObject,ee=e.isUndefined,_=e.isDefined,Y=e.isFunction,X=e.isElement}).directive("ngAnimateSwap",Ee).directive("ngAnimateChildren",ge).factory("$$rAFScheduler",he).provider("$$animateQueue",je).provider("$$animation",Oe).provider("$animateCss",De).provider("$$animateCssDriver",xe).provider("$$animateJs",Ae).provider("$$animateJsDriver",Se)}(window,window.angular),!function(n,e){"use strict";function t(n,e){if(s(n)){e=e||[];for(var t=0,r=n.length;r>t;t++)e[t]=n[t]}else if(u(n)){e=e||{};for(var a in n)("$"!==a.charAt(0)||"$"!==a.charAt(1))&&(e[a]=n[a])}return e||n}function r(){function n(n,t){return e.extend(Object.create(n),t)}function r(n,e){var t=e.caseInsensitiveMatch,r={originalPath:n,regexp:n},a=r.keys=[];return n=n.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[?*])?/g,function(n,e,t,r){var i="?"===r||"*?"===r?"?":null,o="*"===r||"*?"===r?"*":null;return a.push({name:t,optional:!!i}),e=e||"",""+(i?"":e)+"(?:"+(i?e:"")+(o&&"(.+?)"||"([^/]+)")+(i||"")+")"+(i||"")}).replace(/([/$*])/g,"\\$1"),r.regexp=new RegExp("^"+n+"$",t?"i":""),r}s=e.isArray,u=e.isObject;var a={};this.when=function(n,i){var o=t(i);if(e.isUndefined(o.reloadOnSearch)&&(o.reloadOnSearch=!0),e.isUndefined(o.caseInsensitiveMatch)&&(o.caseInsensitiveMatch=this.caseInsensitiveMatch),a[n]=e.extend(o,n&&r(n,o)),n){var s="/"===n[n.length-1]?n.substr(0,n.length-1):n+"/";a[s]=e.extend({redirectTo:n},r(s,o))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(n){return"string"==typeof n&&(n={redirectTo:n}),this.when(null,n),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(t,r,i,o,s,u,l){function f(n,e){var t=e.keys,r={};if(!e.regexp)return null;var a=e.regexp.exec(n);if(!a)return null;for(var i=1,o=a.length;o>i;++i){var s=t[i-1],u=a[i];s&&u&&(r[s.name]=u)}return r}function d(n){var r=b.current;$=h(),C=$&&r&&$.$$route===r.$$route&&e.equals($.pathParams,r.pathParams)&&!$.reloadOnSearch&&!y,C||!r&&!$||t.$broadcast("$routeChangeStart",$,r).defaultPrevented&&n&&n.preventDefault()}function m(){var n=b.current,a=$;C?(n.params=a.params,e.copy(n.params,i),t.$broadcast("$routeUpdate",n)):(a||n)&&(y=!1,b.current=a,a&&a.redirectTo&&(e.isString(a.redirectTo)?r.path(g(a.redirectTo,a.params)).search(a.params).replace():r.url(a.redirectTo(a.pathParams,r.path(),r.search())).replace()),o.when(a).then(v).then(function(r){a===b.current&&(a&&(a.locals=r,e.copy(a.params,i)),t.$broadcast("$routeChangeSuccess",a,n))},function(e){a===b.current&&t.$broadcast("$routeChangeError",a,n,e)}))}function v(n){if(n){var t=e.extend({},n.resolve);e.forEach(t,function(n,r){t[r]=e.isString(n)?s.get(n):s.invoke(n,null,null,r)});var r=p(n);return e.isDefined(r)&&(t.$template=r),o.all(t)}}function p(n){var t,r;return e.isDefined(t=n.template)?e.isFunction(t)&&(t=t(n.params)):e.isDefined(r=n.templateUrl)&&(e.isFunction(r)&&(r=r(n.params)),e.isDefined(r)&&(n.loadedTemplateUrl=l.valueOf(r),t=u(r))),t}function h(){var t,i;return e.forEach(a,function(a){!i&&(t=f(r.path(),a))&&(i=n(a,{params:e.extend({},r.search(),t),pathParams:t}),i.$$route=a)}),i||a[null]&&n(a[null],{params:{},pathParams:{}})}function g(n,t){var r=[];return e.forEach((n||"").split(":"),function(n,e){if(0===e)r.push(n);else{var a=n.match(/(\w+)(?:[?*])?(.*)/),i=a[1];r.push(t[i]),r.push(a[2]||""),delete t[i]}}),r.join("")}var $,C,y=!1,b={routes:a,reload:function(){y=!0;var n={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0,y=!1}};t.$evalAsync(function(){d(n),n.defaultPrevented||m()})},updateParams:function(n){if(!this.current||!this.current.$$route)throw c("norout","Tried updating route when with no current route");n=e.extend({},this.current.params,n),r.path(g(this.current.$$route.originalPath,n)),r.search(n)}};return t.$on("$locationChangeStart",d),t.$on("$locationChangeSuccess",m),b}]}function a(){this.$get=function(){return{}}}function i(n,t,r){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(a,i,o,s,u){function l(){m&&(r.cancel(m),m=null),f&&(f.$destroy(),f=null),d&&(m=r.leave(d),m.done(function(n){n!==!1&&(m=null)}),d=null)}function c(){var o=n.current&&n.current.locals,s=o&&o.$template;if(e.isDefined(s)){var c=a.$new(),m=n.current,h=u(c,function(n){r.enter(n,null,d||i).done(function(n){n===!1||!e.isDefined(v)||v&&!a.$eval(v)||t()}),l()});d=h,f=m.scope=c,f.$emit("$viewContentLoaded"),f.$eval(p)}else l()}var f,d,m,v=o.autoscroll,p=o.onload||"";a.$on("$routeChangeSuccess",c),c()}}}function o(n,e,t){return{restrict:"ECA",priority:-400,link:function(r,a){var i=t.current,o=i.locals;a.html(o.$template);var s=n(a.contents());if(i.controller){o.$scope=r;var u=e(i.controller,o);i.controllerAs&&(r[i.controllerAs]=u),a.data("$ngControllerController",u),a.children().data("$ngControllerController",u)}r[i.resolveAs||"$resolve"]=o,s(r)}}}var s,u,l=e.module("ngRoute",["ng"]).provider("$route",r),c=e.$$minErr("ngRoute");l.provider("$routeParams",a),l.directive("ngView",i),l.directive("ngView",o),i.$inject=["$route","$anchorScroll","$animate"],o.$inject=["$compile","$controller","$route"]}(window,window.angular),!function(n,e){"use strict";function t(){function t(n,e){var t,r={},a=n.split(",");for(t=0;t<a.length;t++)r[e?u(a[t]):a[t]]=!0;return r}function r(e,t){null===e||void 0===e?e="":"string"!=typeof e&&(e=""+e),$.innerHTML=e;var r=5;do{if(0===r)throw d("uinput","Failed to sanitize html because the input is unstable");r--,n.document.documentMode&&h($),e=$.innerHTML,$.innerHTML=e}while(e!==$.innerHTML);for(var a=$.firstChild;a;){switch(a.nodeType){case 1:t.start(a.nodeName.toLowerCase(),m(a.attributes));break;case 3:t.chars(a.textContent)}var i;if(!(i=a.firstChild)&&(1===a.nodeType&&t.end(a.nodeName.toLowerCase()),i=a.nextSibling,!i))for(;null==i&&(a=a.parentNode,a!==$);)i=a.nextSibling,1===a.nodeType&&t.end(a.nodeName.toLowerCase());a=i}for(;a=$.firstChild;)$.removeChild(a)}function m(n){for(var e={},t=0,r=n.length;r>t;t++){var a=n[t];e[a.name]=a.value}return e}function v(n){return n.replace(/&/g,"&amp;").replace(C,function(n){var e=n.charCodeAt(0),t=n.charCodeAt(1);return"&#"+(1024*(e-55296)+(t-56320)+65536)+";"}).replace(y,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function p(n,e){var t=!1,r=a(n,n.push);return{start:function(n,a){n=u(n),!t&&T[n]&&(t=n),t||M[n]!==!0||(r("<"),r(n),o(a,function(t,a){var i=u(a),o="img"===n&&"src"===i||"background"===i;P[i]!==!0||j[i]===!0&&!e(t,o)||(r(" "),r(a),r('="'),r(v(t)),r('"'))}),r(">"))},end:function(n){n=u(n),t||M[n]!==!0||b[n]===!0||(r("</"),r(n),r(">")),n==t&&(t=!1)},chars:function(n){t||r(v(n))}}}function h(e){for(;e;){if(e.nodeType===n.Node.ELEMENT_NODE)for(var t=e.attributes,r=0,a=t.length;a>r;r++){var i=t[r],o=i.name.toLowerCase();("xmlns:ns1"===o||0===o.lastIndexOf("ns1:",0))&&(e.removeAttributeNode(i),r--,a--)}var s=e.firstChild;s&&h(s),e=e.nextSibling}}var g=!1;this.$get=["$$sanitizeUri",function(n){return g&&i(M,S),function(e){var t=[];return c(e,f(t,function(e,t){return!/^unsafe:/.test(n(e,t))})),t.join("")}}],this.enableSvg=function(n){return s(n)?(g=n,this):g},a=e.bind,i=e.extend,o=e.forEach,s=e.isDefined,u=e.lowercase,l=e.noop,c=r,f=p;var $,C=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,y=/([^#-~ |!])/g,b=t("area,br,col,hr,img,wbr"),w=t("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),k=t("rp,rt"),D=i({},k,w),x=i({},w,t("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),A=i({},k,t("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),S=t("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),T=t("script,style"),M=i({},b,x,A,D),j=t("background,cite,href,longdesc,src,xlink:href"),O=t("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),E=t("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),P=i({},j,E,O);!function(n){var e;if(!n.document||!n.document.implementation)throw d("noinert","Can't create an inert html document");e=n.document.implementation.createHTMLDocument("inert");var t=e.documentElement||e.getDocumentElement(),r=t.getElementsByTagName("body");if(1===r.length)$=r[0];else{var a=e.createElement("html");$=e.createElement("body"),a.appendChild($),e.appendChild(a)}}(n)}function r(n){var e=[],t=f(e,l);return t.chars(n),e.join("")}var a,i,o,s,u,l,c,f,d=e.$$minErr("$sanitize");e.module("ngSanitize",[]).provider("$sanitize",t),e.module("ngSanitize").filter("linky",["$sanitize",function(n){var t=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,a=/^mailto:/i,i=e.$$minErr("linky"),o=e.isDefined,s=e.isFunction,u=e.isObject,l=e.isString;return function(e,c,f){function d(n){n&&C.push(r(n))}function m(n,e){var t,r=g(n);C.push("<a ");for(t in r)C.push(t+'="'+r[t]+'" ');!o(c)||"target"in r||C.push('target="',c,'" '),C.push('href="',n.replace(/"/g,"&quot;"),'">'),d(e),C.push("</a>")}if(null==e||""===e)return e;if(!l(e))throw i("notstring","Expected string but received: {0}",e);for(var v,p,h,g=s(f)?f:u(f)?function(){return f}:function(){return{}},$=e,C=[];v=$.match(t);)p=v[0],v[2]||v[4]||(p=(v[3]?"http://":"mailto:")+p),h=v.index,d($.substr(0,h)),m(p,v[0].replace(a,"")),$=$.substring(h+v[0].length);return d($),n(C.join(""))}}])}(window,window.angular),!function(n,e){"use strict";function t(n,t,r){function a(n,r,a){var o,s;a=a||{},s=a.expires,o=e.isDefined(a.path)?a.path:i,e.isUndefined(r)&&(s="Thu, 01 Jan 1970 00:00:00 GMT",r=""),e.isString(s)&&(s=new Date(s));var u=encodeURIComponent(n)+"="+encodeURIComponent(r);u+=o?";path="+o:"",u+=a.domain?";domain="+a.domain:"",u+=s?";expires="+s.toUTCString():"",u+=a.secure?";secure":"";var l=u.length+1;return l>4096&&t.warn("Cookie '"+n+"' possibly not set or overflowed because it was too large ("+l+" > 4096 bytes)!"),u}var i=r.baseHref(),o=n[0];return function(n,e,t){o.cookie=a(n,e,t)}}e.module("ngCookies",["ng"]).provider("$cookies",[function(){function n(n){return n?e.extend({},t,n):t}var t=this.defaults={};this.$get=["$$cookieReader","$$cookieWriter",function(t,r){return{get:function(n){return t()[n]},getObject:function(n){var t=this.get(n);return t?e.fromJson(t):t},getAll:function(){return t()},put:function(e,t,a){r(e,t,n(a))},putObject:function(n,t,r){this.put(n,e.toJson(t),r)},remove:function(e,t){r(e,void 0,n(t))}}}]}]),e.module("ngCookies").factory("$cookieStore",["$cookies",function(n){return{get:function(e){return n.getObject(e)},put:function(e,t){n.putObject(e,t)},remove:function(e){n.remove(e)}}}]),t.$inject=["$document","$log","$browser"],e.module("ngCookies").provider("$$cookieWriter",function(){this.$get=t})}(window,window.angular),!function(n,e){"use strict";function t(){function n(n,e){return n?a(n)?n.indexOf(e)>=0:n.hasOwnProperty(e):void 0}return["$animate",function(e){return{restrict:"AE",transclude:"element",priority:1,terminal:!0,require:"^^ngMessages",link:function(t,r,i,o,s){var u,l=r[0],c=i.ngMessage||i.when,f=i.ngMessageExp||i.whenExp,d=function(n){u=n?a(n)?n:n.split(/[\s,]+/):null,o.reRender()};f?(d(t.$eval(f)),t.$watchCollection(f,d)):d(c);var m,v;o.register(l,v={test:function(e){return n(u,e)},attach:function(){m||s(function(n,t){e.enter(n,null,r),m=n;var a=m.$$attachId=o.getAttachId();m.on("$destroy",function(){m&&m.$$attachId===a&&(o.deregister(l),v.detach()),t.$destroy()})})},detach:function(){if(m){var n=m;m=null,e.leave(n)}}})}}}]}var r,a,i,o;e.module("ngMessages",[],function(){r=e.forEach,a=e.isArray,i=e.isString,o=e.element}).directive("ngMessages",["$animate",function(n){function e(n,e){return i(e)&&0===e.length||t(n.$eval(e))}function t(n){return i(n)?n.length:!!n}var a="ng-active",o="ng-inactive";return{require:"ngMessages",restrict:"AE",controller:["$element","$scope","$attrs",function(i,s,u){function l(n,e){for(var t=e,r=[];t&&t!==n;){var a=t.$$ngMessageNode;if(a&&a.length)return g[a];t.childNodes.length&&-1===r.indexOf(t)?(r.push(t),t=t.childNodes[t.childNodes.length-1]):t.previousSibling?t=t.previousSibling:(t=t.parentNode,r.push(t))}}function c(n,e,t){var r=g[t];if(d.head){var a=l(n,e);a?(r.next=a.next,a.next=r):(r.next=d.head,d.head=r)}else d.head=r}function f(n,e,t){var r=g[t],a=l(n,e);a?a.next=r.next:d.head=r.next}var d=this,m=0,v=0;this.getAttachId=function(){return v++};var p,h,g=this.messages={};this.render=function(l){l=l||{},p=!1,h=l;for(var c=e(s,u.ngMessagesMultiple)||e(s,u.multiple),f=[],m={},v=d.head,g=!1,$=0;null!=v;){$++;var C=v.message,y=!1;g||r(l,function(n,e){if(!y&&t(n)&&C.test(e)){if(m[e])return;m[e]=!0,y=!0,C.attach()}}),y?g=!c:f.push(C),v=v.next}r(f,function(n){n.detach()}),f.length!==$?n.setClass(i,a,o):n.setClass(i,o,a)},s.$watchCollection(u.ngMessages||u["for"],d.render),i.on("$destroy",function(){r(g,function(n){n.message.detach()})}),this.reRender=function(){p||(p=!0,s.$evalAsync(function(){p&&h&&d.render(h)}))},this.register=function(n,e){var t=m.toString();g[t]={message:e},c(i[0],n,t),n.$$ngMessageNode=t,m++,d.reRender()},this.deregister=function(n){var e=n.$$ngMessageNode;delete n.$$ngMessageNode,f(i[0],n,e),delete g[e],d.reRender()}}]}}]).directive("ngMessagesInclude",["$templateRequest","$document","$compile",function(n,e,t){function r(n,r){var a=t.$$createComment?t.$$createComment("ngMessagesInclude",r):e[0].createComment(" ngMessagesInclude: "+r+" "),i=o(a);n.after(i),n.remove()}return{restrict:"AE",require:"^^ngMessages",link:function(e,a,o){var s=o.ngMessagesInclude||o.src;n(s).then(function(n){e.$$destroyed||(i(n)&&!n.trim()?r(a,s):t(n)(e,function(n){a.after(n),r(a,s)}))})}}}]).directive("ngMessage",t()).directive("ngMessageExp",t())}(window,window.angular)};define(rA[334][0],["angular"],function(){return n(),"ready"})}();define(rA[179][0],[],function(){function r(r,t){if(0===r||isNaN(r))return r;var n=Math.pow(10,t);return Math.round(r*n)/n}function t(r){return r&&"string"==typeof r?Number(r.replace(/[^0-9\-\.]+/g,"")):r}function o(r,t){var o=parseInt(t)||0;if(-20>o||o>100)throw new RangeError("Precision of "+o+" fractional digits is out of range");var i=Number(r);if(isNaN(i))return 0/0;r=Number(r);var e="";if(0>=i&&(e="-",i=-i),i>=Math.pow(10,21))return e+i.toString();var u,a=Math.pow(10,o);if(n=Math.floor(i*a),Math.abs(n/a-i)>=Math.abs((n+1)/a-i)&&++n,u=0==n?"0":n.toString(),0==o)return e+u;var p=u.length;if(o>=p){var f=Math.pow(10,o+1-p).toString().substring(1);u=f+u,p=o+1}if(o>0){var s=u.substring(0,p-o),g=u.substring(p-o);u=s+"."+g}return 0===r?r+u:e+u}function i(r,t){return r*t/100}return Number.prototype.toNumberFixed=function(t){return r(this,t)},String.prototype.toNumberFixed=function(t){var n=parseFloat(this);return r(n,t)},String.prototype.format=String.prototype.format||function(){var r=arguments;return this.replace(/\{\{|\}\}|\{(\d+)\}/g,function(t,n){return"{{"==t?"{":"}}"==t?"}":r[n]})},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),window.parseToFloat=t,window.toFixed=r,window.toFixedSting=o,window.numberFromPercent=i,window.stringFormatApply=function(r,t){return String.prototype.format.apply(r,t)},!0});define(rA[353][0],["angular"],function(t){"use strict";function e(t){return n=t,r}function r(e,r){return i(e)&&i(r)&&(e.inheritsFrom(r),e.prototype.runBaseCtor=function(e){n=n||t.element(document.body).injector(),n.invoke(r,this,e)}),e}var n,i=t.isFunction,o=t.module("infrastruct.utils.diFuncInheritance",[]);return o.service("infrastruct.utils.diFuncInheritance",e),o.run(["infrastruct.utils.diFuncInheritance",function(){}]),e.$inject=["$injector"],r.ngModule=o,Function.prototype.inheritsFrom=function(t){var e=this.prototype;this.prototype=Object.create(t.prototype);for(var r in e){var n=Object.getOwnPropertyDescriptor(e,r);n&&(n.get||n.set)?Object.defineProperty(this.prototype,r,{get:n.get,set:n.set,enumerable:!0,configurable:!0}):this.prototype[r]=e[r]}this.prototype.constructor=this,Object.defineProperty(this.prototype,"constructor",{enumerable:!1,value:this})},r});define(rA[305][0],["angular"],function(e){function t(e){return/^[a-z0-9-_]*$/i.test(e)}var r={instrumentsGroups:["bl.factories.trading.instruments.instrumentsGroupsFactory",function(e){return e.init()}]};return[{url:"/discover/markets",config:{sharePages:{showShareButton:!0,urlKey:"MarketsDiscoveryPage"},template:"",resolve:e.extend({},r,{isUserFromUs:["$rootScope","$location","infrastruct.services.config",function(e,t){var r=e.session.isUsUser(),s="/discover";return t.replace(),t.path(s),r}]}),metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/discover/markets/index.view.html"},mainNavId:"discoverMarkets"}},{url:"/discover/markets/results",config:{sharePages:{showShareButton:!0,urlKey:"MarketsDiscoverySearchPage"},template:"<et-discovery-markets-results></et-discovery-markets-results>",reloadOnSearch:!1,resolve:r,mainNavId:"discoverMarkets"}},{url:"/discover/markets/top-markets",config:{sharePages:{showShareButton:!0,urlKey:"TopMarketsDiscoverySearchPage"},template:"<et-discovery-markets-results></et-discovery-markets-results>",reloadOnSearch:!1,resolve:{queryResolver:["discoveryService",function(e){return e.getTopMarkets().then(function(e){if(e&&e.length){var t=e.map(function(e){return e.instrument});return{id:"topMarkets",instruments:t,showInstrumentsDropdown:!1}}$location.path("/")})["catch"](function(){$location.path("/")})}]},mainNavId:"discoverTopMarkets"}},{url:"/discover/markets/market-movers",config:{sharePages:{showShareButton:!0,urlKey:"MarketsDiscoverySearchPage"},template:"<et-discovery-markets-results></et-discovery-markets-results>",reloadOnSearch:!1,resolve:{queryResolver:["discoveryService","bl.factories.trading.instruments.instrumentsGroupsFactory",function(e,t){return t.init().then(function(){return e.getLazyTopMovers({instrumentsCount:50}).then(function(e){return{id:"moversAndShakers",instruments:e,showInstrumentsDropdown:!1}})})}]},metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/discover/markets/market-movers.view.html"},mainNavId:"discoverMarkets"}},{url:"/discover/markets/stocks/market-movers",config:{sharePages:{showShareButton:!0,urlKey:"MarketsDiscoverySearchPage"},template:"<et-discovery-markets-results></et-discovery-markets-results>",reloadOnSearch:!1,resolve:{queryResolver:["discoveryService","bl.factories.trading.instruments.instrumentsGroupsFactory",function(e,t){return t.init().then(function(){return e.getLazyTopMovers({instrumentsCount:50,type:"Stocks"}).then(function(e){return{showInstrumentsDropdown:!1,newDiscoverCategories:{preset:"moversAndShakers"},InstrumentTypeID:5,id:"moversAndShakers",instruments:e}})})}]},metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/discover/markets/market-movers.view.html"},mainNavId:"discoverMarkets"}},{url:"/discover/markets/cryptocurrencies/market-movers",config:{sharePages:{showShareButton:!0,urlKey:"MarketsDiscoverySearchPage"},template:"<et-discovery-markets-results></et-discovery-markets-results>",reloadOnSearch:!1,resolve:{queryResolver:["discoveryService","bl.factories.trading.instruments.instrumentsGroupsFactory",function(e,t){return t.init().then(function(){var r=t.getCryptoCategoryByName("coins"),s={showInstrumentsDropdown:!1};return r&&(s.InstrumentTypeSubCategoryID=r.CryptoCategoryID),e.getLazyTopMovers({instrumentsCount:130,type:"Crypto"}).then(function(e){return s.id="moversAndShakers",s.newDiscoverCategories={preset:"moversAndShakers"},s.instruments=e,s})})}]},metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/discover/markets/market-movers.view.html"},mainNavId:"discoverMarkets"}},{url:"/discover/popular-:id",config:{sharePages:{showShareButton:!0,urlKey:"MarketsDiscoverySearchPage"},template:"<et-discovery-markets-results></et-discovery-markets-results>",reloadOnSearch:!1,resolve:e.extend({},r,{queryResolver:["discoveryService","bl.factories.trading.instruments.instrumentsGroupsFactory","$route","$q",function(e,r,s,n){return t(s.current.params.id)?r.init().then(function(){return e.loadFilteredInstruments(s.current.params.id,50).then(function(e){return{id:s.current.params.id,instruments:e,showInstrumentsDropdown:!1}})}):n.reject()}]}),metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/discover/popular.view.html"}}},{url:"/discover/trending",config:{sharePages:{showShareButton:!0,urlKey:"MarketsDiscoverySearchPage"},template:"<et-discovery-markets-results></et-discovery-markets-results>",reloadOnSearch:!1,resolve:{queryResolver:["discoveryService","bl.factories.trading.instruments.instrumentsGroupsFactory",function(e,t){return t.init().then(function(){return e.getLazyInstruments("MostPopularInstruments",{instrumentsCount:50}).then(function(e){return{id:"trending",instruments:e}})})}]},metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/discover/trending.view.html"}}},{url:"/discover/markets/cryptocurrencies/trending",config:{sharePages:{showShareButton:!0,urlKey:"MarketsDiscoverySearchPage"},template:"<et-discovery-markets-results></et-discovery-markets-results>",reloadOnSearch:!1,resolve:{queryResolver:["discoveryService","bl.factories.trading.instruments.instrumentsGroupsFactory",function(e,t){return t.init().then(function(){var r=t.getCryptoCategoryByName("coins"),s={},s={showInstrumentsDropdown:!1};return r&&(s.InstrumentTypeSubCategoryID=r.CryptoCategoryID),e.getLazyInstruments("MostPopularInstruments",{instrumentsCount:130,type:"Crypto"}).then(function(e){return s.id="trending",s.newDiscoverCategories={preset:"trending"},s.instruments=e,s})})}]},metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/discover/trending.view.html"}}},{url:"/discover/markets/stocks/trending",config:{sharePages:{showShareButton:!0,urlKey:"MarketsDiscoverySearchPage"},template:"<et-discovery-markets-results></et-discovery-markets-results>",reloadOnSearch:!1,resolve:{queryResolver:["discoveryService","bl.factories.trading.instruments.instrumentsGroupsFactory","$rootScope",function(e,t,r){return t.init().then(function(){var t={showInstrumentsDropdown:!1},s=r.session.isUsUser()&&r.session.user&&8!==r.session.user.designatedRegulationId;return e.getLazyInstruments("MostPopularInstruments",{instrumentsCount:s?500:50,type:"stocks"}).then(function(e){return t.newDiscoverCategories={instrumentType:"Stocks",baseUrl:"/discover/markets/stocks",stocksIndustryTitle:"Trending Markets"},t.instruments=e,t})})}]},metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/discover/trending.view.html"}}},{url:"/discover/markets/cryptocurrencies/by-market-cap",config:{template:"<et-discovery-markets-results></et-discovery-markets-results>",reloadOnSearch:!1,resolve:{queryResolver:["discoveryService","bl.factories.trading.instruments.instrumentsGroupsFactory",function(e,t){return t.init().then(function(){var r=t.getCryptoCategoryByName("coins"),s={showInstrumentsDropdown:!1};return r&&(s.InstrumentTypeSubCategoryID=r.CryptoCategoryID),e.getLazyMarketCapInstruments("CryptoMarketCap",{instrumentsCount:130}).then(function(e){return s.id="CryptoMarketCap",s.instruments=e,s.newDiscoverCategories={preset:"trendingAnalysis"},s})})}]},metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/discover/market-cap.view.html"}}},{url:"/discover/stocks/analysis",config:{template:"<et-discovery-markets-results></et-discovery-markets-results>",reloadOnSearch:!1,resolve:{queryResolver:["discoveryService","bl.factories.trading.instruments.instrumentsGroupsFactory",function(e,t){return t.init().then(function(){var t={showInstrumentsDropdown:!1};return e.getLazyTrendingAnalysis("TrendingAnalysis",{instrumentsCount:50}).then(function(e){return t.id="markets",t.newDiscoverCategories={preset:"trendingAnalysis"},t.instruments=e,t.InstrumentTypeID=5,t})})}]},metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/discover/trending.view.html"}}},{url:"/discover/stocks/trending-analysis",config:{template:'<et-discovery-markets-stocks-analysis [items]="$resolve.items"></et-discovery-markets-stocks-analysis>',resolve:{items:["$q","$location","$injector",function(e,t,r){return e(function(e){var s=r.get("trendingAnalysisAbTestService");s.getIsTrendingAnalysisVariantActive().then(function(r){r?s.getTrendingAnalysisItems().then(function(t){e(t)})["catch"](function(){t.path("/discover/markets/stocks")}):t.path("/discover/markets/stocks")})["catch"](function(){t.path("/discover/markets/stocks")})})}]}}},{url:"/discover/recently-added",config:{sharePages:{showShareButton:!0,urlKey:"test"},template:"<et-discovery-markets-results></et-discovery-markets-results>",reloadOnSearch:!1,resolve:{queryResolver:["discoveryService","bl.factories.trading.instruments.instrumentsGroupsFactory",function(e,t){return t.init().then(function(){return e.getLazyInstruments("NewlyListedInstruments",{instrumentsCount:50}).then(function(e){return{id:"recentlyAdded",instruments:e,showInstrumentsDropdown:!1}})})}]},metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/discover/recently-added.view.html"}}},{url:"/discover/markets/:instrumentType",config:{sharePages:{showShareButton:!0,urlKey:"MarketsDiscoverySearchPage"},template:function(e){return"stocks"===e.instrumentType?'<et-discovery ng-if="!$resolve.isUsUser || $resolve.isUsUser || $resolve.isUsUserReg8" [asset-type]="\'stocks\'"></et-discovery><et-discovery-markets-stocks ng-if="!$resolve.isUsUserReg8"></et-discovery-markets-stocks>':'<et-discovery ng-if="$resolve.shouldShowPage" [asset-type]="\'crypto\'" ></et-discovery><et-discovery-markets-results ng-if="!$resolve.shouldShowPage" ></et-discovery-markets-results>'},reloadOnSearch:!1,resolve:e.extend({},r,{queryResolver:["$q","$location","bl.factories.trading.instruments.instrumentsGroupsFactory","infrastruct.services.locationParams","$route","discoveryService",function(e,r,s,n,o,a){return e(function(e,i){s.init().then(function(){var c,u,m;if(m=a.isDiscoveryCategory(o.current.params.instrumentType),u=s.getTypeByUrlName(o.current.params.instrumentType),m){var l="etf"===o.current.params.instrumentType?"etfs":o.current.params.instrumentType;a.getLazySubCategories("CategoryResults",{instrumentType:l,instrumentsCount:300}).then(function(t){e({instruments:t,id:u.InstrumentTypeID,InstrumentTypeID:u.InstrumentTypeID})})["catch"](function(){r.path("/discover"),i()})}else{if(c=n.search("InstrumentTypeID"),c&&t(c))return void e({InstrumentTypeID:c});if(u=o.current.params.instrumentType,!u)return void e();if(u=t(u)&&s.getTypeByUrlName(u))return void e({InstrumentTypeID:u.InstrumentTypeID});r.path("/discover/markets"),i()}})["catch"](function(){r.path("/discover"),i()})})}],shouldShowPage:["discoveryService","$rootScope","$location","$route",function(e,t,r,s){var n=s.current.params.instrumentType;return e.shouldShowInstrumentPage(n).then(function(e){if(!e)switch(r.replace(),n){case"stocks":r.path("/discover/markets/stocks");break;case"cryptocurrencies":r.path("/discover/markets/cryptocurrencies/coins")}return e})}],isUsUserReg8:["$rootScope",function(e){return Promise.resolve(e.session.isUsUser()&&e.session.user&&8===e.session.user.designatedRegulationId)}],isUsUser:["$rootScope",function(e){return Promise.resolve(e.session.isUsUser())}]}),metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/discover/markets/instrumentTypeResults.view.html",resolve:["infrastruct.services.locationParams","$q","bl.factories.trading.instruments.instrumentsGroupsFactory","$route",function(e,t,r,s){return t(function(e,t){"cryptocurrencies"===s.current.params.instrumentType&&e({InstrumentTypeID:10,Url:"/discover/markets/cryptocurrencies"});var n=r.getTypeByUrlName(s.current.params.instrumentType);n?e(n):t({})})}]},mainNavId:"discoverMarkets"}},{url:"/discover/markets/stocks/industry/:stocksIndustryName",config:{sharePages:{showShareButton:!0,urlKey:"MarketsDiscoverySearchPage"},template:"<et-discovery-markets-results></et-discovery-markets-results>",reloadOnSearch:!1,resolve:e.extend({},r,{queryResolver:["$q","$location","bl.factories.trading.instruments.instrumentsGroupsFactory","infrastruct.services.locationParams","$route","discoveryService",function(e,r,s,n,o,a){return e(function(e,i){s.init().then(function(){var c,u;if((c=n.search("StocksIndustryID"))&&t(c))return a.getLazyAssetTypes(),void e({StocksIndustryID:c});if(u=s.getIndustryByUrlName(o.current.params.stocksIndustryName))return a.getLazyAssetTypes(),void e({StocksIndustryID:u.IndustryID});if(u=o.current.params.stocksIndustryName,u&&t(u)){var m=u.split("-").map(function(e){return e=e[0].toUpperCase()+e.slice(1)});return m=m.join(" "),a.getLazySubCategories("StocksSubCategoryResults",{title:m,type:"Industry"}).then(function(t){t&&t.length&&e({newDiscoverCategories:{stocksIndustryUrl:u,stocksIndustryTitle:m,instrumentType:"Stocks",type:"industry",baseUrl:"/discover/markets/stocks"},instruments:t}),i()})["catch"](function(){r.path("/discover/markets/"),i()})}r.path("/discover/markets/"),i()})["catch"](function(){r.path("/discover/markets"),i()})})}]}),metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/discover/markets/stocksIndustryResults.view.html",resolve:["infrastruct.services.locationParams","$q","bl.factories.trading.instruments.instrumentsGroupsFactory","$route",function(e,t,r,s){return t(function(e,t){var n=r.getIndustryByUrlName(s.current.params.stocksIndustryName);n?e(n):t({})})}]},mainNavId:"discoverMarkets"}},{url:"/discover/markets/stocks/sector/:stocksIndustryName",config:{template:"<et-discovery-markets-results></et-discovery-markets-results>",reloadOnSearch:!1,resolve:{queryResolver:["$q","$location","$route","discoveryService",function(e,r,s,n){return e(function(e,o){var a;if(a=s.current.params.stocksIndustryName,a&&t(a)){var i=a.split("-").map(function(e){return e=e[0].toUpperCase()+e.slice(1)});return i=i.join(" "),n.getLazySubCategories("StocksSubCategoryResults",{title:i,type:"Sector"}).then(function(t){t&&t.length&&e({newDiscoverCategories:{stocksIndustryUrl:a,stocksIndustryTitle:i,instrumentType:"Stocks",type:"sector",baseUrl:"/discover/markets/stocks"},instruments:t}),o()})["catch"](function(){r.path("/discover/markets/"),o()})}r.path("/discover/markets/"),o()})}]},metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/discover/markets/stocksIndustryResults.view.html",resolve:["infrastruct.services.locationParams","$q","bl.factories.trading.instruments.instrumentsGroupsFactory","$route",function(e,t,r,s){return t(function(e,t){var n=r.getIndustryByUrlName(s.current.params.stocksIndustryName);n?e(n):t({})})}]},mainNavId:"discoverMarkets"}},{url:"/discover/markets/stocks/exchange/:exchangeName",config:{sharePages:{showShareButton:!0,urlKey:"MarketsDiscoverySearchPage"},template:'<et-discovery-markets-results [discovery-service]="$resolve.discoveryService"></et-discovery-markets-results>',reloadOnSearch:!1,resolve:e.extend({},r,{queryResolver:["$q","$location","bl.factories.trading.instruments.instrumentsGroupsFactory","infrastruct.services.locationParams","$route","discoveryService",function(e,r,s,n,o,a){return e(function(e,i){s.init().then(function(){var c,u,m=o.current.params.exchangeName;if(c=n.search("ExchangeID"),c&&t(c))a.configureParams("StockExchangeResult",c,null,50).then(function(t){var r=t.instruments;r&&r.length?e({id:"exchanges",instruments:r,count:t.count,ExchangeID:c,componentType:"StockExchangeResult"}):i()})["catch"](function(){r.path("/discover"),i()});else if(t(m)&&(u=s.getExchangeByUrlName(m)))return void e({ExchangeID:u.ExchangeID})})["catch"](function(){r.path("/discover"),i()})})}],discoveryService:["discoveryService",function(e){return Promise.resolve(e)}]}),metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/discover/markets/stocksExchangeResults.view.html",resolve:["infrastruct.services.locationParams","$q","bl.factories.trading.instruments.instrumentsGroupsFactory","$route",function(e,t,r,s){return t(function(t,n){var o;o=(exchangeId=e.search("ExchangeID"))?r.getExchangeById(exchangeId):r.getExchangeByUrlName(s.current.params.exchangeName),o?t(o):n({})})}]},mainNavId:"discoverMarkets"}},{url:"/discover/markets/cryptocurrencies/:cryptoCategoryName",config:{sharePages:{showShareButton:!0,urlKey:"MarketsDiscoverySearchPage"},template:"<et-discovery-markets-results></et-discovery-markets-results>",reloadOnSearch:!1,resolve:e.extend({},r,{queryResolver:["$q","$location","bl.factories.trading.instruments.instrumentsGroupsFactory","infrastruct.services.locationParams","$route","discoveryService",function(e,t,r,s,n,o){return e(function(e,s){r.init().then(function(){var t;return(t=r.getCryptoCategoryByName(n.current.params.cryptoCategoryName))?(o.getLazyAssetTypes(),void e({InstrumentTypeSubCategoryID:t.CryptoCategoryID})):void s()})["catch"](function(){t.path("/discover/markets"),s()})})}]}),metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/discover/markets/cryptoCategoryResult.view.html",resolve:["infrastruct.services.locationParams","$q","bl.factories.trading.instruments.instrumentsGroupsFactory","$route",function(e,t,r,s){return t(function(e,t){var n=r.getCryptoCategoryByName(s.current.params.cryptoCategoryName);n?e(n):t({})})}]},mainNavId:"discoverMarkets"}}]});define(rA[267][0],["underscore"],function(e){function t(e){return/^[a-z0-9-_]*$/i.test(e)}function r(e){return/^[a-z0-9-_.]*$/i.test(e)}function a(e,t,r,a){return e(function(e,s){r.init().then(function(){var r=null;t.current&&t.current.params&&t.current.params.symbol&&(r=a.getBySymbol(t.current.params.symbol)),r?e(r):s()})["catch"](s)})}function s(e){var t="/discover"+(e?"/"+e:""),r={smartportfolios:"/etoro/apps/components/metaTags/templates/discover/funds/index.view.html","default":"/etoro/apps/components/metaTags/templates/discover/discover-new/index.view.html",people:"/etoro/apps/components/metaTags/templates/discover/people/index.view.html"},a=r[e]||r["default"];return{url:t,config:{reloadOnSearch:!1,template:function(){var t='<et-discovery [asset-type]="$resolve.assetType" ></et-discovery>';return"smartportfolios"===e?'<et-discovery ng-if="$resolve.shouldShowNewDesign" [asset-type]="$resolve.assetType"></et-discovery><et-discover-funds ng-if="!$resolve.shouldShowNewDesign"></et-discover-funds>':"screener"===e?'<et-markets-screener [initial-data]="$resolve.screenerInitialData"></et-markets-screener>':"people"===e?'<et-discovery ng-if="$resolve.showPeopleNewDesign" [asset-type]="$resolve.assetType" ></et-discovery><et-discovery-people-home ng-if="!$resolve.showPeopleNewDesign && !$resolve.isUsUser"></et-discovery-people-home><et-discovery-people-home-us ng-if="!$resolve.showPeopleNewDesign && $resolve.isUsUser"></et-discovery-people-home-us>':t},resolve:{isUsUser:["$rootScope","$location","infrastruct.services.config",function(t,r){var a=t.session.isUsUser(),s=a&&!t.session.isLoggedIn,n=a&&t.session.user&&8===t.session.user.designatedRegulationId;return e||!a||n||s||(r.replace(),r.path("/discover/markets/cryptocurrencies")),"smartportfolios"===e&&a&&(r.replace(),r.path("/discover")),a}],isCopyMatchmakingAvailableOnDiscovery:["$location",function(e){return"/discover"===e.path()}],shouldShowNewDesign:["discoveryService","$rootScope","$location","$route",function(t){return"smartportfolios"===e?t.shouldShowInstrumentPage("smartportfolios").then(function(e){return e}):!0}],showPeopleNewDesign:["genericAbTestService",function(t){return"people"===e?t.getExperiment("new_copy_trader_design","Acquisition").then(function(e){return"new_people_design"===e.variationId})["catch"](function(){return!1}):!1}],assetType:function(){return e},instruments:["bl.factories.trading.instruments.instrumentsGroupsFactory",function(e){return e.init()}],screenerInitialData:["infrastruct.services.config","initialDataService",function(t,r){if("screener"===e){var a=t.dynamics.urls.etoroCdn+"/web-client/discover/stocks-screener/initial-data.json";return fetch(a).then(function(e){return e.json()}).then(function(e){return r.data=e,e})}}]},mainNavId:"discovery",metaTags:{templateUrl:a}}}}var n={isAllowed:["$rootScope","$q",function(e,t){return e.session.user.isPi||"fund"===e.session.user.SubType?t.resolve(e.session.user):t.reject()}],copiersData:["bl.factories.trading.piStats.piStatsService",function(e){return e.getCopiersData()}],activeTab:["$route","$q",function(e,t){var r=e.current&&e.current.params&&e.current.params.type,a=["left","joined"];return r=a[0]===r?r:a[1],t.resolve(r)}]},o={chart:"MarketPageChart",research:"MarketPageResearchNew",stats:"MarketPageStats"},i={feed:"feed",research:"research",stats:"stats",chart:"chart",news:"news"},c={accountSummary:"",closedPositions:"closed-positions",financialSummary:"financial-summary",activity:"activity",dividends:"dividends"};return[{url:"/",config:{template:"",authRoles:["user"],resolve:{whichPage:["$rootScope","$route","$q","bl.factories.settings.homepage","$location","bl.factories.session.copyTraderFunnelService","infrastruct.services.config","bl.factories.session.funnelLoaderService","airdropStateService","kycRolloutService","infrastruct.services.localStorage","infrastruct.services.appDataService","genericAbTestService",function(e,t,r,a,s,n,o){return r(function(r){n.getEnabledParams().then(function(n){return n.isEnabledRedirectTo?void r():void a.getCurrentPage().then(function(a){var n=a.url;if((!o.dynamics.isNotificationDeepLinkCalled||"/"===s.path())&&t.current&&t.current.params&&"1"!==t.current.params.isEtoroMoneyAccount){e.session._redirectLoggedUserPatchActivate&&e.session._redirectLoggedUserPatchActivate();var i=s.search();s.url(n).search(i),e.$evalAsync()}setTimeout(function(){o.setDynamicKey("isNotificationDeepLinkCalled",!1)},3e3),r()})["catch"](function(){s.url("/home"),e.$evalAsync()})})})}]}}},{url:"/documents/accountstatement",config:{mainNavId:"documents",id:"accountstatement",authRoles:["user"],template:"<et-as-main></et-as-main>"}},{url:"/documents/accountstatement/:from/:to/:activeTab?",config:{activeTab:c.accountSummary,mainNavId:"documents",id:"accountstatement",authRoles:["user"],resolve:{degradedMode:["$rootScope","$route","$q","$location","infrastruct.services.config",function(e,t,r,a,s){return r(function(t){s.dynamics.accountstatement.degradeMode&&(a.url("documents/accountstatement"),e.$evalAsync()),t()})}]},template:function(e){var t=e&&e.activeTab;switch(t){case c.financialSummary:return"<et-as-fin-summary></et-as-fin-summary>";case c.closedPositions:return"<et-as-closed-positions></et-as-closed-positions>";case c.activity:return"<et-as-activity></et-as-activity>";case c.dividends:return"<et-as-dividends></et-as-dividends>";case c.accountSummary:default:return"<et-as-account-summary></et-as-account-summary>"}}}},{url:"/documents/:documentType?",config:{template:'<et-settings [document-type]="$resolve.documentType" [active-section]="$resolve.activeSection"></et-settings>',mainNavId:"documents",authRoles:["user"],resolve:{documentType:["$route","$q",function(e,r){var a=e.current&&e.current.params&&e.current.params.documentType;return a&&t(a)?r.resolve(a):r.reject()}],activeSection:function(){return"documents"}}}},{url:"/twitter",config:{resolve:{whichPage:["$route","bl.factories.trading.instruments.instrumentsFactory","bl.factories.trading.instruments.instrumentsGroupsFactory","$location","twitterRoutingService",function(e,t,r,a,s){r.init().then(function(){var r=e.current&&e.current.params&&e.current.params.ticker&&e.current.params.ticker.toLowerCase(),n=e.current&&e.current.params&&e.current.params.assetType&&e.current.params.assetType.toLowerCase(),o=t.getBySymbol(r),i=s.getSupportedLang();a.replace(),a.path(o?i+"/markets/"+r:s.isDiscoverCategoryValid(n)?i+"/discover/markets/"+n:"/discover")})["catch"](function(){a.replace(),a.path("/discover")})}]}}},{url:"/markets/:symbol/:activeTab?/:mode?",config:{activeTab:i.feed,sharePages:{showShareButton:!0,urlKey:function(e){var t=e&&e.params&&e.params.activeTab||{};return o[t]?o[t]:"MarketPage"}},template:'<et-market-page [active-tab-name]="$resolve.activeTab" [instrument]="$resolve.instrument" [show-research-tab]="$resolve.showResearchTab" [show-news-tab]="$resolve.showNewsTab"></et-market-page>',dynamicAssets:[{name:"proChartsApp",path:rA[398][0]}],keepUrl:function(e,t){return t&&t.params?"markets/"+t.params.symbol:!1},resolve:{instrument:["$route","$q","bl.factories.trading.instruments.instrumentsGroupsFactory","bl.factories.trading.instruments.instrumentsFactory",function(e,t,r,s){return a(t,e,r,s)}],showResearchTab:["$route","$location","$q","bl.factories.trading.instruments.instrumentsGroupsFactory","bl.factories.trading.instruments.instrumentsFactory","infrastruct.services.config",function(e,t,r,s,n,o){return r(function(c,u){a(r,e,s,n).then(function(r){var a=r.IsCrypto&&1001===r.InstrumentTypeSubCategoryID;21!==r.ExchangeID&&24!==r.ExchangeID&&5===r.InstrumentTypeID||a?a?o.dynamics.whenReady().then(function(){c(o.dynamics.shouldShowCryptoResearchTab)}):c(!0):(e.current.params.activeTab===i.research&&(e.updateParams({activeTab:i.feed}),t.replace()),c(!1))})["catch"](u)})}],activeTab:["$route","$q",function(e,t){var r=e.current&&e.current.params&&e.current.params.activeTab||"feed",a=["chart","feed","stats","research","news"];return-1===a.indexOf(r.toLowerCase())?t.reject():t.resolve(r)}],showNewsTab:["$route","$location","bl.factories.session.sessionFactory","infrastruct.services.config","bl.factories.countries.countriesFactory",function(e,t,r,a,s){var n,o,c,u=!1;return a.dynamics.whenReady().then(function(){if(c=a.dynamics.marketPage,r.isLoggedIn){var l=r.user.gcid;o=r.user.countryId===s.etoroCountryId,u=l%100<c.newsTabExperimentPercentage}return c.isNewsTabEnabled&&(o||u||!r.isLoggedIn)?n=!0:e.current.params.activeTab===i.news&&(e.updateParams({activeTab:i.feed}),t.replace()),n})}]},metaTags:{templateUrl:function(e){if(!e||!e.params)return"/etoro/apps/components/metaTags/templates/markets/index.view.html";switch(e.params.activeTab){case i.stats:return"/etoro/apps/components/metaTags/templates/markets/stats.view.html";case i.chart:return"/etoro/apps/components/metaTags/templates/markets/chart.view.html";case i.news:return"/etoro/apps/components/metaTags/templates/markets/news.view.html";default:return"/etoro/apps/components/metaTags/templates/markets/index.view.html"}},noFollow:function(e){return e&&"research"===e.activeTab},resolve:["$q","bl.factories.trading.instruments.instrumentsFactory","$route","infrastruct.services.localization.localizeFactory",function(e,t,r,a){return e(function(e,s){var n=r.current&&r.current.params||{},o=t.getBySymbol(n.symbol);o?t.getMarketShortBioAndName(o.InstrumentID).then(function(){var t=o.Url.substr(1).split("/"),r=o.industry?o.industry.IndustryName+",":"",s=t[0]+","+r+o.instrumentType.InstrumentTypeDescription+","+o.SymbolFull,i=a.getResource("market.disclaimer.Currency"+o.SellCurrencyID);e({instrument:o,currency:i,breadcrumbs:s,activeTab:n.activeTab&&n.activeTab.toLowerCase()})}):s({})})}]}}},{url:"/dashboard",config:{redirectTo:"/dashboard/pi"}},{url:"/dashboard/pi",config:{template:'<et-pi-dashboard [copiers-data]="$resolve.copiersData"></et-pi-dashboard>',authRoles:["user"],maintenanceId:"rankings",sectionId:"piDashboard",resolve:n}},{url:"/dashboard/copiers/:type?",config:{template:'<et-pi-dashboard-copiers [default-view]="$resolve.activeTab"></et-pi-dashboard-copiers>',authRoles:["user"],maintenanceId:"rankings",sectionId:"piDashboard",resolve:n}},{url:"/learn-more",config:{template:'<et-help class="ng-view-temp-fix"></et-help>',mainNavId:"help",metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/learn-more/learn-more.view.html"}}},{url:"/selfie-liveliness",config:{authRoles:["user"],redirectTo:"/",resolve:{selfieDeepLinkResolver:["bl.factories.complianceSelfieService",function(e){e.processSelfieFlow({flow:"url"})}]}}},{url:"/selfie-liveliness/:sdkToken",config:{resolve:{selfieDeepLinkResolver:["$route","bl.factories.complianceSelfieService",function(e,t){var a=e.current.params;for(var s in a)if(!r(a[s]))return;var n={step:parseInt(a.step)||void 0,flow:"crossApp",crossAppConfig:{key:a.sdkToken,source:a.source,user_consent:"true"===a.user_consent,gcid:parseInt(a.gcid)||void 0}};t.processSelfieFlow(n)}]}}},{url:"/settings/compliance/esma/ProClub",config:{template:'<et-compliance-typeform [data]="$resolve.typeformParameters" [name]="ESMA"></et-compliance-typeform>',authRoles:["user"],resolve:{typeformParameters:["bl.factories.complianceTypeFormService",function(e){return e.getTypeFormParameters()}]}}},{url:"/settings/compliance/asic/SophisticatedInvestor",config:{template:'<et-compliance-typeform [data]="$resolve.typeformParameters" [name]="Sophisticated"></et-compliance-typeform>',authRoles:["user"],resolve:{typeformParameters:["bl.factories.complianceTypeFormService",function(e){return e.getSophisticatedInvestorTypeFormParameters()}]}}},{url:"/settings/compliance/esma/highleverage",config:{authRoles:["user"],resolve:{esmaDeepLinkRedirect:["$location",function(e){return e.path("/settings/compliance/esma/ProClub")}]}}},{url:"/settings/:activeTab?",config:{template:'<et-settings [users-settings]="$resolve.userSettings" [active-section]="$resolve.activeTab"></et-settings>',authRoles:["user"],mainNavId:"settings",resolve:{activeTab:["$route","$q",function(e,t){var r=e.current&&e.current.params&&e.current.params.activeTab,a=["general","profile","account","trade","notifications","privacy","payments"];return r&&-1===a.indexOf(r)?t.reject():t.resolve(r)}],userSettings:["bl.factories.userSettings",function(e){return e.get()}]}}},{url:"/watchlists/all",config:{template:'<et-watchlists [watchlists]="$resolve.watchlists"></et-watchlists>',showFooter:!0,isCopyMatchmakingAvailableOnWL:!0,maintenanceId:"watchlist",authRoles:["user"],mainNavId:"watchlist",resolve:{watchlists:["bl.factories.watchList.watchListFactory",function(e){return e.init()}],instruments:["bl.factories.trading.instruments.instrumentsGroupsFactory",function(e){return e.init()}]}}},{url:"/dashboard/club",config:{template:"<et-club-dashboard></et-club-dashboard>",authRoles:["user"],sectionId:"clubDashboard",mainNavId:"dashboardClub"}},{url:"/watchlists/:watchlistId?",config:{template:'<et-watchlist [watchlist]="$resolve.watchlist"></et-watchlist>',authRoles:["user"],maintenanceId:"watchlist",mainNavId:"watchlist",showFooter:!0,isCopyMatchmakingAvailableOnWL:!0,resolve:{watchlist:["$q","$route","$rootScope","$location","bl.factories.watchList.watchListFactory",function(e,t,r,a,s){return e(function(e){return s.init().then(function(){var r=t.current&&t.current.params&&t.current.params.watchlistId,n=s.getList(r)||s.userDefaultWatchlist||s.recentlyInvestedList;n?e(n):a.path("/app/portfolio-page")})["catch"](function(){r.$applyAsync(function(){a.path("/app/portfolio-page")})})})}],instruments:["bl.factories.trading.instruments.instrumentsGroupsFactory",function(e){return e.init()}]}}},{url:"/app/error/maintenance/:service",config:{template:'<et-maintenance [error-type]="\'maintenance\'" [error-source]="$resolve.service"></et-maintenance>',resolve:{service:["$q","$route",function(e,t){var r=t.current&&t.current.params&&t.current.params.service;return/^[a-z0-9-_]*$/i.test(r)||(r=""),e.resolve(r)}]}}},{url:"/app/error/standalone/:service?",config:{id:"standalone",template:'<et-maintenance [error-type]="\'standalone\'" [error-source]="$resolve.service"></et-maintenance>',resolve:{service:["$q","$route",function(e,t){var r=t.current&&t.current.params&&t.current.params.service;return/^[a-z0-9-_]*$/i.test(r)||(r=""),e.resolve(r)}]}}},{url:"/posts/:postId",config:{template:'<et-post-page [post]="$resolve.post" [source-feed]="$resolve.sourceFeed"></et-post-page>',maintenanceId:"streamsBC",sharePages:{showShareButton:!0},resolve:{post:["$route","$q","bl.factories.feed.feedFactory",function(e,t,r){return t(function(t,a){var s=/^[a-z0-9-_]*$/i;if(e.current&&e.current.params&&e.current.params.postId&&s.test(e.current.params.postId)){var n=s.test(e.current.params.commentId)?e.current.params.commentId:null;r.getPost(e.current.params.postId,n).then(t)["catch"](a)}else a()})}],sourceFeed:["$route",function(e){return e.current&&e.current.sourceFeed}]},metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/feed/posts.view.html",noFollow:function(e){return!e||!e.originalMessage||e.originalMessage.split(" ").length<80?!0:e.user&&(e.user.isPi||-1!==[13,9].indexOf(e.user.accountType)||"YoniAssia"===e.user.username)?!1:!0},resolve:["$route","$q",function(t,r){return r(function(r,a){if(t.current&&t.current.locals&&t.current.locals.post&&angular.isString(t.current.locals.post.originalMessage)){var s=t.current.locals.post||{},n={user:s.user,locale:s.locale,url:s.url,appUrl:s.appUrl,noFollow:s.noFollow,baseCanonicalUrl:s.baseCanonicalUrl,attachment:angular.copy(s.attachment),seo:{title:e.unescape(s.originalMessage.split(" ").slice(0,5).join(" ")),description:e.unescape(s.originalMessage.substr(0,s.originalMessage.indexOf(" ",199)))}},o=n.attachment;if(!o.imageExists||o.imageExists&&(o.image.height<200||o.image.width<200)){var i=n.user;n.ogImage=i&&i.avatars&&i.avatars.large,n.ogImageWidth=225,n.ogImageHeight=225}else{var c=o.image;n.ogImage=c.url,n.ogImageWidth=c.width,n.ogImageHeight=c.height}r(n)}else a({})})}]}}},{url:"/home",config:{authRoles:["user"],mainNavId:"home",contentLoaderId:"home",template:'<et-home [home-data]="$resolve.homeData" [is-academy-ab-var]="$resolve.isAcademyAbVar"></et-home>',resolve:{homeData:["$injector","$location",function(e,t){var r=e.get("homePageDataService");return r.getPageObject()["catch"](function(){t.path("/app/portfolio-page")})}],isAcademyAbVar:["$injector",function(e){var t=e.get("homePageDataService");return t.getAcademyAbVariant()["catch"](function(){return!1})}]}}},{url:"/my/events",config:{authRoles:["user"],mainNavId:"events",template:"<et-events></et-events>"}},{url:"/my/news",config:{authRoles:["user"],mainNavId:"news",template:"<et-news></et-news>",resolve:{isVariantActive:["$q","$location","$injector",function(e,t,r){return e(function(e){var a=r.get("newsAbTestService");a.getIsNewsVariantActive().then(function(r){r?e():t.path("/")})["catch"](function(){t.path("/")})})}]}}},{url:"/my/extended-hours",config:{authRoles:["user"],mainNavId:"extendedHours",template:"<et-extended-hours></et-extended-hours>",resolve:{isVariantActive:["$q","$location","$injector",function(e,t,r){return e(function(e){var a=r.get("extendedHoursAbTestService"),s=r.get("bl.factories.watchList.watchListFactory");s.init().then(function(){a.getIsExtendedHoursVariantActive().then(function(r){r?e():t.path("/")})["catch"](function(){t.path("/")})})["catch"](function(){t.path("/")})})}]}}},s(),s("smartportfolios"),s("screener"),s("people")]});define(rA[107][0],[],function(){return[{url:"/app/procharts",config:{id:"procharts",reloadOnSearch:!1,authRoles:["user"],dynamicAssets:[{name:"proChartsApp",path:rA[398][0]}],template:"<pro-charts></pro-charts>",metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/procharts/index.view.html",resolve:["$q",function(r){return r(function(r){r({})})}]}}}]});define(rA[111][0],[],function(){var e={countries:["bl.factories.countries.countriesFactory",function(e){return e.init()}],instruments:["bl.factories.trading.instruments.instrumentsGroupsFactory",function(e){return e.init()}],isStandalone:function(){return!0},errorRedirectUrl:function(){return"https://pages.etoro.com/lp/welcome/"}};return[{url:"/embed/discover/people",config:{id:"standalone",template:"<discover-people-embed></discover-people-embed>",dynamicAssets:[{name:"discoverPeopleEmbedApp",path:rA[407][0]}],reloadOnSearch:!1,resolve:e}},{url:"/embed/discover/people/results",config:{id:"standalone",template:'<discover-people-embed is-result-page="true"></discover-people-embed>',dynamicAssets:[{name:"discoverPeopleEmbedApp",path:rA[407][0]}],reloadOnSearch:!1,resolve:e}}]});define(rA[108][0],[],function(){return[{url:"/accounts/sign-up",config:{template:"<sign-up-box></sign-up-box>",dynamicAssets:[{name:"signUpApp",path:rA[400][0]}],id:"signup",showLoginLink:!0,resolve:{isLoggedIn:["$q","$rootScope",function(n,i){return n(function(n,o){i.session.isLoggedIn?o():n()})}],ssoSignup:["$q","$location","$cookies","bl.factories.social.ssoService","infrastruct.services.config",function(n,i,o,t,s){return n(function(n){var e="true"===i.search().socialSignup,c=o.get("ssoSignup");if(e&&c){var a,p,r,u=s.statics.ssoSignupDomain,g=/^((https?:\/\/)([\w\-\_]+\.))/i;try{a=JSON.parse(c),p=a.id,r=a.network,p&&r?t._connectByAccessToken(r,p)["finally"](n):n()}catch(l){n()}u=u.replace(g,""),o.put("ssoSignup","",{expires:new Date(0),path:"/",domain:u})}else n()})}],countries:["bl.factories.countries.countriesFactory",function(n){return n.init()}],appInfo:["$q","$location","$rootScope","bl.factories.login.loginFactory",function(n,i,o,t){return n(function(n,s){t.getAppInfo().then(function(i){o.session.setApplicationData(i),n(i)})["catch"](function(){i.path("/login/error"),s()})})}]},metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/sign-up/sign-up.view.html"}}}]});define(rA[106][0],[],function(){function e(){return{isLoggedIn:["$q","$rootScope",function(e,o){return o.session.isLoggedIn?e.reject():e.resolve()}]}}function o(o){return{id:"login",template:o,resolve:e()}}return[{url:"/login",config:{id:"login",template:'<et-login [app-info]="$resolve.appInfo"></et-login>',resolve:{isLoggedIn:["$q","$rootScope",function(e,o){return e(function(e,r){o.session.isLoggedIn?r():e()})}],appInfo:["$q","$location","$rootScope","bl.factories.login.loginFactory",function(e,o,r,s){return e(function(e,t){s.getAppInfo().then(function(o){r.session.setApplicationData(o),e(o)})["catch"](function(){o.path("/login/error"),t()})})}]},metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/login/login.view.html"}}},{url:"/login/error",config:{id:"login",template:"<et-login-error></et-login-error>",resolve:{error:["$q",function(e){return e(function(e){e()})}]}}},{url:"/login/twostep",config:o("<et-login-two-step></et-login-two-step>")},{url:"/accounts/logout",config:o("<et-logout-page></et-logout-page>")},{url:"/accounts/forgot-password",config:{id:"login",template:"<et-forgot-password></et-forgot-password>",resolve:e(),metaTags:{noFollow:!0,referrer:"same-origin"}}},{url:"/accounts/forgot-password/reset",config:{id:"login",template:"<et-forgot-password-reset></et-forgot-password-reset>",resolve:e(),reloadOnSearch:!1,metaTags:{noFollow:!0,referrer:"same-origin"}}},{url:"/accounts/forgot-password/reset/success",config:{id:"login",template:"<et-forgot-password-reset-success></et-forgot-password-reset-success>",resolve:e(),metaTags:{noFollow:!0,referrer:"same-origin"}}},{url:"/accounts/reset-password",config:{id:"login",template:"<et-reset-password></et-reset-password>",resolve:e(),metaTags:{noFollow:!0,referrer:"same-origin"}}},{url:"/accounts/reset-password/messages/success",config:{id:"login",template:"<et-reset-password-success></et-reset-password-success>",resolve:e(),metaTags:{noFollow:!0,referrer:"same-origin"}}},{url:"/accounts/reset-password/messages/expired",config:{id:"login",template:"<et-reset-password-expired></et-reset-password-expired>",resolve:e(),metaTags:{noFollow:!0,referrer:"same-origin"}}},{url:"/accounts/reset-password/messages/reset",config:{id:"login",template:'<et-reset-password-message [masked-email]="$resolve.maskedEmail"></et-reset-password-message>',resolve:{maskedEmail:["$window","$route","$q",function(e,o,r){return r(function(e){var r=o.current&&o.current.params&&o.current.params.maskedEmail||"";r=r.replace(/[^a-z0-9-_@\.]/gi,"*"),e(r)})}],isLoggedIn:["$q","$rootScope",function(e,o){return e(function(e,r){o.session.isLoggedIn?r():e()})}]},metaTags:{noFollow:!0,referrer:"same-origin"}}}]});define(rA[208][0],[],function(){return[{url:"/chat",config:{template:'<et-pre-chat [agent-type]="$resolve.agentType" [is-chat-blocked]="$resolve.isChatBlocked"></et-pre-chat>',authRoles:["user"],id:"empty",resolve:{agentType:["$location",function(e){return e.search().type||""}],isChatBlocked:["liveAgentService",function(e){return e.isChatBlocked()}]}}},{url:"/chat/visitor",config:{template:'<et-pre-chat [agent-type]="$resolve.agentType" [is-chat-blocked]="$resolve.isChatBlocked"></et-pre-chat>',id:"empty",resolve:{agentType:["$location",function(e){return e.search().type||""}],isChatBlocked:["liveAgentService",function(e){return e.isChatBlocked()}]}}}]});define(rA[487][0],["angular","underscore",rA[276][0],rA[150][0],rA[186][0],rA[345][0],rA[191][0]],function(e,t,n,i,r,s,o){var a=o(),c=e.module("infrastruct.services.config",[s.name]),u=["EtcdIndex"];return c.provider("infrastruct.services.config",function(){function s(){var s=new r,o=window.location,a=o.hostname,c=o.protocol,h=o.port,y=o.hash,m=y?y.split("?")[1]?y.split("?")[1].split("&"):[]:o.search.slice(1).split("&"),v={},C=window.localConfig||(window.localConfig={}),b=t.extend(i,C);delete window.localConfig,s.setUA(window.navigator.userAgent),m.forEach(function(e){e=e.split("="),e[0]&&(v[e[0]]=decodeURIComponent(e[1]||""))});var w="en-us,zh-tw,nb-no,pt-pt,cs-cz,da-dk,vi-vn,ms-my".split(","),j={},O={languageCode:b.defaultLocale},S=null,A=null,I={query:v,statics:b,browser:{},_getParsedValue:function(e){var t,n,i,r=!1;try{t=JSON.parse(e.toString())}catch(s){r=!0}try{r&&(t=JSON.parse('"'+e.toString()+'"'))}catch(s){i="parseError"}return n={isError:!!i,error:i,parsedValue:t}},setRemoteConfig:function(e,t,n,i){var r,s={},o="appSettings.",a={},c=[];if(s.currentVersion=e,s.targetVersion=S,e&&l.statics.ApplicationVersion!=e)return s.message=o+"skippedChange",s.reason="target version is for a different version",s;if(S&&e!=S)return s.message=o+"skippedChange",s.reason="target version is not specific",s;if(A&&A>t)return s.message=o+"skippedChange",s.reason="target index is lower then current index",s;j||(j={});for(var g in n)-1==u.indexOf(g)&&(r=this._getParsedValue(n[g]),r.isError?a[g]=r.error:(f(j,g.split("."),r.parsedValue),c.push(g)));for(var g in i)-1==u.indexOf(g)&&(d(j,g.split(".")),c.push(g));return this.merge(),S=e,A=t,s.message=o+"changed",s.errors=Object.keys(a).length?a:void 0,s.keysChanged=c,s},compareRemoteAndDefaultConfigs:function(e){var t=this.prepareConfigKeys(n),i=this.prepareConfigKeys(j);t.forEach(function(t){!i.includes(t)&&t.startsWith("kyc.")&&e.logJSON("error","log",{Categories:["KeyNotFoundInCCM"],Message:t})})},prepareConfigKeys:function(e,t){var n=[];for(var i in e){var r=t?t+"."+i:i;e[i]instanceof Object?n=n.concat(this.prepareConfigKeys(e[i],r)):n.push(r)}return n},getChangesComparingRemoteConfig:function(e){var n={};for(var i in e)if(-1===u.indexOf(i)){var r=p(j,i.split(".")),s=e[i],o=s;if(t.isUndefined(r))n[i]=s;else{var a=this._getParsedValue(s);a.isError||(s=a.parsedValue,t.isString(r)||t.isBoolean(r)||(r=JSON.stringify(r),s=JSON.stringify(s)),r!==s&&(n[i]=o))}}return n},setDynamicKey:function(e,t){return f(O,e.split("."),t),this.merge(),p(this.dynamics,e.split("."))},setDynamicKeys:function(t){return e.forEach(t,function(e,t){f(O,t.split("."),e)}),this.merge()},merge:function(){var e=this.dynamics.whenReady;return this.dynamics=g(n,j,O),this.dynamics.whenReady=e,this.dynamics},dynamics:{},calculated:{get isMixpanelActive(){return!I.query.disableMixpanel&&I.dynamics.isMixpanelActive},get languageCode(){var e=I.dynamics.languageCode;return e?-1!==w.indexOf(I.dynamics.languageCode)?I.dynamics.languageCode:e.split("-")[0]:""},get baseUrl(){return I.statics.baseUrl?I.statics.baseUrl:[c.replace(":",""),"://",a,h&&-1===[80,443].indexOf(h)?":"+h:""].join("")},get frontUrl(){return I.statics.isUseAbsoluteDomain?I.calculated.baseUrl:""},get appsFlyerUserId(){var e=localStorage.getItem("appsFlyerUserId");return"string"==typeof e&&(e=e.replace(/\"/g,"")),e},getAccountPushConfig:function(t){var n=t?t.type:"Demo",i=l.dynamics.pushConfig[n];return e.extend({password:{UserAgent:navigator.userAgent,ApplicationVersion:I.statics.ApplicationVersion,ApplicationName:I.statics.ApplicationIdentifier,AccountType:n,ApplicationIdentifier:I.statics.ApplicationIdentifier}},i)},get isToaConnect(){return I.dynamics.isToaConnectActive&&I.statics.isToaConnectEnabled},get social(){return{get wechat(){return I.dynamics.isWrapper&&I.statics.isChinaSocial},get twitter(){return!I.statics.isChinaSocial},get facebook(){return!I.statics.isChinaSocial}}},get showCryptoInfo(){return void 0!==I.statics.showCryptoInfo?I.statics.showCryptoInfo:!!l.dynamics.portfolio.showCryptoInfoForNewVersion},get isVerify(){return!!I.query.evertoken},get verifyEmail(){return window.atob&&I.query.identifier&&window.atob(decodeURIComponent(I.query.identifier))}},initialParams:{},userAgent:s.getResult()};return I.merge(),I}function c(e,t){var n="etoro_usid",i=e.getEncodedItem(n),r=h||i&&i.session||t();return e.setEncodedItem(n,{session:r}),{sessionGuid:window.eToroSessionGuid||t(),userSession:r}}function g(t,n,i){return e.merge(e.copy(t),e.copy(n),e.copy(i))}function f(e,t,n){var i=t.shift();return 0==t.length?e[i]=n:(e.hasOwnProperty(i)||(e[i]={}),f(e[i],t,n))}function p(e,t){var n=t.shift();return n?e&&e.hasOwnProperty(n)?p(e[n],t):void 0:e}function d(e,t){var n,i=t.shift();return 0===t.length?(n=e[i],delete e[i],n):e&&e.hasOwnProperty(i)?d(e[i],t):void 0}var l=s(),h=null;this.getConfig=function(){return l},this.setInitialConfig=function(t){e.extend(l.initialParams,t)},this.overrideDeviceId=function(e){o.validate(e)&&(h=e)},this.$get=["$injector","$q","infrastruct.services.localStorage","$rootScope","$log",function(t,n,i,r,s){function o(e){s.logJSON("info","log",{Categories:["AppConfigurations"],Message:e.message,Reason:e.reason,KeysChanged:e.keysChanged,Errors:e.errors})}function u(t){r.$emit("appConfig:change",{keysChanged:t,includes:function(t){if(e.isString(t))return this.keysChanged.indexOf(t)>=0;for(var n=0,i=this.keysChanged.length;i>n;n++)if(this.keysChanged[n].match(t))return!0;return!1}})}function g(e){var n=t.get("$http"),i=l.statics.ApplicationVersion.split("_")[0];return n({url:"/etag-api/configuration/v2/appsettings/etoro/"+i,categories:["generalConfig"],staticAPI:!0,"public":!0,maxRetries:1,timeout:15e3,jsonBackupKey:"appsettings_retoro"}).then(function(t){var n=t.data;if(n&&n.AppSettings){var i=n.AppSettings;e&&(i=l.getChangesComparingRemoteConfig(n.AppSettings));var r=l.setRemoteConfig(null,0,i);u(r.keysChanged),l.compareRemoteAndDefaultConfigs(s)}})["catch"](function(){})}function f(e,t){var n=l.setRemoteConfig(t.appSettingsKey.Version,t.appSettingsIndex,t.changedKeys,t.removedKeys);o(n),"appSettings.skippedChange"!=n.message&&u(n.keysChanged)}function p(){g(!0)}function d(){g()["finally"](function(){h.resolve(l)})}var h=n.defer();return l.browser.isVisualDebug=!!i.getItem("isVisualDebug"),l.dynamics.whenReady=function(){return h.promise},r.$on("appSettings:configurationChanged",f),r.$on("appSettings:"+l.statics.ApplicationVersion+":configurationChanged",f),r.$on("appSettings:refresh:request",p),setTimeout(d,4),l.setDynamicKeys(c(i,a)),l}]}),c});define(rA[276][0],[rA[149][0]],function(e){var t={nonSelectableLocales:"zh-hk,zh-mo,zh-sg",apisMaintenance:{watchlist:!1,streams:!1,streamsBC:!1,rankings:!1,stats:!1,search:!1,login:!1,withdraw:!1,deposit:!1},userCalssification:!1,isRefreshTokenEnabled:!1,logAllOKRequests:!1,isFullstoryActive:!1,darkModeEnabled:!1,iosMinVersion:"1",iosForceUpdateMinVersion:"1",androidMinVersion:"1",androidForceUpdateMinVersion:"1",androidPlayStoreVersion:"70",androidMiniSiteURL:"%ANDROID_MINI_SITE_APK_URL%",androidMinisiteApkSizeKb:"71087825",isWrapper:!1,americanCountries:[4,166,86,153,214,189,219],portfolio:{maxTPpercentage:1e3,demo:{tsl:!1,useOneClickTradingSettings:!1},real:{tsl:!1,useOneClickTradingSettings:!1},uncancelableOrders:{orderTypes:[17,18,19,20],orderSubTypes:[]},showCryptoInfoForNewVersion:!1,showCryptoInfo:!1,privateInstrumentsEnabled:!1,enableW8IntroPopUp:!0,isNeedToCheckAndroidForRedeem:!1,showCloseAllOptionDropDownMenu:!1,isCloseAllEnabled:!1,isSellAllEnabled:!1},deposit:{FTDUsePopup:!0,americanUsePopup:!0,redirectDepositFullToPopup:!1,maxDeposit:2e4,kycBeforeDepositAbTest:0,defaultAmountDollar:1e3},resourcesVersion:{},isIntercomActive:!0,isInlinemanualActive:!1,isMixpanelActive:!0,isPixelsLoaderActive:!0,isGoogleAnalyticsActive:!0,isGoogleTagManagerActive:!0,securityIframeLoaderActive:!0,securityIframeLoaderTimeout:864e5,securityIframeLoaderUpdateInterval:12e4,errorMsgDisplayTimeout:3e3,w8Timeout:5e3,privateInstrumentsSyncInterval:18e5,allowSyncPrivateInstrumentsCall:!0,allowExecutionWithoutPrivateInstruments:!1,privateInstrumentsMaxDelayMS:64e3,pushConfig:{Real:{earlyWSOpenEnabled:!0,keepaliveInterval:5e3,stalledTimeout:5e3,reconnectTimeout:1e3,maxConnectionRetries:15,url:"https://push-lightstreamer.cloud.etoro.com"},Demo:{earlyWSOpenEnabled:!0,keepaliveInterval:5e3,stalledTimeout:5e3,reconnectTimeout:1e3,maxConnectionRetries:15,url:"https://push-demo-lightstreamer.cloud.etoro.com"}},kyc:{poiPoaliveAgent:!1,enableASICSophisticatedGap:!0,permanentResident:!1,availableProvinces:"12,102",isRealStockLeverageFlowEnabled:!0,isRevolvingDoorsFlowEnabled:!0,realStockLoaderTimeout:5e3,dedicatedEVDocumentUrlEnabled:!1,uploadDocRetryDuration:30,uploadDocRetryMaxAttempts:30,isDiamondClubDeepLinkEnabled:!0,phoneCountriesMinLength6:"5,69,151",loadKycInBackgroundEnabled:!1,isFileChooserPluginEnabled:!0,networkTimeout:6e4,closeKYCUiImmediately:!1,splitTradingExScreenByCFD:!0,splitByTradingExToVolumeQuestion:"1",longerTimeToVerifyCountries:{FCA:[],USA:[]},useVideoIdentification:!0,useIdNowTestEnvironment:!0,videoIdentWaitingRoomTimer:1e4,videoIdentWaitingRoomMinShowTimeTimer:5e3,showChangeTncNewStyle:!0,rejectedValuesForApexAddressFields:"^((?!([^a-z]|^)(po box|po\\.|p\\.o\\.|pob|p\\.o\\.b\\.|p\\.o\\.b|pob\\.|box|post office box|post office|office|P\\.O box)([^a-z]|$)).)*$",showKycSingleSelectBox:!0,showKycSingleSelectBoxByABTest:!0,documentUploadRequiredWhenPepMissing:!0,documentUploadRequiredWhenPepMissingMonitorOnly:!1,isNewUserToKycActive:!0,usaRegulationIdsForUpload3210Letter:"8",newPlanToDepositAnswerEnabled:!1,changeAssessmentQuestion:[-1],isInvestedAmountQuestionNeverAnswerEnabled:!1,shouldInitWithoutGender:!0,enableUIPoBoxValidation:!0,ssnRevalidationLoadingTimeInSec:10,spainMaxDepositAmountEnabled:!0},kycx:{firstGcid:0,validateOnDebounce:!0,closeBtnPosition:"content",enabled:!1,visaHolderEnabled:!0},compliance:{enableTRS:!1,cfdReleaseDisclaimerByRegulation:!1,useTypeformInAppBrowser:!0,enableOnfidoSelfieGapV2:!1,changeTncUsNewStyle:!1,poaExpiredGapNewStyle:!0,enableWalletVideoIdentFlow:!0,enableBankIdentification:!1,enableBankIdentificationGradual2:!0,enableBankIdentificationGradual:!1,enableBankIdentificationPOC:!1,enableBankIdentificationPOC2:!0,programParticipationRegulationIds:[],enableFirstTradePopupV2:[1],enableVideoIdentGreenDesign:[1],funnelsMap:{0:"Unknown"},notSupportedGapsForMultipleGapsFlow:[11,12,14,16,17,18,19,20],enableCustomKycFunnelForGaps:!0,skipGapsFromCustomKycFunnel:["multiple",5]},onfidoSelfie:{sdkCompleteCloseTimeout:8e3,libUrlWeb:"https://assets.onfido.com/web-sdk-releases/6.20.1/onfido.min.js",libUrlMobile:"https://etoro-cdn.etorostatic.com/web-client/img/onfido-selfie/6.5.0-dev/onfido.min.js",cssUrl:"https://assets.onfido.com/web-sdk-releases/6.20.1/style.css",fixBackNavigation:!0,enableCrossAppV2:!1,checkSupportedBrowser:!0,isSelfieGapTypesEnabled:!1},onlineBankingEnabled:!0,loginId:void 0,enablePiDashboard:!0,showPiDashboardPaymentsTooltip:!1,showPiDashboardOverviewNewTooltipText:!1,enableMaxRetries:!0,maxRetriesDefaultDelay:500,httpCircuitBreaker:{name:"ccm",enabled:!1,activationRegex:null},recommendations:!1,enableBackupUrlRetries:!0,enablePortfolioSync:!0,isToaConnectActive:!1,isInstrumentSpotifyPreviewActive:!0,isInstrumentDropboxPreviewActive:!0,payments:{fundingTypeLogoOverridesByCountry:{38:{218:"Faster_Payments"}},settings:{recurringSettingsUrl:"/api/payments/v1/Recurring/recurring-settings-page",cancelPlanUrl:"/api/payments/v1/Recurring/cancel-plan",paymentsTabFF_Updated:!1},recurring:{createPlanUrl:"/api/payments/v1/recurring/create",recurringInfoUrl:"/api/payments/v1/recurring/info",postDepositTeaserFF:!1,recurringV2design:{isEnabledForAll:!1,gcidWhitelist:[],countryIdAndPercentageWhitelist:{}}},kyc:{loggerFail:{enabled:!0,timeout:3e4}},currencies:{1:["USD","$"],2:["EUR",""],3:["GBP",""],4:["JPY",""],5:["AUD","A$"],7:["CAD","C$"],37:["RUB",""],38:["RMB",""],44:["PLN","z"],77:["MYR","RM"],78:["THB",""],79:["IDR","Rp"],80:["VND",""],81:["PHP",""]},cryptocurrencies:{100000:"BTC",100001:"ETH",100002:"BCH",100003:"XRP",100005:"LTC",100017:"ADA",100020:"XLM",100023:"NEO",100026:"TRX"},checkoutLocalCurrencies:[43,77,79,80],USARegulations:[6,7,8],deposit:{depositV2design:{isEnabledForAll:!1,gcidWhitelist:[],countryIdAndPercentageWhitelist:{}},dropdown_v2_FF:{isOpenForAllCountries:!1,allowedCountries:[],allowedApplicationIdentifiers:["ReToro","ReToroAndroid","ReToroIOS"]},dropdownV2optionView:{1:1,2:1,34:2,38:1},dropdownEtoroMoneyUSDPerMOPActive:!1,wireTransferNewDepositInfoField_FF:!1,currencyMaxAmount:3e7,currenciesFromDepositInfo:{isEnabledForAll:!1,gcidWhitelist:[],countryIdAndFundingTypeIdWhitelist:{},fundingTypesWithCurrenciesFullyFromDepositInfo:[38]},dialogHeightFix_FF:!0,amountExchangeRateMinFractionalLength:4,creditCard:{pciFrontend:{v2:{isEnabledForAll:!1,gcidWhitelist:[],countryIdAndPercentageWhitelist:{}},isSendEtoroMoneyDataEnabled:!0,isIframeInputFocusedListenerEnabled:!0}},wireTransfer:{regulationsShowingReceiptUploadReminder:[4,10],isCYSECBankOptionsEnabled:!1},paypal:{bannedCountries:{},showPaypalBillingAgreement:!1,cancelBillingAgreementUrl:"/api/billing/paypal/CancelBillingAgreement",fraudnet:{isSandbox:!1,fnclsValue:"fnparams-dede7cc5-15fd-4c75-a9f4-36c430ee3a99",scriptPartTwoUrl:"https://c.paypal.com/da/r/fb.js",noScriptUrl:"https://c.paypal.com/v1"}},sofort:{iban:{disallowedValues:{enabled:!1,blackList:[]}}},ideal:{supportedBanks:{},isSystemBrowserOpened:!1,banksFromServer_FF:!1,banksFromList_FF:!1,supportedBanksList:[]},openBanking:{isSystemBrowserOpened:!1},depositInfoUrl:"/api/billing/depositInfo",depositInfoUrlIsNewEnabledForAll:!1,depositInfoUrlGcidWhitelist:[],depositInfoUrlCountryWhitelist:[],depositInfoUrlV2:"/api/payments/v1/customers/deposit-info",depositInfoUrlV2Enabled:!1,depositInfoUrlV2RolloutPercentage:0,depositInfoUrlV2GcidWhitelist:[],depositUrl:"/api/payments/v1/deposit",transactionCheckUrl:"/api/billing/transactioncheck",strategiesVersion:{},isPreselectedMopRouteEnabled:!0,isSetAmountForExternalFunnelEnabled:!1,depositEtoroMoneyAfterSubmitPromotionPopup:{enabled:!1,version:1,viewsLimit:2,timeToWaitUntilNextView:864e5},promotions:{isEtoroMoneyIbanPromotionEnabled:!0}},withdraw:{showStringLabelFundingType:!1,wireTransfer:{isSummaryStepRequired:!0},paypal:{enabled:!0,disallowCountries:[44],disallowRegulations:[6,7]},onlineBanking:{enabled:!0,disallowRegulations:[6,7],allowedCountries:[]},currentWithdrawableAmount:{enabled:!0},neteller:{enabled:!1},skrill:{enabled:!1},zeroWithdrawalFeeFundingTypeIds:[],regulationIdsBlackListForPrecashoutPopups:[1],validationConfig:{blockedSwiftCodes:["SWIFTEST","UNJSUAUK","BTRLRO22","BAGAGE22","CBQAQAQA","BMSXMXMM","BSCHUYMM","NBOKKWKW","BPOTBEB1","AUDBLBBX","SGLILBBX","BOMLAEAD","MEDLLBBX","BCYPCY2N","PBBEMYKL","ARBKMYKL","PBANUA2X","BCPLPEPL","BNBOBOLX","QISBQAQA","RHBBMYKL"],blockedSwiftCountries:["co","pa","sa"],blockedSwiftUsdCodes:[],noWireCountries:[47,158,179],blockedAccountNumbers:[],blockedRoutingNumbers:[]},uniqueIdentifiersConfig:{noIbanCountries:[12,38,132,219,169],ibanCountriesRequired:[2,5,13,14,15,18,19,32,52,54,55,57,67,69,72,74,78,79,81,83,94,242,95,100,244,101,102,233,105,109,112,113,117,119,126,129,134,135,143,154,156,164,165,167,168,178,179,184,185,191,196,197,209,210,217],ibanCountriesOptional:[28,51,60,61,87,98,99,130,174,181,232,237,214,216],accountCountries:[]},isErrorSpecificShowed:!0,useClientAMOPConfiguration:!1,useClientAMOPConfigurationNew:!1,useOldEndPointGetAvailable:!1,disableIntermediaryMultipleFields:!1,enableWithdrawForStatusTradeBlock:!1,disableNewDesignAmount:!1,useOldFlowValidation:!1,seaCurrencies:[77,79,80,43],apiUrl:"/api/billing/withdraw",useNewFlowACH:1},plaid:{enabled:!0,handlePendingAsSuccess:!0,key:"d7e951ea96178b2716008bf2da840e",env:"production",plaidscript:"https://cdn.plaid.com/link/v2/stable/link-initialize.js",promptToRemoveExpiredAccount:!1,plaidWidgetUri:"https://etoro-cdn.etorostatic.com/web-client/plaid-widget/plaid-widget.html",depositRedirectToEtoroSuccess:"deposit/plaid-redirect-success",depositRedirectToEtoroFailure:"deposit/plaid-redirect-failure",withdrawRedirectToEtoroSuccess:"withdraw/plaid-redirect-success",withdrawRedirectToEtoroFailure:"withdraw/plaid-redirect-failure",iosUseAppSchemeForRedirectToEtoro:!1,androidUseAppSchemeForRedirectToEtoro:!0,isRedirectOpenForAll:!1,whiteListedUsersNewForRedirect:[],bankAvatars:["ins_1","ins_2","ins_3","ins_4","ins_5","ins_6","ins_7","ins_9","ins_11","ins_12","ins_13","ins_14","ins_15","ins_16","ins_19","ins_20","ins_56","ins_127989","ins_127990","ins_127991","ins_128026"],v2_implementation_percentage_host:{withdraw:0,deposit:0},v2_implementation_percentage_ApplicationIdentifier:{ReToro:100,ReToroAndroid:100,ReToroIOS:100},androidPackageName:"com.etoro.openbook",iosRedirectUri:"https://etoro.com/deposit/plaid-re-launch",redirectPathWeb:"/deposit/plaid-re-launch",isBlockFundingUponNameConflict:!1,isBlockFundingUponNameConflictGcidWhitelist:[]},payWithMyBank:{enabled:!0,apiScriptUrl:"https://paywithmybank.com/start/scripts/paywithmybank.js?accessId=q7Hz7jz99U8BYe3mgTgL",promptToRemoveExpiredAccount:!1,avoidEmptyAccountList:!0,isBlockFundingUponNameConflict:!1,isBlockFundingUponNameConflictGcidWhitelist:[]},etoroMoney:{links:{learnMore:"https://www.etoro.com/money/"},openBanking:{enabled:!1,autoSweepEnabled:!0,moneyTransferUrl:"/api/payments/v1/MoneyTransfer"}},eToroDebitCard:{enabled:!0,cacheInstantCashoutEligibility:!0,isLogsSent:!0,logo:{withdrawSkipOrCreate:"/web-client/img/payments/etoro-card/card-animation/card.svg",withdrawCreationSuccess:"/web-client/img/payments/etoro-card/etoro-card.creation.success.svg",withdrawEtoroCardActive:"/web-client/img/payments/etoro-card/etoro-card.existing.active.png",withdrawEtoroIbanActive:"/web-client/img/payments/etoro-card/etoro-iban.existing.active.png"},isDesignV2ForWalletScreensEnabled:!0},etoroMoneyViaWireTransfer:{createIbanUrl:"/api/payments/v1/EToroMoney/iban",enabled:!1,showPromoFundingTypeIdWhitelist:[],withdraw:{enabled:!1}},etoroMoneyFtd:{enabled:!1,funnelWhitelist:[],isNeedToIgnoreOptimizely:!1},redeem:{redeemPopup:{v2:{isEnabledForAll:!1,gcidWhitelist:[],countryIdWhitelist:[]},twoFactorSuggestion:{isEnabledForAll:!1,gcidWhitelist:[]}},cryptocurrencies:{TRX:{enabled:!0,fee:100}}},localOnlineBanking:{enabled:!0,enabledByCountryId:{97:!0,226:!0,123:!0,162:!0,202:!0}},localCurrencyIdByCountryId:{97:79,226:80,123:77,162:81,202:78},portfolioHistoryCashflows:{fundingTypesWithBulletsBeforePaymentDetails:[1,37,38],conversionCost:{isEnabledForAll:!1,countryIdWhitelist:[],regulationIdWhitelist:[]},isNftEnabled:!1},"logoOverride_theme_2022-redesign_fundingTypeId_1_countryId_219":"debit-card","logoOverride_theme_2022-redesign_fundingTypeId_2_countryId_219":"wire-transfer",topMarketsMaxItems:5,isFtdRelevantForTopMarkets:!0},trading:{usTradingConfig:{usFlavorEnabled:!1,usExchanges:[4,5],usInstrumentTypes:[5,6],usRegulationIds:[8],isUsPrecisionEnabled:!0,restrictedRegulationIds:[7],isRealTimeExchangeLogsEnabled:!1},abTestingConfig:{portfolioColumns:[{countries:[{countryId:250,population:100}],testAccounts:[]}],newStartCopy:[{countries:[{countryId:250,population:100}],testAccounts:[]}],showNewPortfolio:[{countries:[],testAccounts:[]}]},instrumentConfig:{isRatesSubSnapshotEnabled:!1,shouldSkipResyncRatesCall:!1},showNewPortfolio:!0,suitabilityConfig:{suitability2022:{enable:!1}},mirrorConfig:{isUnrealizedEnabled:!1},newPortfolioEduConfig:{enable:!0}},monitoring:{isFilteringActive:!1,filters:{}},http:{withCredentialsRoutes:"(/api/sts/)|(/api/registration/)"},userSettings:{twoFactorEnabled:!1,twoFactorAdjustmentEnabled:!1,optOutEnabled:!0,twoFactorCallEnabled:!0,shouldShowUserGain:!1,shouldShowRafBanner:!1},closingPricesUpdateThrottle:18e4,allowPrivateInstrumentsCall:!0,positionOrderState:{receivedDuration:3e3,filledDuration:3e3,rejectedDuration:3e3,educationalEnabled:!1,educationalInterval:5e3},publicInstrumentsTotalBulks:1,listenToSplitNotification:!0,chartIq:{chartRefreshInterval:2,sharechartUrl:"http://sharechart.etoro.com",sharechartUpload:"https://services.chartiq.com",reduceCandlesApiCalls:!1},urls:{candlesApi:"https://candle.etoro.com",etoroCdn:"https://etoro-cdn.etorostatic.com",chartsEtoroUrl:"https://charts.etoro.com",userstatsApiUrl:"https://userstatsapi.etoro.com",maintenanceUrl:"https://maintenance.etoro.com",monitoringUrl:"https://etorologsapi.etoro.com",billingPciUrl:"https://billing-pci.etoro.com/",accountStatementUrl:"https://accountstat.etoro.com",frontBypassUrl:"https://apptest.etoro.com",partnersUrl:"https://partners.etoro.com",oldCashierUrl:"https://cashier.etoro.com/",wrapperAjaxAbsoluteDomain:"https://www.etoro.com",staticApiUrl:"https://api.etorostatic.com",landingPagesUrl:"https://go.etoro.com",kycxSchemaUrl:"https://etoro-cdn.etorostatic.com/kycx/schema-all-merged-in.json",walletUrl:"https://wallet.etoro.com"},feed:{maxPostCharsLimit:2048,minPostCharsLimit:40,getMorePostsInterval:30,postReadMinTime:3e3,postCommentsLimit:10,repliesAndLikesPageSize:10,postRepliesLimit:2,maxInitComments:2,fullPageMaxInitComments:20,commentsPageSizeShouldBeAlignWithServer:10,likesPageSizeShouldBeAlignWithServer:10,fullPageCommentsAndLikesPageSize:20,fullPageRepliesAndLikesPageSize:20,deprecatedFeedsStatus:{userTrades:"Active"},attachmentMaxFileLengthInBytes:8388608,maxUserPinnedPostsAllowed:3,cdn:{isCdnEnabledForUsUsers:!1,clubTiersWithCdnEnabledForUS:"1",bypassCdnTtlInMinutes:-1},seo:{allowedHosts:"*.etoro.com,*.etoro.com.cn,etoro.tw"},newsFeedExperiment:{enabled:!0,newsFeedPercentage:50,mostRelevantPercentage:25,mostRecentPercentage:25},polls:{isFeatureEnabled:!1,isShowNewTag:!0,isViewPollFeatureEnabled:!1,maxRequestTimeout:2e3,maxPollOptionChars:30,maxPollOptions:4},analytics:{streamIO:{apiKey:"jmzb8hkywamd",refreshInterval:18e5}},tagExtensions:["aero","asia","biz","cat","com","coop","info","int","jobs","mobi","museum","name","net","org","pro","tel","travel","xxx","edu","gov","mil","ac","ad","ae","af","ag","ai","al","am","an","ao","aq","ar","as","at","au","aw","ax","az","ba","bb","bd","be","bf","bg","bh","bi","bj","bm","bn","bo","br","bs","bt","bv","no","bw","by","bz","ca","cc","cd","cf","cg","ch","ci","ck","cl","cm","cn","co","cr","cs","cu","cv","cx","cy","cz","dd","de","dj","dk","dm","do","dz","ec","ee","eg","eh","er","es","et","eu","fi","fj","fk","fm","fo","fr","ga","gb","uk","gd","ge","gf","gg","gh","gi","gl","gm","gn","gp","gq","gr","gs","gt","gu","gw","gy","hk","hm","hn","hr","ht","hu","id","ie","il","im","in","io","iq","ir","is","it","je","jm","jo","jp","ke","kg","kh","ki","km","kn","kp","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","mc","md","me","mg","mh","mk","ml","mm","mn","mn","mo","mp","mq","mr","ms","mt","mu","mv","mw","mx","my","mz","na","nc","ne","nf","ng","ni","nl","no","np","nr","nu","nz","om","pa","pe","pf","pg","ph","pk","pl","pm","pn","pr","ps","pt","pw","py","qa","re","ro","rs","ru","su","rw","sa","sb","sc","sd","se","sg","sh","si","sj","no","sk","sl","sm","sn","so","sr","ss","st","su","sv","sx","sy","sz","tc","td","tf","tg","th","tj","tk","tl","tp","tm","tn","to","tp","tl","tr","tt","tv","tw","tz","ua","ug","uk","us","gov","uy","uz","va","vc","ve","vg","vi","vn","vu","wf","ws","xyz","ye","yt","yu","za","zm","zw","tech"]},rateUs:{enable:!0,enableSettingsTouchpoint:!0,pnlThreshold:.05,snoozeTime:4320,isAbTestEnable:!0},closeAccount:{closeScreenTimeout:2e3,maxMessageChars:3500},isUnsubscribeEmailsActive:!1,emailVerification:{enable:!0,maxResendCount:4,secondesToOtpResend:30},domainChange:{isActive:!1},usa:{nonCompliantInstruments:"100030,100270"},menu:{newRafRedirect:!1,forceNewRafRedirect:!0,shouldShowClubsMenu:!0,shouldShowClubsMenuInUS:!0,shouldShowInviteFriendsInUS:!1,rafNewTagRegulations:"4,6,7,8",isUSDiscoveryPeopleAvailable:!0,shouldShowRafAmountLabel:!1},upsell:{enable:!0,openTradePopup:{enable:!0},portfolioBanner:{enable:!0}},openGarden:{threshold:0,landingScreen:"/discover/markets"},successStories:{lastSeenSnoozeTime:1440,periodsGainThreshold:{day:.5,week:1,month:2},periodsSnoozeTime:{day:1440,week:7200,month:30240},periodsGainDiffThreshold:{day:10,week:5}},chat:{isAllNonDepositorsBlocked:!1,nonDepositorsBlockedCountriesList:"",blockedClubTiersList:"",isCSInOverload:!1,isVisitorsBlocked:!1,endpointUrl:"https://d.la1-c1-par.salesforceliveagent.com/chat",preChatSdkUrl:"https://c.la1-c1-par.salesforceliveagent.com/content/g/js/42.0/prechat.js",deploymentSdkUrl:"https://c.la1-c1-par.salesforceliveagent.com/content/g/js/42.0/deployment.js",organizationId:"00D24000000d2qa",recordType:"0121p000001138oAAA",etoroMoneyRecordType:"0121p000000oYwbAAE",blockedCountries:[],minEquity:0,blockedClubCountries:{1:[],2:[],3:[],4:[],5:[],6:[],7:[]},bot:{enabled:!0,botScriptSrc:"https://service.force.com/embeddedservice/5.0/esw.min.js",chatbotAvatarImgURL:"https://chatdev-etoro-chat.cs106.force.com/resource/Chatbot_Avatar",salesforceBotLink:"https://etoro--fullnew.my.salesforce.com",embededChatSite:"https://fullnew-etoro-chat.cs105.force.com/EmbededChatSite",gslbBaseURL:"https://service.force.com",organizationId:"00D1w0000000j8p",eswLiveAgentName:"eToroEmbededChat",baseLiveAgentContentURL:"https://c.la1-c1cs-cdg.salesforceliveagent.com/content",deploymentId:"5721p000000GqGg",buttonId:"5731w000000CbFe",baseLiveAgentURL:"https://d.la1-c1cs-cdg.salesforceliveagent.com/chat",eswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I1w000000CasmEAC_17ed32b5237"}},shouldShowCryptoResearchTab:!1,copyTraderFunnel:{enable:!0,desktopGuide:68862,deviceGuide:68971,enableDisplayOutsideTheFunnel:!0},clubDashboard:{isEnable:!0,webcastMajorLanguages:["en-gb","en-us","zh-cn","de-de","es-es","fr-fr","it-it","nl-nl"],walletUrl:"https://etoro.onelink.me/J5bU/d74a056e",activateCardUrl:"https://etoro.onelink.me/J5bU/1cc53fe4",whatsappUrl:"https://api.whatsapp.com/send?phone=447888690053",whatsappAllowedClubTiers:[6,7],minDaysToDisplayRiskDisclaimer:30,shouldDisplayISAMoneyFarm:!1},ssoLogin:{shouldEnableEditingEmail:!0,wechat:{appId:"wx6627ad43923cfffe",redirectUri:"https://www.etoro.com"},apple:{enableDesktopWeb:!0,enableMobileWeb:!1,enableMobileWrapper:!0,shouldShowPassword:!0},facebook:{shouldEnableEditingEmail:!0}},discovery:{markets:{us:{shouldShowBanner:!0,shouldShowMainDiscoveryPage:!1},crypto:{coins:[1e5,100001,100003,100005,100022,100032]},general:{indices:[28,27,32,29,30,38],currencies:[1,2,4,5,6,7],commodities:[18,17,19,22,92,93],etf:[3e3,3004,3026,3003,3001,3012]},stocksIndustries:{technology:[1005,1001,1002,1127,1003,1111]},userPresets:{maxItems:20}},assetTypes:{crypto:{isNewUrlEnabled:!0,abPercentage:50,isUsStocksBanner:!0},smartportfolios:{isRedesignPageAvailable:!0,abPercentage:100}},uxRedesign:{assetPagesDisabled:!1,disableOptions:{people:!1,markets:!1,copyportfolios:!1}},people:{presetCardShowBioForUser:!1,widgetPresetsPresentedValue:{preset_one:"baseLineCopiers",preset_two:"gain",preset_three:"winRatio",preset_four:"profitableMonthsPct",preset_five:"gain"}},trendingAnalysisAbTest:{isTrendingAnalysisTestActive:!0,trendingAnalysisMaxItems:30}},onboarding:{isRegFormDesignVar:!0,isGenericImgByCountryId:[],isAcademyAbEnabled:!1,isButtonsBelowAbEnabled:!1,isLocaleAbEnabled:!1},onboardingScreens:{isEnabled:!1,isAbTestEnabled:!1},funnels:{isEnabled:!1,requestRetryDelay:3e4,requestRetryCount:3},registration:{"short":!0,forceShortCountryList:"4,166,86,153,214,189,219",china:{shouldShowICPText:!0},cfdTopDisclaimerRegulations:[2]},appsettingsRefreshThreshold:3e5,changePhone:{showChangePhoneButton:!0,maxResendPhoneCodeCount:5,maxResendEmailCodeCount:5},useHttpForInAppRedirect:!0,disableDemo:!1,inAppNotifications:{initThreshold:5e3},home:{marketsTickerInstrumentIDs:[27,29,28,30,1e5,1,17],typeGates:{1:0,2:0,4:0,5:0,6:0,10:0,1000:0},isIntercomHomeTourEnabled:!0,promotionsCardsAutoChangeInMs:5e3,promotionCards:{shouldDisplayIsaMoneyFarmCard:!0},onboardingCard:{isAirdropEnabled:!0},accountOverview:{etoroMoneyUpdateTimeoutInMs:3e3,isBasicProgramEligibilityEnabled:!0}},mobileAcquisitionPopup:{isEnabled:!1},forceUpdateLocalizationEnabled:!0,forceUpdateLocalizationOnResume:!0,avatarMaxFileLengthInBytes:8388608,trackingPermissions:{minVersion:14,minSubVersion:4,maxDevices:20,updateThreshold:6048e5},businessTouchpointLink:"",watchlistTimeOut:1e4,marketPage:{newsTabExperimentPercentage:100,isNewsTabEnabled:!0,isShowNewTagForNewsTab:!1,cityFalconUrl:"https://www.cityfalcon.com/clients/01012006/widget"},isBiometricLoginEnabled:!0,isBiometricLoginEnabledCountries:"250",isAirdropFlowEnabled:!1,isOptionsTradingButtonEnabled:!1,optionsTradingGcidWhitelist:[],gatsbyRedirectUrl:void 0,eventsPage:{iframeBaseUrl:"https://etoro.bullsheet.me/calendar"},newsPage:{iframeBaseUrl:"https://news.bullsheet.me/news"},extendedHoursPage:{iframeBaseUrl:"https://eh.bullsheet.me/eh",numberOfItems:5,mirrorPositionMinInvestedPercentage:.001,marketOpenStockIndication:"ctrp.ch"},userPage:{topTradedDesktopCount:3,topTradedMobileCount:5,bio:{shortBioMaxChars:90,fullBioMaxChars:1e3,isShortBioTestActive:!0}},authentication:{twoFactor:{phoneNumberValidationMin:6,phoneNumberValidationMax:15,phoneVerificationCodeLength:5,resendTimerInSeconds:30,insistMode:{snoozeLimit:3,delayInHours:48,enableCloseAfterDeadEndError:!0}}},isaAccount:{enabled:!1,loginFlowDisplayPopupNumberOfLogins:2,moneyfarm:{affiliateUrl:"https://app.moneyfarm.com/gb/sign-up?affiliatePartnerId=84714d4e-4ee9-44cf-a90c-7a7095995d36&affiliatePartnerUserId={{userId}}&firstName={{firstName}}&email={{email}}&promocode=ETORO23"}},watchlist:{addMarketsGetDefaultInstrumentsTimeout:5e3}},o=new e;return o.adjustByCountry(t),t});define(rA[149][0],[],function(){function t(){this.urls={Indonesia:{urls:{candlesApi:"https://candle.etoroasia.com.cn",monitoringUrl:"https://etorologsapi.etoroasia.com.cn",billingPciUrl:"https://billing-pci.etoroasia.com.cn/",maintenanceUrl:"https://maintenance.etoroasia.com.cn",wrapperAjaxAbsoluteDomain:"https://www.etoroasia.com.cn",accountStatementUrl:"https://accountstat.etoroasia.com.cn",partnersUrl:"https://partners.etoroasia.com.cn",frontBypassUrl:"https://apptest.etoroasia.com.cn",oldCashierUrl:"https://cashier.etoroasia.com.cn/",walletUrl:"https://wallet.etoroasia.com.cn"},pushConfig:{Real:{url:"https://push.etoroasia.com.cn"},Demo:{url:"https://push-demo.etoroasia.com.cn"}}},China:{androidMiniSiteURL:"",urls:{candlesApi:"https://candle.etoroasia.com.cn",monitoringUrl:"https://etorologsapi.etoroasia.com.cn",billingPciUrl:"https://billing-pci.etoroasia.com.cn/",maintenanceUrl:"https://maintenance.etoroasia.com.cn",accountStatementUrl:"https://accountstat.etoroasia.com.cn",frontBypassUrl:"https://apptest.etoroasia.com.cn",partnersUrl:"https://partners.etoroasia.com.cn",oldCashierUrl:"https://cashier.etoroasia.com.cn/",wrapperAjaxAbsoluteDomain:"https://www.etoroasia.com.cn",walletUrl:"https://wallet.etoroasia.com.cn"},pushConfig:{Real:{url:"https://push.etoroasia.com.cn"},Demo:{url:"https://push-demo.etoroasia.com.cn"}}}},this._omitEmptyKeys(this.urls)}return t.prototype={adjustByCountry:function(t){var o=this._safeGetCookie("user-country"),a=this.urls[o];a&&(this.merge(t,{domainChange:{isActive:!0}}),this.merge(t,a))},merge:function(t,o){for(var a in o){var e=t[a],s=o[a];e&&"object"==typeof s&&Object.assign(s,this.merge(e,s))}return Object.assign(t||{},o),t},_safeGetCookie:function(t){try{var o="; "+document.cookie,a=o.split("; "+t+"=");if(2==a.length)return a.pop().split(";").shift()}catch(e){return}},_omitEmptyKeys:function(t){for(var o in t){var a=t[o];"object"==typeof a?this._omitEmptyKeys(a):a||delete t[o]}}},t});define(rA[150][0],[],function(){return{appName:"ReToro",machineUrl:"https://cdn.etorostatic.com",isUsStocksBanner:!0,isUseAbsoluteDomain:!1,ApplicationIdentifier:"ReToro",ApplicationVersion:"549.0.3",isChina:/(_China)/.test("549.0.3"),mixpanelToken:"dbbd7bd9566da85f012f7ca5d8c6c944",googleClientId:"1070319902608-plmm2pme29to6s18v4emc53r0h5aknkc.apps.googleusercontent.com",googleAnalyticsId:"UA-2056847-1",facebookAppId:"166209726726710",funnelId:"36",funnelFromId:"36",affiliateId:null,loadGA:!0,defaultLocale:"en-gb",kycLoaderUrl:"https://etoro-cdn.etorostatic.com/kyc/app/kyc.loader.js",languageBasedFeedAsDefault:"zh-cn",isToaConnectEnabled:!1,isSocialConnectEnabled:!0,isChinaSocial:!1,marketingDomain:"/",IOSAppLink:"http://m.onelink.me/2b58ecce",androidAppLink:"http://m.onelink.me/22ec4b7b",initialLP:window.location.href,initialReferrer:window.document.referrer,isKYCAddressAutoCompleteEnable:!0,isWechatConnectEnabled:!1,isFacebookConnectEnabled:!0,isGoogleConnectEnabled:!0,isAppleConnectEnabled:!0,loginRememberMeDefault:!0,liveAgentDeploymentId:"5721p000000GqGg",isSeoOnlyRouting:!1,ssoSignupDomain:"https://www.etoro.com",login:{gatewayAppId:"90631448-9A01-4860-9FA5-B4EBCDE5EA1D",requiredScopes:[]},isSettingsDrawerRegistrationEnabled:"%REGISTRATION_SETTINGS_DRAWER%",urbanWebPush:{workerUrl:"/app-root-push-worker.js",appKey:"W_Ps1DDsQAypC5_UuKOeyg",token:"MTpXX1BzMUREc1FBeXBDNV9VdUtPZXlnOi16TU1FNDhXNDlPdm9TX2lQaVFqaFcwODVUUzk5RGhRbUszVno3Umpid2c",vapidPublicKey:"BIckhmdgTLhUz1a46UoaRqLwRBFp0j/qf1HdeX2vFVamGzBmn3d7FHL2SrudAZDDIXvCbMatvkKQCwyi+XRSzlQ=",websitePushId:"web.com.webpush.etoro"},appleSSOServiceClientId:"com.etoro.openbook.service",intercomConfig:{userToken:""}}});!function(i,s){"use strict";var e="0.7.10",o="",r="?",n="function",a="undefined",t="object",w="string",l="major",d="model",p="name",c="type",u="vendor",m="version",f="architecture",b="console",g="mobile",h="tablet",v="smarttv",x="wearable",y="embedded",k={extend:function(i,s){for(var e in s)-1!=="browser cpu device engine os".indexOf(e)&&s[e].length%2===0&&(i[e]=s[e].concat(i[e]));return i},has:function(i,s){return"string"==typeof i?-1!==s.toLowerCase().indexOf(i.toLowerCase()):!1},lowerize:function(i){return i.toLowerCase()},major:function(i){return typeof i===w?i.split(".")[0]:s}},A={rgx:function(){for(var i,e,o,r,w,l,d,p=0,c=arguments;p<c.length&&!l;){var u=c[p],m=c[p+1];if(typeof i===a){i={};for(r in m)m.hasOwnProperty(r)&&(w=m[r],typeof w===t?i[w[0]]=s:i[w]=s)}for(e=o=0;e<u.length&&!l;)if(l=u[e++].exec(this.getUA()))for(r=0;r<m.length;r++)d=l[++o],w=m[r],typeof w===t&&w.length>0?2==w.length?i[w[0]]=typeof w[1]==n?w[1].call(this,d):w[1]:3==w.length?i[w[0]]=typeof w[1]!==n||w[1].exec&&w[1].test?d?d.replace(w[1],w[2]):s:d?w[1].call(this,d,w[2]):s:4==w.length&&(i[w[0]]=d?w[3].call(this,d.replace(w[1],w[2])):s):i[w]=d?d:s;p+=2}return i},str:function(i,e){for(var o in e)if(typeof e[o]===t&&e[o].length>0){for(var n=0;n<e[o].length;n++)if(k.has(e[o][n],i))return o===r?s:o}else if(k.has(e[o],i))return o===r?s:o;return i}},E={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},S={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[p,m],[/\s(opr)\/([\w\.]+)/i],[[p,"Opera"],m],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[p,m],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[p,"IE"],m],[/(edge)\/((\d+)?[\w\.]+)/i],[p,m],[/(yabrowser)\/([\w\.]+)/i],[[p,"Yandex"],m],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],m],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[p,m],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[[p,"UCBrowser"],m],[/(dolfin)\/([\w\.]+)/i],[[p,"Dolphin"],m],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[p,"Chrome"],m],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[m,[p,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[m,[p,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[m,[p,"Facebook"]],[/fxios\/([\w\.-]+)/i],[m,[p,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[m,[p,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[m,p],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[p,[m,A.str,E.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[p,m],[/(navigator|netscape)\/([\w\.-]+)/i],[[p,"Netscape"],m],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[p,m]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,k.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[f,/ower/,"",k.lowerize]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[f,k.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[d,u,[c,h]],[/applecoremedia\/[\w\.]+ \((ipad)/],[d,[u,"Apple"],[c,h]],[/(apple\s{0,1}tv)/i],[[d,"Apple TV"],[u,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[u,d,[c,h]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[d,[u,"Amazon"],[c,h]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[d,A.str,E.device.amazon.model],[u,"Amazon"],[c,g]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[d,u,[c,g]],[/\((ip[honed|\s\w*]+);/i],[d,[u,"Apple"],[c,g]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[u,d,[c,g]],[/\(bb10;\s(\w+)/i],[d,[u,"BlackBerry"],[c,g]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[d,[u,"Asus"],[c,h]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[u,"Sony"],[d,"Xperia Tablet"],[c,h]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[u,"Sony"],[d,"Xperia Phone"],[c,g]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[u,d,[c,b]],[/android.+;\s(shield)\sbuild/i],[d,[u,"Nvidia"],[c,b]],[/(playstation\s[34portablevi]+)/i],[d,[u,"Sony"],[c,b]],[/(sprint\s(\w+))/i],[[u,A.str,E.device.sprint.vendor],[d,A.str,E.device.sprint.model],[c,g]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[u,d,[c,h]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[u,[d,/_/g," "],[c,g]],[/(nexus\s9)/i],[d,[u,"HTC"],[c,h]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[d,[u,"Microsoft"],[c,b]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[u,"Microsoft"],[c,g]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],[d,[u,"Motorola"],[c,g]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[d,[u,"Motorola"],[c,h]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[u,"Samsung"],d,[c,h]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[u,"Samsung"],d,[c,g]],[/(samsung);smarttv/i],[u,d,[c,v]],[/\(dtv[\);].+(aquos)/i],[d,[u,"Sharp"],[c,v]],[/sie-(\w+)*/i],[d,[u,"Siemens"],[c,g]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[u,"Nokia"],d,[c,g]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[d,[u,"Acer"],[c,h]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[u,"LG"],d,[c,h]],[/(lg) netcast\.tv/i],[u,d,[c,v]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[d,[u,"LG"],[c,g]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[d,[u,"Lenovo"],[c,h]],[/linux;.+((jolla));/i],[u,d,[c,g]],[/((pebble))app\/[\d\.]+\s/i],[u,d,[c,x]],[/android.+;\s(glass)\s\d/i],[d,[u,"Google"],[c,x]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[d,/_/g," "],[u,"Xiaomi"],[c,g]],[/\s(tablet)[;\/\s]/i,/\s(mobile)[;\/\s]/i],[[c,k.lowerize],u,d]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[m,[p,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[p,m],[/rv\:([\w\.]+).*(gecko)/i],[m,p]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[p,m],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[p,[m,A.str,E.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[p,"Windows"],[m,A.str,E.os.windows.version]],[/\((bb)(10);/i],[[p,"BlackBerry"],m],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[p,m],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[p,"Symbian"],m],[/\((series40);/i],[p],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[p,"Firefox OS"],m],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[p,m],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[p,"Chromium OS"],m],[/(sunos)\s?([\w\.]+\d)*/i],[[p,"Solaris"],m],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[p,m],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[p,"iOS"],[m,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[p,"Mac OS"],[m,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[p,m]]},T=function(s,e){if(!(this instanceof T))return new T(s,e).getResult();var r=s||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:o),n=e?k.extend(S,e):S;return this.getBrowser=function(){var i=A.rgx.apply(this,n.browser);return i.major=k.major(i.version),i},this.getCPU=function(){return A.rgx.apply(this,n.cpu)},this.getDevice=function(){return A.rgx.apply(this,n.device)},this.getEngine=function(){return A.rgx.apply(this,n.engine)},this.getOS=function(){return A.rgx.apply(this,n.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(i){return r=i,this},this.setUA(r),this};T.VERSION=e,T.BROWSER={NAME:p,MAJOR:l,VERSION:m},T.CPU={ARCHITECTURE:f},T.DEVICE={MODEL:d,VENDOR:u,TYPE:c,CONSOLE:b,MOBILE:g,SMARTTV:v,TABLET:h,WEARABLE:x,EMBEDDED:y},T.ENGINE={NAME:p,VERSION:m},T.OS={NAME:p,VERSION:m},typeof exports!==a?(typeof module!==a&&module.exports&&(exports=module.exports=T),exports.UAParser=T):typeof define===n&&define.amd?define(rA[186][0],function(){return T}):i.UAParser=T,i.UAParser=T;var N=i.jQuery||i.Zepto;if(typeof N!==a){var O=new T;N.ua=O.getResult(),N.ua.get=function(){return O.getUA()},N.ua.set=function(i){O.setUA(i);var s=O.getResult();for(var e in s)N.ua[e]=s[e]}}}("object"==typeof window?window:this);define(rA[345][0],["angular"],function(t){function e(t){function e(){try{return window[t]}catch(e){return null}}function r(){var t="testLclsStr!@#$";try{return i.setItem(t,"1"),i.removeItem(t),!0}catch(e){return!1}}function n(t){return window.btoa?window.btoa(JSON.stringify(t)):JSON.stringify(t)}function o(t){return JSON.parse(window.atob?window.atob(t):t)}var i=e(t);return function(){var t=!1;this.setInMemoryStorage=function(e){t=e},this.$get=[function(){return i=r()&&!t?i:{d:{},setItem:function(t,e){return this.d[t]=e},getItem:function(t){return this.d[t]},removeItem:function(t){return delete this.d[t]}},{setItem:function(t,e){if(t)try{i.setItem(t,JSON.stringify(e))}catch(r){return}},setEncodedItem:function(t,e){if(t)try{i.setItem(t,n(e))}catch(r){return}},setAsyncEncodedItem:function(t,e){if(!t)return Promise.resolve();try{return Promise.resolve(i.setItem(t,n(e)))}catch(r){return Promise.resolve()}},getItem:function(t){if(!t)return null;try{return JSON.parse(i.getItem(t))}catch(e){return null}},getEncodedItem:function(t){if(!t)return null;try{return o(i.getItem(t))}catch(e){return null}},getAsyncEncodedItem:function(t){if(!t)return Promise.resolve(null);try{return Promise.resolve(o(i.getItem(t)))}catch(e){return Promise.resolve(null)}},removeItem:function(t){if(t)try{i.removeItem(t)}catch(e){return}},setItemAsIs:function(t,e){if(t)try{i.setItem(t,e)}catch(r){return}}}}]}}var r=t.module("infrastruct.services.storage",[]);return r.provider("infrastruct.services.localStorage",e("localStorage")),r.provider("infrastruct.services.sessionStorage",e("sessionStorage")),r});define(rA[191][0],[],function(){function x(){function x(){return t.replace(/t/g,function(){return((new Date).getTime()%16).toString(16)}).replace(/[xy]/g,function(x){var t=16*Math.random()|0,n="x"==x?t:3&t|8;return n.toString(16)})}var t="xxxxtxxx-xxxx-4xxx-yxxx-xxxxxxtxxxxx";return x}return x.validate=function(x){var t=/^[a-z0-9]{8}-[a-z0-9]{4}-4[a-z0-9]{3}-[a-z0-9]{4}-[a-z0-9]{12}$/;return t.test(x)},x});define(rA[381][0],["moduleDefiner","underscore",rA[477][0],rA[334][0]],function(e,n,t){"use strict";function a(e,n){for(var t=0;n[t]===e;)t++;return n.substr(t)}function o(e,n){return void 0===e&&(e="s"),n.replace(new RegExp("["+e+"]+$"),"")}function r(e){return e?e.replace(/\/\/$/i,"/"):e}function i(e,n,t){if(t)e=e.replace(l,"/");else if(!e||l.test(e)||v.test(e)||d.test(e))return r(e);return e=a("/",e),n=n===h?"":n?"/"+n:"/",e=o("/",n)+"/"+e,r(e)}function c(e,n){return e.map(function(e){return-1===n.indexOf(e)?e.split("-")[0]:e})}function s(e,n,t,a,o){function r(e,n){return n?e.call(c,n):e.call(c)}var c=e,s=c.path,u=c.url;return c.path=function(e){return e=i(e,t.session&&t.session.isLoggedIn?"":n.languageCode),r(s,e)},c.seoOnlyRouting=function(e){return o.statics.isSeoOnlyRouting=!0,e=i(e),r(s,e)},c.url=function(e){return e=i(e,t.session&&t.session.isLoggedIn?"":n.languageCode),r(u,e)},c.nativeHref=function(e){return e&&(a.location.href=e),a.location.href},c}function u(e,n,t,a){var o=e[0],r=o.name,c=document.documentMode,s="href";return o.compile=function(){return function(e,o,u){var l=s,d=s;u.$observe(r,function(e){return e?(e=i(e,t.session.isLoggedIn?"":n.languageCode),a.$$html5||!e||v.test(e)||"#"===e.charAt(0)||(e="#"+e),u.$set(d,e),void(c&&l&&o.prop(l,u[d]))):void("href"===s&&u.$set(d,null))})}},e}var l,d,g=e("infrastruct.services.localeRouting",["ngRoute",t]),f=[],p=[],v=new RegExp("^(http[s]?:\\/\\/)"),h="en",m=[];g.factory("infrastruct.services.localeRoutingFactory",["infrastruct.services.config","infrastruct.services.localization.localizeFactory",function(e,n){return{getBaseUrl:function(t){var a=e.calculated.baseUrl;return t?a+"/"+n.languageCode:a},buildUrl:function(e,t){t=f.includes(t)?t:null;var a=t&&t!=n.languageCode;return i(e,t||n.languageCode,a)},getLanguages:function(){return p}}}]),g.config(["$provide","$routeProvider","infrastruct.services.localization.localizeFactoryProvider",function(e,t,a){var o,r=a.getNotShortableLocales();p=n.map(a.getSupportedLocales(),function(e){var n=-1===r.indexOf(e)?e.split("-")[0]:e;return{code:n,locale:e}}),f=n.map(p,function(e){return e.code}),l=new RegExp("^\\/("+f.join("|")+")($|\\/|\\?|\\#)","i");var i=c(a.getBackwardsCompatibilityLocales(),r);d=new RegExp("^\\/("+i.join("|")+")($|\\/|\\?|\\#)","i");var g,v=t.when;t.when=function(e,t,i){if(t&&!n.has(t,"caseInsensitiveMatch")&&(t.caseInsensitiveMatch=!0),t.resolve||(t.resolve={}),t.resolve._localeResolver=["$route","$q","$location","infrastruct.services.localization.localizeFactory","$rootScope","infrastruct.services.config","genericAbTestService",function(e,n,t,r,i,c,s){return n(function(n,u){var l,d,p=t.search().locale;d=c.statics.isSeoOnlyRouting?e.current&&e.current.params&&e.current.params.locale||h:e.current&&e.current.params&&e.current.params.locale||r.languageCode||h,l=p&&-1!==a.getSupportedLocales().indexOf(p.toLowerCase())?!0:!1,l||-1!==f.indexOf(d.toLowerCase())?c.dynamics.whenReady().then(function(){var e=-1!=!c.statics.ApplicationIdentifier.toLowerCase().indexOf("android")||-1!=!c.statics.ApplicationIdentifier.toLowerCase().indexOf("ios"),t=!!c.dynamics.onboarding.isLocaleAbEnabled,a=d&&"en-us"!==d&&"en-gb"!==d&&"en"!==d;"undefined"==typeof o&&t&&e&&a?s.getExperiment("etoro_turn_off_localization","Onboarding").then(function(e){o="etoro_turn_off_localization_test"===e.variationId,d=o?"en":d,i.session&&i.session.isLoggedIn||d===g||!r.getMappedLocaleToCode(d)?n():r.setLanguage(r.getMappedLocaleToCode(d)).then(n)["catch"](u),g=d})["catch"](function(){i.session&&i.session.isLoggedIn||d===g||!r.getMappedLocaleToCode(d)?n():r.setLanguage(r.getMappedLocaleToCode(d)).then(n)["catch"](u),g=d}):(i.session&&i.session.isLoggedIn||d===g||!r.getMappedLocaleToCode(d)?n():r.setLanguage(r.getMappedLocaleToCode(d)).then(n)["catch"](u),g=d)}):u()})}],t.dynamicAssets&&(n.isArray(t.dynamicAssets)||(t.dynamicAssets=[t.dynamicAssets]),t.resolve._dynamicAssetsResolver=["$q","$injector",function(e,a){return e(function(e,o){var r,i,c=[];for(r=0,i=t.dynamicAssets.length;i>r;r++)a.hasModule(t.dynamicAssets[r].name)||c.push(t.dynamicAssets[r]);return 0===c.length?void e():void require(n.pluck(t.dynamicAssets,"path"),function(){a.loadDelayedModules(n.pluck(t.dynamicAssets,"name")),t.dynamicAssets.length=0,e()},o)})}]),t.maintenanceId){var s=t.resolve||{dummy:["$q",function(e){return e.resolve()}]};t.resolve={},n.each(s,function(e,n){t.resolve[n]=["$q","$injector","infrastruct.services.config",function(n,a,o){var r=!!t.maintenanceId&&!!o.dynamics.apisMaintenance[t.maintenanceId];return r?n.reject({reason:"maintenance",source:t.sectionId||t.maintenanceId}):a.invoke(e)}]}),s=null}return"/"!==e||i?(e&&(c(a.getBackwardsCompatibilityLocales(),r).forEach(function(n){v.call(this,"/"+n+e,{redirectTo:e},t)}.bind(this)),e="/:locale?"+e),v.call(this,e,t)):(m.push({path:"/",route:t}),this)},e.decorator("$location",["$delegate","infrastruct.services.localization.localizeFactory","$rootScope","$window","infrastruct.services.config",s]),e.decorator("ngHrefDirective",["$delegate","infrastruct.services.localization.localizeFactory","$rootScope","$location",u]),e.decorator("$route",["$delegate",function(e){var n=e;return n.when=t.when,n}])}]);var $=function(){function e(e){var n=e;"string"!=typeof e&&(n=(e.source||"").toString()),n=n.replace(/\^\(\?:\\\/\(([a-zA-Z-]{2,5})\)\+\?\)\?/,"^(?:\\/([^\\/]+)?)?"),n=n.replace("^(?:\\/([^\\/]+)?)?","^(?:\\/("+f.join("|")+")+?)?");var t="";e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.compile(n,t)}return{updateRoutesRegex:function(e){return n.each(e,function(e){e.regexp&&this.replaceRegex(e.regexp)},this),e},replaceRegex:e}}();return g.run(["infrastruct.services.localization.localizeFactory","$rootScope","$route","$location",function(e,t,a,o){h=e.defaultLanguageLeftPart,n.each(m,function(e){a.when(e.path,e.route,!0)}),$.updateRoutesRegex(a.routes),t.$on("app:locales:reset",function(){h=e.defaultLanguageLeftPart,f=c(e.locales,e.notShortableLocles),l=new RegExp("^\\/("+f.join("|")+")($|\\/|\\?|\\#)","i"),$.updateRoutesRegex(a.routes)}),t.$on("$routeChangeSuccess",function(n,r){var i=r.params&&r.params.locale||r.pathParams&&r.pathParams.locale||h;i===h&&i===e.languageCode||t.session.isLoggedIn?r.params&&r.params.locale&&(a.updateParams({locale:""}),o.replace()):-1!==f.indexOf(i.toLowerCase())&&i!=e.languageCode&&a.current&&a.current.$$route&&a.current.params.locale&&(a.updateParams({locale:e.languageCode===h?"":e.languageCode}),o.replace())})}]),g});define(rA[477][0],["angular",rA[382][0],rA[428][0],rA[427][0],rA[487][0]],function(i,a,e,t,c){"use strict";var r=i.module("infrastruct.services.localization",[c.name]);return r.provider("infrastruct.services.localization.localizeFactory",a),r.service("infrastruct.services.localization.localizeTemplatesFactory",e),r.config(["$provide",function(i){i.decorator("$templateRequest",t)}]),r});define(rA[382][0],["angular","underscore"],function(e,t){"use strict";function n(n){function a(e){g={},e?c=["en-us"]:(c=[].concat(i),c.splice(c.indexOf("en-us"),1)),c.forEach(function(e){if(-1!==d.indexOf(e))g[e]=e;else{var n=e.toLowerCase().split("-")[0];t.has(g,n)||(g[n]=e)}})}var o="EToroResources",i="en-gb,en-us,es-es,it-it,de-de,ru-ru,zh-cn,fr-fr,ar-ae,zh-tw,pl-pl,nl-nl,nb-no,pt-pt,sv-se,cs-cz,da-dk,ro-ro,vi-vn,fi-fi".split(","),c="en-gb,en-us,es-es,it-it,de-de,ru-ru,zh-cn,fr-fr,ar-ae,zh-tw,pl-pl,nl-nl,nb-no,pt-pt,sv-se,cs-cz,da-dk,ro-ro,vi-vn,fi-fi".split(","),r="ms-my,th-th".split(","),s=c.concat(["zh"]),l="https://api.etorostatic.com/sapi/app-data/web-client-locales/{culture}.js",u=!1,g={},d="en-us,zh-tw,nb-no,pt-pt,cs-cz,da-dk,vi-vn,ms-my".split(","),f=n.getConfig(),p=["ar-ae"];this.getSupportedLocales=function(){return c},this.getNotShortableLocales=function(){return d},this.getBackwardsCompatibilityLocales=function(){return r},this.useDefaultWhenEmpty=function(e){u=e},this.setDefaultLanguage=function(e){var t,n;if(e=e&&e.toLowerCase()){for(t=0,n=c.length;n>t;t++)if(c[t]===e)return f.setDynamicKey("languageCode",c[t]);for(e=e.toLowerCase().split("-")[0],t=0,n=c.length;n>t;t++)if(c[t].split("-")[0]===e)return f.setDynamicKey("languageCode",c[t])}return f.dynamics.languageCode||f.statics.languageCode},a(f.statics.isUsIp),this.$get=["$rootScope","$window","$cookies","$injector","$q","$templateCache","$log","$interpolate","infrastruct.services.config",function(n,i,r,f,h,L,v,y,b){function m(e,t,n){O.resourceUpdate(e,t,n),_&&v.warn(new Error("Resources came after timeout"))}var z=h.defer();n.$on("app:language:change:success",function(){-1!==p.indexOf(O.language)?($("body").addClass("rtl-direction"),$("body").removeClass("ltr-direction")):($("body").addClass("ltr-direction"),$("body").removeClass("rtl-direction"))}),n.$on("logout:success",function(){O.resetLocales(b.statics.isUsIp)}),n.$on("appConfig:change",function(e,t){var n=t.keysChanged;-1!==n.indexOf("nonSelectableLocales")&&(O._selectableLocales=null)});var C={"if":function(e,n,a,o,i){return n="."===n.charAt(n.length-1)?n:n+".",y(t.unescape(O.getLocale(n+(e?a:o))))(i||{})},dynamic:function(e,n,a){return e="."===e.charAt(e.length-1)?e:e+".",y(t.unescape(O.getLocale(e+n)))(a||{})},html:function(e,n,a){return e="."===e.charAt(e.length-1)?e:e+".",y(t.unescape(O.getLocale(e+n)))(a||{})},hasKey:function(e,t){return e="."===e.charAt(e.length-1)?e:e+".",!!O.getResource(e+t,!0)}};n.t=C;var w,O={language:"",notShortableLocles:d,get languageCode(){return this.language?-1!==O.notShortableLocles.indexOf(this.language)?this.language:this.language.split("-")[0]:""},defaultLanguage:b.dynamics.languageCode||b.statics.defaultLocale,get defaultLanguageLeftPart(){var e=this.defaultLanguage;return-1!==O.notShortableLocles.indexOf(e)?e:e.split("-")[0]},resourceFileLoaded:!1,locales:c,metaTagsLocales:s,get selectableLocales(){return this._selectableLocales||(this._selectableLocales=t.difference(this.locales,this.nonSelectableLocales)),this._selectableLocales},get nonSelectableLocales(){var e=b.dynamics.nonSelectableLocales;return e?e.split(","):[]},getMappedLocaleToCode:function(e){return g[e]},resetLocales:function(e,t){if(a(e),O.locales=c,O.defaultLanguage=e?"en-us":"en-gb",O._selectableLocales=null,n.$emit("app:locales:reset",{}),e&&"en-us"!==this.language||!e&&"en-us"===this.language){var o=t?t:e?"en-us":"en-gb";this.setLanguage(o)}},isSupportedLocale:function(t){return t&&e.isString(t)?(t=t.toLowerCase(),-1!==c.indexOf(t)):!1},forceUpdateLocalization:function(){var e=this;b.dynamics.whenReady().then(function(){if(b.dynamics.forceUpdateLocalizationEnabled&&O.language){var t=O.language;e._forceUpdateLocalization={code:t};var n=b.dynamics.resourcesVersion.app_localization?"?cv="+b.dynamics.resourcesVersion.app_localization:"";require([l.replace("{culture}",t)+n],function(){delete e._forceUpdateLocalization},function(){delete e._forceUpdateLocalization})}})},setLanguage:function(e){return e||u||(e=t.chain(S).keys().filter(function(e){return-1!=c.indexOf(e)}).first().value()),e&&5===e.length||(e=O.defaultLanguage),e&&e===O.language?h.resolve():(O.language=e||O.defaultLanguage,b.setDynamicKey("languageCode",O.language),n.$broadcast("localize:setLanguage"),r.put("eToroLocale",e,{path:"/"}),O.initLocalizedResources()["finally"](function(){z.resolve()}))},initLocalizedResources:function(){var e=O.language;return this.loadLocal(O.language).then(function(t){var a=f.get("infrastruct.services.localization.localizeTemplatesFactory");a.overrideStatics(),O.language===e&&(O.dictionary=t,O.resourceFileLoaded=!0,a.refreshTemplates()),n.$broadcast("app:language:change:success"),v.logJSON("info","log",{Categories:["localization"],Message:"application language changed"})})},getLocale:function(t){return t=e.isString(t)?t.replace(/_/g,""):"",O.getResource(t)},isSupportedRtlLangues:function(e){return-1!==p.indexOf(e)},isResourceExist:function(e){return O.hasOwnProperty("dictionary")?!!O.dictionary[e]:!1},getResource:function(n,a,o){var i;return e.isObject(O.dictionary)?(i=O.dictionary[n],i?o?i:t.escape(i):a?"":n):n},getResourceInterpolated:function(e,t,n,a){return y(this.getResource(e,n,a))(t)},loadLocal:function(e){var t=S[e];return t?h.resolve(t):h(function(t,a){var o=n.$on("resourceLoaded:"+e,function(){o(),t(S[e])});require([l.replace("{culture}",e)+(b.dynamics.resourcesVersion.app_localization?"?cv="+b.dynamics.resourcesVersion.app_localization:"")],function(){o&&o()},function(t){o&&o(),v.error(new Error("Unable to load culture: "+e+l.replace("{culture}",e))),a(t)})})},whenReady:function(){return z.promise},resourceUpdate:function(t,a,o){this._forceUpdateLocalization&&this._forceUpdateLocalization.code===t&&t===O.language&&S[t]&&e.extend(S[t],a),(o||!S[t])&&(S[t]=a,n.$emit("resourceLoaded:"+t))}},S=i[o],_=!1;return S?w=t.chain(S).keys().filter(function(e){return-1!=c.indexOf(e)}).value():(S=i[o]={},_=!0,v.error(new Error("Resources timed out"))),S.update=m,w&&t.each(w,function(e){m(e,S[e],!0)}),e.extend(O,C),window.setLanguage=O.setLanguage,O}]}return n.$inject=["infrastruct.services.configProvider"],n});define(rA[428][0],["angular","underscore","moduleDefiner"],function(e,t){"use strict";function a(e,t){return t=t.replace(/\_$/,""),'ng-pluralize="" when="'+JSON.stringify({0:t+"Zero_",one:t+"Singular_",other:t+"Plural_"}).replace(/"/gi,"'")+'"'}function r(e,t,a,r){var i=this;i.$rootScope=e,i.$q=t,i.$templateCache=a,i.localizeFactory=r}var i={},n=/\{\{\s*(_[\w\_\.]+_)[\s*]*\}\}/g,c=/\{\{\s*(::)?\s*_(if|dynamic|html)\(([^)]+)\)_\s*\}\}/g,l=/([^,]+\(.+?\))|([^,]+)/g,o=/ng-pluralize="([\w\.\_]*)"/gi,s=/\.html$|\.html\?/i,u=!1;return r.$inject=["$rootScope","$q","$templateCache","infrastruct.services.localization.localizeFactory"],r.prototype={isTemplate:function(e){return s.test(e)},refreshTemplates:function(){this.parsedTemplateCache={},t.each(i,t.bind(function(e,t){this.cacheTemplate(t,e)},this)),this.$rootScope.$broadcast("localizeResourcesUpdates")},parseString:function(e,r){return this.parseFunction(e,r).replace(o,a).replace(n,t.bind(function(e,t){return this.localizeFactory.getLocale((r||"")+t)},this))},parseFunction:function(e,a){return e.replace(c,t.bind(function(e,t,r,i){var n=(i||"").match(l);switch(t=t||"",r){case"if":if(n.length>=3)return n[1]=(n[1]||"").replace(/\s|\'|\"/g,""),n[2]=(n[2]||"").replace(/\s|\'|\"/g,""),n[3]=n[3]||"this","{{"+t+" $root.t.if("+n[0]+',"'+a+'","'+n[1]+'","'+n[2]+'",'+n[3]+") }}";break;case"dynamic":if(n.length>=1)return n[1]=n[1]||"this","{{"+t+' $root.t.dynamic("'+a+'",'+n[0]+","+n[1]+") }}";break;case"html":if(n.length>=1)return n[0]=(n[0]||"").replace(/\s|\'|\"/g,""),n[1]=n[1]||"this",this.localizeFactory.html(a,n[0])}return e},this))},parseTemplateString:function(e){var t,a=this,r=$("<div>").append(e);return r.find("[data-etoro-locale-ns]").each(function(){var e=$(this),t=e.data(),r=e.html(),i=t.etoroLocaleNs,n=i?i+".":"";r=a.parseString(r,n),e.html(r)}),t=r.html(),t.replace(/\ufeff/g,"")},cacheTemplate:function(e,t){return t=t.replace(/\ufeff/g,""),this.$templateCache.put(e,t),t},overrideStatics:function(){var e=this;u||(u=!0,r.put=function(t){i[t.name]=t.text,e.cacheTemplate(t.name,t.text)},t.each(i,function(t,a){e.cacheTemplate(a,t)}))},parsedTemplateCache:{}},r.replaceStaticIncludes=function(e,a){var r=/<div([^>]*)\s(data-)?ui-static-include=\"true\"([^>]*)>([^<]*)<\/div>/gi;a=a||[],a=t.indexBy(a,"name"),e.text=(e.text||"").replace(r,function(e){var t=/ng-include="'((?:.*).view.html)'"/,r=t.exec(e),i=(r[1]||"").replace(/\'|\"/g,"");return a[i]?("<div"+arguments[1]+arguments[3]+">"+a[i].text+"</div>").replace(r[0],""):e})},r.put=function(e){e.text&&(e.text=e.text.replace(/\ufeff/g,"")),i[e.name]=e.text},r});define(rA[427][0],["angular","underscore","moduleDefiner"],function(){function e(e,t,r,a,n,i){function o(e,t){return c.test(t)&&(t=a.parseTemplateString(t),a.parsedTemplateCache[e]=!0,i.put(e,t)),t}var c=/data-etoro-locale-ns/;return function(c,l){return e(function(e,u){var f;return a.isTemplate(c)?void n.whenReady().then(function(){if(f=i.get(c),a.parsedTemplateCache[c])return void e(f);if(f)return f=f.replace(/\ufeff/g,""),void e(o(c,f));var t=c.replace("/etoro/","");require([t],function(t){f=o(c,t.text&&t.text.replace(/\ufeff/g,"")),e(f)},function(){require([t],function(t){f=o(c,t.text&&t.text.replace(/\ufeff/g,"")),e(f)},function(){r.logJSON("error","log",{Message:"error requiring template",Categories:["clientSideInfra","localization"],TemplateUrl:c}),u()})})}):void t(c,l).then(e)["catch"](u)})}}return e.$inject=["$q","$delegate","$log","infrastruct.services.localization.localizeTemplatesFactory","infrastruct.services.localization.localizeFactory","$templateCache"],e});define(rA[339][0],["angular"],function(r){function t(t,e,n,s){function i(t){return function(n,s){if(a(n)){var i,c=e.get("$http"),o=c.defaults.transformResponse;i=r.isArray(o)?o[0]:o;try{return i(n,s)}catch(f){throw u(f,n,s,t),f.status=0,t.maxRetries=0,f.config=t,f.isBackupUrlRetry=!0,f}}return n}}function u(r,t,e,s){var i=t.length,u=t.substr(0,Math.min(50,i-1)),a=i>50?t.substr(Math.max(i-50,u.length),i-1):"";n.logJSON("error","log",{Categories:["AppError"],Message:"Transform data failed",namespace:"instrumentsFactory",response:{snippet:u+"..."+a,contentLength:i,headers:e()},error:{message:r.message},request:{url:s.url}})}function a(r){return"string"==typeof r}var c=2;return{request:function(r){return r.overrideTransformer&&(r.transformResponse=[i(r)]),r},responseError:function(n){if(n instanceof Error&&n.isBackupUrlRetry){var i=n.config;if(i){var u=r.isNumber(i.retriesNumber)?i.retriesNumber:0;if(s.dynamics.enableBackupUrlRetries&&c>u){i.staticAPI=!1,i.url=i.backupUrl||i.url,i.retriesNumber=++u;var a=e.get("$http");return a(n.config)}n.isBackupUrlRetry=!1}}return t.reject(n)}}}var e=r.module("infrastruct.utils.httpBackupUrlRetry",[]);return e.factory("infrastruct.utils.httpBackupUrlRetry",t),e.config(["$httpProvider",function(r){r.interceptors.push("infrastruct.utils.httpBackupUrlRetry")}]),t.$inject=["$q","$injector","$log","infrastruct.services.config"],e});define(rA[439][0],["angular","underscore",rA[440][0]],function(e,r,t){function n(e,r){return e?r?"[Filtered{"+e.length+"}]":"[Filtered]":"[FilteredEmpty]"}function i(r,t){var i={};return t===!0?i:(e.isObject(t)||(t={}),e.forEach(r||{},function(e,r){i[r]=f.test(r)||t[r]?n(e):e}),i)}function a(r){var t={};return e.forEach(r||{},function(e,r){t[r]=g.test(r)?n(e,!0):e}),t}function o(e){return 0==window.location.href.search(e)}function s(e,r,t,n){try{var i=e.generalParams.Mode(),a=t.actionUrl?t.actionUrl:t.url.split("?")[0],s="";if(S.test(a))s=r.replace(I,"").replace(v,"");else{a=a.replace(h,"");var c=a.match(P);a=a.replace(b,""),c&&c.length&&(s=c[1].replace(I,"").replace(v,""))}a=a.replace(b,"");var u=a.replace(v,"").split("/"),l=o(r),d=["STATUS="+n,"MODE="+i,"URL="+(u[0]+u[1]).replace(/^\./,""),"FRONT="+(s||r),"APP="+(l?"web":"wrapper")].join(".").replace(p,".").replace(q,".");return w.test(d)?d:"getUrlDomain"}catch(g){return"getUrlDomain"}}function c(){this.setLoggerInterval=function(e){r.isNumber(e)&&(t.loggerInterval=e,t.restartPublisher())},this.$get=["$q","infrastruct.services.guid","$window","infrastruct.services.config","$injector",function(n,o,c,d,g){function f(e){var r=e.categories?e.categories:[];return["networkLog"].concat(r)}var p=!1,v=(c.performance,{getPerformanceLogs:function(e,r){var t={isDetailed:!1,RequestTime:e};return r&&(t.RequestTimePreStartTiming=r),t},request:function(t){var n=t.url,i=o(),a=d.statics.baseUrl||"";return t.requestId=i,t.IsRequestIdSent=!1,!d.statics.isUseAbsoluteDomain||t.staticAPI||!e.isString(n)||0!==n.indexOf("/api/")&&0!==n.indexOf("/sapi/")&&0!==n.indexOf("/app/api/")||(n=a+n,t.url=n),t.staticAPI||/\.view\.html/.test(n)||t.addRequestId===!1||(t.params=t.params?r.extend({},t.params):{},t.params.client_request_id=i,t.IsRequestIdSent=!0),t._timing||(t._timing={}),t._timing.start=new Date,t},responseError:function(e,r){r&&e instanceof Error&&(e.cause=r);var o,c=e.config||{},m=e.status,S=u(c),h=s(t,d.calculated.baseUrl,c,m),b=null,I=null;if(c&&c.logData&&(b=c.logData.action),c.retriesNumber&&(I=c.retriesNumber),o={Action:b,ActionGUID:c.requestId,Message:"networkLogError",Categories:f(c),Request:{Url:c.url,ActionUrl:h,Method:c.method,Id:c.requestId,IsIdSent:c.IsRequestIdSent,Params:i(c.data,c.monitoringSecuredCall),Headers:a(c.headers),Status:m,NetworkError:!!(0>=m||null==S),Cause:e.cause},RetriesNumber:I,Performance:v.getPerformanceLogs(S,l(e))},t.logJSON("error","log",o),0===m||-1===m){var P=["/api/users/","/api/sts/","/api/logininfo/","/sapi/trade-real/","/api/billing/","/sapi/trade-real/","/sapi/instrumentsmetadata/"],L=new RegExp(P.join("|").replace(/\//,"\\/"),"i");if(!p&&L.test(c.url)){p=!0;var w=g.get("infrastruct.services.connectivityCheck");w.report({description:"request was aborted",reason:{action:"request",status:"failure"},requestId:c.requestId,loginid:d.dynamics.loginId||"public"})["finally"](function(){p=!1})}}return t.manualPerformance("timing","net."+h,S),n.reject(e)},response:function(e){var r=e.config,n=r.url,o=(r.method||"GET").toUpperCase();if(L.test(n))return e;var c=r.requestId;c&&(n=n.replace(c,"[Filtered]"));var g=e.status,p=s(t,d.calculated.baseUrl,r,g),S=u(r),h=null;if(r&&r.logData&&(h=r.logData.action),r&&!r.disableLog&&("GET"!=o||d.dynamics.logAllOKRequests||!m.test(n))){var b={Action:h,Categories:f(r),Message:"networkLogResponsesOK",Request:{Id:r.requestId,IsIdSent:r.IsRequestIdSent,ActionUrl:p,Data:i(r.data,r.monitoringSecuredCall),Params:i(r.params),Headers:a(r.headers),Url:n,Method:r.method,Status:g,OriginalStatus:r.originalStatus},Performance:v.getPerformanceLogs(u(r),l(e))};t.logJSON("info","log",b)}return t.manualPerformance("timing","net."+p,S),e}});return v}]}function u(e){return e._timing?(new Date).getTime()-e._timing.start:0}function l(e){var r=e.headers&&e.headers()["accelerated-request-timing-ms"];return r?r:void 0}var d=e.module("infrastruct.utils.appLogger",[]);d.provider("RequestsErrorHandler",c);var g=/authorization|csrf|password/i,f=/password|token/i,m=/streams/i,p=/\//g,v=/\./g,S=/^\//,h=/^(http(s)?\:\/\/|\/\/)/i,b=/^(https?:\/\/)?(.[^\/]*)/i,I=/^http(s)?\:\/\//i,P=/^(.*?)\//i,L=/\.html$/i,w=/\..+\..+\..+/,q=/\.\.+/g;return d.setGeneralParams=function(e){t.setGeneralParams(e)},d.setMonitorParams=function(e){t.setMonitorParams(e)},d.config(["$provide","$httpProvider",function(e,n){e.decorator("$exceptionHandler",["$delegate",function(){return function(e,r){r&&e instanceof Error&&(e.cause=r),t.error(e)}}]),n.interceptors.push("RequestsErrorHandler"),e.decorator("$log",function(){var e=function(e){return r.bind(e,t)};return{log:e(t.log),logJSON:e(t.logJSON),time:e(t.time),timeEnd:e(t.timeEnd),removeTimer:e(t.removeTimer),manualPerformance:e(t.manualPerformance),info:e(t.info),warn:e(t.warn),debug:e(t.debug),error:e(t.error),setGeneralParams:e(t.setGeneralParams),generalParams:t.generalParams}})}]),d.run(["infrastruct.services.config","$window","$rootScope","$log","bl.factories.session.sessionFactory","$document","$location",function(n,i,a,s,c,u,l){function g(){return c.accountMode}function m(){var r,i,a=n.dynamics.monitoring||{},o=a.isFilteringActive,s=a.filters,c={};if(e.isObject(s))for(r in s)s.hasOwnProperty(r)&&(i=p(s[r]),null!==i&&(c[r]=i));else o=!1;t.isFilteringActive=o,t.filters=c}function p(r){var t,n,i={};if(!e.isObject(r))return null;for(t in r){if(n=v(r[t]),null===n)return null;i[t]=n}return Object.keys(i).length?i:null}function v(r){if(!e.isString(r))return null;try{return new RegExp(r)}catch(t){return null}}function S(e){if(!f.test(e))return e;var r,t=e.split("?"),n=t[0],i=t[1],a="";return i&&(r=i.split("&"),r.forEach(function(e){f.test(e)&&(e="[Filtered]&"),a+=e})),n+"?"+a}function h(){var e={};r.each(i.TETORO,function(r){e[r[0]]=r[1]});var n=i.performance,a={},o=["unloadEvent","redirect","domainLookup","connect","response","loadEvent"];if(n){var s=n.timing;if(r.each(o,function(e){a[e]=s[e+"End"]-s[e+"Start"]}),r.extend(a,r.pick(s,"domLoading","domInteractive","domContentLoaded","domComplete"),{isDetailed:!0,SSLHandShake:s.secureConnectionStart?s.secureConnectionStart-s.connectStart:0,pageLoadSummary:s.loadEventEnd-s.navigationStart,domSummary:s.loadEventEnd-s.domLoading,serverWait:s.responseStart-s.requestStart,scriptLoadTime:e.rs-e.ss,resourceLoadTime:e.bs-e.rs,bootstrapLoadTime:e.be-e.bs,href:S(window.location.href)}),a.pageLoadSummary>0&&a.pageLoadSummary<72e5)return void t.logJSON("info","log",{Categories:["bootstrapPerformance"],performance:a})}t.logJSON("info","log",{Categories:["bootstrapPerformance"],performance:{isDetailed:!1,scriptLoadTime:e.rs-e.ss,resourceLoadTime:e.bs-e.rs,bootstrapLoadTime:e.be-e.bs}})}function b(){setTimeout(h,1200)}var I=0;d.setGeneralParams({applicationIdentifier:n.statics.ApplicationIdentifier,ApplicationVersion:n.statics.ApplicationVersion,SessionGuid:n.dynamics.sessionGuid,UserSessionGuid:n.dynamics.userSession,IsLoggedIn:function(){return!!c.isLoggedIn},BatchIndex:function(){return I++},Mode:function(){return g()},CID:function(){return c.isLoggedIn?c.user.portfolio.account.cid:void 0},Username:function(){return c.isLoggedIn&&c.user?(c.user.username||"").toLowerCase():void 0}}),d.setMonitorParams({MODE:g(),APP:o(n.calculated.baseUrl)?"web":"wrapper"}),a.$on("appConfig:change",function(e,r){r.includes(/^((monitoring\.isFilteringActive)|(monitoring\.filters\.[^\.]+))$/)&&m()}),n.query.disableLogger&&!/etoro\.com/.test(l.absUrl())&&(t.send=function(){}),"complete"==u[0].readyState||"interactive"==u[0].readyState?b():u.on("DOMContentLoaded",b),t.onScreen=!!n.query.onScreenLogging,t.isVisual=n.browser.isVisualDebug,window.onerror=function(e,r,t,n,i){(r||t||n||i)&&s.error("[ERROR] - uncaught exception "+e+" url:"+r+"("+t+","+n+")"+(i&&i.stack?" stack:"+i.stack:""))}}]),d});define(rA[440][0],["underscore","angular",rA[276][0]],function(t,e,n){function r(t,e,n){var r=this;r.level=t,r.type=e,r._array=n,r.stack=null;var i=r.localTime=new P;r.startUp=i-_}function i(t){var e={};return t&&"object"==typeof t?(Object.keys(t).forEach(function(n){var r=n.replace(/(?:^):?([a-z])/g,function(t){return t.toUpperCase()});e[r]=t[n]}),e):e}function a(t){t=t||{},this.isVisual=1==t.visual,this.onScreen=1==t.onScreen,this._logs=[],this.loggerInterval=5e3,this.startPublisher(),this.generalParams={},this.monitorParams={},this.labelTimers={},this.duplicateMonitoring=!0,this.send=t.send||v,this.isFilteringActive=!1,this.filters={},this.apiUrl=n.urls.monitoringUrl}function o(e,n){b&&t.each(n,function(t){t instanceof M?b[e].apply(b,[t.stack||t]):b[e].call(b,t)})}function s(e,n,i){return new r(e,n,t.toArray(i))}function u(t){return parseInt((0|t)/1e3)}function c(t){return t==w||t==O}function l(t){return t.duplicatable&&!c(t.type)}function h(t){return(t||"NoTackTrace").replace(/^"/,"").replace(/"$/).replace(/\(?http(s)?\:\/\/(.*)\)?/g,"")}function f(e){var n=null;try{var r=(e||"").match(x);if(r){var i=r[0].replace(E,"").replace(D,""),a=i.split(":"),o=a[0],s=Number(a[1]),u=Number(a[2]);if(s>10){var c=s;t.each(depsMap,function(t,e){var r=t.position;if(r&&r.fy&&r.script==o){var i=s-r.fy;i>0&&c>i&&(c=i,n=e)}})}else{var l=u;t.each(depsMap,function(t,e){var r=t.position;if(r&&r.fx&&r.script==o){var i=u-r.fx;i>0&&l>i&&(l=i,n=e)}})}return{foundModule:n,line:s,column:u}}}catch(h){}return{foundModule:null}}function p(t){var e;try{e=(t||"").toString()}catch(n){e="Not accecable obj"}if(e==j)try{e=JSON.stringify(t)}catch(r){e=null}return e}function g(t){var n=e.element("<div>"+t+"</div>");n.on("click",function(){n.remove()}),m().append(n)}function m(){return L?L:(L=e.element('<div style="width: 100%;z-index: 40000;position: fixed;background: #fff;color: #000;"></div>'),e.element("body").prepend(L),L)}function v(t,e,n){function r(){n&&n.apply(this,arguments)}var i,a=y();a.open("POST",t,!0);try{i=JSON.stringify(e),a.send(i),a.onreadystatechange=function(){if(4==a.readyState){var t=a.status;t&&400!=t&&404!=t&&500!=t||r(a,a.status)}},a.onerror=function(){r(a,a.status)}}catch(o){}}function d(e){var n={};return t.each(e,function(r,i){n[i]=t.result(e,i)}),n}function y(){return new window.XMLHttpRequest}var b=this.console,P=this.Date,_=new P,M=this.Error,C="INFO",I="DEBUG",S="WARN",T="ERROR",j="[object Object]",w="text",O="log",k="eToroWeb.client.",N=30;t.extend(r.prototype,{toString:function(){var e=this._array;return e&&!this.shouldNotDisplayMessageInLog?t.reduce(e,function(t,e){var n=p(e);return t+n},""):void 0},toJSON:function(e){var n,r,a=this;return a.type==w||a.type==O?(n=t.extend({ClientDateTime:a.localTime.toJSON(),Message:a.toString(),SecondsFromStartUp:u(a.startUp),Level:a.level.toLowerCase(),Stack:a.stack,Cause:a.cause,ErrorInModule:a.errorInModule,ErrorLine:a.line,ErrorColumn:a.column,Timer:a.timer},e,a.json||{}),n.Categories||(n.Categories=[n.Message]),n.Categories=n.Categories.join("_"),r=i(n)):r={Type:a.type,Path:k+a.path,Value:a.timer},r}}),t.extend(a.prototype,{Logger:a,push:function(t){this._logs.push(t),this._logs.length>=N&&this.report()},report:function(){var e=this,n=d(e.generalParams),r=d(e.monitorParams),i=e._logs.splice(0,N),a=!0,o=t.chain(i).filter(function(t){return!c(t.type)}).collect(function(t){return t.toJSON(r)}).value(),s=t.chain(i),u=s.each(function(t){e.duplicateMonitoring&&l(t)&&(t.type=O)}).filter(function(t){return c(t.type)}).collect(function(t){return t.toJSON(n)}).reject(function(t){return e.isFilteringActive?e._loggerConfigReject(t,e.filters):!1}).value(),h={};o.length&&(h.MonitorEvents=o),h.LogEvents=u.length?u:[],a&&e.send(e.apiUrl+"/api/v2/monitoring?applicationIdentifier=ReToro",h,0,3)},startPublisher:function(){var t=this;this.publisherInterval=setInterval(function(){t._logs.length>0&&t.report()},t.loggerInterval)},restartPublisher:function(){clearInterval(this.publisherInterval),this.startPublisher()},_getMonitorData:function(t,e){var n=this;if(!t||!e)return t;var r=["CATEGORY="+e],i=Object.keys(n.monitorParams).map(function(t){return t+"="+n.monitorParams[t]}),a=Object.keys(t).map(function(e){return e+"="+t[e]});return r.concat(i,a).join(".")},manualPerformance:function(t,e,n,i){var a,o=new r("info",t);switch(o.path=this._getMonitorData(e,i),t.toLowerCase()){case"timing":o.timer=n,a=t}a&&this.push(o)},time:function(t,e,n){this.labelTimers[t]={time:new P,category:n||t,path:this._getMonitorData(e,n)}},timeEnd:function(e,n,r,i){var a=this.labelTimers[e];if(a){var o=new P-a.time,u=t.toArray(arguments);u.splice(0,1);var c=s("info","Timing",u);c.path=this._getMonitorData(n,i)||a.path,c.timer=o,c.duplicatable=!0,c.json=t.extend(r||{},{Categories:[a.category]}),i&&(t.extend(c.json,n),c.shouldNotDisplayMessageInLog=!0),this.push(c),delete this.labelTimers[e]}},removeTimer:function(t){var e=this.labelTimers[t];e&&delete this.labelTimers[t]},info:function(){var t=s(C,w,arguments);t.Categories=["InlineInfo"],this.push(t),this.visualLog("info",t._array)},debug:function(){var t=s(I,w,arguments);t.Categories=["InlineDebug"],this.push(t),this.visualLog("log",t._array)},warn:function(){var t=s(S,w,arguments);t.Categories=["InlineWarning"],this.push(t),this.visualLog("warn",t._array)},error:function(t){var e=s(T,w,arguments);if(e.Categories=["InlineException"],t instanceof M){e.stack=h(t.stack);var n=f(t.stack);e.errorInModule=n?n.foundModule:null,e.line=n?n.line:null,e.column=n?n.column:null,e.cause=t.cause}this.push(e),this.visualLog("error",e._array)},logJSON:function(e,n){var i=new r(e,n);i.json=t.extend.apply(t,t.rest(arguments,2)),this.push(i),this.visualLog(e,[JSON.stringify(i.json)])},setGeneralParams:function(t){this._setParams(t,this.generalParams)},removeGeneralParams:function(t){this._removeParams(t,this.generalParams)},setMonitorParams:function(t){this._setParams(t,this.monitorParams)},removeMonitorParams:function(t){this._removeParams(t,this.monitorParams)},_setParams:function(e,n){t.each(e,function(t,e){n[e]=t})},_removeParams:function(e,n){t.each(e,function(t){delete n[t]})},visualLog:function(e,n){this.isVisual&&o(e,n),this.onScreen&&t.each(n,g)},_loggerConfigReject:function(e,n){return e&&n?t.any(n,function(n){return 0===Object.keys(n).length?!1:t.all(n,function(t,n){return!!e[n]&&e[n].match(t)})}):!1},_safeGetCookie:function(t){try{var e="; "+document.cookie,n=e.split("; "+t+"=");if(2==n.length)return n.pop().split(";").shift()}catch(r){return}}}),a.prototype.log=a.prototype.debug;var L,x=/\http(s)?\:\/\/(.*)/,E=/\)$/,D=/http(s)?\:\/\/[\w\.\d\:]+/;return new a({visual:!0})});define(rA[389][0],["moduleDefiner","angular"],function(r,e){function n(r){function n(n,o,t){for(var l=e.module(n)._invokeQueue,i=0;i<l.length;i++){var u=l[i];"$controllerProvider"==u[0]&&"register"==u[1]&&u[2][0]==o&&r.register(o,u[2][1])}t()}return{register:function(r,o,t){var l=o.replace(/\//g,"."),i=t.resolve;return i||(i=t.resolve={}),i.controller&&e.isString(i.controller)&&(l=i.controller),i.requiredController=["$q",function(e){return e(function(e,t){require([o],function(o){o(r,l);try{n(r.name,l,e)}catch(i){t(new AppError("ControllerResolver:error Ctrl",r.name,l,null,(i||"").toString()))}},function(){t(new AppError("ControllerResolver:Unable to load",r.name,l))})})}],t.controller||(t.controller=l),t}}}var o=r("ctrlResolver");return o.provider(o.name,["$controllerProvider",function(r){e.extend(this,new n(r)),this.$get=["$controllerProvider",function(r,e){return this.$q=e,this}]}]),o});define(rA[482][0],["angular","underscore","moduleDefiner",rA[486][0],rA[475][0],rA[456][0],rA[454][0]],function(e,r,t,a,o,n,i){"use strict";var s,u="peopleApp";return s=t(u,["ngRoute","ngSanitize",a,o,n,i]).config(["$routeProvider",function(r){function t(e,r){var t=e&&e.params&&e.params.activeTab||{};return l[t]?l[t]:r||"UserPage"}function a(e){return e&&e.current&&e.current.params&&e.current.params.name}function o(e,r,t){return t(function(t,o){var n=a(r);if(!n)return void o({message:"Username was not found in people URL",namespace:"peopleApp",type:"RouteError"});var i=e.get("userService");i.getUserPageData(n).then(function(e){var r=e.user;return r&&2===r.accountStatus?void o():void t(e)})["catch"](o)})}function n(e){var r=["feed","stats","portfolio","chart"],t=e.current&&e.current.params&&e.current.params.activeTab||"feed";return-1===r.indexOf(t.toLowerCase())&&(t=null),t}function i(e){return{sharePages:{showShareButton:!0,urlKey:function(e){return t(e,"UserPage")}},activeTab:"feed",dynamicAssets:[{name:"proChartsApp",path:rA[398][0]}],template:'<et-user [active-tab-name]="$resolve.activeTab" [user-data]="$resolve.userPageData"></et-user>',keepUrl:function(r,t){return t&&t.params?e+"/"+t.params.name:!1},resolve:{activeTab:["$route","$q","$injector",function(e,r,t){var a=n(e);if(!a)return r.reject();var o=t.get("userSessionService");return o&&o.isUsUser()&&"chart"===a?r.reject():r.resolve(a)}],userPageData:["$injector","$route","qs","$location",function(r,t,a,n){return o(r,t,a).then(function(r){var t=r.user;return("/smartportfolios"===e&&"fund"!==t.SubType||"/people"===e&&"user"!==t.SubType)&&n.url(t.Url).replace(),r})}],instruments:["bl.factories.trading.instruments.instrumentsGroupsFactory",function(e){return e.init()}],userName:["$route","qs",function(e,r){return r(function(r,t){var o=a(e);return o?void r(o):void t({message:"Username was not found in people URL",namespace:"peopleApp",type:"RouteError"})})}]},metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/people/index.view.html",localeCustomKeys:{title:function(e){return e&&e.pathParams&&e.pathParams.activeTab?"people.index.pageTitle."+("fund"===e.SubType?"fund.":"")+e.pathParams.activeTab:"people.index.pageTitle"+("fund"===e.SubType?".fund":"")}},noFollow:function(e){return!e||e.optOut?!0:e.isPi||-1!==[13,9].indexOf(e.accountType)||"YoniAssia"===e.username?!1:!0},resolve:["$route","$q",function(e,r){return r(function(r,t){e.current&&e.current.locals&&e.current.locals.userPageData?r(e.current.locals.userPageData.user):t({})})}]}}}r.when("/funds/:name",{redirectTo:"/smartportfolios/:name"}),r.when("/funds/:name/:activeTab",{redirectTo:"/smartportfolios/:name/:activeTab"}),r.when("/funds/:name/:activeTab/:innerTabRoute*?",{redirectTo:"smartportfolios/:name/:activeTab/:innerTabRoute*?"}),r.when("/funds/:name/:activeTab/:mode?",{redirectTo:"funds/:name/:activeTab/:mode?"});for(var s,u,p=["/people","/smartportfolios"],c=[{url:"/:name/:activeTab/history",portfolioHistoryTab:"history"},{url:"/:name/:activeTab/history/market/:id",portfolioHistoryTab:"historyMarket"},{url:"/:name/:activeTab/history/people/:id",portfolioHistoryTab:"historyPeople"},{url:"/:name/:activeTab/history/people/:mirrorName/:id",portfolioHistoryTab:"historyPeopleMirror"}],l={feed:"UserPage",chart:"UserPageChart",stats:"UserPageStats",portfolio:"UserPagePortfolio"},f=0;f<p.length;f++){s=i(p[f]),u=e.merge({},s,{sharePages:{showShareButton:!0,urlKey:function(e){return t(e,"UserPage")}},activeTab:"portfolio",chartBaseUrl:p[f]+"/{{name}}/portfolio/chart/",metaTags:{noFollow:!0}});for(var m=0;m<c.length;m++)!function(a,o,n){r.when(a,e.merge({},n,{activeTab:"portfolio",sharePages:{showShareButton:!0,urlKey:function(e){return t(e,"UserPagePortfolioHistory")}},resolve:{upgradeComponent:function(){return o},redirectIfNoParams:["$route","$location",function(e,r){if("historyPeople"===o){if(!e.current.params)return void r.path("/people/"+e.current.pathParams.name+"/portfolio/history")}else if(!("historyPeopleMirror"!==o||e.current.params.mirrorName&&e.current.params.id))return void r.path("/people/"+e.current.pathParams.name+"/portfolio/history")}]}}))}(p[f]+c[m].url,c[m].portfolioHistoryTab,s);r.when(p[f]+"/:name",s),r.when(p[f]+"/:name/:activeTab",u),r.when(p[f]+"/:name/:activeTab/:innerTabRoute*?",u),r.when(p[f]+"/:name/:activeTab/:mode?",u)}}])});define(rA[486][0],["moduleDefiner","underscore",rA[492][0],rA[479][0],rA[456][0],rA[423][0],rA[374][0],rA[475][0],rA[275][0]],function(r,t){var e=r("bl.factories.trading",t.rest(arguments,2));return e});define(rA[492][0],["moduleDefiner",rA[487][0],rA[424][0],rA[490][0],rA[479][0],rA[452][0],rA[418][0],rA[419][0],rA[417][0],rA[451][0],rA[455][0]],function(t,e,r,s,i,o,a,d,n,l,f){"use strict";var c=t("bl.factories.trading.models",[e,r,i,s,l,f]);return c.factory("bl.factories.trading.models.tradeItem",o.$factory),c.factory("bl.factories.trading.models.instrument",a.$factory),c.factory("bl.factories.trading.models.user",d.$factory),c.factory("bl.factories.trading.models.fund",n.$factory),c.run(["bl.factories.trading.models.tradeItem","bl.factories.trading.models.instrument","bl.factories.trading.models.user","bl.factories.trading.models.fund",function(){}]),c});define(rA[424][0],["angular",rA[280][0],rA[476][0]],function(r,s,t){"use strict";var a=r.module("infrastruct.models",[t.name]);return a.factory("infrastruct.models.base",s.$factory),a.run(["infrastruct.models.base",function(){}]),a});define(rA[280][0],["underscore"],function(t){"use strict";function e(t){this.extend(t)}return e.prototype={get $http(){return e.$http},get $q(){return e.$q},get $log(){return e.$log},get $analytics(){return e.$analytics},get $rootScope(){return e.$rootScope},get $injector(){return e.$injector},extend:function(e){t.extend(this,e)}},e.$factory=["$http","$q","$log","$analytics","$rootScope","$injector",function(r,o,n,p,c,i){return t.extend(e,{$http:r,$q:o,$log:n,$analytics:p,$rootScope:c,$injector:i}),function(t){return new e(t)}}],Function.prototype.inheritsFrom=function(t){var e=this.prototype;this.prototype=Object.create(t.prototype);for(var r in e){var o=Object.getOwnPropertyDescriptor(e,r);o&&(o.get||o.set)?Object.defineProperty(this.prototype,r,{get:o.get,set:o.set,enumerable:!0,configurable:!0}):this.prototype[r]=e[r]}this.prototype.constructor=this,Object.defineProperty(this.prototype,"constructor",{enumerable:!1,value:this})},window.AppError=function(r,o,n,p){this.name="AppError",this.message=r||"Opps I did't pass a message",this.type=n||"",this.namespace=o||"",this.data=p;var c=t.rest(arguments,4);e.$log.logJSON("error","log",{Categories:["appError"],Namespace:this.namespace,Message:this.message,type:this.type,args:JSON.stringify(c)})},AppError.prototype=Object.create(Error.prototype),AppError.prototype.constructor=AppError,AppError.prototype.toString=AppError,e});define(rA[476][0],["angular","moduleDefiner",rA[187][0],rA[335][0],rA[336][0]],function(a,t,e,i,r){"use strict";var n=window.angulartics||(window.angulartics={});n.waitForVendorCount=0,n.waitForVendorApi=function(a,t,e,i,r){r||n.waitForVendorCount++,i||(i=e,e=void 0),!Object.prototype.hasOwnProperty.call(window,a)||void 0!==e&&void 0===window[a][e]?setTimeout(function(){n.waitForVendorApi(a,t,e,i,!0)},t):(n.waitForVendorCount--,i(window[a]))};var s=a.module("infrastruct.services.analytics",[]);return s.provider("$analytics",e),s.directive("analyticsOn",i),s.service("infrastruct.services.ecommerceTrackingService",r),s.run(["$rootScope","$window","$analytics","$injector",function(t,e,i,r){i.settings.pageTracking.autoTrackFirstPage&&r.invoke(["$location",function(a){var t=!0;if(r.has("$route")){var n=r.get("$route");for(var s in n.routes){t=!1;break}}else if(r.has("$state")){var c=r.get("$state");for(var o in c.get()){t=!1;break}}if(t)if(i.settings.pageTracking.autoBasePath&&(i.settings.pageTracking.basePath=e.location.pathname),i.settings.trackRelativePath){var g=i.settings.pageTracking.basePath+a.url();i.pageTrack(g,a)}else i.pageTrack(a.absUrl(),a)}]),i.settings.pageTracking.autoTrackVirtualPages&&r.invoke(["$location",function(a){i.settings.pageTracking.autoBasePath&&(i.settings.pageTracking.basePath=e.location.pathname+"#"),r.has("$route")&&t.$on("$routeChangeSuccess",function(t,e){if(!e||!(e.$$route||e).redirectTo){var r=i.settings.pageTracking.basePath+a.url();i.pageTrack(r,a)}}),r.has("$state")&&t.$on("$stateChangeSuccess",function(){var t=i.settings.pageTracking.basePath+a.url();i.pageTrack(t,a)})}]),i.settings.developerMode&&a.forEach(i,function(a,t){"function"==typeof a&&(i[t]=function(){})})}]),s});define(rA[187][0],[],function(){"use strict";function e(){var e={pageTracking:{autoTrackFirstPage:!0,autoTrackVirtualPages:!0,trackRelativePath:!1,autoBasePath:!1,basePath:""},eventTracking:{},bufferFlushDelay:1e3,developerMode:!1},t=["pageTrack","eventTrack","setAlias","setUsername","setUserId","setUserInfo","setAlias","setUserProperties","setUserPropertiesOnce","setSuperProperties","setSuperPropertiesOnce","chargeTrack","copySuperProperties","setGlobalEventProperties","ecommerceEventTrack","reset"],r={},a={},n=function(e){return function(){angulartics.waitForVendorCount&&(r[e]||(r[e]=[]),r[e].push(arguments))}},s=function(e,t){return a[e]||(a[e]=[]),a[e].push(t),function(){var t=arguments;angular.forEach(a[e],function(e){e.apply(this,t)},this)}},i={settings:e},u=function(e,t){t?setTimeout(e,t):e()},c={$get:function(){return i},api:i,settings:e,virtualPageviews:function(e){this.settings.pageTracking.autoTrackVirtualPages=e},firstPageview:function(e){this.settings.pageTracking.autoTrackFirstPage=e},withBase:function(e){this.settings.pageTracking.basePath=e?angular.element("base").attr("href").slice(0,-1):""},withAutoBase:function(e){this.settings.pageTracking.autoBasePath=e},developerMode:function(e){this.settings.developerMode=e}},o=function(t,a){i[t]=s(t,a);var n=e[t],c=n?n.bufferFlushDelay:null,o=null!==c?c:e.bufferFlushDelay;angular.forEach(r[t],function(e,t){u(function(){a.apply(this,e)},t*o)})},f=function(e){return e.replace(/^./,function(e){return e.toUpperCase()})},g=function(e){var t="register"+f(e);c[t]=function(t){o(e,t)},i[e]=s(e,n(e))};return angular.forEach(t,g),c}return e});define(rA[335][0],["angular"],function(t){"use strict";function n(n){function e(t){return["a:","button:","button:button","button:submit","input:button","input:submit"].indexOf(t.tagName.toLowerCase()+":"+(t.type||""))>=0}function i(t){return e(t),"click"}function r(t){return e(t)?t.innerText||t.value:t.id||t.name||t.tagName}function a(t){return"analytics"===t.substr(0,9)&&-1===["On","Event","If","Properties","EventType"].indexOf(t.substr(9))}function u(t){var n=t.slice(9);return"undefined"!=typeof n&&null!==n&&n.length>0?n.substring(0,1).toLowerCase()+n.substring(1):n}return{restrict:"A",link:function(e,s,c){var o=c.analyticsOn||i(s[0]),f={};t.forEach(c.$attr,function(t,n){a(n)&&(f[u(n)]=c[n],c.$observe(n,function(t){f[u(n)]=t}))}),t.element(s[0]).bind(o,function(i){var a=c.analyticsEvent||r(s[0]);f.eventType=i.type,(!c.analyticsIf||e.$eval(c.analyticsIf))&&(c.analyticsProperties&&t.extend(f,e.$eval(c.analyticsProperties)),n.eventTrack(a,f))})}}}return n.$inject=["$analytics"],n});define(rA[336][0],["angular"],function(){function e(e,t){this.$analytics=e,this.$rootScope=t}return e.$inject=["$analytics","$rootScope"],e.prototype={track:function(e,t){var c=new Date,o=/Open|Close|Copy/g,a=o.test(e)?e.split(" ")[0]:"View",r=this.$rootScope.session.user.realCID+"-"+t.id+"-"+(t.amount||0)+"-"+c.getDate()+"-"+(c.getMonth()+1)+"-"+c.getFullYear(),n=[{id:t.id,name:t.name+"-"+a,price:0,metric7:t.amount||0,dimension71:t.dimension71||""}],s={actionField:{option:t.marketMode},purchase:{actionField:{id:r,revenue:0},products:n}},i={checkout:{products:n}},l={detail:{products:n}},u={"Open Trade - Success":s,"Close Trade - Success":s,"Close Copy - Success":s,"Close All - Success":s,"Copy Trader - Success":s,"Market - Page View":l,"Close Trade":i,"Close Copy":i,"Open Trade":i,"Copy Trader":i},d={event:"purchase",GA_event_category:t.category||"Trade",GA_event_action:t.action,GA_event_label:t.label,ecommerce:u[e]};this.$analytics.ecommerceEventTrack(d)}},e});define(rA[490][0],["angular",rA[475][0],rA[495][0],rA[472][0],rA[373][0],rA[325][0],rA[324][0],rA[326][0]],function(e,s,i,o,r,n,c,a){"use strict";var t=e.module("bl.factories.session",[s.name,i.name]);return t.service("bl.factories.session.sessionFactory",o),t.service("bl.factories.session.sessionAccount",r),t.service("bl.factories.session.defaultScreenService",n),t.service("bl.factories.session.copyTraderFunnelService",c),t.service("bl.factories.session.funnelLoaderService",a),t});define(rA[475][0],["moduleDefiner",rA[456][0],rA[493][0],rA[485][0],rA[348][0],rA[497][0],rA[374][0]],function(o,r,t,i,a,l,e){"use strict";var f=o("bl.factories.trading.portfolio",[r,t,a,l,e]);return i(f,"bl.factories.trading.portfolio.portfolioFactory"),f});define(rA[456][0],["angular","underscore",rA[419][0],rA[417][0]],function(t,e,s,i){"use strict";function r(e,s,i,r){this.$q=e,this.$http=s,this.usersCache=i("usersCache"),this.$rootScope=r,this.usernamesMapping={},this.promiseMapping={},r.$on("UserSettings.Updated",function(e,s){t.isDefined(s.PrivacyPolicyTypeId)&&this.setOptOut(s)}.bind(this))}var n=t.module("bl.factories.trading.users",[]);return n.service("bl.factories.trading.users.usersFactory",r),r.$inject=["$q","$http","$cacheFactory","$rootScope"],r.prototype={setOptOut:function(t){var e=this.$rootScope.session.user;e&&(e=this.usersCache.get(e.realCID))&&(e.optOut=2===t.PrivacyPolicyTypeId)},getById:function(t,e){return this.getByIds([t],e).then(function(){return this.usersCache.get(t)}.bind(this))},getByIds:function(s,i){var r={},n=[],a=[];if(!t.isArray(s))return this.$q.reject(new AppError("getByIds cids type error","usersFactory","UnExpectedError",null));if(s=e.chain(s).filter(function(t){return!!t}).uniq().value(),e.each(s,function(t){var e=this.usersCache.get(t);e&&!i?r[t]=e:n.push(t)}.bind(this)),0===n.length)return this.$q.resolve(r);for(;n.length>0;)a.push(this.$http({url:"/api/logininfo/v1.1/aggregatedInfo","public":!0,params:{cidList:"["+n.splice(0,100)+"]",avatar:!0,realcid:!0}}));return this.$q.all(a).then(function(t){for(var s=[],i=0;i<t.length;i++)s.push.apply(s,this._setUsers(t[i].data.users||t[i].data.Users));return e.extend(r,e.indexBy(s,"realCID"))}.bind(this))},getFund:function(t){return this.$q(function(e,s){this.getById(t).then(function(t){t&&"fund"===t.SubType?e(t):s(null)})["catch"](s)}.bind(this))},getFunds:function(t){return this.$q(function(s,i){this.getByIds(t).then(function(t){s(e.chain(t).filter(function(t){return!!t&&"fund"===t.SubType}).indexBy("realCID").value())})["catch"](i)}.bind(this))},getByUserName:function(e){var s;return!t.isString(e)||/^(\.)/.test(e)||/\\|\//.test(e)?this.$q.reject():(e=e.toLowerCase(),this.usernamesMapping[e]?this.$q.resolve(this.usersCache.get(this.usernamesMapping[e])):(s="/api/logininfo/v1.1/users/"+e,this.promiseMapping[e]?this.promiseMapping[e]:(this.promiseMapping[e]=this.$http({url:s,actionUrl:"/api/logininfo/v1.1/users/:username"}).then(function(t){return this._setUser(t.data)}.bind(this))["finally"](function(){delete this.promiseMapping[e]}.bind(this)),this.promiseMapping[e])))},getByUserNames:function(s){var i=[],r=[];return t.isArray(s)&&0!==s.length?(e.each(s,function(e){t.isString(e)&&(e=e.toLowerCase(),this.usernamesMapping[e]?r.push(this.usersCache.get(this.usernamesMapping[e])):i.push(e))}.bind(this)),0===i.length?this.$q.resolve(r):this.$http({url:"/api/logininfo/v1.1/aggregatedInfo",params:{usernames:"["+i.toString()+"]"}}).then(function(i){var r,n=[],a=i.data;return this._setUsers(a.users||a.Users),e.each(s,function(e){e=e.toLowerCase(),r=this.usernamesMapping[e]&&this.usersCache.get(this.usernamesMapping[e]),t.isString(e)&&r&&n.push(r)}.bind(this)),n}.bind(this))):this.$q.resolve([])},_setUser:function(t){var e=this.usersCache.get(t.realCID);return e?(e.updateData(t),e):(e=9===t.accountType?new i(t):new s(t),this.usersCache.put(e.realCID,e),this.usernamesMapping[e.username.toLowerCase()]=e.realCID,e)},_setUsers:function(t){return e.map(t,function(t){return this._setUser(t)}.bind(this))}},n});define(rA[419][0],["angular","underscore",rA[452][0]],function(t,e,i){"use strict";function o(t,o){var s={};this.countryId=t.country,delete t.country,i.call(this,t),this.set(t,o||{}),this.Name=this.username,this.Avatars=s,this.Url=("/people/"+this.username).toLowerCase(),this.DisplayName=this.allowDisplayFullName&&this.firstName&&this.lastName?this.firstName+" "+this.lastName:this.username,this.avatars&&(e.each(this.avatars,function(t){s[t.width+"x"+t.height]=t.url}),s["default"]=s["150x150"]),this.realCID=parseInt(this.realCID),delete this.avatars}return o.prototype={updateData:function(e){t.isObject(e)&&(delete e.country,t.extend(this,e))},get ItemId(){return this.realCID},get Type(){return"user"},get SubType(){return 13===this.accountType?"Analyst":"user"},get fullName(){return this.allowDisplayFullName&&this.firstName&&this.lastName?this.firstName+" "+this.lastName:""},get shortName(){return this.username},getRanking:function(t){return o.$injector.get("bl.factories.discovery.rankingsFactory").getByUserId(this.realCID,t)},get country(){return o.countriesFactory.getById(this.countryId)},get isPausedMirror(){return this.isInPortfolio?this.getPortfolioGroup().IsPaused:!1},get isPendingOpen(){return this.isInPortfolio&&this.getPortfolioGroup()&&this.getPortfolioGroup().isMirrorPendingOpen},get isInAlignment(){return this.isInPortfolio&&this.getPortfolioGroup()&&this.getPortfolioGroup().isInAlignment},copy:function(t,e){var o=i.portfolioActionsEvents;this.isInPortfolio?this.isPendingForClosure||o.manageCopyAmount(this.getPortfolioGroup(),!0,void 0,t):o.copyTrade(this,void 0,void 0,e||!1,t)},stopCopy:function(t){var e=i.portfolioActionsEvents;this.isInPortfolio&&!this.isPendingForClosure&&e.closeCopyTrade(this.getPortfolioGroup(),t)},setCopyStopLoss:function(t){var e=i.portfolioActionsEvents;this.isInPortfolio&&!this.isPendingForClosure&&e.manageStopLossAmount(this.getPortfolioGroup(),t)},getIsMute:function(){return!i.session.isLoggedIn||i.session.isInMaintenance("streamsBC")?this.$q.reject():this.$http({url:"/api/streams/v2/users/"+this.Name+"/mute",method:"get",actionUrl:"/api/streams/v2/users/:Name/mute"}).then(function(t){return t.data.isMuted}.bind(this))},setMute:function(t){return!i.session.assertIsAuthorized()||i.session.isInMaintenance("streamsBC")?this.$q.reject():this.$q(function(e,i){this.$http({method:t?"PUT":"DELETE",url:"/api/streams/v2/users/"+this.Name+"/mute",actionUrl:"/api/streams/v2/users/:Name/mute"}).then(e)["catch"](function(){this.$injector.get("bl.factories.feed.feedNotificationsService").postMuteFailed({isMute:t}),i()}.bind(this))}.bind(this))},get isPendingForClosure(){return this.isInPortfolio?this.getPortfolioGroup().PendingForClosure:!1},translateBio:function(t,e,i){return this.$http({method:"GET",url:"/api/account/v1/user/"+t+"/bio/translate",actionUrl:"/api/account/v1/user/:gcid/bio/translate",params:{languageCode:e,isShort:i}}).then(function(t){return t.data})}},o.$factory=["bl.factories.countries.countriesFactory","$injector",function(t,i){return e.extend(o,{countriesFactory:t,$injector:i}),t.init(),function(t){return new o(t)}}],o.inheritsFrom(i),o});define(rA[452][0],["angular","underscore",rA[280][0],rA[423][0]],function(t,e,o){"use strict";function r(t){this.Url="/",this.Name="",this.DisplayName="",this.Avatars={},this.set(t)}return r.prototype={get uniqueId(){return this.Type+"-"+this.ItemId},get ItemId(){throw"should implement type of tradeItem"},get Type(){throw"should implement type of tradeItem"},get isInPortfolio(){return!!r.portfolioFactory.get()&&!!r.portfolioFactory.get().getGroupByTradeItem(this)},set:function(t){e.extend(this,t)},getPortfolioGroup:function(){return this.isInPortfolio?r.portfolioFactory.get().getGroupByTradeItem(this):null},getFollowersCount:function(){return r.session.isInMaintenance("streamsBC")?this.$q.reject():this.$http({url:"/api/streams/v2/"+this.Type+"s/"+this.Name+"/followers/count",actionUrl:"/api/streams/v2/"+this.Type+"s/:Name/followers/count"}).then(function(t){return t.data&&t.data.count||0}.bind(this))}},r.$factory=["bl.factories.session.sessionFactory","apps.trader.portfolio.portfolioActionsEvents","bl.factories.trading.portfolio.portfolioFactory",function(t,o,s){return e.extend(r,{session:t,portfolioActionsEvents:o,portfolioFactory:s}),function(t){return new r(t)}}],r.inheritsFrom(o),r});define(rA[423][0],["moduleDefiner","angular","underscore"],function(t,e,n){"use strict";var r=t("bl.factories.trading.users.stats");return r.factory("bl.factories.trading.users.usersStatsFactory",["$q","$http","$log","$rootScope","$injector","bl.factories.trading.instruments.instrumentsFactory","bl.factories.trading.instruments.instrumentsGroupsFactory","bl.factories.trading.users.usersFactory","qs",function(t,r,s,a,i,o,u,c,l){function f(t){var e=this;n.extend(e,t);var r=e.date=new Date(e.timestamp);e.year=r.getUTCFullYear(),e.month=r.getUTCMonth()+1,e.riskScore||(e.riskScore=0)}function m(t){var e=t.gain,r=t.start,s=new Date(r);n.extend(this,{gain:e,isSimulation:t.isSimulation,isEmpty:!(e||0==e),start:s,startMonth:s.getUTCMonth()+1,startYear:s.getUTCFullYear(),startTimestamp:r})}function g(t,e,n){var r=e+n;return t[r]}function p(t,e){return e?t/e:0}function h(t,e){return S[t]=e}function d(t){delete S[t]}function y(t){return S[t]}function v(t){return i.get("bl.factories.discovery.rankingsFactory").getByUserId(t.realCID,"OneYearAgo")}function C(e,n,r,s,a){var i=e.realCID,o=s?JSON.stringify(s):"",u=g(n,i,o),c=r+i+o,l=y(c);return l||h(c,t(function(t,e){u?t(u):a(t,e).then(function(e){t(n[i+o]=e),d(c)})["catch"](function(t){e(t)})}))}var T={},I={},U={},k={},b={},S={},x=window.Math,D=n.collect(n.range(1,13),function(t){return t.toString()});a.$on("logout:success",function(){T={},k={}});var E={clear:function(){T={},I={},U={},k={},S={}},hasTraded:function(t){return l(function(e,n){E.getGainStats(t).then(function(t){e(!t.isEmpty)})["catch"](function(t){n(t)})})},getPerformance:function(t){return l(function(r,a){E.getGainStats(t).then(function(t){var a={},i=n.indexBy(t.yearly,function(t){return t.start.getUTCFullYear()}),o=n.groupBy(t.monthly,function(t){return t.start.getUTCFullYear()});e.forEach(o,function(t,r){var o,u={},c=[],l=0;o=n.indexBy(t,function(t){var e=t.gain;return l+=x.abs(e),c.push(e),t.start.getUTCMonth()+1});var f=x.min.apply(null,c),m=x.max.apply(null,c),g=x.max(x.abs(f),x.abs(m)),p=l/c.length,h=x.max(2*p,g);h>g&&(h=g),e.forEach(o,function(t){t.barSize=t.gain/h*100});try{u.total=i[r].gain}catch(d){var y={m:"resultMonths.total",yearly:i,yearKey:r};throw s.logJSON("error","log",y),d}u.lowest=f,u.highest=m,u.absMax=g,u.graphSize=h,u.monthly=o,u.isSimulation=i[r]&&i[r].isSimulation,a[r]=u}),e.forEach(a,function(t,r){var s=n.difference(D,n.keys(t.monthly));e.forEach(s,function(e){var n=new Date(r+"-"+(10>e?"0"+e:e)+"-01T00:00:00Z");t.monthly[e]=new m({start:n.toJSON(),gain:null})})});var u=n.chain(a).sortBy(function(t,e){return t.monthly=n.chain(t.monthly).sortBy(function(t,e){return t.name=e,parseFloat(e)}).reverse().value(),t.name=e,parseFloat(e)}).reverse().value();r(u)})["catch"](function(t){a(t)})})},getTrading:function(r,a){return t(function(i,l){t.all([E.getTradesStats(r),v(r),E.getGainStats(r)]).then(function(t){a=a||{};var r=a.highlights||0,f=t[0],m=t[1],g=t[2],h=f.assets,d=f.total,y=[],v=[];e.forEach(h,function(t,e){h.isMirror?v.push(e):y.push(e)});var C=o.getByIds(y,!0),T=n.extend({people:"People"},u.getTypesDictionary()),I=n.groupBy(h,function(t,e){return t.isMirror?"people":C[e]?(t.tradedItem=C[e],C[e].InstrumentTypeID):(s.error("stats patch for InstrumentID="+e),t.tradedItem=C[2],2)}),U={},k={};e.forEach(I,function(t,e){var r=n.reduce(t,function(t,e){return t+e.pctOfTrades},0);U[e]=r,k[e]={pctOfTrades:r,name:T[e]}});var b=m.Trades,S=n.chain(h).sortBy(function(t){return t.originalSort}).value().slice(0,r),x=n.chain(S).filter(function(t){return t.isMirror}).collect(function(t){return t.userName}).value(),D=g.monthly[0],E={graph:k,assets:h,isEmpty:f.isEmpty,total:d,highlights:S,tradePerWeek:p(b,m.ActiveWeeks),avgHoldingTimeInMinutes:d.avgHoldingTimeInMinutes,profitableWeeksPct:m.ProfitableWeeksPct,firstActivity:D?D.start:void 0,copyTradesPct:m.CopyTradesPct};x.length?c.getByUserNames(n.collect(x,function(t){return h[t].userName})).then(function(t){e.forEach(t,function(t){h[t.username].tradedItem=t}),i(E)})["catch"](l):i(E)})["catch"](function(t){var e=t&&t.setContext&&t.setContext({message:"get trading stats",namespace:"stats"});l(e)})})},getRisk:function(e,r){return r=r||{},l(function(s,a){t.all([E.getRiskStats(e),v(e)]).then(function(t){var e=t[0],a=t[1],i=r.containOnlyMonths,o=[].concat(e.points);if(i){var u=n.indexBy(o,function(t){return t.month-1+"_"+t.year});o=[];var c=new Date;c.setUTCDate(1);for(var l=0;i>l;l++){var m=u[c.getUTCMonth()+"_"+c.getUTCFullYear()],g=m?m:new f({timestamp:c.toJSON()});o.unshift(g),c=new Date(c);var p=c.getUTCMonth();0==p?(c.setUTCFullYear(c.getUTCFullYear()-1),c.setUTCMonth(11)):c.setUTCMonth(p-1)}}s({points:o,currentRisk:a.RiskScore,all:a.PeakToValley,weekly:a.WeeklyDD,daily:a.DailyDD})})["catch"](function(t){var e=t&&t.setContext&&t.setContext({message:"get user risk stats",namespace:"stats"});a(e||t)})})},getRiskTopContributors:function(t){return l(function(e,r){E.getRiskContributors(t).then(function(t){var r="riskContributionPct",s=[],a=n.chain(t).reject(function(t){return t[r]<=0}).sortBy(function(t){return t[r]}).reverse().slice(0,20).each(function(t){s.push(t.instrumentId)});if(s.length){var i=o.getByIds(s,!0);a.each(function(t){t.tradedItem=i[t.instrumentId]});var u=a.reject(function(t){return!t.tradedItem});e(u.value())}else e([])})["catch"](function(t){r(t)})})},getCopiers:function(e,n){return l(function(r,s){var a={};n&&n.days&&(a.mindate=new Date(new Date-1e3*n.days*60*60*24)),t.all([E.getCopiersStats(e,a),v(e)]).then(function(t){var e=t[0],n=t[1],s=n.Copiers,a=n.BaseLineCopiers,i=s-a,o=n.AUMTierV2,u=n.AUMTierDesc;r({AUMTierLabel:u,AUMTier:o,copiers:s,copiersDelta:i,copiersChange:i/(a?a:1)*100,points:e.dailyCopiers})})["catch"](function(t){s(t)})})},getGainStats:function(t,e){return C(t,T,"gain",e,function(){return l(function(e,s){r({url:"/sapi/userstats/gain/cid/"+t.realCID+"/history",params:{IncludeSimulation:!0},actionUrl:"/sapi/userstats/gain/cid/:realCID/history","public":!0}).success(function(t){var r=n.collect(t.monthly,function(t){return new m(t)}),s=n.collect(t.yearly,function(t){return new m(t)}),a={monthly:r,yearly:s,isEmpty:0==t.monthly.length};e(n.extend(t,a))}).error(function(){s({message:"get gain stats failed",namespace:"stats",Categories:["stats"]})})})})},getRiskStats:function(t,n){return C(t,I,"risk",n,function(){return l(function(n,s){r({url:"/sapi/userstats/risk/username/"+t.username+"/history/monthly",actionUrl:"/sapi/userstats/risk/username/:username/history/monthly","public":!0}).success(function(t){var r=[];t.points&&e.forEach(t.points,function(t){r.push(new f(t))}),t.points=r,n(t)}).error(function(){s({message:"get risk stats",namespace:"stats",Categories:["stats"]})})})})},getCopiersStats:function(t,e){return C(t,U,"copiers",e,function(){return l(function(s,a){r({url:"/sapi/userstats/copiers/userName/"+t.username+"/history",actionUrl:"/sapi/userstats/copiers/userName/:username/history",params:e,"public":!0}).success(function(t){s(n.extend(t,{dailyCopiers:t.dailyCopiers}))}).error(function(){a({message:"get copiers stats",namespace:"stats",Categories:["stats"]})})})})},getTradesStats:function(t,e){return C(t,k,"trades",e,function(){return l(function(e,s){r({url:"/sapi/userstats/stats/username/"+t.username+"/trades/oneYearAgo?CopyAsAsset=true",actionUrl:"/sapi/userstats/stats/username/:username/trades/oneYearAgo?CopyAsAsset=true","public":!0}).success(function(t){var r=0,s=n.indexBy(t.assets,function(t){return t.originalSort=r,r++,t.instrumentId?t.instrumentId:t.userName}),a=t.all;e(n.extend({},t,{assets:s,total:a,isEmpty:0==r}))}).error(function(){s({message:"get trades stats failed",namespace:"stats",Categories:["stats"]})})})})},getRiskContributors:function(t,e){return C(t,b,"riskContributors",e,function(){return l(function(e,s){r({url:"/sapi/userstats/risk/UserName/"+t.username+"/Contribution",actionUrl:"/sapi/userstats/risk/UserName/:username/Contribution","public":!0}).success(function(t){e(n.extend({},t))}).error(function(){s({message:"get risk contributors",namespace:"stats",Categories:["stats"]})})})})},getFundPeriods:function(t){return r.get("/sapi/userstats/funds/username/"+t.username+"/periods",{actionUrl:"/sapi/userstats/funds/username/:username/periods","public":!0}).then(function(t){return t.data||[]})},getAssets:function(e,n,s,a){return e&&e.username?r.get("/sapi/userstats/Assets/UserName/"+e.username+"/History",{actionUrl:"/sapi/userstats/Assets/UserName/:username/History","public":!0,params:{mindate:s,maxdate:a,Groups:n}}).then(function(t){var e,n=t.data||[];return n.forEach(function(t){t.assets.forEach(function(t){t.instrumentId?(t.key="instrument-"+t.instrumentId,e=o.getById(t.instrumentId),t.name=e?e.SymbolFull:"N/A"):t.mirrorId?(t.key="mirror-"+t.mirrorId,t.name=t.userName):0===t.instrumentId&&(t.key="other",t.name="other")})}),n}):t.reject()},getExposure:function(e,n,s,a){return e&&e.username?r.get("/sapi/userstats/Exposure/UserName/"+e.username+"/History",{actionUrl:"/sapi/userstats/Exposure/UserName/:username/History","public":!0,params:{mindate:s,maxdate:a,Groups:n}}).then(function(t){var e,n=t.data||[];return n.forEach(function(t){t.exposureItems.forEach(function(t){t.instrumentId>0?(t.key="instrument-"+t.instrumentId,e=o.getById(t.instrumentId),t.name=e?e.SymbolFull:"N/A"):(t.key="other",t.name="other")})}),n}):t.reject()}};return E}]),r});define(rA[417][0],["angular","underscore",rA[419][0]],function(t,a,e){"use strict";function r(t,a){e.call(this,t,a),this.Url=("/smartportfolios/"+this.username).toLowerCase()}return r.prototype={get SubType(){return"fund"},getMaster:function(){return r.usersFactory.getById(this.realCID)},getFundPeriods:function(){return this.getFundData().then(function(t){var e=[];return t&&t.FundIntervals&&a.each(t.FundIntervals,function(t){e.push({minDate:t.ActualStart,maxDate:t.PlannedEnd})}),e})},getFundData:function(){return this.$http.get("/sapi/trade-data-real/live/public/funds/"+this.realCID,{actionUrl:"/sapi/trade-data-real/live/public/funds/:realcid"}).then(function(t){return t.data&&t.data.Fund})},hasRealMonthPerformance:function(t){var a=this;return this.$q(function(e,r){a.$injector.get("bl.factories.trading.users.usersStatsFacade").getPerformance(a).then(function(a){for(var r,n,i=0,u=0;u<a.length&&t>i;u++)if(r=a[u],r.monthly){n=r.monthly;for(var s=0;s<n.length&&t>i;s++)n[s].isEmpty||n[s].isSimulation||i++}e(i>=t)})["catch"](r)})},getHasCrypto:function(){return this.$http.get("/sapi/trade-data-real/live/public/fundMetaData/"+this.realCID,{actionUrl:"/sapi/trade-data-real/live/public/fundMetaData/:realcid"}).then(function(t){return t.data&&t.data.FundMetaData&&t.data.FundMetaData.HasCrypto})}},r.$factory=["bl.factories.trading.users.usersFactory",function(t){return r.usersFactory=t,function(t){return new r(t)}}],r.inheritsFrom(e),r});define(rA[493][0],["moduleDefiner",rA[424][0],rA[479][0],rA[474][0],rA[420][0],rA[481][0],rA[273][0],rA[422][0],rA[421][0],rA[484][0],rA[491][0]],function(o,r,t,i,l,p,f,e,s,a,n){"use strict";function d(o,r){var t=u+"."+o;m.factory(t,r.$factory),c.push(t)}var u="bl.factories.trading.portfolio.models",m=o(u,[r,t]),c=[];return d("portfolioGroup.portfolioGroup",i),d("portfolioGroup.positionsGroup",l),d("portfolioGroup.mirrorGroup",p),d("portfolioGroup.groupAggregator",f),d("portfolioItem.position",e),d("portfolioItem.order",s),d("portfolio",a),d("privatePortfolio",n),m.run(c.concat(function(){})),m});define(rA[479][0],["moduleDefiner",rA[480][0],rA[413][0],rA[473][0],rA[412][0],rA[415][0],rA[416][0],rA[414][0]],function(t,r,s,e,n,a,i,o){"use strict";var c=t("bl.factories.trading.instruments",[]);return e(c,"bl.factories.trading.instruments.rates.ratesFactory"),n(c,"bl.factories.trading.instruments.candles.candlesFactoryV2"),r(c,"bl.factories.trading.instruments.instrumentsFactory"),s(c,"bl.factories.trading.instruments.instrumentsGroupsFactory"),c.factory("bl.factories.trading.instruments.rates.models.rate",a.$factory),c.factory("bl.factories.trading.instruments.rates.models.rateDiscounted",i.$factory),c.factory("bl.factories.trading.instruments.models.marketViewModel",o.$factory),c.run(["bl.factories.trading.instruments.rates.models.rate","bl.factories.trading.instruments.rates.models.rateDiscounted","bl.factories.trading.instruments.models.marketViewModel",function(){}]),c});define(rA[480][0],["angular","underscore","moduleDefiner",rA[418][0],rA[414][0],rA[375][0]],function(t,e,n,i,s,r){"use strict";function a(n,a,o,c,l,m,d,h,f){function g(t,e){return a(function(i,s){n(t).then(function(t){i({data:t.data})})["catch"](function(t){s({source:e,requestID:t.config&&t.config.requestId||""})})})}function I(t){return a(function(e,n){d.sync().then(function(t){e(t)})["catch"](function(e){n({source:t,requestID:e&&e.data&&e.data.requestId||""})})})}function v(t,e){!t||void 0!==e.isNasdaqOpen&&void 0!==e.isNyseOpen||(4===t.ExchangeID?e.isNasdaqOpen=t.rate.IsExchangeOpen:5===t.ExchangeID&&(e.isNyseOpen=t.rate.IsExchangeOpen))}function p(t){c.logJSON("info","log",{Categories:["Trading"],Message:"US Exchanges Market Data",exchangesData:{NASDAQ:{exchangeID:4,IsExchangeOpen:t.isNasdaqOpen},NYSE:{exchangeID:5,IsExchangeOpen:t.isNyseOpen}}})}function y(){var t=e.keys(N.items).concat(x||[]),n=e.values(O.getByIds(t));O.getPrivateInstruments(n,!0)}var k={},b={},D={},B={},P={},w=null,x=[],T=888,N=new u("InstrumentID",a,T);N.on("bucket:full",function(t){O._getBucketPrivateInstruments(t)});var O={get isLoggedIn(){return!!l.session&&!!l.session.stsData},init:function(){if(!w){w=o.defer();var t,n="/sapi/instrumentsmetadata/V1.1/instruments/bulk",s="/sapi/trade-real/instruments/bulk-slim",r=[];h.dynamics.whenReady().then(function(){for(var u=h.dynamics.publicInstrumentsTotalBulks,o=0;u>o;o++){var l=o+1,d="instruments_trading_bulk_p"+l+"_t"+u,f="instruments_trading_metadata_bulk_p"+l+"_t"+u;r.push(g({url:s,params:{InstrumentDataFilters:"TradingData",totalBulks:u,bulkNumber:l},method:"GET",staticAPI:!0,maxRetries:2,resourceVersionId:d,overrideTransformer:!0,backupUrl:s},"instrument trade real , bulk-number="+l)),r.push(g({url:n,params:{totalBulks:u,bulkNumber:l},staticAPI:!0,"public":!0,maxRetries:2,resourceVersionId:f,overrideTransformer:!0,backupUrl:n},"instrument metadata , bulk-number="+l))}t=I("rates and IsActive"),r.push(t),a.all(r).then(function(t){if(t&&t.length>0){var n=[],s=[];e.each(t,function(t){t&&t.data&&(t.data.Instruments?n=n.concat(t.data.Instruments):t.data.InstrumentDisplayDatas&&(s=s.concat(t.data.InstrumentDisplayDatas)))})}if(t&&0!==t.length&&n&&0!==n.length||c.error("InstrumentsFactory.init():  The call: /sapi/trade-real/instruments/bulk-slim?InstrumentDataFilters=TradingData  no returns any Instruments"),t&&0!==t.length&&s&&0!==s.length||c.error("InstrumentsFactory.init():  The call: /sapi/instrumentsmetadata/V1.1/instruments/bulk  no returns any InstrumentDisplayDatas"),w){if(s=e.indexBy(s,"InstrumentID"),n){m.getAllClosingPrices();var r={isNasdaqOpen:void 0,isNyseOpen:void 0};e.each(n,function(t){var e=t.InstrumentID,n=t.IsDelisted?b:B;n[e]?n[e].set(s[e]||{},t):n[e]=new i(t,s[e]),v(n[e],r),!s[e]||s[e].IsInternalInstrument||t.IsDelisted||(D[e]=n[e])})}k=D,p(r),w.resolve(k)}}.bind(this))["catch"](function(t){w&&w.reject({message:"instruments or metadata api failed",namespace:"instrumentsFactory",type:"InstrumentsAndRates",errorInfo:t},"error",t.requestID),w=null})}.bind(this))}return w.promise},_allowInvisibleInstruments:function(){var t=l.session.user,e=t&&t.CustomerRestrictions;if(e)for(var n=0,i=e.length;i>n;n++)if(e[n]&&22===e[n].RestrictionTypeID)return!0;return!1},getById:function(t,e,n){return e=void 0===e?!1:e,k[t]?k[t]:e&&b[t]?b[t]:n&&B[t]?B[t]:void 0},getBySymbol:function(t,n,i){function s(e){return e&&e.SymbolFull&&e.SymbolFull.toLowerCase()===t.toLowerCase()}if(!t)return null;n=void 0===n?!1:n;var r=e.find(k,s);return n&&!r&&(r=e.find(b,s)),i&&!r&&(r=e.find(B,s)),r},getByIds:function(n,i,s,r){var a,u;return t.isArray(n)?(u={},i=void 0===i?!1:i,e.each(n,function(t){a=r&&B[t]||k[t],!a||s&&a.instrumentType.IsRestricted||(u[t]=a)}),i&&e.each(n,function(t){b[t]&&(u[t]=b[t])}),u):{}},getByIdsArray:function(t,n,i,s){var r=[],a=this.getByIds(t,n,i,s);return a?(e.each(t,function(t){a[t]&&r.push(a[t])}),r.length>0?r:null):void 0},getAll:function(e){if(e=e===!0,!e)return k;var n=t.copy(k);return t.extend(n,b),n},getPrivateInstrument:function(t,e){return this.isLoggedIn&&t?!e&&x.indexOf(t.InstrumentID)>-1?a.resolve():((!N.hasItem(t)||e)&&N.addItem(t),N.getItemPromise(t)):a.reject()},getPrivateInstruments:function(t,e){if(!this.isLoggedIn)return a.reject();var n=[];return t=t||[],t.forEach(function(t){n.push(this.getPrivateInstrument(t,e))}.bind(this)),a.all(n)},assertPrivateInstrument:function(t){var e=h.dynamics.allowPrivateInstrumentsCall;return x.indexOf(t.InstrumentID)>-1?(c.logJSON("info","log",{Categories:["Trading"],Type:"AssertExecution",Message:"assert execution with private settings",HasPrivateInstrument:!0,AllowPrivateCalls:e}),a.resolve()):e?h.dynamics.allowExecutionWithoutPrivateInstruments?(c.logJSON("warn","log",{Categories:["Trading"],Type:"AssertExecution",Message:"assert execution without private settings",HasPrivateInstrument:!1,HasPendingRequest:N.hasItem(t),Interval:N.interval,AllowPrivateCalls:e}),this.getPrivateInstrument(t),N.flushBucket(),a.resolve()):this.getPrivateInstrument(t):(c.logJSON("warn","log",{Categories:["Trading"],Type:"AssertExecution",Message:"assert execution without private settings",HasPrivateInstrument:!1,AllowPrivateCalls:e}),a.resolve())},getPrivateTradingSettings:function(){this.isLoggedIn&&h.dynamics.allowPrivateInstrumentsCall&&this._getPrivateInstruments({InstrumentDataFilters:["PrivateTradingDataOnly"],AppendMostPopularInstuments:!0})},_getBucketPrivateInstruments:function(t){var n=this;if(!n.isLoggedIn||!h.dynamics.allowPrivateInstrumentsCall)return t.defer.resolve(),void N.deleteBucket(t);var i=e.pluck(t.items||[],"InstrumentID");console.log("sending",i),this._getPrivateInstruments({InstrumentDataFilters:["PrivateTradingDataOnly"],instrumentIds:i,DelayIntervalMS:N.interval}).then(function(){N.interval=T,t.defer.resolve()})["catch"](function(){var e=h.dynamics.privateInstrumentsMaxDelayMS;t.defer.reject(),N.deleteBucket(t),N.interval=Math.min(e,2*N.interval),N.isPendingRequest&&t.items.forEach(function(t){N.addItem(t)}.bind(this)),c.logJSON("error","log",{Categories:["Trading"],Message:"_getPrivateInstruments() - Failed",DelayIntervalMS:N.interval,MaxDelayIntervalMS:e})}.bind(this))},_getPrivateInstruments:function(t){return this.init().then(function(){return n({url:"/sapi/trade-real/instruments/private/index",method:"POST",maxRetries:1,data:t}).then(function(t){var e=t.data&&t.data.PrivateInstruments;return this.isLoggedIn&&e?(this._mergePrivateInstruments(e),void l.$emit("privateInstruments:loaded")):a.reject()}.bind(this))}.bind(this))},_mergePrivateInstruments:function(t){var n;e.each(t,function(t){n=k[t.InstrumentID],n&&t&&(n.setPrivateData(t),x.push(t.InstrumentID)),n=D[t.InstrumentID],n&&t&&n.setPrivateData(t)})},getMarketView:function(t){var e=this;return a(function(i,r){if(!t)return r(null);var a=e.getById(t);return a?a.marketView?i(a.marketView):void n({url:"/sapi/instrumentsinfo/instruments/"+t+"/marketView",params:{locale:h.dynamics.languageCode}}).then(function(e){a.marketView=new s(e.data,t),a.marketView.getCandlesStatsData().then(function(){i(a.marketView)})["catch"](function(){i(a.marketView)})})["catch"](function(){r(null)}):r(null)})},getMarketFinancialData:function(t){var e=this;return a(function(i,s){if(!t)return s(null);var r=e.getById(t);return r?r.marketFinancialData?i(r.marketFinancialData):void n({url:"/sapi/finapi/api/instruments/"+t,params:{PeriodIds:"-1,-2,-3,-4"}}).then(function(t){t||s(null),r.marketFinancialData=t.data,i(r.marketFinancialData)})["catch"](function(){s(null)}):s(null)})},getMarketShortBioAndName:function(t){var e=this;return P[t]?P[t]:(P[t]=a(function(i,s){if(!t)return s(null);var a=e.getById(t);return a?a.shortBioAndLocalNameView?i(a.shortBioAndLocalNameView):void n({url:"/sapi/instrumentsinfo/instruments/"+t,params:{locale:h.dynamics.languageCode,fields:"shortbio-"+h.dynamics.languageCode+",localName-"+h.dynamics.languageCode}}).then(function(e){a.shortBioAndLocalNameView=new r(e.data,t,h.dynamics.languageCode),i(a.shortBioAndLocalNameView)})["catch"](function(){s(null)}):s(null)}),P[t])}};return l.$on("login:success",function(){O._allowInvisibleInstruments()&&(k=B)}.bind(this)),l.$on("logout:success",function(){N.reset(),e.forEach(x,function(t){var e=k[t];e&&e.clearPrivateData()}),x.length=0,k=D}),l.$on("app:language:change:success",function(){P={},e.each(k,function(t){delete t.marketView,delete t.shortBioAndLocalNameView})}),l.$on("TradingRiskStatus:change",y),l.$on("privateInstruments:reload",function(t,e){e&&"undefined"!=typeof e.delayInterval&&null!==e.delayInterval?f(function(){y()},e.delayInterval):y()}),l.$on("Trading.Instrument.Rate",function(t,e){if(void 0!==e.IsExchangeOpen){var n=h.dynamics.trading.usTradingConfig.isRealTimeExchangeLogsEnabled;if(n){var i=e.InstrumentID&&O.getById(e.InstrumentID);i&&i.isUsTrade&&c.logJSON("info","log",{Categories:["Trading"],Message:"US Exchanges Market Data - Rate Updated",InstrumentID:e.InstrumentID,SymbolFull:i.SymbolFull,IsExchangeOpen:e.IsExchangeOpen})}}}.bind(this)),O}function u(t,e,n){this.$q=e,this.currentId=0,this.buckets={},this.items={},this.itemKey=t,this.currentBucket=null,this.interval=n,this.listeners={},this._timerId=null,this._initialInterval=n,this.createNewBucket()}return u.prototype={get isPendingRequest(){return this.currentBucket.items.length>0},addItem:function(t){0===this.currentBucket.items.length&&(this._timerId=setTimeout(function(){this.flushBucket()}.bind(this),this.interval)),-1===this.currentBucket.items.indexOf(t)&&(this.currentBucket.items.push(t),this.items[t[this.itemKey]]=this.currentBucket)},deleteItem:function(t){delete this.items[t[this.itemKey]]},hasItem:function(t){return!!this.items[t[this.itemKey]]},getItemPromise:function(t){return this.hasItem(t)?this.items[t[this.itemKey]].defer.promise:null},createNewBucket:function(){var t=this.currentId++,e={bucketId:t,items:[],defer:this.$q.defer()};this.buckets[t]=e,this.currentBucket=e},flushBucket:function(){if(this.currentBucket.items.length>0){var t=this.currentBucket;clearTimeout(this._timerId),this.createNewBucket(),this.emit("bucket:full",t)}},deleteBucket:function(t){t&&(t.items.forEach(function(t){this.deleteItem(t)}.bind(this)),delete this.buckets[t.id])},on:function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},off:function(t,e){var n=this.listeners[t];if(n){var i=n.indexOf(e);i>=0&&n.splice(i,1)}},emit:function(t,e){var n=this.listeners[t];n&&n.forEach(function(t){this._safeExecution(t,e)}.bind(this))},reset:function(){var t=e.values(this.buckets);this.currentId=0,this.buckets={},this.items={},this.currentBucket=null,this.interval=this._initialInterval,this.createNewBucket(),clearTimeout(this._timerId),t.forEach(function(t){t.defer.reject()})},_safeExecution:function(t,e){try{t(e)}catch(n){console.log("exec error",n)}}},function(t,e){return n(t,[]).factory(e,["$http","$q","qs","$log","$rootScope","bl.factories.trading.instruments.candles.candlesFactoryV2","bl.factories.trading.instruments.rates.ratesFactory","infrastruct.services.config","$timeout",a])}});define(rA[418][0],["angular","underscore",rA[452][0]],function(e,t,i){"use strict";function n(e,i){var n={},r={};this._data=e,this._metadata=i,this._privateData={},this._hasPrivateData=!1,this.IsStock=5===this.TypeID,this.IsETF=6===this.TypeID,this.IsCrypto=10===this.TypeID,this.Name=this.SymbolFull,this.DisplayName=this.InstrumentDisplayName,this.Url=("/markets/"+this.Name).toLowerCase(),this.Avatars=n,this.Styles=r,this.isContractExpiry=this.HasExpirationDate,this.isCFD=1!==this.TypeID,this.isCryptocurrencies=10===this.TypeID,this.defaultStopLossPercent=this.isCryptocurrencies?100:50,this.defaultTakeProfitPercent=this.isCryptocurrencies?500:50,this.Images&&(t.each(this.Images,function(e){/.svg$/i.test(e.Uri)?(n.svg=e.Uri,r.backgroundColor=e.BackgroundColor,r.textColor=e.TextColor):n[e.Width+"x"+e.Height]=e.Uri}),n["default"]=n[this.IsStock?"150x150":"70x70"]||n["150x150"])}n.originalCtorName="Instrument",n.prototype={get isLoggedIn(){return!!n.$rootScope.session&&!!n.$rootScope.session.stsData},get isUsTrade(){var e=n.$rootScope.session&&n.$rootScope.session.isUsUser(),t=n.$rootScope.session&&n.$rootScope.session.isUsRegulation(),i=n.config.dynamics.trading.usTradingConfig.usFlavorEnabled;return e&&t&&this.IsAmericanStock&&i},get IsAmericanStock(){var e=n.config.dynamics.trading.usTradingConfig.usInstrumentTypes,t=e&&-1!==e.indexOf(this.TypeID),i=n.config.dynamics.trading.usTradingConfig.usExchanges,r=i&&-1!==i.indexOf(this.ExchangeID);return t&&r},get isAmericanPrecision(){var e=n.config.dynamics.trading.usTradingConfig.isUsPrecisionEnabled;return e&&this.IsAmericanStock&&this._Precision!==this.AboveDollarPrecision},set Precision(e){this._Precision=e},get Precision(){return n.tradingCalculator.getPrecisionByRate(this,this.rate.Bid)},get ProviderPriceSource(){return this.isLoggedIn||!this.IsStock&&!this.IsETF||4!==this.ExchangeID&&5!==this.ExchangeID?this.PriceSource:this.PriceSource+".delayed"},set MaxPositionUnits(e){this.maxUnits=e},get MaxPositionUnits(){return void 0!==this.rate.MaxPositionUnits?this.rate.MaxPositionUnits:this.maxUnits},get ItemId(){return this.InstrumentID},get Type(){return"instrument"},get rate(){return n.ratesFactory.getById(this.InstrumentID)},get rateDiscounted(){return n.ratesFactory.getRateDiscountedById(this.InstrumentID)},get insights(){var e=n.$injector.get("bl.factories.discovery.insightsFactory");return e&&e.getById(this.InstrumentID)||{}},get fullName(){return 5===this.TypeID||6===this.TypeID||10===this.TypeID?this.InstrumentDisplayName:""},get shortName(){return this.SymbolFull},get instrumentType(){return n.instrumentsGroupsFactory.getTypeById(this.TypeID)},get exchange(){return n.instrumentsGroupsFactory.getExchangeById(this.ExchangeID)},get industry(){return n.instrumentsGroupsFactory.getIndustryById(this.StocksIndustryID)},get cryptoCategory(){return n.instrumentsGroupsFactory.getCryptoCategoryById(this.InstrumentTypeSubCategoryID)},get IsActive(){return this.rate&&(this.isUsTrade?this.rate.IsExchangeOpen:this.rate.IsActive)},get hasPriceAlert(){var e=n.$injector.get("bl.factories.priceAlerts.priceAlertFactory");return e.hasPriceAlert(this.InstrumentID)},get priceAlertRate(){var e=n.$injector.get("bl.factories.priceAlerts.priceAlertFactory"),t=e.getPriceAlert(this.InstrumentID);return t?t.TargetPrice:0},get isPreview(){return 1157===this.InstrumentID&&n.config.dynamics.isInstrumentDropboxPreviewActive||1156===this.InstrumentID&&n.config.dynamics.isInstrumentSpotifyPreviewActive},get mergedLeveragesList(){var e=t.union(this.Leverages,this.PotentialDisplayLeverages).sort();return t.sortBy(e,function(e){return e})},get IsAllowBuy(){return this.AllowManualTrading&&this.AllowBuy},get IsAllowSell(){return this.AllowManualTrading&&this.AllowSell},getTheRateObject:function(e){return e&&this.AllowDiscountedRates&&this.rateDiscounted?this.rateDiscounted:this.rate},isPotentialDisplayLeverage:function(e){return-1!==this.PotentialDisplayLeverages.indexOf(e)},getCandles:function(e){return n.candlesFactoryV2.getById(this.InstrumentID,e)},buy:function(e,t,n,r){i.portfolioActionsEvents.openPosition(this,!0,null,e,null,null,n||!1,!1,t,r)},sell:function(e,t){i.portfolioActionsEvents.openPosition(this,!1,null,e,null,null,null,!1,t)},Price:function(e){return this.isUsTrade?this.AskRounded(e):this.BidRounded(e)},BidRounded:function(e){var t=(e||this.isUsTrade)&&this.rateDiscounted||this.rate;return this.isAmericanPrecision?n.tradingCalculator.getRateRounded(this,t.Bid,Math.floor):t.Bid},AskRounded:function(e){var t=(e||this.isUsTrade)&&this.rateDiscounted||this.rate;return this.isAmericanPrecision?n.tradingCalculator.getRateRounded(this,t.Ask,Math.ceil):t.Ask},ClosingPriceRounded:function(e){var t=(e||this.isUsTrade)&&this.rateDiscounted||this.rate;return this.isAmericanPrecision?n.tradingCalculator.getRateRounded(this,t.ClosingPrices.OfficialClosingPrice,Math.round):t.ClosingPrices.OfficialClosingPrice},lastPrice:function s(e){var t=e&&this.AllowDiscountedRates,s=this.rate.ClosingPrices.IsMarketOpen||this.IsActive?this.Price(t):this.ClosingPriceRounded(t)||0;return s||0},openPriceAlert:function(e){i.portfolioActionsEvents.openPriceAlert(this,null,e)},closeAllTrades:function(e){i.portfolioActionsEvents.closeAllTrades(this.uniqueId,e)},getMarketView:function(){return n.instrumentsFactory.getMarketView(this.InstrumentID)},getMarketFinancialData:function(){return n.instrumentsFactory.getMarketFinancialData(this.InstrumentID)},getMarketShortBioAndName:function(){return n.instrumentsFactory.getMarketShortBioAndName(this.InstrumentID)},get isRealInstrument(){return this.RealTradeBuyMaxLeverage>0||this.RealTradeSellMaxLeverage>0},getUnitMargin:function(e,t){return this.rate?t&&this.AllowDiscountedRates&&this.rateDiscounted?e?this.rateDiscounted.UnitMarginAsk:this.rateDiscounted.UnitMarginBid:e?this.rate.UnitMarginAsk:this.rate.UnitMarginBid:void 0},get isNoneLeveragedOnly(){var e=this.Leverages;return e&&1===e.length&&1===e[0]?!0:!1},setPrivateData:function(e){this._hasPrivateData=!0,this._privateData=e},clearPrivateData:function(){this._hasPrivateData=!1,this._privateData={}}};var r={AllowClosePosition:!0,AllowDiscountedRates:!1,AllowEditStopLoss:!0,AllowEditStopLossLeveraged:!0,AllowEditTakeProfit:!0,AllowEditTakeProfitLeveraged:!0,AllowPartialClosePosition:!0,AllowRedeem:!1,AllowTrailingStopLoss:!0,DefaultLeverage:1,DefaultStopLossPercentageLeveraged:50,DefaultStopLossPercentageNonLeveraged:50,DefaultTakeProfitPercentage:50,DefaultTrailingStopLoss:!1,Leverages:[1],MarginTradeBuyMaxLeverage:0,MarginTradeSellMaxLeverage:0,MaxPositionUnitsForRedeem:1e6,MaxStopLossPercentage:75,MaxStopLossPercentageLeveragedBuy:75,MaxStopLossPercentageLeveragedSell:75,MaxStopLossPercentageNonLeveragedBuy:100,MaxStopLossPercentageNonLeveragedSell:100,MaxTakeProfitPercentage:1e3,MinPositionAmount:50,MinPositionAmountAbsolute:50,MinPositionAmountAbsoluteDiscounted:50,MinPositionUnitsForRedeem:.1,MinStopLossPercentage:0,MinTakeProfitPercentage:0,PotentialDisplayLeverages:[],RealTradeBuyMaxLeverage:1,RealTradeSellMaxLeverage:0,RequiresW8Ben:!1,IsNonLeveragedBuyAllowed:!0,AllowRevolvingDoors:!1};return["InstrumentID","TypeID","BuyCurrencyID","SellCurrencyID","IsDelisted","AllowManualTrading","RestrictedManualOpen","AllowSell","AllowBuy","Precision","AboveDollarPrecision","MaxPositionUnits","NonLeveragedSellEndOfWeekFee","NonLeveragedBuyEndOfWeekFee","LeveragedSellEndOfWeekFee","LeveragedBuyEndOfWeekFee","NonLeveragedBuyOverNightFee","NonLeveragedBuyCFDOverNightFee","NonLeveragedSellOverNightFee","LeveragedBuyOverNightFee","LeveragedSellOverNightFee","AllowPendingOrders","AllowEntryOrders","AllowExitOrder","AllowClosePosition","AllowDiscountedRates","AllowEditStopLoss","AllowEditStopLossLeveraged","AllowEditTakeProfit","AllowEditTakeProfitLeveraged","AllowPartialClosePosition","AllowRedeem","AllowTrailingStopLoss","DefaultLeverage","DefaultStopLossPercentageLeveraged","DefaultStopLossPercentageNonLeveraged","DefaultTakeProfitPercentage","DefaultTrailingStopLoss","Leverages","MarginTradeBuyMaxLeverage","MarginTradeSellMaxLeverage","MaxPositionUnitsForRedeem","MaxStopLossPercentage","MaxStopLossPercentageLeveragedBuy","MaxStopLossPercentageLeveragedSell","MaxStopLossPercentageNonLeveragedBuy","MaxStopLossPercentageNonLeveragedSell","MaxTakeProfitPercentage","MinPositionAmount","MinPositionAmountAbsolute","MinPositionAmountAbsoluteDiscounted","MinPositionUnitsForRedeem","MinStopLossPercentage","MinTakeProfitPercentage","PotentialDisplayLeverages","RealTradeBuyMaxLeverage","RealTradeSellMaxLeverage","RequiresW8Ben","IsNonLeveragedBuyAllowed","AllowRevolvingDoors","IsNonRealAsTRS"].forEach(function(e){var t={Precision:"_Precision"},i=t[e]||e;Object.defineProperty(n.prototype,i,{get:function(){return this._hasPrivateData&&"undefined"!=typeof this._privateData[e]?this._privateData[e]:"undefined"!=typeof this._data[e]?this._data[e]:r[e]},set:function(t){this._hasPrivateData?this._privateData[e]=t:this._data[e]=t},enumerable:!0})}),["InstrumentDisplayName","InstrumentTypeID","ExchangeID","Images","SymbolFull","StocksIndustryID","PriceSource","HasExpirationDate","IsInternalInstrument","InstrumentTypeSubCategoryID"].forEach(function(e){Object.defineProperty(n.prototype,e,{get:function(){return this._metadata[e]},set:function(t){this._metadata[e]=t},enumerable:!0})}),n.$factory=["bl.factories.trading.instruments.rates.ratesFactory","bl.factories.trading.instruments.instrumentsGroupsFactory","bl.factories.trading.instruments.candles.candlesFactoryV2","bl.factories.trading.instruments.instrumentsFactory","$injector","infrastruct.services.config","bl.factories.trading.execution.tradingCalculator","$rootScope",function(e,i,r,s,o,a,c,u){return t.extend(n,{ratesFactory:e,candlesFactoryV2:r,instrumentsGroupsFactory:i,instrumentsFactory:s,$injector:o,config:a,tradingCalculator:c,$rootScope:u}),function(e){return new n(e)}}],n.inheritsFrom(i),n});define(rA[414][0],["angular","underscore",rA[280][0]],function(e,t,n){"use strict";function a(e,n){var a=this;t.extend(this,e),this.InstrumentID=n;var r=a.$rootScope.session&&a.$rootScope.session.isUsUser()?"MM/dd/yyyy":"dd/MM/yyyy";this._candlesTimeIntervals={"1Day":{interval:"FiveMinutes",startTime:function(e){var e=a._getUTCdate(new Date(e));return e.setDate(e.getDate()-1),e},dateFormat:r+" HH:mm"},"1Week":{interval:"FifteenMinutes",startTime:function(e){var e=a._getUTCdate(new Date(e));return e.setDate(e.getDate()-7),e},dateFormat:r},"1Month":{interval:"OneHour",startTime:function(e){return a._getMonthsAgo(e,1)},dateFormat:r},"3Months":{interval:"FourHours",startTime:function(e){return a._getMonthsAgo(e,3)},dateFormat:r},"6Months":{interval:"OneDay",startTime:function(e){return a._getMonthsAgo(e,6)},dateFormat:r},"1Year":{interval:"OneDay",startTime:function(e){return a._getUTCdate(new Date(new Date(e).setFullYear(new Date(e).getFullYear()-1)))},dateFormat:r},"3Years":{interval:"OneWeek",startTime:function(e){return a._getUTCdate(new Date(new Date(e).setFullYear(new Date(e).getFullYear()-3)))},dateFormat:r},max:{interval:"OneWeek",startTime:function(e){return a._getUTCdate(new Date(new Date(e).setFullYear(new Date(e).getFullYear()-20)))},dateFormat:r}},this._candlesTimeIntervalsCache={}}return a.prototype={getCandlesStatsData:function(){var e=this,n=a.candlesFactoryV2.getCandlesById(this.InstrumentID,"OneDay",365);return this.$q.all([n]).then(function(n){var a=n[0]&&n[0].data&&n[0].data.Candles&&n[0].data.Candles[0];if(a&&a.Candles[a.Candles.length-1]){var r=e._getUTCdate(new Date((new Date).setFullYear((new Date).getFullYear()-1)));r.setHours(0,0,1);var s=a.Candles.map(function(t){var n=e._getUTCdate(new Date(t.FromDate));return n.setHours(0,0,1),n.getTime()}),i=e._getClosestDate(s,r.getTime(),a.Candles);if(!i)return;var o=t.filter(a.Candles,function(t){var n=e._getUTCdate(new Date(t.FromDate));return n.getTime()>=r.getTime()});e.oneYearReturn=100*(a.Candles[0].Close/i.Close-1),e.daysRange={low:a.Candles[0].Low,high:a.Candles[0].High};var l=t.max(o,function(e){return e.High}),u=t.min(o,function(e){return e.Low});e["52WeekRange"]={low:u.Low,high:l.High}}})},getChartCandles:function(e,n){n=void 0!==n?n:2e3;var r=this;return this.$q(function(s,i){return r._candlesTimeIntervals[e]?r._candlesTimeIntervalsCache[e]?s(r._candlesTimeIntervalsCache[e]):void a.candlesFactoryV2.getCandlesById(r.InstrumentID,r._candlesTimeIntervals[e].interval,n).then(function(n){var a=(new Date,n.data);if(!(a&&a.Candles&&a.Candles.length>0&&a.Candles[0].Candles.length>0))return i({reason:"NODATA"});var o=r._candlesTimeIntervals[e].startTime(a.Candles[0].Candles[0].FromDate);o.setHours(0,0,1);var l=t.filter(a.Candles[0].Candles,function(e){var t=r._getUTCdate(new Date(e.FromDate));return t.getTime()>=o.getTime()});r._candlesTimeIntervalsCache[e]=l,s(r._candlesTimeIntervalsCache[e])})["catch"](i):i()})},get candlesTimeIntervals(){return this._candlesTimeIntervals},_getUTCdate:function(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())},_getMonthsAgo:function(e,t){var n=this._getUTCdate(new Date(e)),a=n.getMonth();return n.setMonth(n.getMonth()-t),n.getMonth()==a&&n.setDate(0),n},_getClosestDate:function(e,t,n){for(var a=e[0],r=0,s=Math.abs(t-a),i=e.length-1;i>=0;--i){var o=Math.abs(t-e[i]);s>=o&&t<=e[i]&&(s=o,a=e[i],r=i)}return n[r]}},a.$factory=["bl.factories.trading.instruments.candles.candlesFactoryV2",function(e){return t.extend(a,{candlesFactoryV2:e}),function(e){return new a(e)}}],a.inheritsFrom(n),a});define(rA[375][0],["angular","underscore"],function(t,e){"use strict";function n(t,n,i){if(t&&t instanceof Object&&n&&i){e.extend(this,t),this.InstrumentID=n;var s="localName-"+i;this.localName=t[s];var o="shortBio-"+i;this.shortBio=t[o]}}return n});define(rA[413][0],["angular","underscore","moduleDefiner"],function(t,e,n){"use strict";function r(n,r,s,i,o,a,u,c){var p,d={key:"all",children:[],instruments:[]},f={},h={},m={},y={},g={},l=1001;return o.$on("logout:success",function(){h={},p._initPromise=null,d={key:"all",children:[],instruments:[]}}),o.$on("login:success",function(){o.session.isUsUser()&&p._updateUsCryptoNode()}),p={get baseUrl(){return"/discover/markets/"},init:function(){return this._initPromise||(this._initPromise=r(function(t,e){var n=i.init().then(function(){return i.getAll()}),r=this._getCache(),s=this._getHttp(),o=function(e){this._insertInstrumentsToTree(d,e),t(d)}.bind(this),a=function(t){e(t),this._initPromise=null}.bind(this),c=function(t){var n={message:"get instruments groups failed",namespace:"instrumentsGroupsFactory",type:"InstrumentsGroupError"};e(t&&t.setContext?t.setContext(n):new window.tempAppLog(n,"error",t&&t.config.requestId||"")),this._initPromise=null}.bind(this);if(r){this._buildTree(r),n.then(o)["catch"](a);var p=Date.now();s.then(function(t){this._setCache(t),this._updateTree(t);var e=Date.now();u.logJSON("info","log",{Categories:["Performance","Trading"],message:"Instruments Groups Cache timer",totalTime:e-p})}.bind(this))["catch"](function(){u.logJSON("error","log",{message:"get instruments groups failed but using cache",namespace:"instrumentsGroupsFactory",type:"InstrumentsGroupError"})})}else s.then(function(t){this._setCache(t),this._buildTree(t),n.then(o)["catch"](a)}.bind(this))["catch"](c)}.bind(this))),this._initPromise},get:function(){return d},getTypes:function(){return f},getStocksIndustries:function(){return y},getStocksExchanges:function(){return m},getCryptoCategories:function(){return o.session.isUsUser()?[this.getCryptoCategoryById(l)]:e.filter(g,function(t){return t.instruments.length>0})},getTypesDictionary:function(){var e={};return t.forEach(f,function(t){e[t.InstrumentTypeID]=t.InstrumentTypeDescription}),e},getIndustryById:function(t){return y[t]},getIndustryByUrlName:function(t){return e.find(y,function(e){return e.UrlName.toLowerCase()===t.toLowerCase()})},getExchangeById:function(t){return m[t]},getCryptoCategoryById:function(t){return g[t]},getExchangeByUrlName:function(t){return t=t.toLowerCase(),e.find(m,function(e){return e.UrlName.toLowerCase()===t})},getCryptoCategoryByName:function(t){return t=t.split("-").join(" ").toLowerCase(),e.find(g,function(e){return e.CryptoCategoryName.toLowerCase()===t})},getTypeById:function(t){return f[t]},getTypeByUrlName:function(t){return t=t.toLowerCase(),e.find(f,function(e){return e.UrlName.toLowerCase()===t})},getPrivateInstrumentsTypes:function(){return r(function(t,e){return o.session&&o.session.stsData?void n({url:"/sapi/trade-real/instrumentTypes/private",method:"GET",params:{}}).then(function(e){h=e.data||{},t(e.data)})["catch"](function(t){e({requestID:t&&t.data&&t.data.requestId||""})}):e({})})},removeNonCompliantInstruments:function(t){if(o.session.isUsUser()){var n=a.dynamics.usa.nonCompliantInstruments.split(",");return e.filter(t,function(t){return-1===n.indexOf(t.InstrumentID.toString())})}return t},_initPromise:null,_getHttp:function(){return n({url:"https://api.etorostatic.com/sapi/app-data/web-client/app-data/instruments-groups.json",method:"GET",addHeaders:!1,addRequestId:!1,maxRetries:2,resourceVersionId:"instruments_groups"}).then(function(t){return t.data})},_getCache:function(){var t=c.getItem("InstrumentsGroups");return t&&Date.now()-t.time<864e5?t.data:null},_setCache:function(t){c.setItem("InstrumentsGroups",{time:Date.now(),data:t})},_buildTree:function(n){var r=e.sortBy(n.InstrumentTypes,"Order"),s=function(t,e){e.parent=t,t.children.push(e)};t.forEach(r,function(t){t=this._extendType(t),f[t.InstrumentTypeID]=t,s(d,t)}.bind(this));var i=f[10];t.forEach(n.CryptoCategories,function(t){t=this._extendCrypto(t),g[t.CryptoCategoryID]=t,s(i,t)}.bind(this));var o=this._createBaseCat("Exchange");t.forEach(n.ExchangeInfo,function(t){t=this._extendExchange(t),m[t.ExchangeID]=t,s(o,t)}.bind(this));var a=this._createBaseCat("Industry");t.forEach(n.StocksIndustries,function(t){t=this._extendIndustry(t),y[t.IndustryID]=t,s(a,t)}.bind(this));var u=f[5];s(u,o),s(u,a)},_updateTree:function(n){t.forEach(n.InstrumentTypes,function(t){e.extend(f[t.InstrumentTypeID],t)}),t.forEach(n.CryptoCategories,function(t){e.extend(g[t.CryptoCategoryID],t)}.bind(this)),t.forEach(n.ExchangeInfo,function(t){e.extend(m[t.ExchangeID],t)}.bind(this)),t.forEach(n.StocksIndustries,function(t){e.extend(y[t.IndustryID],t)}.bind(this))},_updateUsCryptoNode:function(){var t=f[10];t.children=this.getCryptoCategories(),t.children.forEach(function(t){t.instruments=this.removeNonCompliantInstruments(t.instruments)}.bind(this))},_createBaseCat:function(t,e){return{key:t,children:[],instruments:[],parent:null,textKey:e||t}},_extendType:function(t){return Object.defineProperty(t,"IsRestricted",{get:function(){return e.some(h.InstrumentTypes,function(e){return e.InstrumentTypeId===t.InstrumentTypeID&&e.RestrictedManualOpen})}}),e.extend(t,this._createBaseCat(t.InstrumentTypeDescription,t.InstrumentTypeDescription.replace(" ","")),{Url:this.baseUrl+t.InstrumentTypeDescription.toLowerCase().trim().replace(/ /g,"-"),UrlName:t.InstrumentTypeDescription.toLowerCase().trim().replace(/ /g,"-")})},_extendCrypto:function(t){var n=t.CryptoCategoryName.replace(" ","");return e.extend(t,this._createBaseCat(n),{cryptoCategoryId:t.CryptoCategoryID,Url:this.baseUrl+"cryptocurrencies/"+t.CryptoCategoryName.toLowerCase().trim().replace(/ /g,"-")})},_extendIndustry:function(t){var n=t.IndustryName.toLowerCase().trim().replace(/ /g,"-");return e.extend(t,this._createBaseCat(t.IndustryName,t.IndustryName.replace(" ","")),{UrlName:n,Url:this.baseUrl+"stocks/industry/"+n})},_extendExchange:function(t){var n=t.ExchangeDescription.toLowerCase().trim();return e.extend(t,this._createBaseCat(t.ExchangeDescription,t.ExchangeDescription.replace(" ","")),{UrlName:n.replace(/ /g,"-"),Url:this.baseUrl+"stocks/exchange/"+n.replace(/ /g,"-")})},_insertInstrumentsToTree:function(t,n){var r={},s={},i={},o={},a=function(t,e,n){e[n]&&(t[e[n]]||(t[e[n]]=[]),t[e[n]].push(e))},u=function(t,n,r){e.forEach(t,function(t){n[t[r]]&&(t.instruments.length=0,t.instruments.push.apply(t.instruments,n[t[r]]))})};e.forEach(n,function(t){a(r,t,"TypeID"),a(s,t,"StocksIndustryID"),a(i,t,"ExchangeID"),a(o,t,"InstrumentTypeSubCategoryID")}),u(f,r,"InstrumentTypeID"),u(y,s,"IndustryID"),u(m,i,"ExchangeID"),u(g,o,"cryptoCategoryId")}}}return r.$inject=["$http","$q","qs","bl.factories.trading.instruments.instrumentsFactory","$rootScope","infrastruct.services.config","$log","infrastruct.services.localStorage"],function(t,e){return n(t).factory(e,r)}});define(rA[473][0],["angular","underscore","moduleDefiner",rA[415][0],rA[416][0]],function(t,n,e,r,i){"use strict";function s(t,e,s,a,u){function c(t){if(t){var n=t.InstrumentID;!g[n]&&l(n)&&I(n),g[n]?(g[n]._update(t),v[n]._update(t)):(g[n]=new r(t),v[n]=new i(t))}}function o(t){return"instrument:"+t.InstrumentID}function d(r){return t(function(t,i){var s,a,u,o,d=!1;r?(o="/sapi/trade-real/instruments/index",u="Post",a={InstrumentDataFilters:["Activity","Rates","ActivityInExchange"],InstrumentIDs:r}):(o="/sapi/trade-real/instruments",u="GET",s={InstrumentDataFilters:"Activity,Rates,ActivityInExchange"},d=!0),e({url:o,data:a,params:s,method:u,maxRetries:2,"public":!0,monitoringSecuredCall:{InstrumentIDs:!0}}).success(function(e){if(y&&d)y=!1,e.Rates=n.indexBy(e.Rates,"InstrumentID"),p=e;else{var r=e.InstrumentsToActivityState,i=e.InstrumentActivityInExchange;n.each(e.Rates,function(t){f(t,!!r[t.InstrumentID],!i||i[t.InstrumentID]!==!1),c(t)})}t(g)}).error(function(t,n,e,r){i(new AppError("Unable to load Rates","RatesFactory","UnExpectedError",r))})})}function f(t,n,e){t.IsActive=n,t.IsExchangeOpen=e,t.DelayedBid=t.Bid,t.DelayedAsk=t.Ask}function l(t){return!g[t]&&p.Rates[t]}function I(t){if(!g[t]){var n=p.InstrumentsToActivityState,e=p.InstrumentActivityInExchange,r=p.Rates[t];r&&(delete p.Rates[t],f(r,!!n[t],!e||e[t]!==!1),c(r))}}function m(){return s.get("infrastruct.services.push.push")}function b(){var t=u.dynamics.trading.instrumentConfig.shouldSkipResyncRatesCall;if(!t){var e=n.chain(D).allKeys().map(function(t){return parseToFloat(t)}).value();d(e)["catch"](function(t){new AppError("Unable to Sync Rates Subscriptions","RatesFactory","UnExpectedError",t,e)})}}var p,y=!0,g={},v={},D={},R="Trading.Instrument.Rate",h=1e3,A={InstrumentID:0,Ask:0,Bid:0,LastExecution:0,ConversionRateAsk:0,ConversionRateBid:0,Date:"2019-11-28T13:27:22.19272Z",UnitMargin:0,UnitMarginAsk:0,UnitMarginBid:0,PriceRateID:0,BidDiscounted:0,AskDiscounted:0,UnitMarginBidDiscounted:0,UnitMarginAskDiscounted:0,DelayedBid:0,DelayedAsk:0,IsActive:!1};a.$on("logout:success",function(){D={}}),a.$on("portfolio:sync:error",function(){b()}),a.$on("portfolio:sync:success",function(){b()});var E,S=n.throttle(function(){E||(E=s.get("ngZone")),E.run(function(){a.$evalAsync()})},h);return a.$on(R,function(t,n){c(n),S()}),{sync:d,getById:function(t){return l(t)&&I(t),g[t]||new r(n.extend(A,{InstrumentID:t}))},getRateDiscountedById:function(t){return l(t)&&I(t),v[t]||new i(n.extend(A,{InstrumentID:t}))},syncRatesSubscriptions:b,getPromiseById:function(r){return t(n.bind(function(t,n){var i=g[r.InstrumentID];this.isSubscribed(r)?t(i):e({method:"GET",url:"/sapi/trade-real/rates/"+r.InstrumentID,actionUrl:"/sapi/trade-real/rates/:InstrumentID","public":!0}).success(function(n){c(n.Rate),t(i)}).error(function(t,e){n(new AppError("Unable to load Rate","RatesFactory","UnExpectedError",null,t,e))})},this))},isSubscribed:function(t){return m().isSubscribed(o(t))},subscribe:function(t){var n=o(t);D[n]=(D[n]||0)+1,m().isSubscribed(n)||m().subscribe(n)},subscribeBatch:function(t){if(t&&0!==t.length){var e,r=[];if(n.each(t,function(t){e=o(t),D[e]=(D[e]||0)+1,r.push(e)},this),0!==r.length){var i=r.toString();m().isSubscribed(i)||m().subscribe(r)}}},unsubscribe:function(t){var n=o(t);D[n]&&D[n]--,D[n]||!m().isSubscribed(n)||t.isInPortfolio||m().unsubscribe(n)}}}return function(t,n){return e(t).factory(n,["$q","$http","$injector","$rootScope","infrastruct.services.config",s])}});define(rA[415][0],["angular",rA[280][0],rA[141][0]],function(i,s,t){"use strict";function e(i){this.Bid=i.Bid,this.Ask=i.Ask,this.LastBid=i.Bid,this.LastAsk=i.Ask,this._DelayedBid=i.DelayedBid,this._DelayedAsk=i.DelayedAsk,this.ClosingPrices=e.candlesFactory.getClosingPrice(i.InstrumentID),this._update(i),this.Change=new t(this)}return e.prototype={get isLoggedIn(){return!!e.$rootScope.session&&!!e.$rootScope.session.stsData},get lastPrice(){return this.ClosingPrices.IsMarketOpen||this.IsActive?this.Bid:this.ClosingPrices.OfficialClosingPrice},get lastAskPrice(){return this.ClosingPrices.IsMarketOpen||this.IsActive?this.Ask:this.ClosingPrices.OfficialClosingPrice},get lastAskChange(){return this.Ask-this.LastAsk},get lastBidChange(){return this.Bid-this.LastBid},_update:function(s){this.LastUpdate=new Date,i.isDefined(s.IsMarketOpen)&&(this.ClosingPrices.IsMarketOpen=s.IsMarketOpen),i.isDefined(s.OfficialClosingPrice)&&(this.ClosingPrices.OfficialClosingPrice=s.OfficialClosingPrice),this.LastBid=this.Bid,this.LastAsk=this.Ask;for(var t in s)s.hasOwnProperty(t)&&(this[t]=s[t]);s.DelayedBid&&!this.isLoggedIn?(this.Bid=s.DelayedBid,this._DelayedBid=s.DelayedBid):s.Bid&&(this.isLoggedIn||(this.Bid=this._DelayedBid)),s.DelayedAsk&&!this.isLoggedIn?(this.Ask=s.DelayedAsk,this._DelayedAsk=s.DelayedAsk):s.Ask&&(this.isLoggedIn||(this.Ask=this._DelayedAsk))}},e.$factory=["bl.factories.trading.instruments.candles.candlesFactoryV2","$rootScope",function(i,s){return e.candlesFactory=i,e.$rootScope=s,function(i){return new e(i)}}],e.inheritsFrom(s),e});define(rA[141][0],[],function(){"use strict";function i(i){this.getRate=function(){return i}}return i.prototype={isClosingPriceValid:function(i){var t=this.getRate()?this.getRate().ClosingPrices[i]:null;return!t||t.Price&&t.Price<0?!1:!0},askNumber:function(i){return this.isClosingPriceValid(i)?this.getRate().lastAskPrice-this.getRate().ClosingPrices[i].Price:0},askPercent:function(i){return this.isClosingPriceValid(i)?this.askNumber(i)/this.getRate().ClosingPrices[i].Price*100:0},bidNumber:function(i){return this.isClosingPriceValid(i)?this.getRate().lastPrice-this.getRate().ClosingPrices[i].Price:0},bidPercent:function(i){return this.isClosingPriceValid(i)?this.bidNumber(i)/this.getRate().ClosingPrices[i].Price*100:0},get dailyBidPercent(){return this.isClosingPriceValid("Daily")?this.bidNumber("Daily")/this.getRate().ClosingPrices.Daily.Price*100:0}},i});define(rA[416][0],["angular",rA[415][0],rA[141][0]],function(i,t,s){"use strict";function n(i){t.call(this,i),this._update(i),this.Change=new s(this),this._LastBidDiscounted=i.BidDiscounted,this._LastAskDiscounted=i.AskDiscounted,this._LastUnitMarginBidDiscounted=i.UnitMarginBidDiscounted,this._LastUnitMarginAskDiscounted=i.UnitMarginAskDiscounted}return n.prototype={_update:function(i){t.prototype._update.call(this,i),i.BidDiscounted?(this.Bid=i.BidDiscounted,this._LastBidDiscounted=i.BidDiscounted):i.Bid&&(this.Bid=this._LastBidDiscounted||i.Bid),i.AskDiscounted?(this.Ask=i.AskDiscounted,this._LastAskDiscounted=i.AskDiscounted):i.Ask&&(this.Ask=this._LastAskDiscounted||i.Ask),i.UnitMarginAskDiscounted?(this.UnitMarginAsk=i.UnitMarginAskDiscounted,this._LastUnitMarginAskDiscounted=i.UnitMarginAskDiscounted):i.UnitMarginAsk&&(this.UnitMarginAsk=this._LastUnitMarginAskDiscounted||i.UnitMarginAsk),i.UnitMarginBidDiscounted?(this.UnitMarginBid=i.UnitMarginBidDiscounted,this._LastUnitMarginBidDiscounted=i.UnitMarginBidDiscounted):i.UnitMarginBid&&(this.UnitMarginBid=this._LastUnitMarginBidDiscounted||i.UnitMarginAsk)}},n.$factory=["bl.factories.trading.instruments.candles.candlesFactoryV2",function(i){return n.candlesFactory=i,function(i){return new n(i)}}],n.inheritsFrom(t),n});define(rA[412][0],["angular","underscore","moduleDefiner"],function(n,e,t){"use strict";function r(t,r,s,i,a,c,o){function l(e){this.InstrumentID=0,this.Data=[],this.Min=0,this.Max=0,this.FirstRate=0,this.LastRate=0,e&&e.InstrumentId&&n.extend(this,this.__parse(e))}function u(n){this.IsMarketOpen=n?n.IsMarketOpen:!0,this.OfficialClosingPrice=n?n.OfficialClosingPrice:0,e.extend(this,{Daily:{Price:0},Weekly:{Price:0},Monthly:{Price:0}},n?n.ClosingPrices:{})}function d(n,t){e.each(n,function(n){y[n]&&y[n][t]&&y[n][t].reject()})}function g(n){return r(function(t,s){var a,c=e.map(n,function(n){return a=n.hasOwnProperty("promise")?n.promise:n,r(function(n){a.then(n)["catch"](function(e){i.warn("unable to unwrap Canlde promise","candlesFactoryV2.unwarpCanldes",e),n(null)})})});r.all(c).then(function(n){var r=[];e.each(n,function(n){n&&r.push(n)}),t(r)})["catch"](function(n){new AppError("Error unwarping Canldes promises","candlesFactoryV2.unwarpCanldes","UnExpectedError",n),s([])})})}var h,f,p,y={},I={},m=null,C={},v={intervals:{ONE_MINUTE:"OneMinute",FIVE_MINUTES:"FiveMinutes",TEN_MINUTES:"TenMinutes",FIFTEEN_MINUTES:"FifteenMinutes",ONE_HOUR:"OneHour",ONE_DAY:"OneDay",ONE_WEEK:"OneWeek"},defaultResolutionTypeId:"day",resolutionType:{day:{id:"day",candlesNum:25,candleText:"1D",interval:"today",closingPriceName:"Daily",rolling:"RollingToday",rollingCandlesNum:24},week:{id:"week",candlesNum:121,candleText:"1W",interval:"thisWeek",closingPriceName:"Weekly",rolling:"RollingThisWeek",rollingCandlesNum:24},month:{id:"month",candlesNum:23,candleText:"1M",interval:"thisMonth",closingPriceName:"Monthly",rolling:"RollingThisMonth",rollingCandlesNum:24}}},E=100;return c.$on("logout:success",function(){y={},I={},m=null}),o.dynamics.whenReady().then(function(){p=o.dynamics.closingPricesUpdateThrottle||18e4,c.$on("appConfig:change",e.throttle(function(n,e){var t=e.keysChanged;(-1!=t.indexOf("resourcesVersion.closing_prices")||-1!=t.indexOf("resourceVersion.closing_prices_enabled"))&&(m=null,f.getAllClosingPrices())},p))}),l.prototype={__parse:function(n){h||(h=a.get("bl.factories.trading.instruments.instrumentsFactory"));var t,r,s=n.Prices,i=h.getById(n.InstrumentId),c=s.length>0?s[0].Price:0,o=s.length>0?s[s.length-1].Price:0,l=e.map(s,function(n){return n.Price});return l.splice(0,0,c),l.push(o),t=e.min(l),r=e.max(l),{InstrumentID:i.InstrumentID,Data:l,Min:t,Max:r,FirstRate:c,LastRate:o}}},u.prototype._update=function(n){this.IsMarketOpen=n.IsMarketOpen,this.OfficialClosingPrice=n.OfficialClosingPrice,e.extend(this,n.ClosingPrices||{})},f={candlesChart:v,getClosingPrice:function(n){return m||this.getAllClosingPrices(),C[n]||(C[n]=new u),C[n]},getClosingPrices:function(t){var s=this;return r(function(r,i){s.getAllClosingPrices().then(function(){var s={};n.isArray(t)||(t=[t]),e.each(t,function(n){C[n]&&(s[n]=C[n])}),r(s)})["catch"](i)})},getAllClosingPrices:function(){return m?m:m=r(function(n,t){s({url:"/sapi/candles/closingprices.json",addHeaders:!1,"public":!0,staticAPI:!0,resourceVersionId:"closing_prices"}).success(function(t){var r,s={};e.each(t,function(n){r=parseToFloat(n.InstrumentId),C[r]?C[r]._update(n):C[r]=new u(n),s[r]=C[r]}),n(s),t&&0!==t.length||(i.logJSON("error","log",{Categories:["candlesFactoryV2"],Message:"closing prices response is empty"}),m=null)}).error(function(n,e){t(new AppError("Error loading candles","candlesFactoryV2","UnExpectedError",null,n,e)),m=null,C={}})})},getByInstruments:function(n,t,r){var s=e.pluck(n,"InstrumentID");this.getByIds(s,t,r)},getByIds:function(t,c,u){var h,f,p=r.defer(),u=u||v.resolutionType[c],I=[],m=[];if(!u)return p.reject(new AppError("trading->candles->getByIds: resoultion id is not exist:"+c,"candlesFactoryV2","UnExpectedError",null)),p.promise;if(!n.isArray(t))return p.reject(new AppError("trading->candles->getByIds: instrumentIds is not an array","candlesFactoryV2","UnExpectedError",null)),p.promise;var C=u.interval,P=u.candlesNum-1,M=a.get("bl.factories.trading.instruments.instrumentsFactory");for(h=0,f=t.length;f>h;h++)y[t[h]]&&y[t[h]][c]?m[h]=y[t[h]][c]:(y[t[h]]||(y[t[h]]={}),y[t[h]][c]||(y[t[h]][c]={}),M.getById(t[h])&&(y[t[h]][c]=r.defer()),m[h]=y[t[h]][c],I.push(t[h]));if(0==I.length)return g(m).then(function(n){p.resolve(n)})["catch"](function(n){p.reject(n)}),p.promise;var N=[],T=[];e.each(I,function(n){var e=M.getById(n);e&&(e.TypeID<5?N.push(n):T.push(n))});var B=function(n,e){for(var t=[],r=0;r<n.length;r++)t.push.apply(t,n[r].data);e(t)},O=r(function(n,t){if(0===T.length)return void n([]);T=e.sortBy(T);for(var i=[];T.length>0;)i.push(s({method:"GET",url:o.dynamics.urls.candlesApi+"/quickcharts.json/"+C+"/"+P,isArray:!0,staticAPI:!1,disableLog:!0,"public":!0,addHeaders:!1,params:{instruments:"["+T.splice(0,E)+"]"}}));r.all(i).then(function(e){B(e,n)})["catch"](t)}),A=r(function(n,t){if(0===N.length)return void n([]);N=e.sortBy(N);for(var i=[];N.length>0;)i.push(s({method:"GET",url:"/sapi/candles/quickcharts.json/"+u.rolling+"/"+u.rollingCandlesNum,staticAPI:!0,disableLog:!0,isArray:!0,params:{instruments:"["+N.splice(0,E)+"]"}}));r.all(i).then(function(e){B(e,n)})["catch"](t)});return r.all([O,A]).then(function(n){var r=n[0],s=n[1],a=e.union(r,s);if(!a||0===a.length)return d(I,c),void p.reject(new AppError("Error loading candles getByIds("+I.join(",")+")","candlesFactoryV2","UnExpectedError",null,a,status));var o=[];for(e.each(a,function(n){if(M.getById(n.InstrumentId)){var e=y[n.InstrumentId][c];e?e.resolve(new l(n)):i.error("There is no defer for this candle getByIds()","InstrumentId: "+n.InstrumentId,"resolutionId: "+c)}}),h=0,f=t.length;f>h;h++)y[t[h]]&&y[t[h]][c]&&o.push(y[t[h]][c].promise);g(o).then(function(n){p.resolve(n)})["catch"](function(){p.reject([])})})["catch"](function(n,e){d(I,c),p.reject(new AppError("Error loading candles getByIds("+I.join(",")+")","candlesFactoryV2","UnExpectedError",null,n,e))}),p.promise},getById:function(n,t,s){return r(e.bind(function(e,r){this.getByIds([n],t,s).then(function(n){n.length>0?e(n[0]):r()})["catch"](r)},this))},getCandlesById:function(n,e,t,r){return r=void 0===r?"desc":"asc",s({url:"/sapi/candles/candles/"+r+".json/"+e+"/"+t+"/"+n,disableLog:!0,"public":!0,addHeaders:!1})},_getChartsCandlesById:function(n,e,t,r){return r=void 0===r?"desc":"asc",s({url:o.dynamics.urls.candlesApi+"/candles/"+r+".json/"+e+"/"+t+"/"+n,disableLog:!0,"public":!0,addHeaders:!1})},getChartsCandlesById:function(n,t,s,i){return r(e.bind(function(e,r){this._getChartsCandlesById(n,t,s,i).then(function(t){var c="asc"===i?s-1:0;if(t){if(t.data&&t.data.Candles&&t.data.Candles.length>0&&t.data.Candles[0]&&t.data.Candles[0].Candles&&t.data.Candles[0].Candles.length>0&&t.data.Candles[0].Candles[c]){var o=a.get("bl.factories.trading.instruments.instrumentsFactory");if(o){var l=o.getById(n);l&&(t.data.Candles[0].Candles[c].Close=l.lastPrice())}}e(t)}else r()})["catch"](r)},this))}}}return function(n,e){return t(n).factory(e,["$interpolate","$q","$http","$log","$injector","$rootScope","infrastruct.services.config",r])}});define(rA[474][0],["angular","underscore",rA[280][0],rA[422][0],rA[273][0]],function(t,o,i,n,e){"use strict";function r(t,i,e){this._positionsByGroupMap={},this.GroupName="",this.Avatar=i.Avatars["default"],this.Url="/portfolio/breakdown",this.TradeItemUrl=i.Url,this.Positions=[],o.each(t.Positions,function(t){this.Positions.push(new n(t,this))},this),delete t.Positions,this.set(t),this.getPortfolio=function(){return e}}return r.prototype={get UniqueId(){return this.Type+"-"+this.GroupName},get Type(){throw"must implement Type for portfolio group"},get TradeItem(){throw"must implement TradeItem for portfolio group"},get TotalProfit(){if(!this._totalProfit||Date.now()-this._totalProfitLastUpdate>100){var t=0;this._totalProfitLastUpdate=Date.now(),o.each(this._positionsByGroupMap,function(o){t+=o.profit},this),this._totalProfit=t}return this._totalProfit},get TotalPnlAmountDaily(){return this.Positions.reduce(function(t,o){return t+o.pnlAmountDaily},0)},get Equity(){return this.TotalInvestedAmount+this.TotalProfit},get NetUnits(){return this.countNetUnits()},get NetUnitsSort(){return Math.abs(this.countNetUnits())},getPositionByOrderId:function(t){return o.find(this.Positions,function(o){return o.OrderID>0&&o.OrderID===t})},getPositionById:function(t){return o.find(this.Positions,function(o){return o.PositionID===t})},countNetUnits:function(){var t=0;return o.each(this._positionsByGroupMap,function(o){t+=o.netUnits},this),t},set:function(t){o.extend(this,t)},recalculate:function(){var t={};o.each(this.Positions,function(o){t[o.InstrumentID]||(t[o.InstrumentID]=[]),t[o.InstrumentID].push(o)},this),this._positionsByGroupMap={},this.Amount=this.AvailableAmount||0,o.each(t,function(t,o){this._positionsByGroupMap[o]=new e(t[0].Instrument,t),this.Amount+=this._positionsByGroupMap[o].amount},this),this.Amount=toFixed(this.Amount,2)}},r.$factory=[function(){return function(t){return new r(t)}}],r.inheritsFrom(i),r});define(rA[422][0],["angular","underscore",rA[280][0]],function(t,e,i){"use strict";function n(t,e){this.set(t),this.getGroup=function(){return e},this.getPortfolio=function(){return e.getPortfolio()},this.OpenDateTime=new Date(this.OpenDateTime),this._hashSyncPropertires=["Amount","InitialAmountInDollars","OpenRate","StopLossRate","StopLossVersion","TakeProfitRate","TotalFees","Units","Profit","InstrumentID"]}function o(t,e,i,n){var o;return o=i.ErrorCode?new AppError(t,"portfolio",e+"_"+i.ErrorCode,null):new AppError(t,"portfolio","UnExpectedError",null,i,n)}return n.prototype={get positionTagClass(){return n.tradingCalculator.getPositionTagClass(this)},get isNoSL(){if(this.IsBuy){var t=n.tradingCalculator.calculateRate(0,1,this.Instrument._Precision);if(this.StopLossRate<=t)return!0}return!1},get isNoTP(){if(this.IsBuy){if(0===this.TakeProfitRate)return!0}else{var t=n.tradingCalculator.calculateRate(0,1,this.Instrument._Precision);if(this.TakeProfitRate<=t)return!0}return!1},get _hashIdentifier(){return JSON.stringify(this,this._hashSyncPropertires)},get UniqueId(){return this.Type+"-"+this.PositionID},get Type(){return"position"},get Instrument(){return n.instrumentsFactory.getById(this.InstrumentID,!0,!0)},get Profit(){if(!this.Instrument)return 0;var t=this.CurrentRate-this.OpenRate,e=n.tradingCalculator.getPositionConversionRate(!0,this.IsBuy,this.Instrument.rate);return this.IsBuy||(t*=-1),t*this.Units*e},get pnlAmountDaily(){var t=new Date(this.OpenDateTime).setHours(0,0,0,0),e=new Date(Date.now()).setHours(0,0,0,0),i=new Date(this.Instrument.rate.Date).setHours(0,0,0,0);if(t===e)return this.Profit;if(this.Instrument.IsActive||i===e){var o=n.tradingCalculator.getPositionConversionRate(!0,this.IsBuy,this.Instrument.rate),r=this.IsBuy?1:-1;return this.Units*this.Instrument.rate.Change.bidNumber("Daily")*o*r}return 0},get Gain(){return 0===this.Amount?0:this.Profit/this.Amount*100},get Equity(){return this.Profit+this.Amount},get CurrentRate(){return this.EndRate?this.EndRate:this.IsBuy?this.Instrument.Price(this.IsDiscounted):this.Instrument.AskRounded(this.IsDiscounted)},get CurrentRatePriceRateID(){return this.Instrument.rate.PriceRateID||0},get LastRateChange(){return n.tradingCalculator.getClientViewRateChange(!0,this.IsBuy,this.Instrument.rate)},get Change(){var t=0;return t=this.IsBuy?n.tradingCalculator.calculatePips(this.Instrument,this.CurrentRate,this.OpenRate):n.tradingCalculator.calculatePips(this.Instrument,this.OpenRate,this.CurrentRate)},get IsSlApproaching(){return this.Instrument?this._isSlApproaching(this.StopLossRate):!1},get IsTpApproaching(){return this.Instrument?this._isSlApproaching(this.TakeProfitRate):!1},get IsSlApproachingPositive(){return this.IsSlApproaching&&(this.IsBuy&&this.StopLossRate>this.OpenRate||!this.IsBuy&&this.StopLossRate<this.OpenRate)},get IsSlApproachingNegative(){return this.IsSlApproaching&&(this.IsBuy&&this.StopLossRate<this.OpenRate||!this.IsBuy&&this.StopLossRate>this.OpenRate)},get IsTpApproachingPositive(){return this.IsTpApproaching&&(this.IsBuy&&this.TakeProfitRate>this.OpenRate||!this.IsBuy&&this.TakeProfitRate<this.OpenRate)},get IsTpApproachingNegative(){return this.IsTpApproaching&&(this.IsBuy&&this.TakeProfitRate<this.OpenRate||!this.IsBuy&&this.TakeProfitRate>this.OpenRate)},get StopLossAmount(){return this.isNoSL?0:n.executionCalculator.getAmountFromRate(this._model,this.OpenRate,this.StopLossRate)},get StopLossPercent(){return this.StopLossAmount/this.Amount*100},get TakeProfitAmount(){return n.executionCalculator.getAmountFromRate(this._model,this.OpenRate,this.TakeProfitRate)},get TakeProfitPercent(){return this.TakeProfitAmount/this.Amount*100},get isRedeemPending(){return 1===this.RedeemStatusID},get isRedeemEnabled(){return this._isRedeemEnabled&&!this.RedeemStatusID},get isAirdrop(){return[4,5,10,11,12,13,14].includes(this.OpenPositionActionType)},get _isRedeemEnabled(){if(!this.Instrument)return!1;var t=this.Instrument;return!this.IsSettled||this.MirrorID||!this.IsBuy||1!==this.Leverage||this.isPendingClose||this.isPartialPendingClose?!1:!!(t&&t.isCryptocurrencies&&t.AllowRedeem)},get isCMT(){return this.IsSettled&&this.Leverage>1},get _model(){return{amount:{amount:this.Amount},isBuy:this.IsBuy,instrument:this.Instrument,position:this}},_logEventClose:function(t,e,i,o,r){n.$analytics.eventTrack(t,{CID:e.CID,"Position ID":i&&i.PositionID?i.PositionID:"","Instrument Name":e.InstrumentName,"Instrument ID":e.InstrumentID,"Instrument Type":e.instrumentType,Amount:e.Amount,Leverage:e.Leverage,"Stop Loss Rate":e.StopLossRate,"Take Profit Rate":e.TakeProfitRate,"Client View Rate":e.ClientViewRate,"Client Rate For Calc":e.ClientRateForCalc,"Buy or Sell?":e.IsBuy?"Buy":"Sell",category:o,Label:r,"Search ObjectID":e.InstrumentID.toString(),"Search Item Type":e.itemType})},_logEventCloseExitMarketOrder:function(t,e,i){n.$analytics.eventTrack(t,{CID:e.CID,"Instrument Name":e.InstrumentName,"Instrument ID":e.InstrumentID,"Instrument Type":e.instrumentType,Amount:e.Amount,Leverage:e.Leverage,"Stop Loss Rate":e.StopLossRate,"Take Profit Rate":e.TakeProfitRate,"Client View Rate":e.ClientViewRate,"Buy or Sell?":e.IsBuy?"Buy":"Sell","Units To Deduct":i&&i.UnitsToDeduct?i.UnitsToDeduct:"","Position ID":i&&i.PendingClosePositionID?i.PendingClosePositionID:""})},_logEventUpdate:function(t,e){n.$analytics.eventTrack(t,{"Stop Loss Rate":e.StopLossRate,"Take Profit Rate":e.TakeProfitRate,"Position ID":e.PositionID})},_logEventPartialClose:function(t,e){n.$analytics.eventTrack(t,{"Client View Rate":e.ViewRateContext.ClientViewRate,"Client Rate For Calc":e.ViewRateContext.ClientRateForCalc,"Units To Deduct":e.UnitsToDeduct,"Position ID":e.PositionID})},_logEventCancelCloseExitMarketOrder:function(t,e){n.$analytics.eventTrack(t,{"Position ID":e.PendingClosePositionID})},_logEventCancelRedeemPosition:function(t,e){n.$analytics.eventTrack(t,{"Position ID":e.PendingClosePositionID,RedeemID:e.RedeemID})},_logEcommerceEventClose:function(t,e,i,o,r){n.ecommerceTracking.track(t,{name:e.InstrumentName,id:e.InstrumentID,amount:e.Amount,action:o,label:r,marketMode:"Trade",dimension71:e.instrumentType||""})},set:function(t){e.extend(this,t)},_isSlApproaching:function(t){var e=n.instrumentsGroupsFactory.getTypeById(this.Instrument.InstrumentTypeID).SLTPApproachPercent;return Math.abs(this.CurrentRate-t)<=t*e/100},update:function(t,i,o,r){var s={PositionID:this.PositionID,InstrumentID:this.InstrumentID},a=this.getGroup().getPortfolio(),c=this;return null!=t&&(s.StopLossRate=parseToFloat(t)),null!=i&&(s.TakeProfitRate=parseToFloat(i)),null!=o&&(s.IsTslEnabled=o),e.extend(s,r||{}),this.$http({method:"Put",url:a.api+"/positions/"+this.PositionID,categories:["userTradingAction"],actionUrl:a.api+"/positions/:PositionID",isArray:!1,data:s,logData:{action:"EditPositionRequest"}}).success(function(){a.watchAndReportAction("Execution.positionEdit",arguments)}).error(e.bind(function(t){n.$rootScope.$emit("Trading.Failure.Position.Edit",c,{Topic:a.account.topic}),this.$log.error("Error in update position",t)},this))},close:function(t){var i=this.getGroup().getPortfolio(),o=this,r={PositionID:this.PositionID},s={ViewRateContext:{ClientViewRate:this.CurrentRate,ClientViewRateID:this.CurrentRatePriceRateID,ClientRateForCalc:this.CurrentRate,ClientRateForCalcID:this.CurrentRatePriceRateID},InstrumentID:o.Instrument.InstrumentID},a=n.$rootScope.session&&n.$rootScope.session.user,c=n.configService.dynamics&&n.configService.dynamics.trading&&n.configService.dynamics.trading.usTradingConfig;s.Trade={User:{countryId:a&&a.countryId,countryName:a&&a.country&&a.country.name,userDesignatedRegulationId:a&&a.designatedRegulationId},CCM:{usFlavorEnabled:c&&c.usFlavorEnabled,usInstrumentTypes:c&&c.usInstrumentTypes,usExchanges:c&&c.usExchanges,usRegulationIds:c&&c.usRegulationIds},Position:{type:o.Instrument&&o.Instrument.InstrumentTypeID,exchange:o.Instrument&&o.Instrument.ExchangeID}};var u={CID:o.CID,InstrumentID:o.Instrument.InstrumentID,InstrumentName:o.Instrument.DisplayName,IsBuy:o.IsBuy,Leverage:o.Leverage,Amount:parseToFloat(o.Amount),StopLossRate:o.StopLossRate,TakeProfitRate:o.TakeProfitRate,ClientViewRate:this.CurrentRate,ClientViewRateID:this.CurrentRatePriceRateID,ClientRateForCalc:this.CurrentRate,ClientRateForCalcID:this.CurrentRatePriceRateID,instrumentType:o.Instrument.instrumentType.InstrumentTypeDescription,itemType:"Instrument"};return e.extend(r,t||{}),this.$q(e.bind(function(t,a){this._logEventClose("Close Trade - Attempt",u,r),o.Instrument.isUsTrade?n.injector.get("bl.factories.trading.orderForCloseService").close(r,s,u,i,o):this.$http({method:"Delete",url:i.api+"/positions/"+this.PositionID,categories:["userTradingAction"],actionUrl:i.api+"/positions/:PositionID",isArray:!1,params:r,data:s,logData:{action:"ClosePositionRequest"}}).success(function(e){o.isClosedRequested=!0,i.watchAndReportAction("Execution.positionClose",arguments),o._logEventClose("Close Trade - Success",u,r),o._logEcommerceEventClose("Close Trade - Success",u,r,"Close","Success"),t(e.data)}).error(e.bind(function(t){n.$rootScope.$emit("Trading.Failure.Position.Close",o,{Topic:i.account.topic}),o._logEventClose("Close Trade - Error",u,r,"Trade","Close Trade - Error"),a({}),o.$log.error("Error closing position",t)}))},this))},closeExitMarketOrder:function(t,i){var r=this,s={PendingClosePositionID:this.PositionID,InstrumentID:r.Instrument.InstrumentID,ViewRateContext:{ClientViewRate:this.CurrentRate,ClientViewRateID:r.Instrument.rate.PriceRateID,ClientRateForCalc:this.CurrentRate,ClientRateForCalcID:r.Instrument.rate.PriceRateID}};i&&i>0&&(s.UnitsToDeduct=i);var a={CID:r.CID,InstrumentID:r.Instrument.InstrumentID,InstrumentName:r.Instrument.DisplayName,IsBuy:r.IsBuy,Leverage:r.Leverage,Amount:parseToFloat(r.Amount),StopLossRate:r.StopLossRate,TakeProfitRate:r.TakeProfitRate,ClientViewRate:this.CurrentRate,instrumentType:r.Instrument.instrumentType.InstrumentTypeDescription};return e.extend(s,t||{}),this.$q(e.bind(function(t,i){var c=this.getGroup().getPortfolio();this._logEventCloseExitMarketOrder("Close Exit Market Order Trade - Attempt",a,s),this.$http({method:"Post",url:c.api+"/exit-orders",categories:["userTradingAction"],isArray:!1,data:s,logData:{action:"OpenExitOrderRequest"}}).success(function(e){c.watchAndReportAction("Execution.closeExitMarketOrder",arguments),r._logEventCloseExitMarketOrder("Close Exit Market Order Trade - Success",a,s),t(e.data)}).error(e.bind(function(t,e,u,l){n.$rootScope.$emit("Trading.Failure.ExitOrder.Open",r,{Topic:c.account.topic}),r._logEventCloseExitMarketOrder("Close Exit Market Order Trade",a,s),i(o("Tapi Error: Error close Exit Market Order","closeMarketOrder",t,e,u,l))},this))},this))},cancelCloseExitMarketOrder:function(t){var i=this,r={PendingClosePositionID:this.PositionID};return e.extend(r,t||{}),this._logEventCancelCloseExitMarketOrder("Cancel Close Exit Market Order Trade - Attempt",r),this.$q(e.bind(function(t,s){var a=this.getGroup().getPortfolio();this.$http({method:"Delete",url:a.api+"/exit-orders/"+this.OrderID,categories:["userTradingAction"],actionUrl:a.api+"/exit-orders/:OrderID",isArray:!1,data:r,logData:{action:"CancelExitOrderRequest"}}).success(function(e){a.watchAndReportAction("Execution.cancelCloseExitMarketOrder",arguments),i._logEventCancelCloseExitMarketOrder("Cancel Close Exit Market Order Trade - Success",r),t(e.data)}).error(e.bind(function(t,e,c,u){n.$rootScope.$emit("Trading.Failure.ExitOrder.Close",i,{Topic:a.account.topic}),i._logEventCancelCloseExitMarketOrder("Cancel Close Exit Market Order Trade - Error",r),s(o("Tapi Error: Error cancel Close Exit Market Order","cancelCloseExitMarketOrder",t,e,c,u))},this))},this))},isExecutionBlocked:function(){return n.$rootScope.session.user&&n.$rootScope.session.user.bsl&&n.$rootScope.session.user.bsl.executionBlocked&&n.$rootScope.session.user.bsl.isBslAvalible?n.$rootScope.session.user.bsl.executionBlocked&&n.$rootScope.session.user.bsl.isBslAvalible:!1},cancelRedeemPosition:function(){var t={PositionID:this.PositionID,RedeemID:0},i=this.getGroup().getPortfolio(),o=this;return this._logEventCancelRedeemPosition("Cancel Redeem Position - Attempt",t),this.$http({method:"Put",url:i.api+"/positions/redeem/edit/cancel/"+this.PositionID,categories:["userTradingAction"],actionUrl:i.api+"/redeem/edit/cancel/:PositionID",isArray:!1,data:t,logData:{action:"CancelRedeemPositionRequest"}}).success(function(){i.watchAndReportAction("Execution.cancelRedeem",arguments),o._logEventCancelRedeemPosition("Cancel Redeem Position - Success",t)}).error(e.bind(function(e){n.$rootScope.$emit("Trading.Failure.Position.Edit",o,{Topic:i.account.topic}),o._logEventCancelRedeemPosition("Cancel Redeem Position - Error",t),this.$log.error("Cancel redeem position error",e)},this))},partialClose:function(t,i,o){var r={PositionID:this.PositionID,InstrumentID:this.InstrumentID,ViewRateContext:{ClientViewRate:this.CurrentRate,ClientViewRateID:this.CurrentRatePriceRateID,ClientRateForCalc:o.clientRateForCalc,ClientRateForCalcID:o.clientRateForCalcID}},s=this.getGroup().getPortfolio(),a=this;return t&&t>0&&(r.UnitsToDeduct=t),e.extend(r,i||{}),this.$q(e.bind(function(i,o){if(this._logEventPartialClose("Partial Close Trade - Attempt",r),a.Instrument.isUsTrade){var c={InstrumentID:a.Instrument.InstrumentID,UnitsToDeduct:t,ViewRateContext:r.ViewRateContext};r={PositionID:this.PositionID};var u={CID:a.CID,InstrumentID:a.Instrument.InstrumentID,InstrumentName:a.Instrument.DisplayName,IsBuy:a.IsBuy,Leverage:a.Leverage,Amount:parseToFloat(a.Amount),StopLossRate:a.StopLossRate,TakeProfitRate:a.TakeProfitRate,ClientViewRate:this.CurrentRate,ClientViewRateID:this.CurrentRatePriceRateID,ClientRateForCalc:this.CurrentRate,ClientRateForCalcID:this.CurrentRatePriceRateID,instrumentType:a.Instrument.instrumentType.InstrumentTypeDescription};n.injector.get("bl.factories.trading.orderForCloseService").close(r,c,u,s,a)}else this.$http({method:"Put",maxRetries:1,url:s.api+"/positions/"+this.PositionID,categories:["userTradingAction"],actionUrl:s.api+"/positions/:PositionID",isArray:!1,data:r,logData:{action:"EditPositionRequest"}}).success(function(t){s.watchAndReportAction("Execution.positionEdit",arguments),a._logEventPartialClose("Partial Close Trade - Success",r),i(t.data)}).error(e.bind(function(t){n.$rootScope.$emit("Trading.Failure.Position.Close.Partial",a,{Topic:s.account.topic}),a._logEventPartialClose("Partial Close Trade - Error",r),o({}),this.$log.error("Error in update position - partial close",t)}))},this))}},n.$factory=["bl.factories.trading.instruments.instrumentsFactory","bl.factories.trading.execution.tradingCalculator","$rootScope","bl.factories.trading.instruments.instrumentsGroupsFactory","bl.factories.trading.execution.executionCalculator","$analytics","infrastruct.services.ecommerceTrackingService","$injector","infrastruct.services.config",function(t,i,o,r,s,a,c,u,l){return e.extend(n,{instrumentsFactory:t,tradingCalculator:i,$rootScope:o,instrumentsGroupsFactory:r,executionCalculator:s,$analytics:a,ecommerceTracking:c,injector:u,configService:l}),function(t,e){return new n(t,e)}}],n.inheritsFrom(i),n});define(rA[273][0],["underscore"],function(t){"use strict";function n(n){var e=0,i=0,s=0,a=0,u=0,o=0;return n?(t.each(n,function(t){t.IsDiscounted?(a+=t.Units*(t.IsBuy?1:-1)||0,o+=t.Amount,t.OpenRate&&(u+=t.OpenRate*t.Units*(t.IsBuy?1:-1))):(e+=t.Units*(t.IsBuy?1:-1)||0,s+=t.Amount,t.OpenRate&&(i+=t.OpenRate*t.Units*(t.IsBuy?1:-1)))}),{totalUnits:e,avgOpenRate:0===e?0:Math.abs(i/e),amount:s,totalUnitsDiscounted:a,avgOpenRateDiscounted:0===a?0:Math.abs(u/a),amountDiscounted:o,avgOpenRateTotal:e+a===0?0:Math.abs((i+u)/(e+a))}):{totalUnits:0,avgOpenRate:0,amount:0,totalUnitsDiscounted:0,avgOpenRateDiscounted:0,amountDiscounted:0,avgOpenRateTotal:0}}function e(t,e,i,s,a){this.positions=i,this.avgOpenRate=0,this.totalUnits=0,this.amount=0,this.avgOpenRateDiscounted=0,this.totalUnitsDiscounted=0,this.amountDiscounted=0,this.avgOpenRateTotal=0,this.isBuy=t,this.tradingCalculator=s,this.executionCalculator=a,this.instrument=e;var u=n(this.positions);this.avgOpenRate=u.avgOpenRate,this.totalUnits=u.totalUnits,this.amount=u.amount,this.avgOpenRateDiscounted=u.avgOpenRateDiscounted,this.totalUnitsDiscounted=u.totalUnitsDiscounted,this.amountDiscounted=u.amountDiscounted,this.avgOpenRateTotal=u.avgOpenRateTotal}function i(s,a){this.instrument=s;var u=[],o=[];t.each(a,function(t){t.IsBuy?u.push(t):o.push(t)},this),this.buy=new e(!0,s,u,i.tradingCalculator,i.executionCalculator),this.sell=new e(!1,s,o,i.tradingCalculator,i.executionCalculator),this.avgOpenRate=n(a).avgOpenRateTotal,this.avgLeverage=this._calculateAvgLeverage(a),this.netUnits=this._calculateNetUnits(a)}return e.prototype={get profit(){return this._calculatePL()},getCurrentRate:function(){return this.EndRate?this.EndRate:this.isBuy?this.instrument.Price(!1):this.instrument.AskRounded(this.IsDiscounted)},getDiscountedCurrentRate:function(){return this.EndRate?this.EndRate:this.instrument.rateDiscounted&&this.instrument.rateDiscounted.Ask&&this.instrument.rateDiscounted.Bid?this.isBuy?this.instrument.rateDiscounted.Bid:this.instrument.rateDiscounted.Ask:0},_calculatePL:function(){return this.positions?this.positions.reduce(function(t,n){return t+n.Profit},0):0}},i.prototype={get amount(){return this.buy.amount+this.sell.amount+this.buy.amountDiscounted+this.sell.amountDiscounted},get profit(){return this.buy.profit+this.sell.profit},get gain(){return 0===this.amount?0:this.profit/this.amount*100},get equity(){return this.profit+this.amount},_calculateAvgLeverage:function(n){if(!n)return 0;var e=0,i=0;return t.each(n,function(t){e+=t.Units*t.Leverage,i+=t.Units}),0===i?0:e/i},_calculateNetUnits:function(n){return n?t.reduce(n,function(t,n){return t+n.Units*(n.IsBuy?1:-1)},0):0}},i.$factory=["bl.factories.trading.execution.tradingCalculator","bl.factories.trading.execution.executionCalculator",function(n,e){return t.extend(i,{tradingCalculator:n,executionCalculator:e}),function(t,n){return new i(t,n)}}],i});define(rA[420][0],["angular","underscore",rA[474][0]],function(t,e,i){"use strict";function n(t,n,o){i.call(this,t,n,o),this.recalculate(),this.InstrumentID=n.InstrumentID,this.Instrument=n,this.IsStock=n.IsStock,this.GroupName=n.Name,this.Url=("/portfolio/breakdown/"+this.GroupName).toLowerCase(),this.IsStock&&e.each(this.Positions,function(t){t.IsStock=!0,t.Amount=t.Amount||t.UnitsBaseValueDollars})}return n.prototype={get Type(){return"positionsGroup"},get TradeItem(){return this.Instrument},get TotalInvestedAmount(){return this.Amount},get TotalProfit(){return this._positionsByGroupMap[this.InstrumentID]?this._positionsByGroupMap[this.InstrumentID].profit:0},get TotalProfitPercent(){return this.TotalProfit/this.TotalInvestedAmount*100},get TotalGain(){return this._positionsByGroupMap[this.InstrumentID]?this._positionsByGroupMap[this.InstrumentID].gain:0},get Equity(){return this._positionsByGroupMap[this.InstrumentID]?this._positionsByGroupMap[this.InstrumentID].equity:0},get LeverageAvg(){return this._positionsByGroupMap[this.InstrumentID]?this._positionsByGroupMap[this.InstrumentID].avgLeverage:0},get LeverageAvgSort(){return this._positionsByGroupMap[this.InstrumentID]?Math.abs(this._positionsByGroupMap[this.InstrumentID].avgLeverage):0},get NetUnits(){return this._positionsByGroupMap[this.InstrumentID]?this._positionsByGroupMap[this.InstrumentID].netUnits:0},get NetUnitsSort(){return this._positionsByGroupMap[this.InstrumentID]?Math.abs(this._positionsByGroupMap[this.InstrumentID].netUnits):0},get AverageOpenRate(){return this._positionsByGroupMap[this.InstrumentID]?this._positionsByGroupMap[this.InstrumentID].avgOpenRate:0},get AverageOpenRateSort(){return this._positionsByGroupMap[this.InstrumentID]?this._positionsByGroupMap[this.InstrumentID].avgOpenRate:0},closePositions:function(){e.each(this.Positions,function(t){t.close()})},closeAllPositions:function(t){var i=this,n=this.getPortfolio(),o={};return this.$q(e.bind(function(s,r){var a=e.pluck(this.Positions,"PositionID");if(!a||0===a.length)return i.$injector.get("bl.factories.trading.portfolioNotificationsService").positionsGroupPendingCloseFailed({InstrumentName:i.Instrument.SymbolFull}),i.$log.error("Error closing All position,  All of your "+i.Instrument.SymbolFull+" positions are already pending to close."),r({});var u={positionsIDs:a,numOfPositions:this.Positions.length,instrumentType:this.Instrument.instrumentType.InstrumentTypeDescription,totalPnl:this.TotalProfit,name:this.Instrument.DisplayName,amount:0,id:this.Instrument.InstrumentID,itemType:this.Instrument.Type};if(!u)return r({}),void i.$log.error("Error closing All position - model is undefined");this.Positions.forEach(function(t){u.amount+=t.Amount}),this._logEvent("Close All - Attempt",u);var c={ClientViewRate:this.TradeItem.isUsTrade?this.TradeItem.BidRounded():this.TradeItem.lastPrice(),ClientViewRateID:this.TradeItem.rate.PriceRateID,ClientRateForCalc:this.TradeItem.isUsTrade?this.TradeItem.BidRounded():this.TradeItem.lastPrice(),ClientRateForCalcID:this.TradeItem.rate.PriceRateID};return this.TradeItem.isUsTrade?(o={InstrumentID:this.TradeItem.InstrumentID,PositionIds:a,UnitsToDeduct:0,ViewRateContext:c},void i.$injector.get("bl.factories.trading.orderForCloseService").closeAll(o,n,this.Positions,this.NetUnits,u.amount,this.TradeItem)):(o={InstrumentID:this.TradeItem.InstrumentID,ViewRateContext:c,PositionIDs:u.positionsIDs,ClientViewRateBid:i.Instrument.rate.lastPrice,ClientViewRateAsk:i.Instrument.rate.lastAskPrice},e.extend(o,t||{}),void this.$http({method:"Post",url:n.api+"/positions/bulk-delete",categories:["userTradingAction"],isArray:!1,data:o,logData:{action:"CloseAllPositionsRequest"}}).success(function(t){i._logEvent("Close All - Success",u),i._eCommerceLogEvent("Close All - Success",u,"Close","Success"),s(t.data)}).error(e.bind(function(t){i.$injector.get("bl.factories.trading.portfolioNotificationsService").positionsGroupCloseAllFailed({InstrumentName:i.Instrument.DisplayName}),i._logEvent("Close All - Error",u),r({}),i.$log.error("Error closing All position",t)})))},this))},recalculate:function(){i.prototype.recalculate.call(this),this.FirstOpenDate=e.min(this.Positions,function(t){return t.OpenDateTime}).OpenDateTime,this.TotalFees=0,e.each(this.Positions,function(t){this.TotalFees+=t.TotalFees},this)},_logEvent:function(t,e){e&&n.$analytics.eventTrack(t,{"Number of Trades":e.numOfPositions,"Instrument Name":e.instrumentName,"Instrument Type":e.instrumentType,"Total PnL":e.totalPnl,"Trades IDs":e.positionsIDs,"Search ObjectID":e.id&&e.id.toString(),"Search Item Type":e.itemType})},_eCommerceLogEvent:function(t,e,i,o){return e?void n.ecommerceTracking.track(t,{totalPnl:e.totalPnl,name:e.name,id:e.id,action:i,label:o,dimension71:e.instrumentType,amount:e.amount}):!1}},n.$factory=["$rootScope","$analytics","$injector","infrastruct.services.config","infrastruct.services.ecommerceTrackingService",function(t,i,o,s,r){return e.extend(n,{$rootScope:t,$analytics:i,$injector:o,config:s,ecommerceTracking:r}),function(t){return new n(t)}}],n.inheritsFrom(i),n});define(rA[481][0],["angular","underscore",rA[474][0],rA[422][0],rA[421][0],rA[420][0]],function(t,r,o,i,e,s){"use strict";function n(t,i,e){o.call(this,t,i,e),this.PositionsGroupsMap={},this.PositionsGroups=[],this.CopyHistory=[],this.Orders=[],this.user=i,this.GroupName=i.username||"",this.Url=("/portfolio/breakdown/"+this.GroupName).toLowerCase(),this.isFund=!1,this.EntryOrders&&r.each(this.EntryOrders,function(t){t.isEntryOrder=!0,this.addOrder(t)},this),this.allowDetach=!1,i.gcid&&this.$injector.get("bl.factories.trading.mirror-configurations.mirrorConfigurationsService").getMirrorConfigurationsData(i.gcid).then(function(t){t&&(this.allowDetach=t.AllowDetach)}.bind(this)),this.ExitOrders&&r.each(this.ExitOrders,function(t){var o=r.find(this.Positions,function(r){return r.PositionID===t.PendingClosePositionID});o&&(o.isPendingClose=!0,o.OrderID=t.OrderID,t.SubType="ExitOrder",this.addOrder(t,o))},this),this.OrdersForClose&&r.each(this.OrdersForClose,function(t){var o=r.find(this.Positions,function(r){return r.PositionID===t.PositionID});o&&(o.isPendingClose=!0,o.isOrderForClose=!0,o.isClosedRequested=!0,o.OrderID=t.OrderID)},this),this.syncPositionsGroups(),this.recalculate()}return n.prototype={getSubGroupByName:function(t){return t?this.PositionsGroupsMap[t.toLowerCase()]:null},syncPositionsGroups:function(){var t,o,i;this.PositionsGroups.length=0,this.PositionsGroupsMap={},o=r.groupBy(this.Orders,function(t){return t.InstrumentID})||{},t=r.groupBy(this.Positions,function(t){return t.InstrumentID})||{},i=r.difference(Object.keys(o),Object.keys(t)),r.each(t,function(t,r){var i=new s({Positions:t},t[0].Instrument,this.getPortfolio());i.Url=this.Url+"/"+i.GroupName.toLowerCase(),i.Orders=o[r]?o[r]:[],i.recalculate(),this.PositionsGroups.push(i),this.PositionsGroupsMap[i.GroupName.toLowerCase()]=i},this),r.each(i,function(t){var r=o[t],i=new s({Positions:[]},r[0].Instrument,this.getPortfolio());i.Url=this.Url+"/"+i.GroupName.toLowerCase(),i.Orders=r,this.PositionsGroups.push(i),this.PositionsGroupsMap[i.GroupName.toLowerCase()]=i},this)},get Type(){return"mirrorGroup"},get SubType(){return"mirror"},get AverageOpenRateSort(){return null},get NetUnitsSort(){return null},get TradeItem(){return this.user},get TotalInvestedAmount(){return this.InitialInvestment+this.DepositSummary-this.WithdrawalSummary},get TotalProfitPercent(){return this.TotalProfitAndClosedPL/this.TotalFundsInvested*100},get TotalFundsInvested(){return this.InitialInvestment+this.DepositSummary},get MoneyInOut(){return this.DepositSummary-this.WithdrawalSummary},get IsEquityHighlighted(){return this.Equity<this.StopLossAmount*(2-this.StopLossPercentage/100)},get FirstOpenDate(){return null},get CalculatedStopLossPercentage(){return 100-this.StopLossPercentage},get CalculatedStopLossAmount(){return this.StopLossAmount/(this.StopLossPercentage/100)*((100-this.StopLossPercentage)/100)},get TotalGain(){return this.TotalProfitAndClosedPL/(this.InitialInvestment+this.DepositSummary)*100},get Equity(){return this.Amount+this.TotalProfit},get ClosedPL(){return this.ClosedPositionsNetProfit},get isMirrorPendingClose(){return this.PendingForClosure},get isMirrorPendingOpen(){var t=this.DelayedOrderForOpen&&this.DelayedOrderForOpen.length>0||this.OrdersForOpen&&this.OrdersForOpen.length>0;return"mirror"===this.SubType&&t&&this.$rootScope.session.isUsUser()&&!this.PendingForClosure},get isInAlignment(){return 3===this.MirrorStatusID},get isUnrealizedEnabled(){return"mirror"===this.SubType&&1===this.MirrorCalculationType&&n.config.dynamics.trading.mirrorConfig.isUnrealizedEnabled},get TotalProfitAndClosedPL(){return this.TotalProfit+this.ClosedPL},get TotalOpenGain(){return 0===this.TotalOpenAmount?0:this.TotalProfit/this.TotalOpenAmount*100},get TotalOpenAmount(){return this.Amount-this.AvailableAmount},get TotalFees(){return this.InitialInvestment+this.DepositSummary-this.WithdrawalSummary+this.ClosedPositionsNetProfit-this.Amount},updateCopyAmount:function(t,o,i){var e=this.getPortfolio(),s={MirrorID:this.MirrorID,AmountDelta:t,AllocateAmountDeltaToPositions:i,ParentCID:this.ParentCID};return r.extend(s,o||{}),this.$http({method:"Post",url:e.api+"/mirrors/"+this.MirrorID+"/update",actionUrl:e.api+"/mirrors/:mirrorId/update",isArray:!1,data:s,logData:{action:"updateCopyAmountMirrorRequest"}}).success(function(){e.watchAndReportAction("Execution.updateCopyAmount",arguments)}).error(r.bind(function(t){this.$log.error("Error updating mirror updateCopyAmount",t)},this))},updateStopLossAmount:function(t,o){return this.$q(r.bind(function(i,e){var s=this.getPortfolio(),n=t-this.StopLossPercentage,u={MirrorID:this.MirrorID,StopLossPercentageDelta:n,ParentCID:this.ParentCID};r.extend(u,o||{}),this.$http({method:"Post",url:s.api+"/mirrors/"+this.MirrorID+"/update",actionUrl:s.api+"/mirrors/:mirrorId/update",isArray:!1,data:u,logData:{action:"updateStopLossAmountMirrorRequest"}}).success(function(t){s.watchAndReportAction("Execution.updateStopLossAmount",arguments),i(t)}).error(r.bind(function(t){e({}),this.$log.error("Error updating mirror stoploss",t)},this))},this))},pauseCopy:function(t){return this.$q(r.bind(function(o,i){var e=this.getPortfolio(),s={MirrorID:this.MirrorID,PauseCopy:!this.IsPaused,ParentCID:this.ParentCID};r.extend(s,t||{}),this.$http({method:"Post",url:e.api+"/mirrors/"+this.MirrorID+"/update",actionUrl:e.api+"/mirrors/:mirrorId/update",isArray:!1,data:s,logData:{action:"updateMirrorStatusRequest"}}).success(function(t){e.watchAndReportAction("Execution.pauseCopy",arguments),o(t)}).error(r.bind(function(t,r,o,e){i({}),this.$log.error("Error pause copy",t,e)},this))},this))},closeCopy:function(t,o){return this.$q(r.bind(function(i,e){var s=this.getPortfolio(),n={MirrorID:this.MirrorID,name:this.GroupName,amount:this.Amount};r.extend(n,t||{}),this.$http({method:"delete",url:s.api+"/mirrors/"+this.MirrorID+"?isDetach="+!!o,actionUrl:s.api+"/mirrors/:mirrorId",isArray:!1,data:n,logData:{action:"closeCopyMirrorRequest"}}).success(function(t){s.watchAndReportAction("Execution.closeCopy",arguments),s.eCommerceLogEvent("Close Copy - Success",{category:"Copy",amount:{amount:n.amount},instrument:{ItemId:n.MirrorID,Name:n.name},action:"close",label:"Success"},"Close","Success"),i(t)}).error(r.bind(function(t,r,o,i){e({}),this.$log.error("Error close copy",t,r,o,i)},this))},this))},addOrder:function(o,i){var s=r.findWhere(this.Orders,{OrderID:o.OrderID});if(s)t.extend(s,o);else{i&&(Object.assign(o,i),delete o.isPendingClose);var n=this.getPortfolio();this.Orders.push(new e(o,n))}},removeOrder:function(t){for(var r=0;r<this.Orders.length;r++)if(this.Orders[r].OrderID===t){this.Orders.splice(r,1);break}},removeOrderByTypeAndId:function(t,r){if(this[t]){var o=this[t].findIndex(function(t){return t.OrderID===r});o>-1&&this[t].splice(o,1)}},getCopyHistory:function(t,o,i){return this.$q(r.bind(function(e,s){n.privateHistoryFacade.getMirrorHistoryByMirrorId(this.MirrorID,this.user.ItemId,t,o,i).subscribe({next:r.bind(function(t){Array.prototype.push.apply(this.CopyHistory,t),e(t)},this),error:r.bind(function(t,r,o,i){this.$log.error("Error mirrors-history",t,r,o,i),s()},this)})},this))},get isCopiedBlocked(){if(!this.user)return!1;var t;return this.user.CustomerRestrictions&&(t=r.where(this.user.CustomerRestrictions,{RestrictionTypeID:2}),t.length>0)?r.findWhere(t,{ReasonID:2})||t[0]:this.user.optOut?{RestrictionTypeID:2,ReasonID:4}:!1}},n.$factory=["$rootScope","$injector","bl.factories.history.privateHistoryFacade","infrastruct.services.config",function(t,o,i,e){return r.extend(n,{$rootScope:t,$injector:o,privateHistoryFacade:i,config:e}),function(t,r,o){return new n(t,r,o)}}],n.inheritsFrom(o),n});define(rA[421][0],["angular","underscore",rA[280][0]],function(t,e,r){"use strict";function i(t,e,r,i){var n;return n=r.ErrorCode?new AppError(t,"portfolio",e+"_"+r.ErrorCode,null):new AppError(t,"portfolio","UnExpectedError",null,r,i)}function n(t,e){this.set(t),this.getPortfolio=function(){return e},this._hashSyncPropertires=["Amount","ExecutionType","InstrumentID","Leverage","Rate","StopLossRate","TakeProfitRate","Units","TakeProfitPercentage","StopLossPercentage"]}return n.prototype={get isNoSL(){if(this.IsBuy&&this.Instrument){if(this.isEntryOrder&&100===Math.abs(this.StopLossPercent))return!0;var t=n.tradingCalculator.calculateRate(0,1,this.Instrument._Precision);if(this.StopLossRate<=t)return!0}return!1},get isNoTP(){if(this.Instrument)if(this.IsBuy){if(this.isEntryOrder&&0===this.TakeProfitPercent)return!0;if(0===this.TakeProfitRate)return!0}else{var t=n.tradingCalculator.calculateRate(0,1,this.Instrument._Precision);if(this.TakeProfitRate<=t)return!0}return!1},get _hashIdentifier(){return JSON.stringify(this)},get UniqueId(){return this.Type+"-"+this.OrderID},get Type(){return"order"},get OrderSubType(){return this.SubType||"order"},get Instrument(){return n.instrumentsFactory.getById(this.InstrumentID,!0,!0)},get Change(){return this.Instrument&&void 0!==this.Rate&&null!==this.Rate?n.tradingCalculator.calculatePips(this.Instrument,this.Rate,this.CurrentRate):null},get StopLossAmount(){return this.isEntryOrder?-1*this.Amount*this.StopLossPercentage/100:this.Instrument?n.executionCalculator.getAmountFromRate(this._model,this.Rate,this.StopLossRate):0},get StopLossPercent(){return this.isEntryOrder?-1*this.StopLossPercentage:this.StopLossAmount/this.Amount*100},get TakeProfitAmount(){return this.isEntryOrder?this.Amount*this.TakeProfitPercentage/100:this.Instrument?n.executionCalculator.getAmountFromRate(this._model,this.Rate,this.TakeProfitRate):0},get TakeProfitPercent(){return this.isEntryOrder?this.TakeProfitPercentage:this.TakeProfitAmount/this.Amount*100},get _model(){return{amount:{amount:this.Amount},isBuy:this.IsBuy,instrument:this.Instrument,position:{Units:this.Units,PositionID:99}}},get CurrentRate(){var t=this.IsDiscounted&&this.Instrument.rateDiscounted?this.Instrument.rateDiscounted:this.Instrument.rate;return this.IsBuy?t.Ask:t.Bid},set:function(t){e.extend(this,t)},close:function(t){return this.$q(e.bind(function(r,i){var n=this.getPortfolio(),o=this,s={OrderID:this.OrderID};e.extend(s,t||{}),this.$http({method:"Delete",url:n.api+"/Orders/"+this.OrderID,actionUrl:n.api+"/Orders/:OrderID",isArray:!1,params:s,logData:{action:"CancelOrderRequest"}}).success(function(t){o.isClosedRequested=!0,n.watchAndReportAction("Execution.orderClose",arguments),o.$rootScope.$emit("Trading.Order.CloseRequested",o),r(t.data)}).error(e.bind(function(t,e,r,n){i({}),this.$log.error("Error closing order",t,e,r,n)},this))},this))},closeEntryMarketOrder:function(t){return this.$q(e.bind(function(r,n){var o=this.getPortfolio(),s=this,a={OrderID:this.OrderID};e.extend(a,t||{}),this.$http({method:"Delete",url:o.api+"/entry-orders/"+this.OrderID,actionUrl:o.api+"/entry-orders/:OrderID",isArray:!1,data:a,logData:{action:"CancelEntryOrderRequest"}}).success(function(t){s.isClosedRequested=!0,o.watchAndReportAction("Execution.closeEntryMarketOrder",arguments),order.$rootScope.$emit("Trading.Order.CloseRequested",order),r(t.data)}).error(e.bind(function(t,e,r,o){n(i("Tapi Error: Error close Entry Market Order","closeEntryMarketOrder",t,e,r,o))},this))},this))},cancelCloseExitMarketOrder:function(t){var r=this,n={PendingClosePositionID:this.PositionID};return e.extend(n,t||{}),this._logEventCancelCloseExitMarketOrder("Cancel Close Exit Market Order Trade - Attempt",n),this.$q(e.bind(function(t,o){var s=this.getPortfolio();this.$http({method:"Delete",url:s.api+"/exit-orders/"+this.OrderID,categories:["userTradingAction"],actionUrl:s.api+"/exit-orders/:OrderID",isArray:!1,data:n,logData:{action:"CancelExitOrderRequest"}}).success(function(e){r.isClosedRequested=!0,s.watchAndReportAction("Execution.cancelCloseExitMarketOrder",arguments),r._logEventCancelCloseExitMarketOrder("Cancel Close Exit Market Order Trade - Success",n),r.$rootScope.$emit("Trading.Order.CloseRequested",r),t(e.data)}).error(e.bind(function(t,e,a,c){this.$rootScope.$emit("Trading.Failure.ExitOrder.Close",r,{Topic:s.account.topic}),r._logEventCancelCloseExitMarketOrder("Cancel Close Exit Market Order Trade - Error",n),o(i("Tapi Error: Error cancel Close Exit Market Order","cancelCloseExitMarketOrder",t,e,a,c))},this))},this))},_logEventCancelCloseExitMarketOrder:function(t,e){this.$analytics.eventTrack(t,{"Position ID":e.PendingClosePositionID})}},n.inheritsFrom(r),n.$factory=["bl.factories.trading.instruments.instrumentsFactory","bl.factories.trading.execution.tradingCalculator","bl.factories.trading.execution.executionCalculator",function(t,r,i){return e.extend(n,{instrumentsFactory:t,tradingCalculator:r,executionCalculator:i}),function(t,e,r){return new n(t,e,r)}}],n});define(rA[484][0],["angular","underscore",rA[280][0],rA[421][0],rA[420][0],rA[481][0],rA[453][0]],function(r,t,o,i,n,e,s){"use strict";function u(r){this.groups=[],this.orders=[],this.positions={},this.manualPositions=[],this._groupsByTradeItem={},this._groupsByTradeItemName={},this._data=r;var o=this;u.$rootScope.$on("portfolio:position:edit:success",function(r,i){var n=t.find(o.manualPositions,function(r){return r.PositionID===i.position.PositionID});if(n)switch(i.field){case"StopLossRate":n.StopLossRate=i.position.StopLossRate;break;case"TakeProfitRate":n.TakeProfitRate=i.position.TakeProfitRate}})}function a(r,o,i){return this.$q(t.bind(function(n){return r&&0!==r.length?(t.each(r,t.bind(function(r){var n,e=o;r.MirrorID>0&&(n=t.find(i,function(t){return t.MirrorID===r.MirrorID}),n&&(e=n.Positions));var s=t.find(e,function(t){return t.PositionID===r.PendingClosePositionID});s&&(r.UnitsToDeduct>0?(s.isPartialPendingClose=!0,s.isPendingClose=!0):s.isPendingClose=!0,s.OrderID=r.OrderID,r.SubType="ExitOrder",n?n.addOrder(r,s):this.addOrder(r,s))},this)),void n()):void n()},this))}function d(r){return this.$q(t.bind(function(o){t.each(r,function(r){if(r.isEntryOrder=!0,r.SubType="EntryOrder",r.MirrorID>0){var t=this.findGroupWhere({MirrorID:r.MirrorID});t&&t.addOrder(r)}else this.orders.push(new i(r,this))},this),o()},this))}function c(r){return this.$q(t.bind(function(o,i){if(!r||0===r.length)return void o();var n=t.pluck(r,"ParentCID");u.usersFactory.getByIds(n).then(t.bind(function(i){t.each(r,function(r){i[r.ParentCID]?this._addGroup(i[r.ParentCID],r):$log.error("initMirrors:  no user was found for mirror.ParentCID = ",r.ParentCID)},this),o()},this))["catch"](function(r){i(new AppError("Error loading mirrors users","portfolioFactory","UnExpectedError",null,r))})},this))}function p(r){return this.$q(t.bind(function(o){if(!r||0===r.length)return void o();var i=t.groupBy(r,function(r){return r.InstrumentID})||[];t.each(i,function(r,t){var o=u.instrumentsFactory.getById(t,!0,!0);o?this._addGroup(o,{Positions:r}):this.$log.error("initPositions:  no instrument was found for instrumentId = ",t)},this),o()},this))}function l(r){t.each(r,function(r){var t=u.instrumentsFactory.getById(r.InstrumentID,!0,!0);r.SubType="RateOrder",t?this.orders.push(new i(r,this)):this.$log.error("Order - instrument not exists "+r.InstrumentID)},this)}function h(r){t.each(r,function(r){var t=u.instrumentsFactory.getById(r.InstrumentID,!0);r.SubType="OrderForOpen",t?this.orders.push(new i(r,this)):this.$log.error("OrdersForOpen - instrument not exists "+r.InstrumentID)},this)}function f(r,o){t.each(r,function(r){r.SubType="OrderForClose";var i=t.find(o,function(t){return t.PositionID===r.PositionID});i?(this.addOrder(r,i),i.isClosedRequested=!0,i.isPendingClose=!0,i.isOrderForClose=!0,i.OrderID=r.OrderID,r.UnitsToDeduct&&(i.isPartialPendingClose=!0)):this.$log.error("OrderForClose - position not exists "+r.PositionID)},this)}function m(r,o){t.each(r,function(r){var t;r.PendingClosePositionIDs.forEach(function(i){var n=o.find(function(r){return r.PositionID===i});return n?(n.OrderID=r.OrderID,n.isOrderForClose=!0,n.isClosedRequested=!0,n.isPendingClose=!0,void(t?(t.Amount+=n.Amount,t.Units+=n.Units):(t=Object.assign({},n),t.CurrentRate=n.CurrentRate))):void this.$log.error("initOrdersForCloseAll - position is not exist "+i)}),r.SubType="OrderForClose",this.addOrder(r,t||{})},this)}return u.prototype={init:function(){return this.$q(t.bind(function(r,o){var i=this._data.Mirrors,n=this._data.Positions,e=this._data.ExitOrders,s=this._data.EntryOrders,u=this._data.Orders,I=this._data.OrdersForOpen,g=this._data.OrdersForClose,y=this._data.OrdersForCloseMultiple;delete this._data,l.call(this,u),h.call(this,I),f.call(this,g,n),m.call(this,y,n),this.$q.all(a.call(this,e,n,i)).then(t.bind(function(){this.$q.all(c.call(this,i),p.call(this,n)).then(d.call(this,s)).then(r)["catch"](function(r){o(new AppError("Error init portfolio","Portfolio Model init","UnExpectedError",null,r))})},this))["catch"](function(r){o(new AppError("Error init portfolio","Portfolio Model init","UnExpectedError",null,r))})},this))},getPositionById:function(r){return this.positions[r]},getManualTrades:function(){return this.manualPositions},getMirrorById:function(r){return t.find(this.groups,function(t){return t.MirrorID&&t.MirrorID===r})},_addGroup:function(r,o){var i=null,a={instrument:n,user:e},d={fund:s};if(r&&a[r.Type]&&o){var c=d[r.SubType]?d[r.SubType]:a[r.Type];i=new c(o,r,this),t.each(i.Positions,function(r){r.MirrorID&&r.ParentPositionID||-1!==this.manualPositions.indexOf(r)||this.manualPositions.push(r),this.positions[r.PositionID]=r},this),this._groupsByTradeItem[r.uniqueId]=i,this._groupsByTradeItemName[i.GroupName.toLowerCase()]=i,this.groups.push(i)}else this.$log.error("portfolio unable to create group. ",r,o);return u.$rootScope.$emit("portfolio:group:added",i),i},_removeGroup:function(r){var t=this.groups.indexOf(r);-1!=t?this.groups.splice(t,1):this.$log.warn("portfolio _removeGroup: Unable to find group in groups",r.Type,"mirrorGroup"===r.Type?r.user.uniqueId:r.Instrument.uniqueId),"mirrorGroup"===r.Type?delete this._groupsByTradeItem[r.user.uniqueId]:"positionsGroup"===r.Type?delete this._groupsByTradeItem[r.Instrument.uniqueId]:this.$log.error("portfolio _removeGroup: Wrong group Type",r),delete this._groupsByTradeItemName[r.GroupName.toLowerCase()],u.$rootScope.$emit("portfolio:group:removed",r)},getGroupByTradeItem:function(r){return this._groupsByTradeItem[r.uniqueId]},getGroupByUniqueId:function(r){return this._groupsByTradeItem[r]},findGroupWhere:function(r){return r?t.findWhere(this.groups,r):null},filterGroupsByType:function(r,o){return"mirrorGroup"===r?t.filter(this.groups,function(t){return t.Type===r&&(!o||t.SubType===o)}):t.filter(this.groups,function(t){return t.Type===r&&(!o||t.Instrument.TypeID===parseInt(o))})},getGroupByName:function(r){return t.isString(r)?this._groupsByTradeItemName[r.toLowerCase()]:void 0},syncInstruments:function(){this._instruments=null},getInstruments:function(){return this._instruments||(this._instruments=t.chain(this.positions).map(function(r){return r.Instrument}).unique().value()),this._instruments}},u.inheritsFrom(o),u.$factory=["$log","$rootScope","$analytics","bl.factories.trading.instruments.instrumentsFactory","bl.factories.trading.users.usersFactory","infrastruct.services.ecommerceTrackingService",function(r,o,i,n,e,s){return t.extend(u,{$rootScope:o,$analytics:i,$log:r,instrumentsFactory:n,usersFactory:e,ecommerceTracking:s}),function(r,t){return new u(r,t)}}],u});define(rA[453][0],["angular","underscore",rA[481][0],rA[420][0]],function(o,t,s,r){"use strict";function i(o,t,r){s.call(this,o,t,r),this.PositionsGroupsMap={},this.PositionsGroups=[],this.isFund=!0,this.ordersGroupsMap={},this.syncPositionsGroups()}return i.prototype={get UniqueId(){return this.SubType+"Group-"+this.GroupName},get SubType(){return"fund"},get isFundPendingClose(){return this.PendingForClosure},syncPositionsGroups:function(){var o,s,i;this.PositionsGroups.length=0,this.PositionsGroupsMap={},s=t.groupBy(this.Orders,function(o){return o.InstrumentID})||{},o=t.groupBy(this.Positions,function(o){return o.InstrumentID})||{},i=t.difference(Object.keys(s),Object.keys(o)),t.each(o,function(o,t){var i=new r({Positions:o},o[0].Instrument,this.getPortfolio());i.Url=this.Url+"/"+i.GroupName.toLowerCase(),i.Orders=s[t]?s[t]:[],i.recalculate(),this.PositionsGroups.push(i),this.PositionsGroupsMap[i.GroupName.toLowerCase()]=i},this),t.each(i,function(o){var t=s[o],i=new r({Positions:[]},t[0].Instrument,this.getPortfolio());i.Url=this.Url+"/"+i.GroupName.toLowerCase(),i.Orders=t,this.PositionsGroups.push(i),this.PositionsGroupsMap[i.GroupName.toLowerCase()]=i},this)},getSubGroupByName:function(o){return o?this.PositionsGroupsMap[o.toLowerCase()]:null}},i.inheritsFrom(s),i});define(rA[491][0],["angular","underscore",rA[484][0],rA[421][0],rA[420][0],rA[481][0],rA[376][0],rA[440][0]],function(e,t,r,n,i,o,s,a){"use strict";function u(e,t,r,n){var i;return i=r&&r.ErrorCode?new AppError(e,"portfolio",t+"_"+r.ErrorCode,null):new AppError(e,"portfolio","UnExpectedError",null,r,n)}function c(e,t,n,i,o){var s=l();r.$analytics.eventTrack(e,{Amount:t.amount.amount,AmountInUnits:t.amount.units,openByUnits:t.openByUnits,Leverage:t.risk.amount,"Stop Loss":t.stopLoss.amount,"Take Profit":t.takeProfit.amount,Rate:t.viewRate,"Order or Trade?":t.marketMode===t.marketModeOptions.active?"Trade":"Order","Buy or Sell?":t.isBuy?"Buy":"Sell","Instrument Type":t.instrument.instrumentType.InstrumentTypeDescription,"OneClick?":s&&s.isEnabled()&&!!s.getInstrumentSettings(t.instrument.InstrumentID),isDiscounted:n,action:e,isExpressCheckout:t.isExpressCheckout,instrumentName:t.instrument.Name,instrumentId:t.instrument.ItemId,category:i,label:o,"Search Item Type":t.instrument.Type,"Search ObjectID":t.instrument.InstrumentID.toString()},i,o)}function d(e,t){this.account=e,this.orders=[],this.lostPositionsManager=new s,this._mirrorValidationsPromise=null,r.call(this,t),this.balance=t.Credit;var n=this;d.$rootScope.$on("portfolio:sync:start",function(){n.signPromises&&n.signPromises()})}var l=function(){return d.injector.get("bl.factories.trading.oneClickTrading")},p={};return d.prototype={get balance(){return this._balance},set balance(e){if(!t.isNumber(e))throw"Value not a number";this._balance=e},get availibleToTrade(){return this.balance-this.ordersTotalAmount},get totalInvestedAmount(){var e=0;return t.reduce(this.groups,function(t,r){return e="mirrorGroup"===r.Type?r.Amount-r.ClosedPositionsNetProfit:r.TotalInvestedAmount,t+e},this.ordersTotalAmount||0)},get totalProfit(){return t.reduce(this.groups,function(e,t){return e+(t.TotalProfitAndClosedPL||t.TotalProfit)},0)},get equity(){return t.reduce(this.groups,function(e,t){return e+t.Equity},this._balance)},get totalGain(){return 0===this.totalInvestedAmount?0:this.totalProfit/this.totalInvestedAmount*100},get api(){return"/sapi/trade-"+this.account.type.toLowerCase()},get dataApi(){return"/sapi/trade-data-"+this.account.type.toLowerCase()},get ordersTotalAmount(){return this.orders?t.reduce(this.orders,function(e,t){return"OrderForClose"===t.SubType||"ExitOrder"===t.SubType?e:e+(t.Amount||0)},0):0},get totalInvestedAmountIncludingMirrorsProfit(){return t.reduce(this.groups,function(e,t){var r="mirrorGroup"===t.Type?t.Amount:t.TotalInvestedAmount;return e+r},this.ordersTotalAmount||0)},get realizedEquity(){return this.availibleToTrade+this.totalInvestedAmountIncludingMirrorsProfit},getPendingOrdersByInstrumentId:function(e){var t={all:[],pendingOpen:[],pendingClose:[]};return this.orders.forEach(function(r){r.InstrumentID!==e||"OrderForOpen"!==r.SubType&&"OrderForClose"!==r.SubType||("OrderForOpen"===r.SubType?t.pendingOpen.push(r):t.pendingClose.push(r),t.all.push(r))}),t},signPromises:function(){for(var e in p)p[e].afterSync=!0},watchAction:function(e,t,r,n){var i=e.Token;if(i){var o=d.injector.get("infrastruct.services.push.push"),s=p[i]={token:i},a=this.account&&this.account.topic,u=a?o.isSubscribed(a):!1,c=o.isConnected();return s.promise=this.$q(function(e,t){function r(e){return function(){e.apply(this,arguments),o&&clearTimeout(o)}}s.resolve=r(e),s.reject=r(t);var o,l=s.requestId=n.requestId;o=setTimeout(function(){var e=d.injector.get("infrastruct.services.push.push"),r=a?e.isSubscribed(a):!1,n=e.isConnected();s.hadTimeout=!0,t({requestId:l,timeout:!0,afterSync:s.afterSync,Success:!1,tapiGuid:i,isConnected:c,isConnectedOnTimeout:n,isSubscribed:u,isSubscribedOnTimeout:r})},2e4)})}},watchAndReportAction:function(e,r){function n(r){var n={Categories:["pushEvent","userTradingAction"],Message:e,CID:d,WhichSession:"current",Performance:{Timing:new Date-u},Request:{Id:r.requestId},PushEventData:r.data,PushTimeout:!0,PushAfterTimeout:!0};r.isSuccess||t.extend(n,{PushTimeoutAfterSync:!!r.afterSync,PushEventData_RequestToken:r.tapiGuid}),s.$log.logJSON("info","log",n),a.manualPerformance("timing",e,new Date-u)}function i(t){s.$log.logJSON("info","log",{Categories:["pushEvent","userTradingAction"],Message:e,CID:d,WhichSession:"current",Performance:{Timing:new Date-u},Request:{Id:t.requestId},PushEventData:t.data,PushTimeout:!1}),a.manualPerformance("timing",e+".success",new Date-u)}function o(t){s.$log.logJSON("error","log",{Message:e,Categories:["pushEvent","userTradingAction"],Request:{Id:t.requestId},CID:d,WhichSession:"current",Performance:{Timing:new Date-u},PushEventData:t.data,PushTimeout:!!t.timeout,PushTimeoutAfterSync:!!t.afterSync,PushEventData_RequestToken:t.tapiGuid,isConnected:t.isConnected,isConnectedOnTimeout:t.isConnectedOnTimeout,isSubscribed:t.isSubscribed,isSubscribedOnTimeout:t.isSubscribedOnTimeout}),a.manualPerformance("timing",e+".failure",new Date-u)}{var s=this,u=new Date,c=s.account,d=c.cid;c.type}return s.watchAction.apply(s,r).then(i)["catch"](function(e){var t=p[e.tapiGuid];o(e),t&&t.hadTimeout&&(t.delayedPushEventLog=n)})},eCommerceLogEvent:function(e,t,n,i){r.ecommerceTracking.track(e,{amount:t&&t.amount&&t.amount.amount,name:t&&t.instrument&&t.instrument.Name,id:t&&t.instrument&&t.instrument.ItemId,action:n,label:i,marketMode:t.marketMode===(t.marketModeOptions&&t.marketModeOptions.active)?"Trade":"Order",dimension71:t&&t.instrument&&t.instrument.instrumentType&&t.instrument.instrumentType.key||"",category:t&&t.category})},notifyAction:function(e,t,r,n){function i(i){o&&clearTimeout(o),a=p[r],a?(a.isSync=!!i,a.hadTimeout?a.delayedPushEventLog({requestId:a.requestId,Success:t,tapiGuid:r,data:n}):t?a.resolve({requestId:a.requestId,timeout:!1,Success:!0,tapiGuid:r,data:n}):a.reject({requestId:a.requestId,timeout:!1,Success:!1,tapiGuid:r,data:n}),delete p[r]):s.$log.logJSON("info","log",{Message:e,Categories:["pushEvent","userTradingAction"],WhichSession:"other",PushEventData:n})}var o,s=this,a=p[r];a?i(!0):o=setTimeout(i,500)},openPosition:function(e,r){var n=this;return!e.instrument.IsActive&&e.instrument.isUsTrade?void this.notifyMarketClosedUs(e):this.$q(t.bind(function(i,o){if(c("Open Order - Attempt",e,r,"Order","Open Order - Attempt"),!e.amount.amount&&!e.openByUnits)return void o(u("Tapi Error: Error while open position - Amount is incorrect","OpenPosition",e));if(!e.amount.units&&e.openByUnits)return void o(u("Tapi Error: Error while open position - Units is incorrect","OpenPosition",e));var s={CID:this.account.cid,InstrumentID:e.instrument.InstrumentID,IsBuy:e.isBuy,Leverage:e.risk.amount,StopLossRate:e.stopLoss.amount,TakeProfitRate:e.takeProfit.amount,IsTslEnabled:e.stopLoss.TSL.isEnabled,View_UnitMargin:e.instrument.getUnitMargin(e.isBuy,r),View_MaxPositionUnits:e.instrument.MaxPositionUnits,View_Units:toFixed(e.amount.units,2),View_openByUnits:e.openByUnits,IsDiscounted:r||!1};e.source&&e.source.View_CurrentTradingMode&&"REGULAR"===e.source.View_CurrentTradingMode&&e.viewRateContext&&e.viewRateContext.clientViewRate&&e.viewRateContext.clientViewRateID&&e.viewRateContext.clientRateForCalc&&e.viewRateContext.clientRateForCalcID?s.ViewRateContext={ClientViewRate:e.viewRateContext.clientViewRate,ClientViewRateID:e.viewRateContext.clientViewRateID,ClientRateForCalc:e.viewRateContext.clientRateForCalc,ClientRateForCalcID:e.viewRateContext.clientRateForCalcID}:s.ClientViewRate=e.viewRate,e.openByUnits?(s.AmountInUnits=toFixed(parseToFloat(e.amount.units),2),s.Amount=toFixed(parseToFloat(e.amount.amount),2)):s.Amount=toFixed(parseToFloat(e.amount.amount),2),t.extend(s,e.source||{});var a=this.api;e.instrument.isUsTrade?(a+="/orders-for-open",a+=e.openByUnits?"/by-units":"/by-amount"):a+="/positions";var l=d.$rootScope.session&&d.$rootScope.session.user,p=d.configService.dynamics&&d.configService.dynamics.trading&&d.configService.dynamics.trading.usTradingConfig;s.Trade={User:{countryId:l&&l.countryId,countryName:l&&l.country&&l.country.name,userDesignatedRegulationId:l&&l.designatedRegulationId},CCM:{usFlavorEnabled:p&&p.usFlavorEnabled,usInstrumentTypes:p&&p.usInstrumentTypes,usExchanges:p&&p.usExchanges,usRegulationIds:p&&p.usRegulationIds,isUsPrecisionEnabled:p&&p.isUsPrecisionEnabled},Position:{type:e.instrument&&e.instrument.InstrumentTypeID,exchange:e.instrument&&e.instrument.ExchangeID,isCFD:e.isCFD,isCMT:e.isCMT,isTRS:d.executionCalculator.isTRS(e.instrument,e.isBuy,e.leverages.selectedLeverage),isReal:d.executionCalculator.isLowLeverage(e.instrument,e.isBuy,e.leverages.selectedLeverage),positionSettlementData:{isCrypto:e.instrument.IsCrypto,isNonRealAsTRS:e.instrument.IsNonRealAsTRS,realTradeBuyMaxLeverage:e.instrument.RealTradeBuyMaxLeverage,realTradeSellMaxLeverage:e.instrument.RealTradeSellMaxLeverage}},Instrument:{AboveDollarPrecision:e.instrument&&e.instrument.AboveDollarPrecision,Precision:e.instrument&&e.instrument.Precision,underscorePrecision:e.instrument&&e.instrument._Precision,Bid:e.instrument&&e.instrument.rate&&e.instrument.rate.Bid,IsAmericanStock:e.instrument&&e.instrument.IsAmericanStock,isAmericanPrecision:e.instrument&&e.instrument.isAmericanPrecision}},this.$http({method:"Post",url:a,categories:["userTradingAction"],isArray:!1,data:s,logData:{action:"OpenPositionRequest"}}).success(function(t){if(t&&t.OrderForOpen){t.OrderForOpen.SubType="OrderForOpen",t.OrderForOpen.Amount||(t.OrderForOpen.Amount=s.Amount);var o=n.addOrder(t.OrderForOpen);d.$rootScope.$broadcast("Trading.OrderForOpen.Open",o),n.$log.logJSON("info","log",{Message:"Create OrderForOpen",Categories:["Trading","openPosition"],OrderID:t.OrderForOpen.OrderID,Data:t.OrderForOpen,RequestId:arguments[3].requestId}),d.injector.get("bl.factories.trading.portfolioTradingNotificationsService").showNotification({orderStatus:"received",orderType:"orderForOpen",requestToken:t.Token,orderData:{order:t.OrderForOpen,instrument:e.instrument,isByUnits:e.openByUnits,isBuy:t.OrderForOpen.IsBuy,avatarSrc:e.instrument&&e.instrument.Avatars["150x150"]},style:{avatarStyle:{opacity:.5}},href:"/portfolio/orders?groupId="+e.instrument.Name}),c("Open Order - Success",e,r,"Open Order - Success","Success"),n.eCommerceLogEvent("Open Order - Success",e,"Open","Success"),i(t)}else n.$log.logJSON("error","log",{Message:e.instrument.isUsTrade?"orderForOpenRequest error - got unusable data.":"OpenPositionRequest error - got unusable data.",Categories:["Trading","openPosition"],Data:t||{}}),c("Open Trade - Error - Unusable Data",e,r,"Trade","Open Trade - Error - Unusable Data")}).error(t.bind(function(t,n,i,s){d.$rootScope.$emit("Trading.Failure.Position.Open",{},{Topic:this.account.topic},e),c("Open Order - Error",e,r,"Order","Open Order - Error"),o(u("Tapi Error: Error while open position","OpenPosition",t,n,i,s))},this))},this))},copyMirror:function(n){var i=this,o=e.copy(n);return o=t.extend(o,{category:"Copy",label:"",action:"Open",name:n.Name,id:n.ParentCID,amount:n.Amount,"Search ObjectID":n.ParentCID.toString(),"Search Item Type":"User"}),o.label="Copy Trader - Attempt",r.$analytics.eventTrack("Copy Trader - Attempt",o),this.$q(t.bind(function(e,s){this.$http({method:"post",url:this.api+"/mirrors",categories:["userTradingAction"],isArray:!1,data:n,logData:{action:"CopyMirrorRequest"}}).success(function(t){i.watchAndReportAction("Execution.copyMirror",arguments),r.$analytics.eventTrack("Copy Trader - Success",o),o.label="Success",r.ecommerceTracking.track("Copy Trader - Success",o),e(t)}).error(t.bind(function(e,t,i,a){d.$rootScope.$emit("Trading.Failure.Mirror.Register",{},{Topic:this.account.topic},n),s(u("Tapi Error: Error create copyMirror","CopyMirror",e,t,i,a)),o.label="Failure",r.$analytics.eventTrack("Copy Trader - Error",o)},this))},this))},getMirrorValidationsByType:function(e){return this._getMirrorValidations().then(function(t){return t["fund"===e?4:1]})},getMirrorValidations:function(e){return this._getMirrorValidations().then(function(t){return t["fund"===e.SubType?4:1]})},_getMirrorValidations:function(){return this._mirrorValidationsPromise||(this._mirrorValidationsPromise=this.$q(t.bind(function(e,r){this.$http({method:"get",url:this.api+"/mirror-validations/private",categories:["userTradingAction"],isArray:!1}).then(t.bind(function(n,i,o,s){if(n.data.PrivateMirrorValidations){var a=t.indexBy(n.data.PrivateMirrorValidations,"MirrorType");e(a)}else r(u("Tapi Error: Error loading MirrorValidation","_getMirrorValidations",n,i,o,s)),this._mirrorValidationsPromise=null},this))["catch"](t.bind(function(e,t,n,i){r(u("Tapi Error: Error loading MirrorValidation","_getMirrorValidations","",t,n,i)),this._mirrorValidationsPromise=null},this))},this))),this._mirrorValidationsPromise},getMirrorValidation:function(e){return this._mirrorValidationsDeferred||(this._mirrorValidationsDeferred={}),this._mirrorValidationsDeferred[e.SubType]||(this._mirrorValidationsDeferred[e.SubType]=this.$q(t.bind(function(r,n){this.$http({method:"get",url:this.api+"/mirror-validations/"+("fund"===e.SubType?4:1),categories:["userTradingAction"],isArray:!1}).success(t.bind(function(e,t,i,o){if(e.MirrorValidation){var s=e.MirrorValidation;r(s)}else n(u("Tapi Error: Error loading MirrorValidation","getMirrorValidation",e,t,i,o))},this)).error(t.bind(function(e,t,r,i){n(u("Tapi Error: Error loading MirrorValidation","getMirrorValidation","",t,r,i))},this))},this))),this._mirrorValidationsDeferred[e.SubType]},getOrderById:function(e){return t.find(this.orders,function(t){return t.OrderID===e})},getPositionByOrderId:function(e,r){return t.find(e,function(e){return e.OrderID===r})},openOrder:function(e,r){var n,i=this;return this.$q(t.bind(function(o,s){n={CID:this.account.cid,InstrumentID:e.instrument.InstrumentID,IsBuy:e.isBuy,Leverage:e.risk.amount,StopLossRate:e.stopLoss.amount,TakeProfitRate:e.takeProfit.amount,ClientViewRate:e.orderModeCurrentRate,Rate:e.viewRate,IsTslEnabled:e.stopLoss.TSL.isEnabled,View_UnitMargin:e.instrument.getUnitMargin(e.isBuy,r),View_MaxPositionUnits:e.instrument.MaxPositionUnits,View_Units:toFixed(e.amount.units,2),View_openByUnits:e.openByUnits,IsDiscounted:r||!1},e.openByUnits?n.AmountInUnits=toFixed(parseToFloat(e.amount.units),2):n.Amount=toFixed(parseToFloat(e.amount.amount),2),t.extend(n,e.source||{}),c("Open Order - Attempt",e,r,"Trade","Open Order - Attempt"),this.$http({method:"Post",url:this.api+"/orders",categories:["userTradingAction"],isArray:!1,data:n,logData:{action:"OpenOrderRequest"}}).success(function(t){i.watchAndReportAction("Execution.openOrder",arguments),c("Open Order - Success",e,r,"Open Order - Success","Success"),i.eCommerceLogEvent("Open Order - Success",e,"Open","Success"),o(t.data)}).error(t.bind(function(t,n,i,o){d.$rootScope.$emit("Trading.Failure.Order.Open",{},{Topic:this.account.topic},e),c("Open Trade - Error",e,r,"Trade","Open Trade - Error"),s(u("Open Order Tapi Error","OpenOrder",t,n,i,o))},this))},this))},addOrder:function(e,i){var o=null;if(e)if(o=t.find(this.orders,function(t){return e.OrderID===t.OrderID}))o.set(e);else{var s=r.instrumentsFactory.getById(e.InstrumentID||i&&i.InstrumentID);if("OrderForClose"===e.SubType||"ExitOrder"===e.SubType){var a=i||this.positions[e.PositionID];if(!a)return void this.$log.error("OrderForClose - position not exists "+e.PositionID);var u=e.OrderType,c=e.OpenDateTime;Object.assign(e,a),e.OrderType=u,e.OpenDateTime=c,delete e.isPendingClose,e.UnitsToDeduct&&(e.Units=e.UnitsToDeduct,delete e.Amount)}s?(o=new n(e,this),this.orders.push(o),d.$rootScope.$broadcast("Trading.Order.Open.Sync")):this.$log.error("Order - instrument not exists "+e.InstrumentID)}return o},removeOrder:function(e){for(var t=this.orders,r=0;r<t.length;r++)if(t[r].OrderID===e){t.splice(r,1);break}},removeOrderByPositionId:function(e){for(var t=this.orders,r=0;r<t.length;r++)if(t[r].PositionID===e){t.splice(r,1);break}},removeOrderByOrderIdAndOrderType:function(e,t){for(var r=this.orders,n=0;n<r.length;n++)if(r[n].OrderID===e&&r[n].OrderType===t){r.splice(n,1);break}},syncOrders:function(){return this.$q(t.bind(function(e,r){this.$http({method:"Get",url:this.api+"/orders/private"}).success(t.bind(function(r){r&&r.Orders&&t.each(r.Orders,this.addOrder,this),e(this.orders)},this)).error(t.bind(function(e,t,n,i){r(u("Tapi Error: syncOrders","syncOrders",e,t,n,i))},this))},this))},openEntryMarketOrder:function(e,r){var n=this,i={};return this.$q(t.bind(function(o,s){c("Open Order - Attempt",e,r,"Trade","Open Order - Attempt"),i={CID:this.account.cid,InstrumentID:e.instrument.InstrumentID,IsBuy:e.isBuy,Leverage:e.risk.amount,StopLossPercentage:e.stopLoss.percentAmount,TakeProfitPercentage:e.takeProfit.percentAmount,IsTslEnabled:e.stopLoss.TSL.isEnabled,View_UnitMargin:e.instrument.getUnitMargin(e.isBuy,r),View_MaxPositionUnits:e.instrument.MaxPositionUnits,View_Units:toFixed(e.amount.units,2),View_openByUnits:e.openByUnits,IsDiscounted:r||!1,ViewRateContext:{ClientViewRate:e.viewRateContext?e.viewRateContext.clientViewRate:e.instrument.rate.Change.bidNumber("Daily"),ClientViewRateID:e.viewRateContext?e.viewRateContext.clientViewRateID:e.instrument.rate.PriceRateID,ClientRateForCalc:e.viewRateContext?e.viewRateContext.clientRateForCalc:e.instrument.rate.Change.bidNumber("Daily"),ClientRateForCalcID:e.viewRateContext?e.viewRateContext.clientRateForCalcID:e.instrument.rate.PriceRateID}},e.openByUnits?i.AmountInUnits=toFixed(parseToFloat(e.amount.units),2):i.Amount=toFixed(parseToFloat(e.amount.amount),2),t.extend(i,e.source||{}),this.$http({method:"Post",url:this.api+"/entry-orders",categories:["userTradingAction"],isArray:!1,data:i,logData:{action:"OpenEntryOrderRequest"}}).success(function(t){n.watchAndReportAction("Execution.openEntryMarketOrder",arguments),c("Open Order - Success",e,r,"Open Order - Success","Success"),n.eCommerceLogEvent("Open Order - Success",e,"Open","Success"),o(t)}).error(t.bind(function(t,n,i,o){d.$rootScope.$emit("Trading.Failure.EntryOrder.Open",{},{Topic:this.account.topic},e),c("Open Trade - Error",e,r,"Trade","Open Trade - Error"),s(u("Tapi Error: Error openEntryMarketOrder","openEntryMarketOrder",t,n,i,o))},this))},this))},openTradeStory:function(e){if(e&&"HistoryPosition"===e.ItemType){var r={TradeEntryType:"CloseTrade",PositionId:e.PositionID};if(this.fetchPostIdInProgress)return;this.fetchPostIdInProgress=!0,d.preloader.show();var n=this;return this.$q(t.bind(function(t,i){this.$http({method:"GET",url:"/api/streams/v2/entries/trade-entry-id",actionUrl:"/api/streams/v2/entries/trade-entry-id",params:r}).success(function(r){var i=r.hasOwnProperty("entryId")?r.entryId:null;d.uiDialog.open({template:'<trade-story history-item="uiDialogData.historyItem" post-Id="uiDialogData.postId" on-close="closeThisDialog()"></trade-story>',plain:!0,data:{historyItem:e,postId:i}}),n.fetchPostIdInProgress=!1,d.preloader.hide(),t(this)}.bind(this)).error(function(t,r){var o=null;d.uiDialog.open({template:'<trade-story history-item="uiDialogData.historyItem" post-Id="uiDialogData.postId" on-close="closeThisDialog()"></trade-story>',plain:!0,data:{historyItem:e,postId:o}}),n.fetchPostIdInProgress=!1,d.preloader.hide(),i({message:"streams api failed",namespace:"trade-entry-id",status:r})})},this))}},notifyMarketClosedUs:function(e){d.injector.get("bl.factories.trading.portfolioTradingNotificationsService").showNotification({orderStatus:"rejected",orderType:"orderForOpen",orderData:{instrument:e.instrument,order:{ErrorMessageCode:"marketClosed",Amount:e.amount&&e.amount.amount,AmountInUnits:e.amount&&e.amount.units},isByUnits:e.openByUnits,isBuy:e.isBuy,avatarSrc:e.instrument&&e.instrument.Avatars["150x150"]}}),this.$log.logJSON("info","log",{Message:"User tried to open a trade - Market is closed",Categories:["Trading","openPosition"],InstrumentID:e.instrument&&e.instrument.InstrumentID})}},d.inheritsFrom(r),d.$factory=["$rootScope","$injector","uiDialog","infrastruct.services.loader","infrastruct.services.config","bl.factories.trading.execution.executionCalculator",function(e,t,r,n,i,o){return d.$rootScope=e,d.uiDialog=r,d.preloader=n,d.injector=t,d.configService=i,d.executionCalculator=o,function(e,t){return new d(e,t)}}],d});define(rA[376][0],["angular","underscore"],function(){"use strict";function r(){this.lostPositions={},this.lostEntryOrders={},this.lostDelayedOrdersForOpen={}}return r.prototype={addPosition:function(r){r.MirrorID>0&&(this.lostPositions[r.PositionID]=r)},addEntryOrder:function(r){r.MirrorID>0&&(this.lostEntryOrders[r.OrderID]=r)},addDelayedOrderForOpen:function(r){r.MirrorID>0&&(this.lostDelayedOrdersForOpen[r.OrderID]=r)},removePosition:function(r){var t=!!this.lostPositions[r];return delete this.lostPositions[r],t},removeEntryOrder:function(r){var t=!!this.lostEntryOrders[r];return delete this.lostEntryOrders[r],t},removeDelayedOrderForOpen:function(r){var t=!!this.lostDelayedOrdersForOpen[r];return delete this.lostDelayedOrdersForOpen[r],t},editPosition:function(r){var t=this.lostPositions[r.PositionID],o=!!t;return t&&(t.StopLossRate=r.StopLossRate||t.StopLossRate,t.TakeProfitRate=r.TakeProfitRate||t.TakeProfitRate),o},getPositionsByMirrorID:function(r){var t=null,o=[];for(var e in this.lostPositions)t=this.lostPositions[e],t&&t.MirrorID===r&&o.push(t);for(var s=o.length,i=0;s>i;i++)this.removePosition(o[i].PositionID);return o},getEntryOrdersByMirrorID:function(r){var t=null,o=[];for(var e in this.lostEntryOrders)t=this.lostEntryOrders[e],t&&t.MirrorID===r&&(o.push(t),this.removeEntryOrder(e));for(var s=o.length,i=0;s>i;i++)this.removeEntryOrder(o[i].OrderID);return o},getDelayedOrdersForOpenByMirrorID:function(r){var t=null,o=[];for(var e in this.lostDelayedOrdersForOpen)t=this.lostDelayedOrdersForOpen[e],t&&t.MirrorID===r&&(o.push(t),this.removeDelayedOrderForOpen(e));return o}},r});define(rA[485][0],["angular","underscore","moduleDefiner",rA[491][0],rA[422][0],rA[421][0],rA[284][0]],function(r,e,o,i,t,n){"use strict";function s(o,s,a,d,l,u,c,f,p,g,m,D,I,T){function P(r,e,i){if("mirrorGroup"===e.Type&&0===e.Positions.length&&0===e.Orders.length&&e.UnregisterApproved){i&&m.sendDetachStatusEvent(e,!0),r.balance+=e.AvailableAmount,r._removeGroup(e);var t=I.get("bl.factories.trading.portfolioTradingNotificationsService");t.showNotification({orderStatus:"filled",orderType:e.isFund?"fundUnregister":i?"mirrorUnregisterDetach":"mirrorUnregister",mirrorData:{mirror:e},requestToken:e.RequestToken||"",href:i?"/portfolio":"/portfolio/history",headerKey:e.isFund?"fundUnregisterSuccess":"mirrorUnregisterSuccess"}),o.$emit("portfolio:mirror:unregister:success",e)}}function O(){if(R){var r=I.get("infrastruct.services.push.push");return r.isSubscribed(R.topic)}return!1}function v(){var r=I.get("infrastruct.services.push.push");return r.isSubscribed("trading:split")}function y(r){var o=e.find(M,function(e){return r===e.topic});return o&&b[o.type]}function h(r,e){return a(function(o,i){return e&&e.ClientPortfolio?void o(e):void s({method:"get",url:"/sapi/trade-"+r.type.toLowerCase()+"/portfolios/private",isArray:!0}).success(function(r){o(r)}).error(function(r,e){i(new AppError("portfolio api - error","portfolioFactory","PortfolioTapiHttpError",null,e))})})}function C(r,e){return a(function(o,t){var n;e&&e.ClientPortfolio?(n=new i(r,e.ClientPortfolio),n.init().then(function(){n._getMirrorValidations(),o(n)})["catch"](function(r){t(new AppError("Error init portfolio","portfolioFactory:createPortfolio","PortfolioCreationError",null,r))})):t(new AppError("Error proccess portfolio - data is missing","portfolioFactory","PortfolioCreationError",null))})}function S(r){return a(function(e,o){var i=R;h(i,r).then(function(r){C(i,r).then(function(r){i===R&&(b[i.type]=r),e()})["catch"](o)})["catch"](o)})}var b={},M={},A={"default":"Real",real:"Real",demo:"Demo"},R=null,F={},E=null,k={"Trading.Position.Close.Partial":function(e,i,t,n){if(!i||20!==i.ExitOrderType||0!==i.CloseReason){var s=e.positions[i.PositionID],a=s.getGroup();if(!s)return void d.warn("Trading.Position.Close.Partial: Unable to find position",i);if(s.isOrderForClose&&e.removeOrder(s.OrderID),s.isPendingClose=!1,s.isClosedRequested=!1,s.isOrderForClose=!1,s.isPartialPendingClose=!1,s.partialOrderExecutedID=i.ExitOrderID,r.isDefined(i.OpenPositionAmount)&&null!==i.OpenPositionAmount&&(s.Amount=i.OpenPositionAmount),r.isDefined(i.OpenUnits)&&null!==i.OpenUnits&&(s.Units=i.OpenUnits),r.isDefined(i.UnitsBaseValueDollars)&&null!==i.UnitsBaseValueDollars&&(s.UnitsBaseValueDollars=i.UnitsBaseValueDollars),a&&("mirrorGroup"===a.Type?(a.AvailableAmount+=(i.NetProfit||0)+i.ClosedPositionAmount,a.ClosedPositionsNetProfit+=i.NetProfit):e.balance+=(i.NetProfit||0)+i.ClosedPositionAmount,a.syncPositionsGroups&&a.syncPositionsGroups(),a.recalculate(),!n)){"mirrorGroup"!==a.Type&&I.get("bl.factories.trading.portfolioNotificationsService").partialCloseFilled(i,"partialCloseFilled",s.Instrument,s.IsBuy);var l="mirrorGroup"!==a.Type?"portfolio:position:edit:success":"portfolio:mirror:position:edit:success";o.$emit(l,{position:s,partialClosePosition:i,field:"partialClose"})}e.syncInstruments()}},"Trading.Failure.Position.Close.Partial":function(r,e){if(!e||20!==e.ExitOrderType){var i,t;i=r.positions[e.PositionID],i&&(i.isOrderForClose&&r.removeOrder(i.OrderID),i.isPendingClose=!1,i.isClosedRequested=!1,i.isOrderForClose=!1,i.isPartialPendingClose=!1,t=i.getGroup(),t&&"mirrorGroup"!==t.Type&&(I.get("bl.factories.trading.portfolioNotificationsService").partialCloseRejected(i,e.RequestToken,"PartialCloseRejected"),741===e.ErrorMessageCode&&o.$emit("app:refreshPortfolio")))}},"Trading.OrderForOpen.Update":function(r,e,i){if(r&&e&&e.OrderID&&e.OrderID>0){if(r.getPositionByOrderId(r.positions,e.OrderID)||r.getOrderById(e.OrderID))return;if(e.MirrorID>0){var t=r.findGroupWhere({MirrorID:e.MirrorID});t&&(e.DelayedOrderID>0&&t.removeOrderByTypeAndId("DelayedOrderForOpen",e.DelayedOrderID),t.OrdersForOpen?t.OrdersForOpen.push(e):t.OrdersForOpen=[e])}else r.addOrder(e);e.SubType="OrderForOpen",o.$applyAsync(),d.logJSON("info","log",{Message:"Trading.OrderForOpen.Update - sync all sessions with new order for open",Categories:["Trading","openPosition"],OrderID:e.OrderID,Data:{order:e,msg:i}})}else e||d.logJSON("error","log",{Message:"Trading.OrderForOpen.Update - got unusable data.",Categories:["Trading","openPosition"],Data:{order:e,msg:i}})},"Trading.Delayed.Update.OrderForOpen":function(r,e){e=e.DelayedOrder;var o=r.findGroupWhere({MirrorID:e.MirrorID});o?o.DelayedOrderForOpen?o.DelayedOrderForOpen.push(e):o.DelayedOrderForOpen=[e]:r.lostPositionsManager.addDelayedOrderForOpen(e)},"Trading.Position.Open":function(r,e,i,n){function s(){e.isAirdrop||o.$emit("portfolio:position:open:success:showShareYourTradePopup",e)}var a=e.RequestToken;e=e.Position;var l,f,p,g=!!e.MirrorID;if(l=r.findGroupWhere(g?{MirrorID:e.MirrorID}:{InstrumentID:e.InstrumentID}),r.positions[e.PositionID])return void d.warn("Push -> Trading.Position.Open -> The position already exists in the list",i,e);if(l){if(f=new t(e,l),l.getPositionById(e.PositionID))return void d.warn("Push -> Trading.Position.Open -> The position already exists in the list",i,e,l);l.Positions.push(f),r.positions[f.PositionID]=f,g?(e.DelayedOrderID>0&&l.removeOrderByTypeAndId("DelayedOrderForOpen",e.DelayedOrderID),e.OrderID>0&&l.removeOrderByTypeAndId("OrdersForOpen",e.OrderID)):r.manualPositions.push(f),e.OrderID>0&&r.removeOrderByOrderIdAndOrderType(e.OrderID,e.OrderType)}else g?(r.lostPositionsManager.addPosition(e),p=u.getById(e.InstrumentID),c.subscribe(p),d.log("mirror was not found for position",e)):(p=u.getById(e.InstrumentID),p?(l=r._addGroup(p,{Positions:[e]}),e.OrderID>0&&r.removeOrderByOrderIdAndOrderType(e.OrderID,e.OrderType)):d.error("Trading.Position.Open:  no instrument was found for position",e));if(l&&(e=l.getPositionById(e.PositionID),g?l.AvailableAmount-=e.Amount:r.balance-=e.Amount,c.subscribe(e.Instrument),-1===r.getInstruments().indexOf(e.Instrument)&&r.syncInstruments(),l.syncPositionsGroups&&l.syncPositionsGroups(),l.recalculate(),"mirrorGroup"!==l.Type&&!n)){var m=I.get("bl.factories.trading.upsell.upsellService"),D=I.get("bl.factories.trading.portfolioTradingNotificationsService");if(o.$emit("portfolio:position:open:success",e),!e.isAirdrop)if(18===e.OrderType||17===e.OrderType){var P=e&&{order:e,instrument:e.Instrument,isByUnits:18===e.OrderType,isBuy:e.IsBuy,avatarSrc:e.Instrument&&e.Instrument.Avatars["150x150"]};D.showNotification({orderStatus:"filled",orderType:"orderForOpen",requestToken:a,orderData:P,href:e.getGroup().Url}),T.eventTrack("Position Filled",{position:e,"Order ID":e.OrderID,"Position ID":e.PositionID,requestToken:a,"Search ObjectID":e.InstrumentID&&e.InstrumentID.toString(),"Search Item Type":e.Instrument.Type})}else I.get("bl.factories.trading.portfolioNotificationsService").positionOpenSuccess(e);m.shouldShowOpenTradeUpsellPopup(r)?m.getOpenTradeUpsellPopupData(r,e).then(function(r){r&&r.shouldShowOpenTradeUpsellPopup?o.$emit("showOpenTradeUpsellPopup",r):s()})["catch"](function(){s()}):s()}},"Trading.Position.Close":function(r,e,i,t){if(!e||20!==e.ExitOrderType||0!==e.CloseReason){var n,s=r.positions[e.PositionID];if(!s){var a=r.lostPositionsManager.removePosition(e.PositionID);return void(a?d.warn("Trading.Position.Close: no mirror found",e):d.warn("Trading.Position.Close: Unable to find closed Position",e))}s.isOrderForClose&&r.removeOrder(s.OrderID),s.EndRate=e.EndRate,s.CloseReason=e.CloseReason;var l=s.getGroup();n=l.Positions.indexOf(s),-1!==n?(l.Positions.splice(n,1),l.syncPositionsGroups&&l.syncPositionsGroups()):d.warn("Trading.Position.Close: Unable to find position",s);var u=r.manualPositions.indexOf(s);-1!==u&&r.manualPositions.splice(u,1),delete r.positions[s.PositionID],d.logJSON("info","log",{Categories:["Trading.Position.Close"],Message:"delete position from portfolio - success",PositionID:s.PositionID});var c=e.NetProfit;if((null===c||void 0===c)&&(c=e.Profit||0),"mirrorGroup"===l.Type?(l.AvailableAmount+=c+s.Amount,l.ClosedPositionsNetProfit+=c):r.balance+=(e.NetProfit||0)+s.Amount,l.recalculate(),"mirrorGroup"===l.Type){var f=5===s.CloseReason;P(r,l,f)}else"positionsGroup"===l.Type&&0===l.Positions.length&&r._removeGroup(l);if(!t){if("mirrorGroup"!==l.Type){var p=I.get("bl.factories.trading.portfolioTradingNotificationsService"),g=s&&{order:s,instrument:s.Instrument,isByUnits:!0,isBuy:s.IsBuy,avatarSrc:s.Instrument&&s.Instrument.Avatars["150x150"]};p.showNotification({orderStatus:"filled",orderType:"orderForClose",requestToken:e.RequestToken,orderData:g,href:"/portfolio/history"}),T.eventTrack("Trading.Position.Close - Close Trade Success",{position:s})}var m="mirrorGroup"!==l.Type?"portfolio:position:closed:success":"portfolio:mirror:position:closed:success";o.$emit(m,s)}r.syncInstruments()}},"Trading.OrderForCloseMultiple.Update":function(r,e,i){if(e&&2===e.StatusId)return void(e.PendingClosePositionIDs&&e.PendingClosePositionIDs.length?this["_Trading.OrderForCloseMultiple.Pending"](r,e,!0):d.logJSON("error","log",{Message:"Trading.OrderForCloseMultiple.Update - got unusable data.",Categories:["Trading","closePosition"],Data:{portfolio:r,order:e,msg:i}}));var t=!1;if(e.ClosedPositionIDs&&e.ClosedPositionIDs.length&&(e.ClosedPositionIDs.forEach(function(e){this["Trading.Position.Close"](r,{PositionID:e},i,!0)}.bind(this)),r.balance+=e.NetProfit-(e.PartialClosedPositionData&&e.PartialClosedPositionData.NetProfit||0),t=!0),e.OutOfScopePositionIDs&&e.OutOfScopePositionIDs.length&&(e.OutOfScopePositionIDs.forEach(function(e){this["Trading.Failure.Position.Close"](r,{PositionID:e},{},!0)}.bind(this)),t=!0),e.PartialClosedPositionData&&e.PartialClosedPositionData.PositionID&&(e.PartialClosedPositionData.ExitOrderID=e.OrderID,this["Trading.Position.Close.Partial"](r,e.PartialClosedPositionData,{},!0),t=!0),e.PendingClosePositionIDs&&e.PendingClosePositionIDs.length&&(this["_Trading.OrderForCloseMultiple.Pending"](r,e),t=!0),!t)return void d.logJSON("error","log",{Message:"Trading.OrderForCloseMultiple.Update - got unusable data.",Categories:["Trading","closePosition"],Data:{portfolio:r,order:e,msg:i}});if(0===e.CloseReason){var n=I.get("bl.factories.trading.portfolioTradingNotificationsService"),s=u.getById(e.InstrumentID),a={order:e,instrument:s,isByUnits:!0,avatarSrc:s.Avatars["150x150"]};n.showNotification({orderStatusId:e.StatusId,orderType:"orderForCloseAll",isBuy:!0,requestToken:e.RequestToken,orderData:a,href:"/portfolio/history"})}o.$applyAsync(),d.logJSON("info","log",{Categories:["Trading.OrderForCloseAll.Filled"],Message:"Sell All",Order:e}),T.eventTrack("Trading.Position.Close - Close Trade Success",{order:e})},"_Trading.OrderForCloseMultiple.Pending":function(r,e,o){var i;e.PendingClosePositionIDs.forEach(function(t){var n=r.positions[t];!n||o&&(n.isOrderForClose||n.partialOrderExecutedID===e.OrderID)||(o&&(n.OrderID=e.OrderID,n.isOrderForClose=!0,n.isClosedRequested=!0,n.isPendingClose=!0),i?(i.Amount+=n.Amount,i.Units+=n.Units):(i=Object.assign({},n),i.CurrentRate=n.CurrentRate))}),e.SubType="OrderForClose",i&&r.addOrder(e,i||{});var t=o?"sync all sessions with new order for close":"set position/s as pending";d.logJSON("info","log",{Message:"_Trading.Position.Pending - "+t,Categories:["Trading","closePosition"],OrderID:e.OrderID,Data:{portfolio:r,order:e}})},"Trading.Position.Edit":function(e,i){var t,n,s=e.positions[i.PositionID];if(s){if(t=s.getGroup(),n=t&&"mirrorGroup"===t.Type,r.isDefined(i.TakeProfitRate)&&null!==i.TakeProfitRate&&(s.TakeProfitRate=i.TakeProfitRate,!n)){var a=s&&{order:s,instrument:s.Instrument,avatarSrc:s.Instrument&&s.Instrument.Avatars["150x150"]};I.get("bl.factories.trading.portfolioTradingNotificationsService").showNotification({orderStatus:"filled",orderType:s.TakeProfitRate?"takeProfitEdit":"takeProfitDisabled",headerKey:"edited",requestToken:s.requestToken,orderData:a}),o.$emit("portfolio:position:edit:success",{position:s,field:"TakeProfitRate"})}if(i.hasOwnProperty("IsTslEnabled")&&(s.IsTslEnabled=i.IsTslEnabled,!n)){var l=s.IsTslEnabled?"ActiveTrailingStopLoss":"DeactiveTrailingStopLoss",a=s&&{order:s,instrument:s.Instrument,avatarSrc:s.Instrument&&s.Instrument.Avatars["150x150"]};I.get("bl.factories.trading.portfolioTradingNotificationsService").showNotification({orderStatus:"filled",orderType:s.IsTslEnabled?"trailingStoplossEnabled":"trailingStoplossDisabled",headerKey:"edited",requestToken:s.requestToken,orderData:a}),o.$emit("portfolio:position:edit:success",{position:s,field:l})}if(i.StopLossVersion){var u=!1,c=i.StopLossVersion,f=i.StopLossRate,p=1===i.EditStopLossActionType;if(s.StopLossVersion<c?u=!0:s.StopLossVersion===c&&p?s.IsBuy&&f>s.StopLossRate?u=!0:!s.IsBuy&&f<s.StopLossRate&&(u=!0):f&&f!==s.StopLossRate&&(u=!0),u){if(f&&(s.StopLossRate=f,n=n||p,!n)){var a=s&&{order:s,instrument:s.Instrument,avatarSrc:s.Instrument&&s.Instrument.Avatars["150x150"]};I.get("bl.factories.trading.portfolioTradingNotificationsService").showNotification({orderStatus:"filled",orderType:"stoplossEdit",headerKey:"edited",requestToken:s.requestToken,orderData:a}),o.$emit("portfolio:position:edit:success",{position:s,field:"StopLossRate"})}s.StopLossVersion=c}}i.DeltaAmount&&(s.Amount+=i.DeltaAmount,0==i.DeltaAmount||n||I.get("bl.factories.trading.portfolioNotificationsService").positionEditSuccess({position:s,delta:Math.abs(i.DeltaAmount),field:i.DeltaAmount>0?"AmountAdded":"AmountRemoved"}),o.$emit("portfolio:position:edit:success",{position:s,delta:Math.abs(i.DeltaAmount),field:i.DeltaAmount>0?"AmountAdded":"AmountRemoved"})),t.syncPositionsGroups&&t.syncPositionsGroups(),t.recalculate()}else{var g=e.lostPositionsManager.editPosition(i);g?d.warn("Trading.Position.Edit: no mirror found",i):d.warn("Trading.Position.Edit: Unable to find position",i)}i.DeltaAmount&&(e.balance-=i.DeltaAmount)},"Trading.Position.Detach":function(r,o){if(o){var i=r.findGroupWhere({MirrorID:o.MirrorID});if(i){var t=e.find(i.Positions,function(r){return r.PositionID===o.PositionID});if(t){this["Trading.Position.Close"](r,t),t.MirrorID=0,t.StopLossRate=o.StopLossRate,t.TakeProfitRate=o.TakeProfitRate,t.IsDetached=!0;var n={Position:t,RequestToken:o.RequestToken};this["Trading.Position.Open"](r,n,void 0,!0)}}}},"Trading.Failure.Position.Close":function(r,e,i,t){if(!e||20!==e.ExitOrderType){var n,s;if(n=r.positions[e.PositionID],n&&(n.isClosedRequested=!1,n.isPendingClose=!1,s=n.getGroup(),s&&"mirrorGroup"!==s.Type)){if(n.isOrderForClose&&(n.isOrderForClose=!1,r.removeOrderByPositionId(e.PositionID),n.OrderID=0),!t){var a=n&&{order:Object.assign(n,{ErrorMessageCode:e.ErrorMessageCode}),instrument:n.Instrument,isByUnits:!0,isBuy:n.IsBuy};I.get("bl.factories.trading.portfolioTradingNotificationsService").showNotification({orderStatus:"rejected",orderType:"orderForClose",requestToken:e.requestToken||"",orderData:a})}T.eventTrack("Trading.Failure.Position.Close - Close Trade Failed",{position:e}),741===e.ErrorMessageCode&&(E&&clearTimeout(E),E=setTimeout(function(){o.$emit("app:refreshPortfolio")},500))}}},"Trading.Failure.Position.Open":function(r,e){e.OrderID>0&&r.removeOrderByOrderIdAndOrderType(e.OrderID,e.OrderType);var i=e&&{order:e,instrument:e.Instrument};I.get("bl.factories.trading.portfolioTradingNotificationsService").showNotification({orderStatus:"rejected",orderType:"orderForOpen",requestToken:e.requestToken||"",orderData:i}),T.eventTrack("Trading.Failure.Position.Open - Open Trade failed",{position:e}),m.orderRejected(e),e.ErrorMessageCode&&796===e.ErrorMessageCode&&o.$emit("privateInstruments:reload")},"Trading.Mirror.Register":function(r,i){var t=i.RequestToken;return i=i.Mirror,r.findGroupWhere({MirrorID:i.MirrorID})?void d.error("register mirror event - already have mirror"):void f.getById(i.ParentCID).then(function(n){var s=r.lostPositionsManager.getPositionsByMirrorID(i.MirrorID),a=r.lostPositionsManager.getEntryOrdersByMirrorID(i.MirrorID),d=r.lostPositionsManager.getDelayedOrdersForOpenByMirrorID(i.MirrorID);i.Positions=s,i.EntryOrders=a,i.DelayedOrderForOpen=d;var l=r._addGroup(n,i);e.each(l.Positions,function(r){l.AvailableAmount-=r.Amount}),s.length&&(l.syncPositionsGroups&&l.syncPositionsGroups(),l.recalculate());var u=I.get("bl.factories.trading.portfolioTradingNotificationsService");u.showNotification({orderStatus:"filled",orderType:l.isFund?"fundRegister":"mirrorRegister",mirrorData:{mirror:l},requestToken:t,href:l.Url,headerKey:l.isFund?"fundRegisterSuccess":"mirrorRegisterSuccess"}),o.$emit("portfolio:mirror:register:success",l),r.balance-=l.Amount})},"Trading.Mirror.Edit":function(r,e){var i=e.RequestToken,t=r.findGroupWhere({MirrorID:e.MirrorID});if(t){var n=I.get("bl.factories.trading.portfolioTradingNotificationsService");if(e.AmountDelta>0||e.AmountDelta<0){t.AvailableAmount+=e.AmountDelta,e.AmountDelta>0?t.DepositSummary+=e.AmountDelta:e.AmountDelta<0&&(t.WithdrawalSummary-=e.AmountDelta),o.$emit("portfolio:mirror:edit:success",{mirror:t,field:"AmountDelta"}),r.balance-=e.AmountDelta,t.recalculate();var s=t.isFund?"fundEditAmount":"mirrorEditAmount";n.showNotification({orderStatus:"filled",orderType:s,mirrorData:{mirror:t},requestToken:i,href:t.Url,isMaxDuration:!0,headerKey:s})}if(null!=e.IsPaused){t.IsPaused=e.IsPaused;var a=t.IsPaused?"mirrorEditPaused":"mirrorEditResumed",d=t.IsPaused?"fundEditPaused":"fundEditResumed",s=t.isFund?d:a;n.showNotification({orderStatus:"filled",orderType:s,mirrorData:{mirror:t},requestToken:i,href:t.Url,headerKey:s}),o.$emit("portfolio:mirror:edit:success",{mirror:t,field:"IsPaused"})}if(null!=e.StopLossDelta){t.StopLossAmount+=e.StopLossDelta;var s=t.isFund?"fundEditSL":"mirrorEditSL";n.showNotification({orderStatus:"filled",orderType:s,mirrorData:{mirror:t},requestToken:i,href:t.Url,headerKey:s}),o.$emit("portfolio:mirror:edit:success",{mirror:t,field:"StopLossAmount"})}null!=e.StopLossPercentageDelta&&(t.StopLossPercentage+=e.StopLossPercentageDelta)}},"Trading.Mirror.Unregister":function(r,e){var o=r.findGroupWhere({MirrorID:e.MirrorID});if(!o)return void d.warn("Trading.Mirror.Unregister: unable to find Mirror",e);o.UnregisterApproved=!0;var i=5===e.CloseReason;P(r,o,i)},"Trading.Failure.Mirror.Register":function(r,e){var o=I.get("bl.factories.trading.portfolioTradingNotificationsService");o.showNotification({orderStatus:"rejected",orderType:"mirrorRegister",mirrorData:{mirror:e},requestToken:e.RequestToken||""})},"Trading.Failure.Mirror.Edit":function(r,e){var o=r.findGroupWhere({MirrorID:e.MirrorID});if(o){var i=I.get("bl.factories.trading.portfolioTradingNotificationsService");i.showNotification({orderStatus:"rejected",orderType:"mirrorEdit",mirrorData:{mirror:o},errorMessageCode:e.ErrorMessageCode,requestToken:e.RequestToken||""})}},"Trading.Failure.Mirror.Unregister":function(r,e){var i=e&&e.ErrorMessageCode,t=e&&e.RequestToken;if(e=r.findGroupWhere({MirrorID:e.MirrorID})){if(e.PendingForClosure=!1,60120===i)return m.sendDetachStatusEvent(e,!1),void o.$emit("detach:failure");var n=I.get("bl.factories.trading.portfolioTradingNotificationsService");n.showNotification({orderStatus:"rejected",orderType:"mirrorUnregister",mirrorData:{mirror:e},errorMessageCode:i,requestToken:t||"",href:e.Url})}},"Trading.Mirror.PendingForClosure":function(r,e){var o=r.findGroupWhere({MirrorID:e.MirrorID});if(!o)return void d.warn("Portfolio Factory - Trading.Mirror.PendingForClosure - Mirror not found",e);o.PendingForClosure=e.PendingForClosure;var i=I.get("bl.factories.trading.portfolioTradingNotificationsService");i.showNotification({orderStatus:"received",orderType:o.isFund?"fundUnregister":5===e.CloseReason?"mirrorUnregisterDetach":"mirrorUnregister",mirrorData:{mirror:o},requestToken:e.RequestToken||"",href:o.Url,headerKey:o.isFund?"fundUnregisterReceived":"mirrorUnregisterReceived"})},"Trading.Mirror.StatusUpdate":function(r,e){if(e){var i=r.findGroupWhere({MirrorID:e.MirrorID});if(!i)return void d.warn("Portfolio Factory - Trading.Mirror.StatusUpdate - Mirror not found",e);if(i.MirrorStatusID=e.StatusID,o.$emit("mirror:status:update"),0===e.StatusID){var t=I.get("bl.factories.trading.portfolioTradingNotificationsService");t.showNotification({orderStatus:"filled",orderType:"mirrorAlignment",mirrorData:{mirror:i},requestToken:e.RequestToken||"",href:i.Url,headerKey:"mirrorAlignment"})}}},"Trading.Mirror.CalculationTypeUpdate":function(r,e){if(e){var o=r.findGroupWhere({MirrorID:e.MirrorID});return o?void(o.MirrorCalculationType=e.MirrorCalculationTypeID):void d.warn("Portfolio Factory - Trading.Mirror.CalculationTypeUpdate - Mirror not found",e)}},"Trading.Order.Open":function(r,e,i,t,n,s){if(e.Order.MirrorID>0){var a=r.findGroupWhere({MirrorID:e.Order.MirrorID});return void(a?(a.addOrder(e.Order,s),a.syncPositionsGroups&&(a.syncPositionsGroups(),a.recalculate())):(r.lostPositionsManager.addEntryOrder(e.Order),d.warn("Portfolio Factory - Trading.Order.Open - Mirror not found",e.Order)))}e.Order.SubType=s?"ExitOrder":n?"EntryOrder":"RateOrder";var l=r.addOrder(e.Order,s);t||(I.get("bl.factories.trading.portfolioNotificationsService").orderOpenSuccess(l),o.$emit("portfolio:order:open:success",l))},"Trading.Order.Close":function(r,e){var o=r.getOrderById(e.OrderID);if(e.MirrorID>0){var i=r.findGroupWhere({MirrorID:e.MirrorID});return i?(i.removeOrder(e.OrderID),P(r,i),i.syncPositionsGroups&&(i.syncPositionsGroups(),i.recalculate())):d.error("Mirror not found - Trading.Order.Close",e),o||e}if(o){var t=r.orders.indexOf(o);-1!=t&&r.orders.splice(t,1)}return o},"Trading.Order.Close.Execute.Durable":function(r,e){var i=new n(e,r);o.$emit("portfolio:order:closed:success",i)},"Trading.Failure.Order.Close":function(r,e){var o=r.getOrderById(e.OrderID);o&&(o.isClosedRequested=!1,I.get("bl.factories.trading.portfolioNotificationsService").orderClosedFailed(o))},"Trading.Failure.Order.Open":function(r,e){I.get("bl.factories.trading.portfolioNotificationsService").notifyRejectedOpen(null,e)},"Trading.Failure.Position.Edit":function(r,e){var i,t;if(i=r.positions[e.PositionID],i&&(t=i.getGroup(),t&&"mirrorGroup"!==t.Type)){var n=i&&{order:Object.assign(i,{ErrorMessageCode:e.ErrorMessageCode}),instrument:i.Instrument};I.get("bl.factories.trading.portfolioTradingNotificationsService").showNotification({orderStatus:"rejected",orderType:"positionEdit",requestToken:e.requestToken||"",orderData:n,headerKey:"editError"}),741===e.ErrorMessageCode&&o.$emit("app:refreshPortfolio")}},"Trading.Failure.Order.Execute.Durable":function(){},"Trading.EntryOrder.Open":function(r,e,o,i){e.Order.isEntryOrder=!0,this["Trading.Order.Open"](r,e,o,i,!0)},"Trading.EntryOrder.Close":function(r,e){e.isPendingClose=!0,this["Trading.Order.Close"](r,e)},"Trading.EntryOrder.Close.Execute.Durable":function(r,e){this["Trading.Order.Close.Execute.Durable"](r,e)},"Trading.ExitOrder.Open":function(r,i){var t=r.positions[i.Order.PendingClosePositionID];t&&o.$evalAsync(e.bind(function(){i.Order.UnitsToDeduct&&i.Order.UnitsToDeduct>0&&(t.isPartialPendingClose=!0,i.Order.Units=i.Order.UnitsToDeduct),t.isPendingClose=!0,t.OrderID=i.Order.OrderID,i.Order.SubType="ExitOrder",this["Trading.Order.Open"](r,i,null,!1,null,t);var e=t.getGroup();e.syncPositionsGroups&&e.syncPositionsGroups(),"mirrorGroup"!==e.Type&&o.$emit("portfolio:position:exitOrder:open:success",{position:t})},this))},"Trading.OrderForClose.Update":function(r,e,o){if(r&&e){var i=r.getPositionById(e.PositionID);if(!i||i.isOrderForClose||i.partialOrderExecutedID===e.OrderID)return;e.SubType="OrderForClose",0===i.MirrorID&&r.addOrder(e),i.OrderID=e.OrderID,i.isOrderForClose=!0,i.isPendingClose=!0,i.isClosedRequested=!0,e.UnitsToDeduct>0&&(i.isPartialPendingClose=!0),d.logJSON("info","log",{Message:"Trading.OrderForClose.Update - sync all sessions with new order for close",Categories:["Trading","closePosition"],OrderID:e.OrderID,Data:{portfolio:r,order:e,msg:o}})}else d.logJSON("error","log",{Message:"Trading.OrderForClose.Update - got unusable data.",Categories:["Trading","closePosition"],Data:{portfolio:r,order:e,msg:o}})},"Trading.ExitOrder.Close":function(r,i){this["Trading.Order.Close"](r,i);var t;if(i.MirrorID>0){var n=r.findGroupWhere({MirrorID:i.MirrorID});if(n){var s=e.find(n.Positions,function(r){return r.PositionID===i.PositionID});if(s){s.isPartialPendingClose&&(s.isPartialPendingClose=!1),s.isPendingClose=!1;var a=e.find(n.PositionsGroups,function(r){return r.InstrumentID===s.InstrumentID});t=e.find(a.Positions,function(r){return r.PositionID===i.PositionID})}}else d.error("Mirror not found - Trading.ExitOrder.Close",order)}else t=r.positions[i.PositionID];t&&o.$evalAsync(e.bind(function(){t.isPartialPendingClose&&(t.isPartialPendingClose=!1),t.isPendingClose=!1,o.$emit("portfolio:position:exitOrder:close:success",{position:t})},this))},"Trading.Failure.EntryOrder.Open":function(r,e){this["Trading.Failure.Order.Open"](r,e)},"Trading.Failure.EntryOrder.Close":function(r,e){this["Trading.Failure.Order.Close"](r,e)},"Trading.Failure.ExitOrder.Open":function(){I.get("bl.factories.trading.portfolioNotificationsService").positionExitOrderOpenFailed()},"Trading.Failure.ExitOrder.Close":function(){o.$emit("portfolio:position:exitOrder:close:failed")},"Trading.Account.Credit":function(r,e){o.$evalAsync(function(){r.balance+=e.CreditDelta,o.$emit("user:credit:update:success",{deltaAmount:e.CreditDelta,absDeltaAmount:Math.abs(e.CreditDelta)})})},"Trading.Mirror.Dividend.Durable":function(r,e){var o=r.findGroupWhere({MirrorID:e.MirrorID});if(o){var i=I.get("bl.factories.trading.portfolioTradingNotificationsService");i.showNotification({orderStatus:"filled",orderType:"mirrorDividendsWithdraw",mirrorData:{mirror:o},requestToken:e.RequestToken||"",href:o.Url,headerKey:"mirrorDividendsWithdraw"})}},"Trading.Mirror.ParentDeposit.Durable":function(r,e){var o=r.findGroupWhere({MirrorID:e.MirrorID});if(o){var i=I.get("bl.factories.trading.mirror-configurations.mirrorConfigurationsService"),t=o.user&&o.user.gcid;i.getMirrorConfigurationsData(t).then(function(r){o.optimalInvest=Math.max(r.AddFundsMinAmountDeltaDollars,e.MirrorRealizedEquity*e.DepositPercentage);var i=I.get("bl.factories.trading.portfolioTradingNotificationsService");i.showNotification({orderStatus:"filled",orderType:"mirrorDividendsDeposit",mirrorData:{mirror:o},requestToken:e.RequestToken||"",href:o.Url,headerKey:"mirrorDividendsDeposit"})})}},"Trading.Account.Liquidation.Alert":function(r,e){o.$evalAsync(function(){o.$emit("Liquidation:Alert",e)})},"Trading.Account.Liquidation":function(r,e){o.$evalAsync(function(){o.session.user.bsl.executionBlocked=!0,o.$emit("Liquidation:Set",e)})},"Trading.Customer.ExecutionBlock.Set":function(r,e){o.$evalAsync(function(){o.session.user.bsl.executionBlocked=!0,o.$emit("ExecutionBlocked:set",e)})},"Trading.Customer.ExecutionBlock.Remove":function(r,e){o.$evalAsync(function(){o.session.user.bsl.executionBlocked=!1,o.$emit("ExecutionBlocked:remove",e)})},"Trading.Position.Redeem.Update":function(r,e,i){if(e){var t=r.positions[e.PositionID];if(t){var n=t.getGroup();if(n&&"mirrorGroup"!==n.Type){t.RedeemStatusID=e.RedeemStatusID;var s;if(0===e.RedeemStatusID&&10===e.RedeemReasonID)s=4===o.session.user.regulationId||10===o.session.user.regulationId?"RedeemBOCancled.typeB":"RedeemBOCancled.typeA";else{var a=4===o.session.user.regulationId||10===o.session.user.regulationId?"redeemStatusChangeSuccess.typeB":"redeemStatusChangeSuccess.typeA";s=void 0!==e.RedeemStatusID?a+"."+e.RedeemStatusID:a}var l={regulationId:o.session.user.regulationId,instrument:t.Instrument,position:t,toastKey:s,defaultToastKey:"redeemStatusChangeSuccess"};T.eventTrack("Trading.Position.Redeem.Update",{Instrument:t.Instrument.SymbolFull,PositionID:e.PositionID,RedeemStatusID:e.RedeemStatusID,RedeemReasonID:e.RedeemReasonID,RegulationId:o.session.user.regulationId,toastKey:s}),I.get("bl.factories.trading.walletNotificationsService").redeemStatusChangeSuccess(l)}}else d.warn("Push -> Trading.Position.Redeem.Update-> The position was not found",i,e.PositionID)}},"Trading.Failure.Position.Redeem.Update":function(r,e){if(e){var i,t;if(i=r.positions[e.PositionID]){if(t=i.getGroup(),t&&"mirrorGroup"!==t.Type){var n=4===o.session.user.regulationId||10===o.session.user.regulationId?"redeemStatusChangeFailed.typeB":"redeemStatusChangeFailed.typeA",s=e.RedeemReasonID?n+"."+e.RedeemReasonID:n,a={regulationId:o.session.user.regulationId,toastKey:s,defaultToastKey:"redeemStatusChangeFailed"};T.eventTrack("Trading.Failure.Position.Redeem.Update",{Instrument:i.Instrument.SymbolFull,ErrorMessageCode:e.ErrorMessageCode,PositionID:e.PositionID,RedeemID:e.RedeemID,RedeemReasonID:e.RedeemReasonID,RedeemStatusID:e.RedeemStatusID,RegulationId:o.session.user.regulationId,toastKey:s}),I.get("bl.factories.trading.walletNotificationsService").redeemStatusChangeFailed(a)}}else d.warn("Push -> Trading.Failure.Position.Redeem.Update -> The position was not found",msg,e.PositionID)}},"Trading.ExitOrder.Edit":function(r,e){if(e){var i=r.positions[e.PositionID];i&&o.$evalAsync(function(){i.isPartialPendingClose&&(i.isPartialPendingClose=!1);var r=i.getGroup();r&&r.syncPositionsGroups&&r.syncPositionsGroups()})}},"Trading.PriceAlert.Triggered":function(r,e){var o=I.get("bl.factories.priceAlerts.priceAlertFactory"),i=o.getInstrumentIdByAlertId(e.AlertId);o.deleteAlertLocal(i)}},N={"Trading.Configuration.Instrument.SplitNotification":function(r){if(r&&r.InstrumentID&&g.dynamics.listenToSplitNotification&&o.session.isLoggedIn){var i=o.session.user.portfolio;if(i){var t,n,s;i.orders&&i.orders.length>0&&(t=e.findWhere(i.orders,{InstrumentID:r.InstrumentID})),s=i.getInstruments(),n=e.findWhere(s,{InstrumentID:r.InstrumentID}),(t||n)&&o.$emit("app:refreshPortfolio")}}}},U=/failure/i;e.each(k,function(r,e){o.$on(e,function(e,o,i,t){var n=y(i.Topic);n?(n.notifyAction&&o.RequestToken&&n.notifyAction(e.name,!U.test(e.name),o.RequestToken,o),r.call(k,n,o,i,t)):d.error("could not find portfolio for event",i)})}),e.each(N,function(r,e){o.$on(e,function(e,o,i,t){r.call(N,o,i,t)})});var G,w;return o.$on("logout:success",function(){M={},b={},F={},R=null,o.session.accountMode="Real",w&&clearInterval(w),G&&clearTimeout(G)}),o.$on("portfolio:connection:error",function(){var r=I.get("infrastruct.services.connectivityCheck");d.logJSON("error","log",{Categories:["PushLog"],Message:"Connection error displayed",Push:r.status,PrivateSubsciption:O()})}),o.$on("pushService:connected",function(){var r,e=I.get("infrastruct.services.push.push");if(R&&!O()){e.subscribe(R.topic,"first"),r=b[R.type],r&&c.subscribeBatch(r.getInstruments()),w&&clearInterval(w);var o=I.get("ngZone");o.runOutsideAngular(function(){w=setInterval(function(){O()?(clearInterval(w),d.logJSON("info","log",{Categories:["PushLog"],Message:"Registration to private subscription succeed",topic:R.topic})):e.subscribe(R.topic)},300)}),G&&clearTimeout(G),G=setTimeout(function(){R&&!O()&&d.logJSON("info","log",{Categories:["PushLog"],Message:"Unable to register to private subscription after 10 seconds",topic:R.topic}),clearInterval(w)},1e4)}v()||e.subscribe("trading:split")}),{init:function(e){function i(){var r={};r.isLoggedIn=e.isLoggedIn,r.Categories=["appError"],r.message=e?e.stsData?this.cid?"cid and stsData ara ok":this.type+"cid is undefined":"session.stsData is undefined":"session is undefined",console&&"function"==typeof console.trace&&(r.stackTrace=console.trace()),d.logJSON("error","log",r)}var t;return r.forEach(A,function(r,o){"default"!==o&&(M[r]={get type(){return r},get cid(){return A.real===this.type?e.stsData.realCid:e.stsData.demoCid},get topic(){return e&&e.stsData&&this.cid||i.apply(this),l("@{{type.toLowerCase()}}cid:{{cid}}/")(this)}})}),t="go-virtual"===g.query.action?A.demo:o.session.accountMode,r.isString(t)&&M[t]||(t=A["default"],o.session.accountMode=t),g.dynamics.disableDemo&&(t=A.real,o.session.accountMode=t),R=M[t]},setAccount:function(r,e,i){return F[r.type]?(R=M[r.type],F[r.type].promise):(F[r.type]=a.defer(),h(r,e).then(function(e){R=M[r.type],C(r,e).then(function(e){if(b[r.type])try{b[r.type]=e}catch(t){D.reload(),d.error("Portfolio Silent Sync Failed",t)}else b[r.type]=e;var n=I.get("infrastruct.services.push.push");i&&(n.disconnect(),n.setAuthorization(decodeURIComponent(o.session.token),g.calculated.getAccountPushConfig(r))),n.subscribe(r.topic,"first"),c.subscribeBatch(e.getInstruments()),F[r.type].resolve(e),o.session.accountMode=r.type})["catch"](function(e){F[r.type].reject(e)})})["catch"](function(e){F[r.type].reject(e)}),F[r.type].promise)},sync:S,accountTypes:A,getAccount:function(r){return M[r]},removePortfolio:function(r){delete F[r],delete b[r]},removePortfolioPromise:function(r){delete F[r]},get:function(){return R?b[R.type]:null},get isTradingConnectionAvailable(){var r=I.get("infrastruct.services.connectivityCheck");return r.status&&O()},assertTradingConnection:function(){return this.isTradingConnectionAvailable?!0:(I.get("bl.factories.trading.portfolioNotificationsService").connectionError(),o.$broadcast("portfolio:connection:error"),!1)},isSubscribedToPortfolio:O,syncPortfolio:function(r,e){r=e}}}return function(r,e){return o(r,[]).factory(e,["$rootScope","$http","$q","$log","$interpolate","bl.factories.trading.instruments.instrumentsFactory","bl.factories.trading.instruments.rates.ratesFactory","bl.factories.trading.users.usersFactory","bl.factories.settings.preferences","infrastruct.services.config","bl.factories.trading.mixpanelEventsService","$route","$injector","$analytics",s])}});define(rA[284][0],["underscore"],function(e){"use strict";function t(e,t,r){this.compareProperty=e,this.onItemRemove=t||function(){},this.onItemAdd=r||function(){}}return t.prototype={syncObjects:function(t,r){var i=this,n=e.isArray(t),s=e.isArray(r);if(n&&!s)throw"old Object is Array, but new Object is Object";if(!n&&s)throw"old Object is Object, but new Object is Array";if(n&&s)i.syncArrays(t,r);else if(e.isObject(t)&&e.isObject(r)){if(t._hashIdentifier&&r._hashIdentifier&&t._hashIdentifier!==r._hashIdentifier||!t._hashIdentifier||!r._hashIdentifier){for(var c in t)t.hasOwnProperty(c)&&!r[c]&&(i.onItemRemove(t[c],c),delete t[c]);var o=!1,a=!1,h=r._hashSyncPropertires?e.uniq(r._hashSyncPropertires):Object.keys(r);e.each(h,function(n){o=Object.getOwnPropertyDescriptor(r,n),o&&void 0===o.get&&(a=Object.getOwnPropertyDescriptor(t,n),t[n]&&a&&void 0===a.get?e.isFunction(t[n])||!e.isArray(t[n])&&!e.isObject(t[n])?t[n]=r[n]:i.syncObjects(t[n],r[n]):t[n]=r[n])})}}else t=r},syncArrays:function(t,r){var i=[],n=this;e.each(t,function(t,s){e.find(r,function(r){return e.isArray(t)||e.isObject(t)?t[n.compareProperty]===r[n.compareProperty]:t===r})||i.push(s)});for(var s=i.length-1;s>=0;s--)n.onItemRemove(t[s]),t.splice(i[s],1);e.each(r,function(i,s){var c=e.findIndex(t,function(e){return e[n.compareProperty]===i[n.compareProperty]});-1!==c?n.syncObjects(t[c],r[s]):(n.onItemAdd(i),t.push(i))})}},t});define(rA[348][0],["angular"],function(o){"use strict";var e=o.module("infrastruct.ui.dialog",[]),i=o.element,n=o.isDefined,a=(document.body||document.documentElement).style,t=n(a.animation)||n(a.WebkitAnimation)||n(a.MozAnimation)||n(a.MsAnimation)||n(a.OAnimation),l="animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend";return e.provider("uiDialog",function(){var e=this.defaults={className:"",plain:!1,showClose:!1,closeByDocument:!0,closeByEscape:!0,isNewDesign:!1,isBackgroundBlur:!1},n=0,a=0,s={},c={};this.$get=["$document","$templateRequest","$compile","$q","$rootScope","$timeout",function(u,r,d,g,D,m){var p=u.find("body"),f={onDocumentKeydown:function(o){27===o.keyCode&&v.close()},closeDialog:function(o){var e=o.attr("id"),i=void 0,n=c[e];o.unbind("click"),1===a&&p.unbind("keydown"),o.hasClass("uidialog-closing")||(a-=1),n&&n.uiDialogData&&(i=n.uiDialogData.result),t?o.unbind(l).bind(l,function(){n&&n.$destroy(),o.remove(),0===a&&p.removeClass("uidialog-open")}).addClass("uidialog-closing"):(n&&n.$destroy(),o.remove(),0===a&&p.removeClass("uidialog-open")),s[e]&&(s[e].resolve({id:e,result:i,$dialog:o,remainingDialogs:a}),delete s[e]),c[e]&&delete c[e],D.$broadcast("uiDialog.closed",o)},onDialogCloseCallback:function(o){var e=(o.dialogOptions||{}).onCloseCallback;o.isDialogOpen&&"function"==typeof e&&e()}},v={open:function(t){function l(e){return e?o.isString(e)&&y.plain?e:r(e):"Empty template"}var u=this,y=o.copy(e);t=t||{},o.extend(y,t),n+=1,u.latestID="uidialog"+n,u.dialogOptions=y;var C;s[u.latestID]=C=g.defer();var $,b=c[u.latestID]=o.isObject(y.scope)?y.scope.$new():D.$new();return g.when(l(y.template)).then(function(e){function t(o){var e=y.closeByDocument?i(o.target).hasClass("e-screen"):!1,n=i(o.target).hasClass("uidialog-close-button");(e||n)&&v.close($.attr("id"))}return e=o.isString(e)?e:e.data&&o.isString(e.data)?e.data:"",y.showClose&&(e+='<div class="uidialog-close-button"></div>'),u.$result=$=i('<div id="uidialog'+n+'" class="uidialog '+(y.isNewDesign?"new-dialog ":"")+(y.isBackgroundBlur?"bkg-blur":"")+"\" ng-class=\"{'demo-mode': session.user.portfolio.account.type === 'Demo' }\"></div>"),$.html((y.hideOverlay?"":'<div class="uidialog-overlay"></div>')+'<div class="uidialog-content">'+e+"</div>"),y.controller&&o.isString(y.controller)&&$.attr("ng-controller",y.controller),y.className&&$.addClass(y.className),y.data&&(b.uiDialogData=o.isString(y.data)&&"{"===y.data.replace(/^\s*/,"")[0]?o.fromJson(y.data):y.data),b.closeThisDialog=function(){f.closeDialog($)},m(function(){d($)(b),p.addClass("uidialog-open").append($),D.$broadcast("uiDialog.opened",$)}),y.closeByEscape&&p.bind("keydown",f.onDocumentKeydown),y.allowNavigation&&b.$on("$routeChangeStart",function(o){o.defaultPrevented=!1}),y.closeByNavigation&&b.$on("$routeChangeStart",function(o){o.preventedByAuthorization?o.preventDefault():(o.defaultPrevented=!1,v.closeAll())}),$.bind("click",t),a+=1,v}),{id:"uidialog"+n,closePromise:C.promise,close:function(){f.closeDialog($)}}},openConfirm:function(e){var i=g.defer(),n={closeByEscape:!1,closeByDocument:!1};o.extend(n,e),n.scope=o.isObject(n.scope)?n.scope.$new():D.$new(),n.scope.confirm=function(o){i.resolve(o),a.close()};var a=v.open(n);return a.closePromise.then(function(){i.reject()}),i.promise},close:function(o){f.onDialogCloseCallback(this);var e=i(document.getElementById(o));return e.length?f.closeDialog(e):v.closeAll(),v},get isDialogOpen(){return a>0},closeAll:function(){f.onDialogCloseCallback(this);var e=document.querySelectorAll(".uidialog");o.forEach(e,function(o){f.closeDialog(i(o))})}};return D.$on("$routeChangeStart",function(o,e){var i=e&&e.$$route&&"login"===e.$$route.id;i&&!D.session.isLoggedIn?v.closeAll():v.isDialogOpen&&o.preventDefault()}),v}]}),e.directive("uiDialog",["uiDialog",function(e){return{restrict:"A",scope:{uiDialogScope:"="},link:function(i,n,a){n.on("click",function(n){n.preventDefault();var t=o.isDefined(i.uiDialogScope)?i.uiDialogScope:"noScope";o.isDefined(a.uiDialogClosePrevious)&&e.close(a.uiDialogClosePrevious),e.open({template:a.uiDialog,className:a.uiDialogClass,controller:a.uiDialogController,scope:t,data:a.uiDialogData,showClose:"true"===a.uiDialogShowClose?!0:!1,closeByDocument:"false"===a.uiDialogCloseByDocument?!1:!0,closeByEscape:"false"===a.uiDialogCloseByEscape?!1:!0,closeByNavigation:"true"===a.uiDialogCloseByNavigation?!0:!1,allowNavigation:"true"===a.uiDialogAllowNavigation?!0:!1})})}}}]),e});define(rA[497][0],["angular","underscore","moduleDefiner",rA[351][0],rA[348][0],rA[456][0],rA[470][0],rA[327][0],rA[328][0],rA[464][0],rA[56][0],rA[66][0],rA[43][0],rA[374][0],rA[57][0],rA[33][0]],function(e,t,o,i,n,r,s,a,l,u,c,d,p,g,m,f){"use strict";function v(o,i,n,r,s,a,l,u,g,v,h,y,I,D,T,C,P,A,b,w,O,R,k){function E(){function e(e){return e.endsWith("_test")}var t=O.get("genericAbTestService");t.getExperiment("default_amount","Trading").then(function(t){st.defaultAmount=t&&t.variationId&&e(t.variationId)&&t.variationId})}function S(){function e(e){return e.endsWith("_test")}var t=O.get("genericAbTestService");t.getExperiment("market_closed_indication","Trading").then(function(t){st.marketClosedIndication=t&&t.variationId&&e(t.variationId)&&t.variationId})["catch"](function(){st.marketClosedIndication=!1})}function x(){var e=O.get("genericAbTestService");at.forEach(function(t){e.getExperiment(t.experimentId,"Trading").then(function(e){st[t.propertyName]=e&&e.variationId?e.variationId===t.experimentId+"_test":!1})["catch"](function(){st[t.propertyName]=!1})})}function _(){var e="remember_last_leverage",t=l.defer();if(k.getItem("highLeverageUser")){var o=O.get("genericAbTestService");o.getExperiment(e,"Trading").then(function(t){t&&t.variationId&&t.variationId===e+"_test"&&(st.rememberLastLeverage=!0)})["catch"](function(){t.resolve()})}return t.resolve(),t.promise}function F(){var e="leverage_tray_stocks",t=O.get("genericAbTestService");t.getExperiment(e,"Trading").then(function(t){t&&t.variationId&&t.variationId===e+"_test"&&(st.leverageTrayStocks=!0)})}function M(e,t){function o(e){return e.endsWith("_test")}var i=l.defer(),n=O.get("genericAbTestService");n.getExperiment(t,"Trading").then(function(t){t&&t.variationId?o(t.variationId)&&(st[e]=t.variationId,i.resolve()):i.resolve()})}function B(e,t){return{View_Source_Application:e||"UN KNOWN",View_Source_Location:t||s.path()}}function N(e,t){var o=parseToFloat(e.amount.amount);return 0===o?0:(t=Math.abs(parseToFloat(t)),toFixed(t/o*100,2))}function U(e,t,o){if(r.session.isLoggedIn){R.sendOpenInOneClickMode(e);var i=n.isDiscountedRate(t,o,e.leverages.selectedLeverage);e.marketMode===e.marketModeOptions.active?r.session.user.portfolio.openPosition(e,i):r.session.user.portfolio.openEntryMarketOrder(e,i)}}function L(e,t,o,i){if(e&&!e.IsActive&&!e.AllowEntryOrders)return pt.showRestrictionPopup("entryAndPendingOrder",{},e.SymbolFull),y.eventTrack("trading - user clicked on Trade/Buy and got restriction popup: entryAndPendingOrders"),void a.logJSON("info","log",{Categories:["Trading"],Message:"Not allowed to open position due to disabled entry and pending orders rejection",instrument:e});var n=ot().updateOpenPositionModel(e,t);n.takeProfit.percentAmount=N(n,n.takeProfit.dollar),n.stopLoss.percentAmount=N(n,n.stopLoss.dollar),o.View_CurrentTradingMode="ONE CLICK TRADING",n.source=o,b.validateOneClickTradingW8BEN(e,n.leverages.selectedLeverage,t,i).then(function(o){o&&o.allow&&U(n,e,t)})["catch"](function(o){$("warn",{Message:"one click trading mode - restriction raised an error: "+(o||"no message")}),U(n,e,t)})}function $(t,o){a.logJSON(t,"log",e.extend({Categories:["userTradingActionUI"]},o))}function W(){var e,o=r.session.user;return o&&o.CustomerRestrictions&&(e=t.where(r.session.user.CustomerRestrictions,{RestrictionTypeID:1}),e.length>0)?t.findWhere(e,{ReasonID:2})||e[0]:!1}function z(e){var o;return e.CustomerRestrictions&&(o=t.where(e.CustomerRestrictions,{RestrictionTypeID:2}),o.length>0)?t.findWhere(o,{ReasonID:2})||o[0]:e.optOut?{RestrictionTypeID:2,ReasonID:4}:!1}function J(e,t,i){var n;n=o.open({template:'<et-copy-block-error (on-close)="closeThisDialog()" (on-go-to-discovery)="uiDialogData.goToDiscovery();" [is-copy-block]="uiDialogData.isCopyBlock" [reason]="uiDialogData.reason" [user]="uiDialogData.user"></et-copy-block-error>',plain:!0,data:{reason:t,goToDiscovery:function(){n.close(),s.path("fund"===e.SubType?"/discover/smartportfolios":"/discover/people")},user:e,isCopyBlock:i}}),i||O.get("bl.factories.trading.users.usersStatsFacade").getRisk(e).then(function(t){y.eventTrack("Copy Trader - User Copied Blocked Modal (risk 9-10)",{"Target Username":e.Name,"Target Risk":t.currentRisk})})}function V(e,t,i,n,s,a,l){ut=!1,r.session.isLoggedIn&&(r.$broadcast("execution:dialog:open"),o.open({template:c.name,data:{instrument:e,isBuy:t,model:i,source:n,restrictionsSummary:l||{}},closeByEscape:s,allowNavigation:!!a}).closePromise.then(function(){r.$broadcast("execution:dialog:close")}))}function j(e,t,i,n,s){lt=!1;var a=W(),l=z(e),u=r.session.isLoggedIn&&"fund"==r.session.user.SubType;return u||!a&&!l?(o.open({template:'<et-manage-copy-trade (on-close)="closeThisDialog()" [mirror]="uiDialogData.mirror" [source]="uiDialogData.source" [init-model]="uiDialogData.model"></et-manage-copy-trade>',plain:!0,data:{mirror:e,model:i,allowNavigation:!!n,source:s}}),$("warn",{Message:"Open copy popup success",Timeout:!!t}),!0):(J(e,a||l,!!a),!1)}function G(e,t){o.open({template:m.name,data:{loadDeposit:K,isRealAccount:"Real"===e.account.type,goToVirtualMode:function(){v.show(),o.close(),r.session.user.toggleAccount()["finally"](function(){v.hide()})}},allowNavigation:!!t})}function K(){O.get("bl.factories.payments.deposit.depositLoader").loadFundYourAccount(),h.abTestInitiated=!1}function q(e){if(e.sl_amount&&e.sl_rate||e.tp_amount&&e.tp_rate)return{};var t={},o=e.isBuy&&e.isBuy.toString().toLowerCase();!e.isBuy||"true"!==o&&"false"!==o||(t.isBuy="true"===e.isBuy);var i=e.isExpressCheckout&&e.isExpressCheckout.toString().toLowerCase();return!e.isExpressCheckout||"true"!==i&&"false"!==i||(t.isExpressCheckout="true"===i),Z(e.amount)?t.amount={amount:parseFloat(e.amount)}:Z(e.units)&&(t.amount={units:parseFloat(e.units),inUnitsMode:!0}),Z(e.leverage)&&(t.leverages={selectedLeverage:parseFloat(e.leverage)}),"order"===e.action&&(t.marketMode=e.action,Z(e.rate)&&(t.viewRate=e.rate)),Z(e.sl_amount)?t.stopLoss={dollar:parseFloat(e.sl_amount)}:Z(e.sl_rate)&&(t.stopLoss={amount:parseFloat(e.sl_rate)}),Z(e.tp_amount)?t.takeProfit={dollar:parseFloat(e.tp_amount)}:Z(e.tp_rate)&&(t.takeProfit={amount:parseFloat(e.tp_rate)}),t}function Y(e){if(e.csl_amount&&e.csl_percent)return{};var t={},o=e.isExpressCheckout&&e.isExpressCheckout.toString().toLowerCase();!e.isExpressCheckout||"true"!==o&&"false"!==o||(t.isExpressCheckout="true"===o),Z(e.amount)&&(t.amount=parseFloat(e.amount)),Z(e.csl_amount)&&(t.stopLossModel={moneyAmount:parseFloat(e.csl_amount)}),Z(e.csl_percent)&&(t.stopLossModel={percentAmount:parseFloat(e.csl_percent)});var i=e.copy_open_trades&&e.copy_open_trades.toString().toLowerCase();return!e.copy_open_trades||"true"!==i&&"false"!==i||(t.copyExistingPositions="true"===i),t}function H(e,t,o){return{entityType:e,entityId:t,isBuy:o}}function Q(e,t){return{instrumentId:e.InstrumentID,isBuy:t,isExpressCheckout:!0,amount:{amount:1e3}}}function X(){return{isExpressCheckout:!0,amount:1e3}}function Z(e){return(e||0==e)&&!isNaN(e)}function et(e,t,o){var i,n,r=t.action,s="angular routing feature shortcut";if(r&&e)if("trade"!==r&&"order"!==r||"instrument"!==e.Type)"copy"===r&&"user"===e.Type&&(i=Y(t),pt.copyTrade(e,i,!0,!0,s,o));else{if(i=q(t),n=i&&"undefined"!=typeof i.isBuy?i.isBuy:!0,n&&!e.IsAllowBuy||!n&&!e.IsAllowSell)return;pt.openPosition(e,n,null,null,i,!0,!0,!1,s)}}function tt(){var e=r.session.isLoggedIn&&r.session.user;return e?e.isValidForExpressCheckout():l.resolve(!1)}var ot=function(){return O.get("bl.factories.trading.oneClickTrading")},it=function(){return O.get("bl.factories.compliance.tradingFlowsService")},nt=function(){return O.get("bl.factories.compliance.spanishService")},rt={INSTRUMENT:1,MIRROR:2},st={isConfirmForAll:!1},at=[{experimentId:"confirmation_screen_row",propertyName:"isConfirmForAll"},{experimentId:"open_trade_card_sell_terminology",propertyName:"cardSellTerminology"},{experimentId:"trading_widget_new_users",propertyName:"tradingWidgetNew"},{experimentId:"trading_widget_existing_users",propertyName:"tradingWidgetOld"}],lt=!1,ut=!1,ct=!1,dt=!1,pt={isTradingConnectionAvailable:function(){return C.isTradingConnectionAvailable},copyTrade:function(e,i,n,s,a,l){var u=!1;if(!lt){if(lt=!0,!r.session.assertIsAuthorized(null,e,!1,t.bind(function(){lt=!1,this.copyTrade(e,i,!0,!0,a)},this))||!s&&!C.assertTradingConnection()){var c=H(rt.MIRROR,e&&e.realCID);return void r.$emit("expresscheckout:save:data",c)}var d=B(a,l);return P.dynamics.trading.suitabilityConfig.suitability2022.enable||"demo"!==r.session.user.portfolio.account.type.toLowerCase()?void it().complianceCheckCopyTrade(i).then(function(){var n=O.get("bl.factories.trading.mirror-configurations.mirrorConfigurationsService");n.getMirrorConfigurationsData(e.gcid).then(t.bind(function(s){if(s&&(!s.AllowCopy||!s.AllowCopied)){var l=s.AllowCopy?s.AllowCopiedFailErrorCode:s.AllowCopyFailErrorCode;if([799,811,819].includes(l))return lt=!1,void this.showRestrictionPopup("fund"===e.SubType?"fund":"copy",a);if([810,723,760].includes(l)){lt=!1;var c=W();return void J(e,!0,!!c)}}return i||"real"!==r.session.user.portfolio.account.type.toLowerCase()?!P.dynamics.trading.suitabilityConfig.suitability2022.enable&&i&&i.isExpressCheckout?(v.hide(),void j(e,!1,i,void 0,d)):($("info",{Message:"Open copy popup attempt"}),void it().isKycAllowToCopy(e).then(function(t){if(!t)return void(lt=!1);if(e.isInPortfolio)e.isPendingForClosure||pt.manageCopyAmount(e.getPortfolioGroup(),!0,void 0,a);else if(nt().shouldShowSpainRestrictionsPopup(!0)){var s=r.session.user.portfolio;n.getMirrorConfigurationsData(e.gcid).then(function(t){var n=A.getMinMaxAmountForNewMirror(t,s.availibleToTrade,toFixed(P.dynamics.deposit.maxDeposit,2));s.availibleToTrade>=n.min?nt().openSpainRestrictionsPopup(!0).then(function(t){"submitted"===t&&(o.closeAll(),u=j(e,!1,i,void 0,d))}.bind(this))["finally"](function(){lt=!1}):u=j(e,!1,i,void 0,d)}.bind(this))["catch"](function(){u=j(e,!1,i,void 0,d)}.bind(this))}else u=j(e,!1,i,void 0,d)}.bind(this))["catch"](function(){lt=!1})):(v.show(),void tt().then(t.bind(function(t){i=t?X():{},v.hide(),lt=!1,this.copyTrade(e,i,!0,!0,a)},this))["catch"](function(){})["finally"](function(){v.hide()}))},this))["catch"](function(){u=j(e,!1,i,void 0,d)}.bind(this))}.bind(this))["catch"](function(e){$("warn",{Message:"Copy trade popup - complianceCheckCopyTrade raised an error: "+(e||"no message")}),lt=!1}):void j(e,!1,i,void 0,d)}},manageCopyAmount:function(e,i,n,s,a){if(r.session.assertIsAuthorized()&&C.assertTradingConnection()&&!dt){dt=!0;var l=i?"ADD FUNDS":"REMOVE FUNDS";s?s+="-"+l:s=l,v.show(),g.getById(e.ParentCID,!0).then(function(r){var l=O.get("bl.factories.trading.mirror-configurations.mirrorConfigurationsService");l.getMirrorConfigurationsData(r.gcid).then(t.bind(function(t){if(t&&i){if(!t.AllowCopy||!t.AllowCopied){var l=t.AllowCopy?t.AllowCopiedFailErrorCode:t.AllowCopyFailErrorCode;if([799,811].includes(l))return dt=!1,v.hide(),void pt.showRestrictionPopup("fund"===r.SubType?"fund":"copy",s);if([810,723,760].includes(l)){dt=!1,v.hide();var u=W();return void J(r,!0,!!u)}}var c=it().complianceCheckUserVerified();if(!c)return;it().isKycAllowToCopy(r).then(function(t){dt=!1,t&&(v.hide(),o.open({template:'<et-manage-copy-amount (on-close)="closeThisDialog()" [mirror]="uiDialogData.mirror" [do-add]="uiDialogData.doAdd" [amount]="uiDialogData.amount" [allocate-amount-delta-to-positions]="uiDialogData.allocateAmountDeltaToPositions" [source]="uiDialogData.source"></et-manage-copy-amount>',plain:!0,data:{mirror:e,doAdd:i,amount:n,allocateAmountDeltaToPositions:a,source:B(s)},closeByEscape:!1}))}.bind(this))["catch"](function(){dt=!1})}else v.hide(),o.open({template:'<et-manage-copy-amount (on-close)="closeThisDialog()" [mirror]="uiDialogData.mirror" [do-add]="uiDialogData.doAdd" [amount]="uiDialogData.amount" [allocate-amount-delta-to-positions]="uiDialogData.allocateAmountDeltaToPositions" [source]="uiDialogData.source"></et-manage-copy-amount>',plain:!0,data:{mirror:e,doAdd:i,amount:n,allocateAmountDeltaToPositions:a,source:B(s)},closeByEscape:!1}),dt=!1},this))})}},manageStopLossAmount:function(e,t){r.session.assertIsAuthorized()&&C.assertTradingConnection()&&o.open({template:'<et-manage-copy-stop-loss (on-close)="closeThisDialog()" [mirror]="uiDialogData.mirror" [source]="uiDialogData.source"></et-manage-copy-stop-loss>',plain:!0,data:{mirror:e,source:B(t)},closeByEscape:!1})},pauseResumeCopyTrade:function(e,t){if(r.session.assertIsAuthorized()&&C.assertTradingConnection()){var i=e.IsPaused?"RESUME":"PAUSE";t?t+="-"+i:t=i,o.open({template:'<et-pause-resume-copy (on-close)="closeThisDialog()" [source]="uiDialogData.source" [mirror]="uiDialogData.mirror"></et-pause-resume-copy>',plain:!0,data:{mirror:e,source:B(t)},closeByEscape:!1})}},closeCopyTrade:function(e,t){r.session.assertIsAuthorized()&&C.assertTradingConnection()&&o.open({template:'<et-close-copy (on-close)="closeThisDialog()" [source]="uiDialogData.source" [mirror]="uiDialogData.mirror" [user]="uiDialogData.user"></et-close-copy>',plain:!0,data:{mirror:e,source:B(t),user:r.session.user},closeByEscape:!1})},showRestrictionPopup:function(e,t,i){i=i||"";var n=B(t);o.open({template:'<restrict-trading  app-source="uiDialogData.appSource" on-close="closeThisDialog()" type="uiDialogData.type" symbol="uiDialogData.symbol"></restrict-trading>',plain:!0,data:{closeByEscape:!1,appSource:n,type:e,symbol:i}})},showPendingOrderRestriction:function(e){this.showRestrictionPopup("pendingOrder");var t="Place an order is not allowed with pending sell position";y.eventTrack("portfolio - restriction popup: "+t),a.logJSON("info","log",{Categories:["Trading"],Message:"User Restricted - "+t,instrument:e.SymbolFull})},showOpenTradeUpsellPopup:function(e,t){o.open({template:'<open-trade-upsell-popup  on-close="closeThisDialog()" upsell-data="uiDialogData.upsellData"></open-trade-upsell-popup>',plain:!0,data:{closeByEscape:!1,upsellData:t}})},openPosition:function(s,l,u,c,d,p,g,m,f,h){var D,A,w;if(!ut){if(ut=!0,!r.session.assertIsAuthorized(null,s,!1,t.bind(function(){ut=!1,this.openPosition(s,l,u,c,d,!0,!0,m,f)},this))||!g&&!C.assertTradingConnection()){var O=H(rt.INSTRUMENT,s&&s.InstrumentID,l);return r.$emit("expresscheckout:save:data",O),void(ut=!1)}var R=r.session&&r.session.user,k=this.checkRegulationRestriction(R,s),E=s&&{symbolFull:s.SymbolFull,instrumentId:s.InstrumentID,isActive:s.rate.IsActive,isExchangeOpen:s.rate.IsExchangeOpen,isUsTrade:s.isUsTrade,restrictedManualOpen:s.RestrictedManualOpen,allowManualTrading:s.AllowManualTrading,designatedRegulationId:R&&R.designatedRegulationId};if(s&&s.RestrictedManualOpen||k)return this.showRestrictionPopup("instrument",f),a.logJSON("info","log",{Categories:["Trading"],Message:"Not allowed to open position due to restriction or regulatory reasons",instrumentData:E}),void(ut=!1);var S=s&&s.isUsTrade&&!s.IsActive;if(s&&!s.IsActive&&!s.AllowEntryOrders&&!s.AllowPendingOrders||S)return this.showRestrictionPopup("entryAndPendingOrder",f,s.SymbolFull),y.eventTrack("trading - user clicked on Trade/Buy and got restriction popup: entryAndPendingOrders"),a.logJSON("info","log",{Categories:["Trading"],Message:"Not allowed to open position due to disabled entry and pending orders rejection",instrumentData:E}),void(ut=!1);if(s&&r.session.user.portfolio.getPendingOrdersByInstrumentId(s.InstrumentID).pendingClose.length)return this.showPendingOrderRestriction(s),void(ut=!1);if(D=r.session.user.portfolio,w="real"===D.account.type.toLowerCase(),s.isPreview&&!m)return this.openInstrumentPreviewPopup(s,r.session.user),void(ut=!1);if(!d&&w)return v.show(),tt().then(t.bind(function(e){d=e?Q(s,l):{},v.hide(),ut=!1,this.openPosition(s,l,u,c,d,p,g,m,f,h)},this))["catch"](function(){v.hide()}),void(ut=!1);var x=Array.prototype.slice.call(arguments);it().complianceCheckOpenPosition(d).then(function(){if(nt().shouldShowSpainRestrictionsPopup(!1,D.availibleToTrade,s))return nt().openSpainRestrictionsPopup(!1,D.availibleToTrade,s).then(function(e){"submitted"===e&&(o.closeAll(),ut=!1,this.openPosition.apply(this,x))}.bind(this)),void(ut=!1);A=!d&&w?P.dynamics.portfolio.real.useOneClickTradingSettings:P.dynamics.portfolio.demo.useOneClickTradingSettings,u&&i&&e.isFunction(u.stopImmediatePropagation)&&u.stopImmediatePropagation();var t=B(f),v=ot(),y=v.getInstrumentSettings(s.InstrumentID);if(!c&&v.isEnabled()&&y)return y.octSettings.amount>D.availibleToTrade?(G(D),void(ut=!1)):(I.getPromiseById(s).then(function(){I.subscribe(s),L(s,l,t,w)}),void(ut=!1));A&&instrumentIsOneClickTrading&&(d=ot().updateOpenPositionModel(s,l));var C=d&&d.leverages&&d.leverages.selectedLeverage?d.leverages.selectedLeverage:s.DefaultLeverage,O=!w,R="openPosition",k=n.getTradeActionDescriptorObject(l,s,O,C,R);d?(h&&(d.amountInput=h),d.abTestsConfig=st):(d={abTestsConfig:st},h&&!w&&(d.amountInput=h)),it().getPotentialLeverageFlowDialog(k).then(function(e){if(e)if(e.regulationChanged)r.$emit("TradingRiskStatus:change"),T.assertPrivateInstrument(s).then(function(){ut=!1,this.openPosition(s,l,u,c,d,p,g,m,f)}.bind(this));else{if("PotentialRealStockLeverage"===e.flow)s.DefaultLeverage=e.leverage?e.leverage:C;else if("IdentFlow"===e.flow&&!e.passedIdentFlow)return void(ut=!1);b.validateOpenPositionW8BEN(s,l,w).then(function(e){l&&b.isSignedByIntroduction(e)&&(k.isReal=!0),it().getFirstTradeFlowDialog(k).then(function(){T.assertPrivateInstrument(s).then(function(){_(s).then(function(){V(s,l,d,t,!1,p,e)})})})["catch"](function(){ut=!1})})["catch"](function(e){$("warn",{Message:"Open copy popup - restriction raised an error: "+(e||"no message")}),it().getFirstTradeFlowDialog(k).then(function(){T.assertPrivateInstrument(s).then(function(){_(s).then(function(){V(s,l,d,t,!1,p,{})})})})["catch"](function(){ut=!1})})}else ut=!1}.bind(this))["catch"](function(){a.error("User is not allowed to open position due to KYC getPotentialLeverageFlowDialog rejection"),ut=!1})}.bind(this))["catch"](function(e){$("warn",{Message:"Open position popup - complianceCheckOpenPosition raised an error: "+(e||"no message")}),ut=!1})}},updatePosition:function(e,t,i){if(D.isMobile&&e&&e.Instrument&&e.Instrument.isUsTrade&&!e.isOrderForClose)return void this.closePosition(e,i);if(e&&!e.isClosedRequested&&r.session.assertIsAuthorized()&&C.assertTradingConnection()&&!(e.MirrorID>0&&e.ParentPositionID>0))return e.isPendingClose&&e.isRedeemPending?void O.get("bl.factories.trading.walletNotificationsService").redeemAlreadyProcessedFailed({data:e}):void o.open({template:d.name,data:{position:e,tab:t,source:B(i)},className:"edit-trade-dialog",closeByEscape:!1})},closePosition:function(e,t,i){if(!ct){if(ct=!0,!e||e.isClosedRequested||e.isOrderForClose||!r.session.assertIsAuthorized())return void(ct=!1);if(e.Instrument&&!e.Instrument.IsActive&&!e.Instrument.AllowExitOrder){pt.showRestrictionPopup("exitOrder",{},e.Instrument.SymbolFull),y.eventTrack("portfolio - user clicked on Close Position and got restriction popup: exitOrder");var n=e.Instrument;return a.logJSON("info","log",{Categories:["Trading"],Message:"Not allowed to close exit order.",instrumentData:{symbolFull:n.SymbolFull,instrumentId:n.InstrumentID,isActive:n.IsActive,isUsTrade:n.isUsTrade},positionData:{positionId:e.PositionID,currentRate:e.CurrentRate,positionAmount:e.Amount}}),void(ct=!1)}if(e.Instrument.isUsTrade&&r.session.user.portfolio.getPendingOrdersByInstrumentId(e.Instrument.InstrumentID).pendingOpen.length)return this.showPendingOrderRestriction(e.Instrument),void(ct=!1);var s=B(t),l=ot(),u=r.session.isUsUser();if(l&&!u){var c=l.getInstrumentSettings(e.Instrument.InstrumentID);if(!i&&l.isEnabled()&&c)return s.CurrentTradingMode="ONE CLICK TRADING",e.Instrument.IsActive?e.close(s):e.closeExitMarketOrder(s),void(ct=!1)}o.open({template:p.name,data:{position:e,source:s,isTradingConnectionAvailable:C.isTradingConnectionAvailable},closeByEscape:!1}),ct=!1}},closeAllTrades:function(e,t){if(e){var i=r.session.user.portfolio.getGroupByUniqueId(e);if(i&&i.Instrument&&!i.Instrument.IsActive&&!i.Instrument.AllowExitOrder)return pt.showRestrictionPopup("exitOrder",{},i.Instrument.SymbolFull),y.eventTrack("portfolio - user clicked on Close Position and got restriction popup: exitOrder"),void a.logJSON("info","log",{Categories:["Trading"],Message:"Not allowed to close exit order.",instrument:i.Instrument});if(i.Instrument.isUsTrade&&r.session.user.portfolio.getPendingOrdersByInstrumentId(i.Instrument.InstrumentID).all.length)return void this.showPendingOrderRestriction(i.Instrument);if(i){var n=B(t);o.open({template:'<close-all-positions positions-group=":: uiDialogData.positionsGroup" app-source="uiDialogData.appSource" on-close="closeThisDialog()" is-trading-connection-available="uiDialogData.isTradingConnectionAvailable"></close-all-positions>',plain:!0,data:{positionsGroup:i,closeByEscape:!1,appSource:n,isTradingConnectionAvailable:C.isTradingConnectionAvailable}})}}},closeOrder:function(e,t,i,n,s){if(i&&(i.stopImmediatePropagation&&i.stopImmediatePropagation(),i.preventDefault&&i.preventDefault()),e&&!e.isClosedRequested&&r.session.assertIsAuthorized()&&(!t||D.isMobile)){var a=B(n);return!s&&ot().isEnabled()&&e.Instrument&&e.Instrument.isOneClickTrading?void(e.isEntryOrder||e.isPendingClose?e.isPendingClose?e.isRedeemPending?O.get("bl.factories.trading.walletNotificationsService").redeemAlreadyProcessedFailed({data:e}):e.cancelCloseExitMarketOrder(a):e.isEntryOrder&&e.closeEntryMarketOrder(a):e.close(a)):e.isPendingClose&&e.isRedeemPending?void O.get("bl.factories.trading.walletNotificationsService").redeemAlreadyProcessedFailed({data:e}):void o.open({template:'<et-close-order (close)="closeThisDialog()" (close-order) = "uiDialogData.closeOrder(1);"(close-exit-order) = "uiDialogData.closeOrder(2);"(close-market-order) = "uiDialogData.closeOrder(3);"[instrument-avatar]="uiDialogData.instrumentAvatar" [instrument-name]="uiDialogData.instrumentName" [is-buy]="uiDialogData.isBuy" [rate]="uiDialogData.rate" [instrument-precision]="uiDialogData.instrumentPrecision" [is-american-precision]="uiDialogData.isAmericanPrecision" [order-id]="uiDialogData.orderID" [amount]="uiDialogData.amount" [units]="uiDialogData.units" [order]="uiDialogData.order" [is-entry-order]="uiDialogData.isEntryOrder" [is-pending-close]="uiDialogData.isPendingClose"></et-close-order>',plain:!0,data:{order:e,source:a,instrumentAvatar:e.Instrument&&e.Instrument.Avatars["default"],instrumentName:e.Instrument&&e.Instrument.Name,isBuy:e.IsBuy,rate:e.Rate,instrumentPrecision:e.Instrument&&(e.Rate>1?e.Instrument.AboveDollarPrecision:e.Instrument._Precision),isAmericanPrecision:e.Instrument&&e.Instrument.isAmericanPrecision,orderID:e.OrderID,amount:e.Amount,units:e.Units,isEntryOrder:e.isEntryOrder,isPendingClose:e.isPendingClose||"ExitOrder"===e.SubType,closeOrder:function(t){switch(t){case 1:e.close(a);break;case 2:e.cancelCloseExitMarketOrder(a);break;case 3:e.closeEntryMarketOrder(a)}}},closeByEscape:!1})}},openPriceAlert:function(e,t,i){o.open({template:f.name,data:{instrument:e,model:t,actionString:i},closeByEscape:!1})},openInstrumentPreviewPopup:function(e,t){o.open({template:'<instrument-preview instrument="uiDialogData.instrument" user="uiDialogData.user" on-close="closeThisDialog()"></instrument-preview>',plain:!0,data:{instrument:e,user:t}})},cancelRedeem:function(e){w.openCancelRedeemPositionPopup(e)},checkRegulationRestriction:function(e,t){if(!e||!t)return!1;var o=7===e.designatedRegulationId&&!t.IsCrypto,i=8===e.designatedRegulationId&&!(t.IsCrypto||t.isUsTrade);return o||i}};return r.$on("continue:trading:funnel",function(e,t){if(t){var o=t.data.url;o&&s.path(o);var i="angular event: continue:trading:funnel";u(function(){var e=t.data.action;if("openTrade"===e){var o=t.data.data.instrumentId,n=T.getById(o),s=t.data.data.isBuy;pt.openPosition(n,s,null,!0,t.data.data,null,null,!1,i)}else if("copyMirror"===e)g.getById(t.data.data.CID).then(function(e){t.data.data.isExpressCheckout&&r.session.portfolioFactory.get().balance>0&&(t.data.data.isExpressCheckout=!1),pt.copyTrade(e,t.data.data,void 0,void 0,i)});else if("addAmountToMirror"===e){var a=r.session.user.portfolio.getMirrorById(t.data.data.MirrorID),l=t.data.data.amount,u=t.data.data.allocateAmountDeltaToPositions;a&&pt.manageCopyAmount(a,!0,l,i,u)}},1e3)}}),r.$on("showOpenTradeUpsellPopup",pt.showOpenTradeUpsellPopup),r.$on("login:success",function(){x(),F();var e=r.session.isUsUser(),t=e?"change_button_text_us":"change_button_text",o=e?"changeButtonTextUs":"changeButtonText";M(o,t),S(),E()}),r.$on("detach:failure",function(){pt.showRestrictionPopup("detachFailureRestriction")}),{isTradingConnectionAvailable:pt.isTradingConnectionAvailable,copyTrade:pt.copyTrade,openPosition:pt.openPosition,updatePosition:pt.updatePosition,closePosition:pt.closePosition,closeOrder:pt.closeOrder,manageCopyAmount:pt.manageCopyAmount,pauseResumeCopyTrade:pt.pauseResumeCopyTrade,manageStopLossAmount:pt.manageStopLossAmount,closeCopyTrade:pt.closeCopyTrade,closeAllTrades:pt.closeAllTrades,showRestrictionPopup:pt.showRestrictionPopup,showPendingOrderRestriction:pt.showPendingOrderRestriction,showOpenTradeUpsellPopup:pt.showOpenTradeUpsellPopup,handleAutoExecutionPopup:et,mixInto:function(t){e.extend(t,pt)},openPriceAlert:pt.openPriceAlert,openInstrumentPreviewPopup:pt.openInstrumentPreviewPopup,buildSourceObj:B,cancelRedeem:pt.cancelRedeem,checkRegulationRestriction:pt.checkRegulationRestriction}}var h=o("apps.trader.portfolio.portfolioActionsEvents",[i,g,n,r,s,a,l,u]);return h.factory("apps.trader.portfolio.portfolioActionsEvents",["uiDialog","TOUCHSUPPORTED","bl.factories.trading.execution.executionCalculator","$rootScope","$location","$log","$q","$timeout","bl.factories.trading.users.usersFactory","infrastruct.services.loader","bl.factories.payments.kycProvider","$analytics","bl.factories.trading.instruments.rates.ratesFactory","infrastruct.ui.uiIfBreakpoint","bl.factories.trading.instruments.instrumentsFactory","bl.factories.trading.portfolio.portfolioFactory","infrastruct.services.config","bl.factories.trading.execution.mirrorsExecutionCalculator","bl.factories.trading.restrictions.service","integrations.wallet.redeemCrytoService","$injector","bl.factories.trading.mixpanelEventsService","infrastruct.services.localStorage",v])});define(rA[351][0],["angular","fastClick"],function(n,t){"use strict";var o=n.module("infrastruct.ui.touch",[]);return o.constant("TOUCHSUPPORTED",function(){var n=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,t="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||n;return!!t}()),o.run(["TOUCHSUPPORTED",function(n){n&&t.attach(document.body)}]),o});!function(){"use strict";function t(e,i){function o(t,e){return function(){return t.apply(e,arguments)}}var r;if(i=i||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=i.touchBoundary||10,this.layer=e,this.tapDelay=i.tapDelay||200,this.tapTimeout=i.tapTimeout||700,!t.notNeeded(e)){for(var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],c=this,s=0,l=a.length;l>s;s++)c[a[s]]=o(c[a[s]],c);n&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,i){var o=Node.prototype.removeEventListener;"click"===t?o.call(e,t,n.hijacked||n,i):o.call(e,t,n,i)},e.addEventListener=function(t,n,i){var o=Node.prototype.addEventListener;"click"===t?o.call(e,t,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),i):o.call(e,t,n,i)}),"function"==typeof e.onclick&&(r=e.onclick,e.addEventListener("click",function(t){r(t)},!1),e.onclick=null)}}var e=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!e,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,o=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),r=i&&/OS [6-7]_\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf("BB10")>0;t.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(i&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},t.prototype.sendClick=function(t,e){var n,i;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),i=e.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(t),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},t.prototype.determineEventType=function(t){return n&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},t.prototype.focus=function(t){var e;if(i&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type){var n=["date","time","month","number","email"];i&&t.setSelectionRange&&-1===n.indexOf(t.type)?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()}},t.prototype.updateScrollParent=function(t){var e,n;if(e=t.fastClickScrollParent,!e||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){var e,n,r;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],i){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!o){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,(!this.lastClickTime||this.lastClickTime>0&&t.timeStamp<0||this.lastClickTime<0&&t.timeStamp>0)&&(this.lastClickTime=0),Math.abs(t.timeStamp-this.lastClickTime)<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n?!0:!1},t.prototype.onTouchMove=function(t){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},t.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(t){var e,a,c,s,l,u=this.targetElement;if(!this.trackingClick)return!0;if(Math.abs(t.timeStamp-this.lastClickTime)<this.tapDelay)return this.cancelNextClick=!0,this.lastClickTime=t.timeStamp,!0;if(this.lastClickTime=t.timeStamp,Math.abs(t.timeStamp-this.trackingClickStart)>this.tapTimeout)return!0;if(this.cancelNextClick=!1,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,r&&(l=t.changedTouches[0],u=document.elementFromPoint(l.pageX-window.pageXOffset,l.pageY-window.pageYOffset)||u,u.fastClickScrollParent=this.targetElement.fastClickScrollParent),c=u.tagName.toLowerCase(),"label"===c){if(e=this.findControl(u)){if(this.focus(u),n)return!1;u=e}}else if(this.needsFocus(u))return t.timeStamp-a>100||i&&window.top!==window&&"input"===c?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,t),i&&"select"===c||(this.targetElement=null,t.preventDefault()),!1);return i&&!o&&(s=u.fastClickScrollParent,s&&s.fastClickLastScrollTop!==s.scrollTop)?!0:(this.needsClick(u)||(t.preventDefault(),this.sendClick(u,t)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0},t.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},t.prototype.destroy=function(){var t=this.layer;n&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(t){var e,i,o,r;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(i>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(o=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),o[1]>=10&&o[2]>=3&&(e=document.querySelector("meta[name=viewport]")))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction?!0:(r=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],r>=27&&(e=document.querySelector("meta[name=viewport]"),e&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===t.style.touchAction||"manipulation"===t.style.touchAction?!0:!1)},t.attach=function(e,n){return new t(e,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("fastClick",[],function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.FastClick=t):window.FastClick=t}();define(rA[470][0],["angular",rA[432][0],rA[271][0],rA[370][0],rA[371][0]],function(s,e,t,o,a){"use strict";var c=s.module("kycApp",[e.name]);return c.component("usaSoon",o),c.component("usaStates",a),c.service("bl.factories.payments.kycProvider",t),c});define(rA[432][0],["angular",rA[90][0],rA[184][0]],function(t,A,i){"use strict";function e(t,A,i,e,n){this.$rootScope=t,this.$element=A,this.$timeout=e,this.$interval=n,this.$window=i}var n=t.module("uiSignature",[]);return n.component("uiSignaturePad",{controller:e,templateUrl:A.name,bindings:{height:"@",width:"@",disabled:"<",onChange:"&"}}),e.$inject=["$rootScope","$element","$window","$timeout","$interval"],e.prototype={get emptyImage(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAjgAAADcCAQAAADXNhPAAAACIklEQVR42u3UIQEAAAzDsM+/6UsYG0okFDQHMBIJAMMBDAfAcADDATAcwHAAwwEwHMBwAAwHMBzAcAAMBzAcAMMBDAcwHADDAQwHwHAAwwEMB8BwAMMBMBzAcADDATAcwHAADAcwHADDAQwHMBwAwwEMB8BwAMMBDAfAcADDATAcwHAAwwEwHMBwAAwHMBzAcAAMBzAcAMMBDAcwHADDAQwHwHAAwwEwHMBwAMMBMBzAcAAMBzAcwHAADAcwHADDAQwHMBwAwwEMB8BwAMMBDAfAcADDATAcwHAAwwEwHMBwAAwHMBzAcCQADAcwHADDAQwHwHAAwwEMB8BwAMMBMBzAcADDATAcwHAADAcwHMBwAAwHMBwAwwEMBzAcAMMBDAfAcADDAQwHwHAAwwEwHMBwAAwHMBzAcAAMBzAcAMMBDAcwHADDAQwHwHAAwwEMB8BwAMMBMBzAcADDATAcwHAADAcwHMBwAAwHMBwAwwEMB8BwAMMBDAfAcADDATAcwHAAwwEwHMBwAAwHMBzAcAAMBzAcAMMBDAcwHADDAQwHwHAAwwEMB8BwAMMBMBzAcADDkQAwHMBwAAwHMBwAwwEMBzAcAMMBDAfAcADDAQwHwHAAwwEwHMBwAMMBMBzAcAAMBzAcwHAADAcwHADDAQwHMBwAwwEMB8BwAMMBMBzAcADDATAcwHAADAcwHMBwAAwHMBwAwwEMBzAcAMMBDAegeayZAN3dLgwnAAAAAElFTkSuQmCC"},$onChanges:function(t){t.disabled&&this.signaturePad&&(t.disabled.currentValue?this.signaturePad.off():this.signaturePad.on())},$postLink:function(){this._width=parseInt(this.width,10),this._height=parseInt(this.height,10),this._canvas=this.$element.find("canvas")[0],this._parent=this._canvas.parentElement,this._scale=0,this._ctx=this._canvas.getContext("2d"),this._canvas.width=this._width,this._canvas.height=this._height,this.signaturePad=new i(this._canvas),this._calculateScaleBinder=this._calculateScale.bind(this),this._resizeIH=this.$interval(this._calculateScaleBinder,200),t.element(this.$window).bind("resize",this._calculateScaleBinder),this._calculateScale(),this.$element.on("touchend",this.onTouchend.bind(this))},$onDestroy:function(){this.$interval.cancel(this._resizeIH),this._resizeIH=null,t.element(this.$window).unbind("resize",this._calculateScaleBinder)},setDataUrl:function(t){var A=Math.max(window.devicePixelRatio||1,1),i=this._ctx,e=this._scale;i.setTransform(1,0,0,1,0,0),i.scale(A,A),this.signaturePad.clear(),this.signaturePad.fromDataURL(t),this.$timeout().then(function(){i.setTransform(1,0,0,1,0,0),i.scale(1/e,1/e)})},onSignatureChange:function(){var t=this;this.$timeout().then(function(){var A=t.signaturePad.isEmpty();t.onChange({dataUrl:A?t.emptyImage:t.signaturePad.toDataURL(),isEmpty:A})})},onTouchend:function(){this.$rootScope.$evalAsync(this.onSignatureChange.bind(this))},commitChanges:function(){this.onSignatureChange()},clear:function(){this.signaturePad.clear(),this.onSignatureChange()},_calculateScale:function(){var t=Math.min(this._parent.clientWidth/this._width,1),A=Math.min(this._parent.clientHeight/this._height,1),i=Math.min(t,A);if(i!==this._scale){var e=this._width*i,n=this._height*i;this._canvas.style.height=Math.round(n)+"px",this._canvas.style.width=Math.round(e)+"px",this._scale=i,this._ctx.setTransform(1,0,0,1,0,0),this._ctx.scale(1/i,1/i)}}},n});define(rA[90][0] , [rA[428][0]],function(f){var o={"name":"/etoro/infrastruct/ui/digital-signature/digital-signature.view.html","text":"<div class=\"signature sign-here-ph\" ng-style=\"{'max-width': {{$ctrl.width}} + 'px','max-height':{{$ctrl.height}} + 'px' }\" data-etoro-locale-ns=\"digitalSignature\">    <div class=\"input-title\">{{_title_}} <a class=\"link\" ng-click=\"$ctrl.clear()\">{{_clear_}}</a></div>    <canvas class=\"sign-here\"        ng-mouseup=\"$ctrl.commitChanges()\"        ng-mouseleave=\"!$ctrl.signaturePad.isEmpty() && $ctrl.commitChanges()\">    </canvas></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[184][0],[],function(){"use strict";var t=function(t,n){var o=this,e=n||{};this.velocityFilterWeight=e.velocityFilterWeight||.7,this.minWidth=e.minWidth||.5,this.maxWidth=e.maxWidth||2.5,this.dotSize=e.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=e.penColor||"black",this.backgroundColor=e.backgroundColor||"rgba(0,0,0,0)",this.onEnd=e.onEnd,this.onBegin=e.onBegin,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(t){1===t.which&&(o._mouseButtonDown=!0,o._strokeBegin(t))},this._handleMouseMove=function(t){o._mouseButtonDown&&o._strokeUpdate(t)},this._handleMouseUp=function(t){1===t.which&&o._mouseButtonDown&&(o._mouseButtonDown=!1,o._strokeEnd(t))},this._handleTouchStart=function(t){if(1==t.targetTouches.length){var n=t.changedTouches[0];o._strokeBegin(n)}},this._handleTouchMove=function(t){t.preventDefault();var n=t.targetTouches[0];o._strokeUpdate(n)},this._handleTouchEnd=function(t){var n=t.target===o._canvas;n&&(t.preventDefault(),o._strokeEnd(t))},this._handleMouseEvents(),this._handleTouchEvents()};t.prototype.clear=function(){var t=this._ctx,n=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,n.width,n.height),t.fillRect(0,0,n.width,n.height),this._reset()},t.prototype.toDataURL=function(){var t=this._canvas;return t.toDataURL.apply(t,arguments)},t.prototype.fromDataURL=function(t){var n=this,o=new Image,e=window.devicePixelRatio||1,i=this._canvas.width/e,s=this._canvas.height/e;this._reset(),o.src=t,o.onload=function(){n._ctx.drawImage(o,0,0,i,s)},this._isEmpty=!1},t.prototype._strokeUpdate=function(t){var n=this._createPoint(t);this._addPoint(n)},t.prototype._strokeBegin=function(t){this._reset(),this._strokeUpdate(t),"function"==typeof this.onBegin&&this.onBegin(t)},t.prototype._strokeDraw=function(t){var n=this._ctx,o="function"==typeof this.dotSize?this.dotSize():this.dotSize;n.beginPath(),this._drawPoint(t.x,t.y,o),n.closePath(),n.fill()},t.prototype._strokeEnd=function(t){var n=this.points.length>2,o=this.points[0];!n&&o&&this._strokeDraw(o),"function"==typeof this.onEnd&&this.onEnd(t)},t.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},t.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},t.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},t.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},t.prototype.isEmpty=function(){return this._isEmpty},t.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._isEmpty=!0,this._ctx.fillStyle=this.penColor},t.prototype._createPoint=function(t){var o=this._canvas.getBoundingClientRect();return new n(t.clientX-o.left,t.clientY-o.top)},t.prototype._addPoint=function(t){var n,e,i,s,h=this.points;h.push(t),h.length>2&&(3===h.length&&h.unshift(h[0]),s=this._calculateCurveControlPoints(h[0],h[1],h[2]),n=s.c2,s=this._calculateCurveControlPoints(h[1],h[2],h[3]),e=s.c1,i=new o(h[1],n,e,h[2]),this._addCurve(i),h.shift())},t.prototype._calculateCurveControlPoints=function(t,o,e){var i=t.x-o.x,s=t.y-o.y,h=o.x-e.x,a=o.y-e.y,r={x:(t.x+o.x)/2,y:(t.y+o.y)/2},c={x:(o.x+e.x)/2,y:(o.y+e.y)/2},u=Math.sqrt(i*i+s*s),d=Math.sqrt(h*h+a*a),l=r.x-c.x,_=r.y-c.y,v=d/(u+d),p={x:c.x+l*v,y:c.y+_*v},y=o.x-p.x,f=o.y-p.y;return{c1:new n(r.x+y,r.y+f),c2:new n(c.x+y,c.y+f)}},t.prototype._addCurve=function(t){var n,o,e=t.startPoint,i=t.endPoint;n=i.velocityFrom(e),n=this.velocityFilterWeight*n+(1-this.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(n),this._drawCurve(t,this._lastWidth,o),this._lastVelocity=n,this._lastWidth=o},t.prototype._drawPoint=function(t,n,o){var e=this._ctx;e.moveTo(t,n),e.arc(t,n,o,0,2*Math.PI,!1),this._isEmpty=!1},t.prototype._drawCurve=function(t,n,o){var e,i,s,h,a,r,c,u,d,l,_,v=this._ctx,p=o-n;for(e=Math.floor(t.length()),v.beginPath(),s=0;e>s;s++)h=s/e,a=h*h,r=a*h,c=1-h,u=c*c,d=u*c,l=d*t.startPoint.x,l+=3*u*h*t.control1.x,l+=3*c*a*t.control2.x,l+=r*t.endPoint.x,_=d*t.startPoint.y,_+=3*u*h*t.control1.y,_+=3*c*a*t.control2.y,_+=r*t.endPoint.y,i=n+r*p,this._drawPoint(l,_,i);v.closePath(),v.fill()},t.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)};var n=function(t,n,o){this.x=t,this.y=n,this.time=o||(new Date).getTime()};n.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1},n.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))};var o=function(t,n,o,e){this.startPoint=t,this.control1=n,this.control2=o,this.endPoint=e};return o.prototype.length=function(){var t,n,o,e,i,s,h,a,r=10,c=0;for(t=0;r>=t;t++)n=t/r,o=this._point(n,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),e=this._point(n,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y),t>0&&(h=o-i,a=e-s,c+=Math.sqrt(h*h+a*a)),i=o,s=e;return c},o.prototype._point=function(t,n,o,e,i){return n*(1-t)*(1-t)*(1-t)+3*o*(1-t)*(1-t)*t+3*e*(1-t)*t*t+i*t*t*t},t});define(rA[271][0],["underscore"],function(e){function i(){var e=arguments;Object.keys(o).forEach(function(i,o){this[i]=e[o]}.bind(this)),this.loadModalDeffDict=[],this.uiDialog.isKycDialogOpen=!1,this.isKycInProcess=!1,this.abTestInitiated=!1,this.kycBaseUrl="/sapi/kyc",this.gatsbyFunnelId="73",this._initListeners()}var o={$q:"$q",$injector:"$injector",$log:"$log",$http:"$http",$rootScope:"$rootScope",$timeout:"$timeout",$location:"$location",$route:"$route",$window:"$window",config:"infrastruct.services.config",session:"bl.factories.session.sessionFactory",loader:"infrastruct.services.loader",guid:"infrastruct.services.guid",localStorage:"infrastruct.services.localStorage",$analytics:"$analytics",uiDialog:"uiDialog",localizeFactory:"infrastruct.services.localization.localizeFactory",preferences:"bl.factories.settings.preferences",complianceKycMandatoryService:"complianceKycMandatoryService",complianceUserKycFlowService:"complianceUserKycFlowService"};return i.$inject=Object.keys(o).map(function(e){return o[e]}),i.prototype={shouldPassAsicSuitabilityTest:function(e){var i=this;i.$log.logJSON("info","log",{Categories:["ESMA"],Message:"ESMA - shouldPassAsicSuitabilityTest - Server Call"});var o="";return e&&i.config.dynamics.kyc.useAsicSuitabilityTestNewRoute&&(o="/"+e),i.$q(function(e,t){i.loader.show(),i.$http({method:"get",url:i.kycBaseUrl+"/api/v1/users/"+i.session.user.gcid+"/asicSuitabilityTest/shouldPass"+o,addHeaders:{accountType:!1,csrfToken:!1,appInfo:!1}}).then(function(o){i.$log.logJSON("info","log",{Categories:["ESMA"],Message:"ESMA - shouldPassAsicSuitabilityTest - Server Success"}),e(o.data)})["catch"](function(e){i.$log.logJSON("error","log",{Categories:["ESMA"],Message:"ESMA - shouldPassAsicSuitabilityTest - Server Error"}),t(e.data)})["finally"](function(){i.loader.hide()})})},_requestKycAggregatedInfo:function(){return this.$http({method:"get",url:this.kycBaseUrl+"/kycAggregatedInfo",addHeaders:{accountType:!1,csrfToken:!1,appInfo:!1}}).then(function(e){return e.data})},updateWithStartedKYCFunnel:function(e){var i=this,o=0;switch(e){case"volunteer":o=1;break;case"deposit":case"afterDeposit":case"trade":o=2;break;case"copy":o=3;break;case"withdraw":o=4}o>0?i.$http({method:"PUT",addHeaders:{accountType:!1,csrfToken:!1,appInfo:!1},url:i.kycBaseUrl+"/api/v1/kyc/users/"+i.session.user.gcid+"/mode",maxRetries:2,data:{gcid:i.session.user.gcid,modeID:o}}).then(function(){i.$log.logJSON("info","log",{Categories:["KYC Start"],Message:"Update server with KYC funnel - Success"})})["catch"](function(){i.$log.logJSON("error","log",{Categories:["KYC Start"],Message:"Update server with KYC funnel - Failed"})}):i.$log.logJSON("error","log",{Categories:["KYC Start"],Message:"Update server with KYC funnel - Failed. Can not detect the funnel."})},loadCopyModal:function(e){return this._loadModal("copy",e,"userTradingActionUI")},loadDepositModal:function(e){var i=this;e=e||{};var o=angular.extend({data:{gcid:i.session.user.gcid,amount:e.amount},shouldHideXButton:e.fundingTypeId&&2===e.fundingTypeId},e);return e.billingDetails&&(o.mergeData={basicUser:{firstName:e.billingDetails.firstName,lastName:e.billingDetails.lastName,middleName:e.billingDetails.middleName}}),i._loadModal("deposit",o,"cashier")["catch"](function(o){return i.$q.reject({depositType:e.fundingTypeId,depositComplete:!0,depositSuccess:!1,abort:o.kycDecline,errorType:o.kycError.errorType,message:o.kycError.message,appName:o.kycError.appName,kycRejection:!0})})},loadAfterDepositModal:function(e,i){return i=angular.extend({shouldHideXButton:e&&2===e},i||{}),this._loadModal("afterDeposit",i,"cashier")},loadWithdrawModal:function(e){return this._loadModal("withdraw",e,"cashier")},loadVolunteerModal:function(e){return this._loadModal("volunteer",e)},loadCustomFunnelModal:function(e){return this._loadModal("customFunnel",e)},loadTradeModal:function(e){return this._loadModal("trade",e,"userTradingActionUI")},loadFirstTimeKycModal:function(e){return this._isGatsbyFunnel(this._getConfigFunnelFromId())?this.$q.resolve():this.loadVolunteerModal(e)},loadExternalPhoneVerificationModal:function(e){return e=angular.extend({externalPhoneVerification:!0},e||{}),this._loadModal("phoneVerification",e)},fetchSelfieDocStatusAndLoadSelfieFunnelIfNeeded:function(e){var i=this;return i.$rootScope.session.user.verificationLevel<2?Promise.reject():i.$http({method:"get",url:i.kycBaseUrl+"/api/v1/compliance/users/"+i.session.user.gcid+"/documents/approvalstatus",addHeaders:{accountType:!1,csrfToken:!1,appInfo:!1}}).then(function(o){return e.approvalStatus=o.data,i.loadSelfieVerificationModal(e)})["catch"](function(){return i.loadSelfieVerificationModal(e)})},loadSelfieVerificationModal:function(e){return this._loadModal("selfieVerification",e)},loadChangeDetailsModal:function(e){return e=angular.extend({singleScreenFunnelSubType:"changeDetailsGap"},e||{}),this._loadModal("changeDetails",e)},loadOneScreenPOAVerificationModal:function(e){return e=angular.extend({singleScreenFunnelSubType:"singleScreenPOA"},e||{}),this.loadOneScreenVerificationModal(e)},loadOneScreenVerificationModal:function(e){return this._loadModal("oneScreenVerification",e)},updateDetails:function(i){var o=this;return o.$q(function(t,n){var s=e.extend({gcid:o.session.user.gcid},i);o._requireKycApi().then(function(e){e.updateDetails({data:s,STS_TOKEN:o.session.token,success:function(){t()},error:function(e){n(e)}})})["catch"](function(e){n(e)})})},beforeDepositAbTest:function(e,i){var o,t=this,n=!!t.localStorage.getItem("isKycBeforeDepositAbTestEnabled"),s=(new Date).getMilliseconds(),a=250;return t.$q(function(r,c){t.$rootScope.session.user.isUserVerified&&t.$rootScope.session.user.verificationLevel>=2?(e&&t.$analytics.eventTrack("Main Menu - Deposit Funds - Click"),r()):t.config.dynamics.whenReady().then(function(){a=t.config.dynamics.deposit.kycBeforeDepositAbTest;var l=n||!t.abTestInitiated&&t.$rootScope.session.user.verificationLevel<2&&a>s;t.$analytics.setSuperPropertiesOnce({KYCExperiment333:l?"BeforeDeposit":"AfterDeposit"}),e&&t.$analytics.eventTrack("Main Menu - Deposit Funds - Click"),l?(t.localStorage.setItem("isKycBeforeDepositAbTestEnabled",!0),o=t.loadVolunteerModal(i),o["finally"](function(){t.$rootScope.session.user.verificationLevel>=2&&t.$rootScope.session.user.isUserVerified?(t.localStorage.removeItem("isKycBeforeDepositAbTestEnabled"),r()):c()})):t.$rootScope.session.user.isUserVerified?r():t.loadDepositModal(i),t.abTestInitiated=!0}.bind(this))}.bind(this))},cleanVerifyAccountScreenFlag:function(){this.disableVerifyAccountScreenOnDepositMode=!1},isUsaRegulation:function(){return this.session.isUsUser()},userDesignatedRegulation:function(){return this.session.user.designatedRegulationId},_assertUsaUsers:function(e){var i;if(!this.isUsaRegulation())return!1;if(!this._usDialog){var o=this.$injector.get("infrastruct.services.appDataService");e=e||"KYC",i=this.localStorage.getItem("hasSeenGuide");null===i?o.getItem("firstTimeGuide").then(function(e){i=e&&e.hasSeen})["catch"](function(){})["finally"](function(){i||o.setItem("firstTimeGuide",{hasSeen:!0})}.bind(this)):i&&o.setItem("firstTimeGuide",{hasSeen:!0})}return!0},_displayUSDialog:function(e){var i=this;i._usDialog=i.uiDialog.open({template:'<usa-soon source="uiDialogData.source" on-close="closeThisDialog()" on-error="closeThisDialog()"></usa-soon>',plain:!0,allowNavigation:!0,closeByEscape:!1,data:{source:e}}),i._usDialog.closePromise["finally"](function(){i._usDialog=null}),i.$log.info("KYC Rejected By USA restrictions")},_loadModal:function(e,i,o){var t=this;return t.config.dynamics.whenReady().then(function(){return t.closeBackgroundProcessor()?(t.loader.show(),t.closeBackgroundProcessor("get").then(function(){return t._loadModalKYC(e,i,o)})):t._loadModalKYC(e,i,o)})},closeBackgroundProcessor:function(e){var i=this,o="_closeBackgroundProcess";return i.config.dynamics.kyc.closeKYCUiImmediately?e?"start"===e.toLowerCase()?void(i[o]=i.$q.defer()):"get"===e.toLowerCase()&&i[o]?i[o].promise:"end"===e.toLowerCase()&&i[o]?(i[o].resolve(),void(i[o]=void 0)):void 0:i[o]:void 0},loadBackgroundKyc:function(){var e=this,i="background";if(e._alreadyCalledBackgroundLoading)return e.$q.resolve();if(e.loadModalDeffDict[i])return e.loadModalDeffDict[i].promise;e.loadModalDeffDict[i]=e.$q.defer();var o=e.guid(),t="kycLoadModal"+o,n="KYC_LoadingPerformance_"+i;return e.$log.time(t,null,n),e._requireKycModals().then(function(o){o.setSettings(e.config),o.loadModal("background",{success:function(){e._alreadyCalledBackgroundLoading=!0,e.loadModalDeffDict[i].resolve()},error:function(o){e.loadModalDeffDict[i].reject({kycDecline:!1,kycError:o,kycRequireError:!0})}})})["catch"](function(o){e.loadModalDeffDict[i].reject({kycDecline:!1,kycError:o,kycRequireError:!0})}),e.loadModalDeffDict[i].promise["finally"](function(){e.$log.timeEnd(t,n),e.loadModalDeffDict&&e.loadModalDeffDict[i]&&delete e.loadModalDeffDict[i]}),e.loadModalDeffDict[i].promise},_updateLocalizationIfNeeded:function(e){var i=this.session.isUsUser();i!==e&&this.session.localizeFactory.resetLocales(e)},_loadModalKYC:function(i,o){var t=this;if(o=o||{},t.loadModalDeffDict[i])return t.loadModalDeffDict[i].promise;t.loadModalDeffDict[i]=t.$q.defer();var n,s=t._getUserKycCulture(),a=t.guid(),r="kycLoadModal"+a,c="KYC_LoadingPerformance_"+i,l=t.disableVerifyAccountScreenOnDepositMode;t.disableVerifyAccountScreenOnDepositMode=!1,t.$log.time(r,null,c),t.loader.show();var d=t.$timeout(function(){t.loader.hide()},3e4),u=t._requestKycAggregatedInfo();return t.isKycInProcess=!0,t.$q.all([t._requireKycModals(),t.complianceKycMandatoryService.getKycMandatoryOptions()]).then(function(a){var f=a[0],g=a[1];e.extend(o,g||{}),t.loader.show(),t.uiDialog.isKycDialogOpen=!0,t.$rootScope.$emit("uiDialog.opened"),o.ready&&(n=o.ready,delete o.ready),o.data||(o.data={}),o.data.gcid=t.session.user.gcid,f.setSettings(t.config),t.config.dynamics.whenReady().then(function(){f.loadModal(i,e.extend({getSTS_DATA:function(){return t.session.stsData},getKycAggregatedInfo:t.config.dynamics.kyc.loadKycInBackgroundEnabled?function(){return u}:void 0,depositInfoChanged:!1,kycCustomerRestrictions:angular.copy(t.session.user.CustomerRestrictions),userCulture:s,isKYCAddressAutoCompleteEnable:!!t.config.statics.isKYCAddressAutoCompleteEnable,data:{gcid:t.session.user.gcid},applicationName:"CashierOneApp",isStockFunnel:!1,isCopyFunnel:!1,fromTradePopup:o.fromTradePopup,disableVerifyAccountScreenOnDepositMode:l,shouldHideXButton:o.shouldHideXButton,funnel:i,isGatsbyFunnel:o.isGatsbyFunnel,singleScreenFunnelSubType:o.singleScreenFunnelSubType,onProfileUpdatedScreenEnter:o.onProfileUpdatedScreenEnter,updateLocalizationIfNeeded:t._updateLocalizationIfNeeded.bind(t),externalPhoneVerification:o.externalPhoneVerification,isPinRequestGap:o.isPinRequestGap,ready:function(){t.loader.applyHide(),t.$timeout.cancel(d),n&&n(),t.$log.timeEnd(r,c),t._updateKycSeenStatus(1),t.updateWithStartedKYCFunnel(i)},success:function(e){t.loader.applyHide(),t.$log.info("KYC success callback",e);var o={};switch(e){case"continueToDeposit":t.disableVerifyAccountScreenOnDepositMode=!0,o.continueToDeposit=!0,t.$injector.get("bl.factories.payments.deposit.depositLoader").loadFundYourAccount();break;case"continueToDepositVBTCheck":o.continueToDeposit=!0,t.$location.path("/deposit/full");break;case"proccess:successSingleScreenPOA":t.$rootScope.$emit("user:kyc:singlePOAFunnelPassed",{})}t.config.dynamics.kyc.closeKYCUiImmediately&&e&&e.onCloseCalculationDone?(t.closeBackgroundProcessor("start"),e.onCloseCalculationDone(function(){t._afterKycSync(e)["finally"](function(){t.loadModalDeffDict[i].resolve(o)})})):t._afterKycSync(e)["finally"](function(){t.loadModalDeffDict[i].resolve(o)}),t.config.query.redirectUrl&&window.location.replace(t.config.query.redirectUrl)},error:function(e){t.loader.applyHide(),t.$log.error("KYC error callback",e);var o=!1;switch(e.errorType){case"notResponsible":case"userNotEligible":case"noIndication":case"accountUnderReview":case"userAction":case"userNotVerified":o=!0}t._afterKycSync()["finally"](function(){t.loader.applyHide(),t.$timeout.cancel(d),t.loadModalDeffDict[i].reject({kycDecline:o,kycError:e})})}},o))}.bind(this))})["catch"](function(e){t.loader.applyHide(),t.$timeout.cancel(d),t.loadModalDeffDict[i].reject({kycDecline:!1,kycError:e,kycRequireError:!0})}),t.loadModalDeffDict[i].promise["finally"](function(){t.uiDialog.isKycDialogOpen=!1,t.isKycInProcess=!1,t.$rootScope.$emit("uiDialog.closed"),t.$rootScope.$broadcast("kyc:dialog:closed"),t.loadModalDeffDict={},t.closeBackgroundProcessor("end")}),t.loadModalDeffDict[i].promise},_afterKycSync:function(e){if(!this.session.user)return this.$q.resolve();var i=this.session.isUsUser(),o=this.session.user.countryId;return e&&e.riskInfo&&e.riskInfo.get("designatedRegulation")&&this.session.user.setDesignatedRegulation(e.riskInfo.get("designatedRegulation")),this.complianceKycMandatoryService.updateKYCMandatoryOptions(e),this.$q.all([this.session.user.syncUserData(),this.session.user.updateUserRestrictions()]).then(function(){var e=this.session.isUsUser();i!==e&&this.$rootScope.$emit("updatePaymentOptions");var t=this.session.user.countryId;o!==t&&this.$rootScope.$emit("kyc:countryChanged")}.bind(this))},_requireKycModals:function(e){var i=this;return i.$q(function(o,t){function n(e){i.$log.logJSON("error","log",{Category:"KYC_Loading",Message:e.message}),t(e)}var s=i.config,a=s.statics.kycLoaderUrl,r=window.__kycSettings__=window.__kycSettings__||{};s.statics.isUseAbsoluteDomain&&(r.serverUrl=s.statics.baseUrl),s.statics.ApplicationIdentifier&&(r.ApplicationIdentifier=s.statics.ApplicationIdentifier),require([a],function(i){var n=i&&(e?i.Api:i.KYCSDK);n||t({message:"kyc required data is wrong",url:a}),o(n)},n)})},_requireKycApi:function(){return this._requireKycModals(!0)},_getUserKycCulture:function(){var e=this.session.user.languageIsoCode;return"pt-br"==e?"pt-pt":e},_updateKycSeenStatus:function(e){0===this.session.user.kycState&&(this.session.user.kycState=e)},_initListeners:function(){this.$rootScope.$on("login:success",function(e,i){this._loginHandler(i)}.bind(this)),document.addEventListener("resume",function(){this._callDeepLinks("resumeFlow")}.bind(this),!1),this.$rootScope.$on("logout:success",function(){this.loadModalDeffDict={}}.bind(this)),document.addEventListener("InAppNotificationClicked",function(e){var i=e.detail;if(i.ActionLink&&-1!==i.ActionLink.indexOf("action=autokyc")&&window.URLSearchParams){var o=new window.URLSearchParams(i.ActionLink),t=o.get("deepLink");t&&this.loadVolunteerModal({deepLink:t}),e.preventDefault()}}.bind(this)),this.$rootScope.$on("VerificationLevel.Updated",function(i,o){var t,n="Verification Level {0} - Change",s="Verification";o.EventProperties&&e.contains([1,2,3],o.EventProperties.VerificationLevel)&&(n=n.replace("{0}",o.EventProperties.VerificationLevel),t=n,this.complianceUserKycFlowService.getUserKycFlow(o.Gcid).then(function(e){var i=3===o.EventProperties.VerificationLevel?this.curentKYCFlow:e.kycFlowType;this.$analytics.eventTrack(n,{KYC_Flow:this.complianceUserKycFlowService.getKycFlowState(i)},s,t)}.bind(this)))}.bind(this))},_fetchUserCurrentKycFlow:function(){this.complianceUserKycFlowService.getUserKycFlow(this.session.user.gcid).then(function(e){this.curentKYCFlow=e.kycFlowType}.bind(this))},_loginHandler:function(){this._initComplianceNGServicesOnLogin(),this._startListenForKYCCompleteScreen(),this._callDeepLinks("loginSuccessFlow"),this._fetchUserCurrentKycFlow(),this.config.dynamics.kyc.loadKycInBackgroundEnabled&&this.$rootScope.session.user.verificationLevel<=2&&this.loadBackgroundKyc()},_initComplianceNGServicesOnLogin:function(){this.$injector.get("bl.factories.compliance.tradingService"),this.$injector.get("bl.factories.compliance.gapsService")},_startListenForKYCCompleteScreen:function(){this.$injector.get("bl.factories.compliance.gapsService").startListenForKYCCompleteScreen()},_callDeepLinks:function(e){var i=this.$injector.get("bl.factories.compliance.deepLinks");i.handleDeepLinks(e)},_fetchAndSaveInstrumentsConfiguration:function(){this.$injector.get("bl.factories.compliance.tradingService").fetchAndSaveInstrumentsConfiguration()},_getConfigFunnelFromId:function(){return this.config.query.funnelFromId},_isGatsbyFunnel:function(e){return e===this.gatsbyFunnelId}},i});define(rA[370][0],["angular",rA[88][0]],function(o,n){function e(o,n,e){this.$analytics=o,this.$rootScope=n,this.kycProvider=e}return e.$inject=["$analytics","$rootScope","bl.factories.payments.kycProvider"],e.prototype={accept:function(){var o={deepLink:"personaldetails"};this.onClose(),this.kycProvider.loadVolunteerModal(o).then(function(){this.$rootScope.$broadcast("funnel:showImGuide")}.bind(this))},close:function(){this.onClose(),this.$rootScope.$broadcast("funnel:showImGuide")}},{controller:e,bindings:{source:"<",onClose:"&",onError:"&"},templateUrl:n.name}});define(rA[88][0] , [rA[428][0]],function(f){var o={"name":"/etoro/bl/factories/kyc/popups/usa-soon/usa-soon.view.html","text":"<div class=\"pop-up-wrapper\" data-etoro-locale-ns=\"usasoon\">    <div class=\"pop-up-item us-user\">        <div class=\"pop-up-us-user-info\">            <a class=\"x-icon sprite\" ng-click=\"$ctrl.close()\"></a>            <div class=\"us-users-info\">                <h2 automation-id=\"kyc-usa-soon-dialog-title\">{{_completeProfileUSPopupTitle_}}</h2>                <div class=\"us-border\"></div>                <p automation-id=\"kyc-usa-soon-dialog-description\">{{_completeProfileUSPopupText_}}</p>                <button automation-id=\"kyc-usa-soon-dialog-button\" class=\"button-standard button-blue mobile-off\" ng-click=\"$ctrl.accept()\" >{{_completeProfileUSPopupButton_}}</button>            </div>        </div>        <button class=\"button-standard button-blue mobile-on\" ng-click=\"$ctrl.accept()\" >{{_completeProfileUSPopupButton_}}</button>    </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[371][0],["angular",rA[89][0]],function(t,o){function s(t,o,s){this.$rootScope=t,this.$analytics=o,this.loaderFactory=s,this.isDemo=!1,t.session.isLoggedIn&&(this.isDemo="Demo"===t.session.user.portfolio.account.type),this.$analytics.eventTrack("US States - Dialog Open",{source:this.source})}return s.$inject=["$rootScope","$analytics","infrastruct.services.loader"],s.prototype={goVirtual:function(){this.loaderFactory.show(),this.$rootScope.session.user.toggleAccount().then(function(){this.onClose()}.bind(this))["catch"](function(){this.onError()}.bind(this))["finally"](function(){this.loaderFactory.hide()}.bind(this))},close:function(){this.onClose()}},{controller:s,bindings:{source:"<",onClose:"&",onError:"&"},templateUrl:o.name}});define(rA[89][0] , [rA[428][0]],function(f){var o={"name":"/etoro/bl/factories/kyc/popups/usa-states/usa-states.view.html","text":"<div class=\"pop-up-wrapper\" data-etoro-locale-ns=\"usasoon\">    <div class=\"pop-up-item states-user\">        <div class=\"pop-up-top-buttons\">            <a class=\"close sprite-ui\" ng-click=\"$ctrl.close()\" analytics-on=\"click\" analytics-event=\"USA Soon - Dismiss\"></a>        </div>        <div class=\"pop-up-us-user-info\">            <div class=\"us-users-info\">                <div class=\"i-settings-fail-sign\">                </div>                <div class=\"us-users-text\">                    <h2 automation-id=\"kyc-usa-soon-dialog-title\"                        ng-bind-html=\"$root.t.html('payments', 'usRestrictedStatesTitle', this)\"></h2>                    <p automation-id=\"kyc-usa-soon-dialog-description\"                       ng-bind-html=\"$root.t.html('payments', 'usRestrictedStatesMessage', this)\"></p>                    <button automation-id=\"kyc-usa-soon-dialog-button\" class=\"button-standard button-blue mobile-off\"                            ng-click=\"$ctrl.isDemo ? $ctrl.close() : $ctrl.goVirtual()\">                        {{_if($ctrl.isDemo,'_demoButton_','_realButton_')_}}                    </button>                </div>            </div>        </div>        <button class=\"button-standard button-blue mobile-on\"                ng-click=\"$ctrl.isDemo ? $ctrl.close() : $ctrl.goVirtual()\">            {{_if($ctrl.isDemo,'_demoButton_','_realButton_')_}}        </button>    </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[327][0],["moduleDefiner",rA[296][0],rA[487][0]],function(n,o,t){function e(n,o,t){function e(n,o,t){return{property:n,data:o,message:t}}function r(n,t){return o.calculateRate(n,-1,t)}function a(n,t){return o.calculateRate(n,1,t)}var i=.99,m={max:"maxError",min:"minError",needToDeposit:"needToDeposit",minAverage:"minAverage",copyStopLossRemoveFunds:"copyStopLossRemoveFunds"},u={getCSLRounding:function(){return t.dynamics.portfolio.RoundingCSL?t.dynamics.portfolio.RoundingCSL:i},setMinMaxStopLossAmount:function(n,o,t){n.range.maxPercent=t&&t.MaxCopiedStopLossPercentage?t.MaxCopiedStopLossPercentage:n.range.maxPercent,n.range.minPercent=t&&t.MinCopiedStopLossPercentage?t.MinCopiedStopLossPercentage:n.range.minPercent,n.range.max=r(o*(n.range.maxPercent/100),2),n.range.min=a(o*(n.range.minPercent/100),2);var e=n.amount.isMoneyMode?n.amount.moneyAmount:n.amount.percentAmount,i={max:n.amount.isMoneyMode?n.range.max:n.range.maxPercent,min:n.amount.isMoneyMode?n.range.min:n.range.minPercent};n.amount.isMoneyMode?(e>i.max?e=i.max:e<i.min&&(e=i.min),n.amount.percentAmount=Math.round(e/o*100),n.amount.moneyAmount=e):(n.amount.percentAmount=e,n.amount.moneyAmount=o*(e/100))},setMinMaxStopLossAmountForEdit:function(n,o,t,e){n.range.maxPercent=toFixed(Math.min(e.MaxCopiedStopLossPercentage,.99*t/o*100),2),n.range.minPercent=e.MinCopiedStopLossPercentage,n.range.max=toFixed(r(Math.min(e.MaxCopiedStopLossPercentage/100*o,.99*t),2),2),n.range.min=toFixed(a(o*(n.range.minPercent/100),2),2)},changeStopLoss:function(t,r,a,i,m){var u=m?t.amount.moneyAmount:t.amount.percentAmount,s={max:m?t.range.max:t.range.maxPercent,min:m?t.range.min:t.range.minPercent},c=o.getStepJump(u),d=0;"+"===a?d=c:"-"===a&&(d=-1*c),null!==i&&void 0!==i?u=i:u+=d,u>s.max?(n.$broadcast("trading:mirrorsExecutionCalculator:error",e("stopLoss",{tempAmount:u,max:s.max},"stopLossLargerThanMax"+(m?"Amount":"Percent"))),u=s.max):u<s.min&&(n.$broadcast("trading:mirrorsExecutionCalculator:error",e("stopLoss",{tempAmount:u,min:s.min},"stopLossLowerThanMin"+(m?"Amount":"Percent"))),u=s.min),m?(t.amount.percentAmount=toFixed(u/r*100,2),t.amount.moneyAmount=toFixed(u,2)):(t.amount.percentAmount=toFixed(u,2),t.amount.moneyAmount=toFixed(r*(u/100),2))},getMinCopyAverage:function(n,o){var t=1,e={minAmount:0,minCopySize:t,amountCopySize:0},a=0;return n>0&&(a=toFixed(100*t/n,2),a=o?r(a,2):a,a=Math.max(a,0)),e.minAmount=a,e},getAvgSizeCopyAmount:function(n,o,t,e,r){var a=0;if(t&&o){var i=e?1:-1;a=o+i*r}else a=r;return n*a/100},getMinMaxAmountForNewMirror:function(n,o,t){var e={max:0,min:0,maxPercent:n.MaxCopiedStopLossPercentage,minPercent:n.MinCopiedStopLossPercentage},r=n.MaxCopiedAmountDollars,a=t+o;return r>a&&(r=a),e.max=r,e.min=n.MinCopiedAmountDollars,e},getMinMaxAmountForExistingMirror:function(n,o,t,e,a,i){var m={max:0,min:0};if(o){var u=Math.min(n.Amount+e+a,t.MaxCopiedAmountDollars);u=r(Math.max(u-n.Amount,0),2),m.max=u;var s=0;i&&(s=t.AddFundsMinAmountDeltaDollars,0>s&&(s=0)),m.min=s}else m.max=r(Math.max(Math.min(n.Amount-t.MinCopiedAmountDollars,n.AvailableAmount),0),2),m.max<0&&(m.max=0),m.min=0;return m},getDefaultAmount:function(n,o,t){var e=Math.round(n/(100-o)*t),r=e%10;return r>0&&(e=toFixed(e-r+10,2)),e},changeAmount:function(n,o,t,e,r,a,i,m,s,c){return n=toFixed(n,2),n+=o,u.validateAmount(n,t,e,r,a,i,m,s,c)},validateAmount:function(o,t,r,a,i,u,s,c,d){u.amountModel.isNeedToDeposit=!1;var x=void 0;if(o<t.min)x=m.min,o=t.min,o>i&&(u.amountModel.isNeedToDeposit=!0,x=m.needToDeposit);else{var g=!1;(!r||r&&!a)&&o>i?(o>t.max&&(o=t.max,g=i>=o),g||(u.amountModel.isNeedToDeposit=!0,x=m.needToDeposit)):o>t.max&&(o=t.max,g=!0),g&&(x=m.max)}if((!r||r&&a)&&s.minAmount>0){var A,p=r?c-o:o;p<s.minAmount&&(A=r?c-s.minAmount:s.minAmount,o=Math.max(t.min,toFixed(A,2)),o=Math.min(t.max,o),!r&&o>i?(u.amountModel.isNeedToDeposit=!0,x=m.needToDeposit):x=m.minAverage)}if(r&&a){var l=this.getCSLLimitAmount(u.mirror);o>l&&(o=Math.max(t.min,toFixed(l,2)),o=Math.min(t.max,o),x=m.copyStopLossRemoveFunds)}if(x){var M=!d||d&&d.hasOwnProperty(x);if(x===m.min&&M){var A=r?t.min:o;n.$broadcast("trading:mirrorsExecutionCalculator:error",e("amount",{min:A},r?a?"currentRemoveAmountLowerThanMinAmount":"currentAddAmountLowerThanMinAmount":"currentAmountLowerThanMinAmount"))}else if(x===m.max&&M){var L=r&&a?this.getMaxFundsToRemove(u):t.max;n.$broadcast("trading:mirrorsExecutionCalculator:error",e("amount",{max:L},r?a?"currentRemoveAmountLargerThanMaxAmount":"currentAddAmountLargerThanMaxAmount":"currentAmountLargerThanMaxAmount"))}else if(x===m.needToDeposit&&M){var f=Math.ceil(o-i);n.$broadcast("trading:mirrorsExecutionCalculator:error",e("amount",{deposit:f},r?"depositAmountForAddAmount":"depositAmountForCopyMirror"))}else if(x===m.minAverage&&M)n.$broadcast("trading:mirrorsExecutionCalculator:error",e("amount",{min:s.minCopySize},"currentTradeSizeLowerThanMinimum"));else if(x===m.copyStopLossRemoveFunds&&M){var v=this.getMaxFundsToRemove(u);n.$broadcast("trading:mirrorsExecutionCalculator:error",e("amount",{max:v},"currentRemoveAmountLimitDueCSL"))}}return o},get validationErrors(){return m},getMaxFundsToRemove:function(n){var o=n.mirror,t=n.averageCopy.min.minAmount,e=n.amountModel.range;return toFixed(Math.min(e.max,o.Amount-t,this.getCSLLimitAmount(o)),2)},getCSLLimitAmount:function(n){return window.OldCsl?this._getCSLLimitAmountOLD(n):this._getCSLLimitAmountNew(n)},_getCSLLimitAmountOLD:function(n){var o=(100-n.StopLossPercentage)/100,t=Math.max(r(n.TotalProfit/(1.1*o)+n.Amount,2),0);return toFixed(t,2)},_getCSLLimitAmountNew:function(n){var o=toFixed(1-n.StopLossPercentage/100,4),t=n.Amount+n.TotalProfit/o;return toFixed(r(u.getCSLRounding()*t,2),2)}};return u}var r="bl.factories.trading.execution.mirrorsExecutionCalculator",o=n(r,[t,o]);return o.factory(r,["$rootScope","bl.factories.trading.execution.tradingCalculator","infrastruct.services.config",e]),o});define(rA[296][0],["moduleDefiner","underscore"],function(t,e){function n(){return{getClientViewRate:function(t,e,n){return n&&n.Ask&&n.Bid?t?e?n.Bid:n.Ask:parseFloat(e?n.Ask:n.Bid):0},getClientViewRateChange:function(t,e,n){return n&&n.Ask&&n.Bid?t?e?n.lastBidChange:n.lastAskChange:parseFloat(e?n.lastBidChange:n.Bid):0},getPositionConversionRate:function(t,e,n){return n&&n.ConversionRateBid?n.ConversionRateBid:0},calculatePips:function(t,e,n){if(!t.isAmericanPrecision){var i=0,r=0;i=e-n;var a=i*Math.pow(10,Math.abs(t.Precision));return r=Math.round(a)}var o=e>1?t.AboveDollarPrecision:t._Precision,s=Math.pow(10,o);e=Math.round(e*s)/s,1!==n&&(o=n>1?t.AboveDollarPrecision:t._Precision);var c=Math.pow(10,-1*o);return Math.round(100*(e-n)/c)/100},calculateRate:function(t,e,n){"string"==typeof t&&(t=toFixed(t,n));var i=Math.pow(10,n);return(t*i+e)/i},getPrecisionByRate:function(t,e,n){return t.isAmericanPrecision?1===e&&n||1>e?t._Precision:t.AboveDollarPrecision:t._Precision},getRateRounded:function(t,e,n){var i=this.getPrecisionByRate(t,e),r=Math.pow(10,i);return n(e*r)/r},roundNumberByType:function(t,e,n,i,r){var a=Math.pow(10,i),o=toFixed(t*a,i),s=0;return s=r?e&&n||!e&&!n?Math.floor(o)/a:Math.ceil(o)/a:e&&n||!e&&!n?Math.ceil(o)/a:Math.floor(o)/a},toPrecision:function(t,e){var n=Math.pow(10,e);return Math.floor(n*t)/n},getStepJump:function(t){if(t=Math.abs(parseToFloat(t)),t>=10){var n=e.find(a,function(e){return e.min<=t&&e.max>=t});if(n)return n.step}return 1},getPositionTagClass:function(t){if(!t)return"";var e={0:"cfd-tag",2:"trs-tag",3:"cmt-tag",4:"div-tag",5:"ca-tag",11:"staking-tag",12:"bonus-tag"};return t.IsSettled?t.OpenPositionActionType?e[t.OpenPositionActionType]:"":e[t.SettlementTypeID]}}}var i="bl.factories.trading.execution.tradingCalculator",r=t(i),a=[{step:10,min:0,max:99},{step:50,min:100,max:249},{step:100,min:250,max:999},{step:250,min:1e3,max:2499},{step:500,min:2500,max:9999},{step:1e3,min:1e4,max:Number.MAX_VALUE}];return r.factory(i,[n]),r});define(rA[328][0],["angular"],function(t){"use strict";function e(t,e,i,n,s,r,o,u){this.$rootScope=t,this.$q=e,this.$http=i,this.$timeout=n,this.executionCalculator=s,this.loaderService=r,this.config=o,this.$injector=u,this.checkRestriction,this._cleanUserStatus(),this.$rootScope.$on("login:success",this._loginHandler.bind(this)),this.$rootScope.$on("logout:success",this._onLogoutHandler.bind(this))}var i=t.module("bl.factories.trading.restrictions",[]);i.service("bl.factories.trading.restrictions.service",e);var n=1,s=2,r=4,o=1,u=2;return e.$inject=["$rootScope","$q","$http","$timeout","bl.factories.trading.execution.executionCalculator","infrastruct.services.loader","infrastruct.services.config","$injector"],e.prototype={get enableIntroPopUp(){return this.config.dynamics.portfolio?!!this.config.dynamics.portfolio.enableW8IntroPopUp:!0},get isLoggedIn(){return!!this.$rootScope.session.isLoggedIn},get isUserSawW8Form(){return!!this.getW8benService().isUserSawW8Form},get isUserSigned(){return this._userStatus===o},getW8benService:function(){return this.$injector.get("bl.factories.financeService").w8benService},_loginHandler:function(){this._getUserStatus(!1)},_isInstrumentRequired:function(t){return t?t.IsStock||t.IsETF:!1},_onLogoutHandler:function(){this._cleanUserStatus()},_getUserStatus:function(t){if(!this.isLoggedIn)return this._cleanUserStatus(),reject("restrictions - service response recived but not logedin");if(this._userStatus)return this.$q.resolve(this._userStatus);if(!this._userStatusPromise){var e=this;t&&e.loaderService.show(),this._userStatusPromise=this.$q(function(i,c){e.$http({method:"GET",url:"/sapi/trade-real/customer-account/w8ben-status"}).then(function(t){if(!e.isLoggedIn)return e._cleanUserStatus(),c("restrictions - service response recived but not logedin");if(!t||!t.data)return e._cleanUserStatus(),c("restrictions - service response is not valid!");var a=t.data.W8BenStatus;e._userStatus=a===n||a===s||a===r?o:u,i(e._userStatus)})["catch"](function(t){e._userStatusPromise=null,e._userStatus=void 0,c(t)})["finally"](function(){t&&e.loaderService.hide()})})}return this._userStatusPromise},_loadSignupForm:function(){var t=this;return this.$q(function(e){t.getW8benService().openW8({flow:"restrictions"}).then(function(){t._userStatus=o,e(t._userStatus)})["catch"](function(){t._userStatus=u,e(t._userStatus)})})},_isDefaultReal:function(t,e,i){return this.executionCalculator.isLowLeverage(e,i,t)},validateOpenPositionW8BEN:function(t,e,i){var n=this;return this.$q(function(e,s){return n.isLoggedIn?i&&t&&n._isInstrumentRequired(t)?n.checkRestriction?(n.checkRestriction=!1,void n._getUserStatus(!0)["finally"](function(){n.isUserSigned?e():n._loadSignupForm().then(e)["catch"](function(){s("_loadSignupForm failed")})})):(n.loaderService.show(),void n._isExpressCheckout().then(function(i){return n.loaderService.hide(),i?e({isExpressCheckOut:i}):void n._getUserStatus(!0)["finally"](n._shouldShowFirstTime(t)?function(){n.isUserSigned?e():n._loadSignupForm().then(function(){e({isw8benIntroShown:!0})})}:e)})["catch"](function(){n.loaderService.hide(),s("restrictions validation - config or expressCheckout failed")})):e():s("restrictions - not log in!")})},_shouldShowFirstTime:function(t){return!!t.RequiresW8Ben&&!this.isUserSawW8Form},validateOneClickTradingW8BEN:function(t,e,i,n){var s=this;return this.$q(function(r){if(!(t&&n&&t.RequiresW8Ben&&s._isInstrumentRequired(t)))return r({allow:!0});var o=s._isDefaultReal(e,t,i);return o?void s._getUserStatus(!0).then(function(){return s.isUserSigned?r({allow:!0}):void s._loadSignupForm()["finally"](function(){r({allow:!1})})})["catch"](function(){r({allow:!1})}):r({allow:!0})})},_isExpressCheckout:function(){var t=this;return this.$q(function(e){var i=t.$rootScope.session.isLoggedIn&&t.$rootScope.session.user;i?i.isValidForExpressCheckout().then(e)["catch"](function(){e(!1)}):e(!1)})},isW8BANRestrict:function(t,e,i,n,s){if(!(e&&n&&e.RequiresW8Ben&&this._isInstrumentRequired(e)))return!1;if(s&&s.isExpressCheckOut)return!1;var r=this.executionCalculator.isLowLeverage(e,i,t);return r&&!this.isUserSigned},isSignedByIntroduction:function(t){return t&&t.isw8benIntroShown&&this.isUserSigned?!0:!1},loadwW8BANFunnel:function(t,e){t&&(this.checkRestriction=!0,this._showPreloaderForDelay(400),this.$rootScope.$emit("continue:trading:funnel",{data:{action:e,data:t}}))},_showPreloaderForDelay:function(t){var e=this;e.loaderService.show(),this.$timeout(function(){e.loaderService.hide()},t||1500)},_cleanUserStatus:function(){this._userStatus=void 0,this._userStatusPromise=null}},i});define(rA[464][0],["angular",rA[391][0],rA[390][0],rA[287][0]],function(e,n,t,o){"use strict";var r=e.module("walletIntegration",[]);return r.component("redeemPositionPopup",n),r.component("cancelRedeemPositionPopup",t),r.service("integrations.wallet.redeemCrytoService",o),r});define(rA[391][0],["angular",rA[97][0]],function(e,t){"use strict";function i(e,t,i,s,n,o,r){this.$rootScope=e,this.$analytics=t,this.$timeout=i,this.redeemService=s,this.loader=n,this.$injector=o,this.configService=r,this.instrument=null,this.redeemFee=null,this.wallet=null,this.netUnits=null,this.isRegulationASICorASICGaml=null,this.isRegulationCYSECAndIsGermany=null,this.isInProcess=!1,this.interpolationObjectForList=null,this.config={timeout:3e3}}return i.$inject=["$rootScope","$analytics","$timeout","integrations.wallet.redeemCrytoService","infrastruct.services.loader","$injector","infrastruct.services.config"],i.prototype={get netAmount(){return this.netUnits*this.position.CurrentRate},$onInit:function(){this.instrument=this.position.Instrument,this.redeemFee=this.response.RedeemFee,this.wallet=this.response.WalletAddress,this.netUnits=this.position.Units-this.redeemFee,this.precision=this.response.Precision,this.isRegulationASICorASICGaml=4===this.$rootScope.session.user.regulationId||10===this.$rootScope.session.user.regulationId,this.isRegulationCYSECAndIsGermany=1===this.$rootScope.session.user.regulationId&&79===this.$rootScope.session.user.countryId,this.interpolationObjectForList={amount:this.configService.dynamics.payments.redeem.cryptocurrencies.TRX.fee,cryptocurrencyName:this.instrument.Name}},redeem:function(){this.isInProcess=!0;var e=this.$rootScope.session.user;this.$analytics.eventTrack("Redeem Trade - Submit",{Instrument:this.instrument.SymbolFull,units:this.position.Units,VerificationLevel:e.verificationLevel}),this.loader.show(),this.redeemService.processRedeemRequest(this.position).then(function(e){e.data.Success?this.$injector.get("bl.factories.trading.walletNotificationsService").redeemSuccess():this.$injector.get("bl.factories.trading.walletNotificationsService").redeemError()}.bind(this))["catch"](function(){this.$injector.get("bl.factories.trading.walletNotificationsService").redeemError()}.bind(this))["finally"](function(){this.isInProcess=!1,this.loader.hide(),this.onClose()}.bind(this))},onAbort:function(){this.onClose()},_isShowMessageForTRX:function(){return"TRX"===this.instrument.Name&&!this.response.WalletAddress&&this.response.IsShowMessageForTRX&&this.configService.dynamics.payments.redeem.cryptocurrencies.TRX.enabled}},{bindings:{position:"<",response:"<",onClose:"&"},controller:i,templateUrl:t.name}});define(rA[97][0] , [rA[428][0]],function(f){var o={"name":"/etoro/integrations/wallet/redeem/redeemPopup/redeem.popup.view.html","text":"<div class=\"execution edit redeem-popup\"    data-etoro-automation-id=\"redeem-position-dialog\"    data-instrument-id=\"{{:: $ctrl.instrument.InstrumentID}}\"    data-instrument-rate=\"::$ctrl.instrument\">    <div class=\"execution-head\"        data-etoro-automation-id=\"update-position-header-container\">        <div class=\"execution-head-title redeem-position-title\">            <span ng-if=\"$ctrl.isRegulationASICorASICGaml\"                data-etoro-locale-ns=\"redeemCfdPositionDialog\">                {{_title_}}            </span>            <span ng-if=\"!$ctrl.isRegulationASICorASICGaml\"                data-etoro-locale-ns=\"redeemPositionDialog\">                {{_title_}}            </span>        </div>        <div class=\"head-buttons-ph\">            <a ng-click=\"$ctrl.onAbort()\"                class=\"head-button sprite close pointer\">            </a>        </div>    </div>    <div class=\"execution-main\">        <div class=\"execution-wrap\">            <div class=\"execution-main-head\"                data-etoro-locale-ns=\"redeemPositionDialog\">                <div class=\"execution-avatar-ph\">                    <img class=\"avatar\"                        ng-src=\"{{:: $ctrl.instrument.Avatars['default']}}\"                        alt=\"{{:: $ctrl.instrument.name}}\"/>                </div>                <div class=\"user-info stock-sell-buy redeem\">                    <span class=\"execution-main-head-title-name\">{{:: $ctrl.instrument.Name}}</span>                    <span class=\"execution-main-head-title-display-name\"><span class=\"divider\">|</span>  {{:: $ctrl.instrument.DisplayName}}</span>                    <div class=\"execution-main-head-title-price\">                        <span class=\"execution-main-head-price-value\">{{ $ctrl.position.CurrentRate | formatRate:  $ctrl.instrument}}</span>                        <span ng-if=\"!$ctrl.position.IsBuy\"                            ng-class=\"{'negative':  $ctrl.instrument.rate.Change.askNumber('Daily') < 0, 'positive':  $ctrl.instrument.rate.Change.askNumber('Daily') > 0}\">                            <span data-etoro-automation-id=\"edit-position-top-info-instrument-rate-ask-change-daily\">                                {{ $ctrl.instrument.rate.Change.askNumber('Daily') | tofixed:  $ctrl.instrument.Precision}}                            </span>                            <span data-etoro-automation-id=\"edit-position-top-info-instrument-rate-ask-change-daily-percentage\">                                ({{  $ctrl.instrument.rate.Change.askPercent('Daily') |  percentageparser  }})                            </span>                        </span>                        <span ng-if=\"$ctrl.position.IsBuy\"                            ng-class=\"{'negative':  $ctrl.instrument.rate.Change.bidNumber('Daily') < 0, 'positive':  $ctrl.instrument.rate.Change.bidNumber('Daily') > 0}\">                            <span data-etoro-automation-id=\"edit-position-top-info-instrument-rate-bid-change-daily\">                                {{ $ctrl.instrument.rate.Chang;e.bidNumber('Daily') | tofixed:  $ctrl.instrument.Precision}}                            </span>                            <span data-etoro-automation-id=\"edit-position-top-info-instrument-rate-bid-change-daily-percentage\">                                ({{  $ctrl.instrument.rate.Change.bidPercent('Daily') | percentageparser }})                            </span>                        </span>                    </div>                    <div class=\"disclaimer\">                        <span>{{:: $root.t.dynamic('market' , 'disclaimer.' + $ctrl.instrument.ProviderPriceSource)}}</span>                        <span>{{:: $root.t.dynamic('market' , 'disclaimer.Currency' + $ctrl.instrument.SellCurrencyID) + ' |'}}</span>                        <i class=\"clock-icon\" ng-class=\"{'clock-open': $ctrl.instrument.IsActive, 'clock-close': !$ctrl.instrument.IsActive}\"></i>                        <span ng-class=\"{'market-open': $ctrl.instrument.IsActive}\">                            <span ng-bind-html=\"$root.t.dynamic('market', 'disclaimer.marketStateV2', $ctrl.instrument)\"></span>                        </span>                    </div>                </div>            </div>            <div class=\"execution-main-update-info\"                data-etoro-locale-ns=\"redeemPositionDialog\">                <div class=\"execution-edit-info redeem-position\">                    <span class=\"execution-edit-info-item\">{{:: $root.t.dynamic('orders' , 'units')}}</span>                    <span class=\"execution-edit-info-item\">                        <span>{{ $ctrl.position.Units | unitsOpenClose: $ctrl.instrument : 6 : true }}</span>                    </span>                </div>                <div class=\"execution-edit-info redeem-position\">                    <span class=\"execution-edit-info-item\">{{:: $root.t.dynamic('portfolioManualTrades' , 'fees')}}</span>                    <span class=\"execution-edit-info-item\">                        <span class=\"item-details\">{{ $ctrl.redeemFee | number:$ctrl.precision}}</span>                    </span>                </div>                <div class=\"execution-edit-info redeem-position\">                    <span class=\"execution-edit-info-item\">{{_netUnits_}}</span>                    <span class=\"execution-edit-info-item\">                        <span class=\"item-details\"> {{$ctrl.netUnits | number:$ctrl.precision}} </span>                        <span class=\"item-description\">{{ $ctrl.netAmount | currencyparser:2}}</span>                    </span>                </div>            </div>            <div class=\"execution-additional-info\"                ng-if=\"!$ctrl.wallet\">                <ul ng-if=\"$ctrl.isRegulationASICorASICGaml\">                    <li ng-bind-html=\"$root.t.dynamic('redeemCfdPositionDialog', 'noWalletBulet1', this)\"></li>                    <li ng-bind-html=\"$root.t.dynamic('redeemCfdPositionDialog', 'noWalletBulet2', this)\"></li>                    <li ng-if=\"$ctrl._isShowMessageForTRX()\"                        ng-bind-html=\"$root.t.dynamic('payments', 'rpCreateListTRX', $ctrl.interpolationObjectForList)\">                    </li>                    <li ng-bind-html=\"$root.t.dynamic('redeemCfdPositionDialog', 'noWalletBulet3', this)\"></li>                    <li ng-bind-html=\"$root.t.dynamic('redeemCfdPositionDialog', 'NowalletBulet4', this)\"></li>                </ul>                <ul ng-if=\"!$ctrl.isRegulationASICorASICGaml\">                    <li ng-bind-html=\"$root.t.dynamic('redeemPositionDialog', 'noWalletBulet1', this)\"></li>                    <li ng-bind-html=\"$root.t.dynamic('redeemPositionDialog', 'noWalletBulet2', this)\"></li>                    <li ng-if=\"$ctrl._isShowMessageForTRX()\"                        ng-bind-html=\"$root.t.dynamic('payments', 'rpCreateListTRX', $ctrl.interpolationObjectForList)\">                    </li>                    <li ng-bind-html=\"$root.t.dynamic('redeemPositionDialog', 'noWalletBulet3', this)\"></li>                    <li ng-bind-html=\"$root.t.dynamic('redeemPositionDialog', 'NowalletBulet4', this)\"></li>                </ul>            </div>            <div class=\"execution-additional-info has-wallet with-important-info\"                ng-if=\"$ctrl.wallet\">                <div class=\"important-info\">                    <p class=\"info\"                       ng-if=\"$ctrl.isRegulationASICorASICGaml\"                       ng-bind-html=\"$root.t.dynamic('redeemCfdPositionDialog', 'walletSendTo', this)\">                    </p>                    <p class=\"info\"                        ng-if=\"!$ctrl.isRegulationASICorASICGaml\"                        ng-bind-html=\"$root.t.dynamic('redeemPositionDialog', 'walletSendTo', this)\">                    </p>                </div>                <ul ng-if=\"$ctrl.isRegulationASICorASICGaml\">                    <li ng-bind-html=\"$root.t.dynamic('redeemCfdPositionDialog', 'walletBulet1', this)\"></li>                    <li ng-bind-html=\"$root.t.dynamic('redeemCfdPositionDialog', 'walletBulet2', this)\"></li>                    <li ng-bind-html=\"$root.t.dynamic('redeemCfdPositionDialog', 'walletBulet3', this)\"></li>                </ul>                <ul ng-if=\"!$ctrl.isRegulationASICorASICGaml\">                    <li ng-bind-html=\"$root.t.dynamic('redeemPositionDialog', 'walletBulet1', this)\"></li>                    <li ng-bind-html=\"$root.t.dynamic('redeemPositionDialog', 'walletBulet2', this)\"></li>                    <li ng-bind-html=\"$root.t.dynamic('redeemPositionDialog', 'walletBulet3', this)\"></li>                </ul>            </div>            <div class=\"execution-button-wrapper mobile-ui\">                <div class=\"execution-action-button full-execution-button redeem-popup-button\">                    <button class=\"execution-button button-standard button-blue\"                        data-etoro-automation-id=\"transfer-button\"                        ng-disabled=\"$ctrl.isInProcess\"                        ng-click=\"$ctrl.redeem()\">                        <span ng-if=\"$ctrl.isRegulationASICorASICGaml\"                            data-etoro-locale-ns=\"redeemCfdPositionDialog\">                            {{_redeemBtn_}}                        </span>                        <span ng-if=\"!$ctrl.isRegulationASICorASICGaml\"                            data-etoro-locale-ns=\"redeemPositionDialog\">                            {{_redeemBtn_}}                        </span>                    </button>                </div>            </div>            <div class=\"execution-footer mobile-ui\">                <div class=\"footer-license-info\">                    <span ng-if=\"$ctrl.isRegulationCYSECAndIsGermany\"                        ng-bind-html=\"$root.t.dynamic('redeemPositionDialog', 'GermanCysecFooter', this)\"                        data-etoro-automation-id=\"redeem-position-dialog-footer-germany-cysec\">                    </span>                    <span ng-if=\"!$ctrl.isRegulationCYSECAndIsGermany\"                        ng-bind-html=\"$root.t.dynamic('redeemPositionDialog', 'walletFooter', this)\"                        data-etoro-automation-id=\"redeem-position-dialog-footer-wallet\">                    </span>                </div>            </div>        </div>    </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[390][0],["angular",rA[96][0]],function(e,t){"use strict";function i(e,t,i,n){this.$rootScope=e,this.$analytics=t,this.redeemService=i,this.loader=n,this.regulationId=e.session.user.regulationId,this.isInProcess=!1}return i.$inject=["$rootScope","$analytics","integrations.wallet.redeemCrytoService","infrastruct.services.loader"],i.prototype={$onInit:function(){this.instrument=this.position.Instrument},reverseRedeem:function(){var e=this.$rootScope.session.user;this.isInProcess=!0,this.$analytics.eventTrack("Redeem Trade - Cancel",{Instrument:this.instrument.SymbolFull,units:this.position.Units,VerificationLevel:e.verificationLevel}),this.position.cancelRedeemPosition()["finally"](function(){this.isInProcess=!1,this.onComplete(),this.onClose()}.bind(this))},onAbort:function(){this.onClose()}},{bindings:{position:"<",onComplete:"&",onClose:"&"},controller:i,templateUrl:t.name}});define(rA[96][0] , [rA[428][0]],function(f){var o={"name":"/etoro/integrations/wallet/redeem/cancelPopup/cancel.redeem.popup.view.html","text":"<div class=\"w-sm execution reverse\" data-etoro-locale-ns=\"reverseRedeemPosition\">    <div class=\"w-confirmation-modal-title\"         ng-bind-html=\"$root.t.dynamic('reverseRedeemPosition',(($ctrl.regulationId===4)||($ctrl.regulationId===10)) ? 'dialogTitle.typeB' : 'dialogTitle.typeA', this)\">    </div>    <div class=\"w-share-header-nav-button-x sprite\" ng-click=\"$ctrl.onAbort()\" analytics-on=\"click\" analytics-event=\"\"></div>    <div class=\"w-sm-main ng-scope\">        <div class=\"w-execution-main-head\">            <div class=\"execution-avatar-ph\">                <img class=\"avatar\" ng-src=\"{{:: $ctrl.instrument.Avatars['default']}}\" alt=\"{{:: $ctrl.instrument.name}}\"                automation-id=\"cd-cancel-redeem-avatar\"/>            </div>            <div class=\"user-info stock-sell-buy\">                <span class=\"execution-main-head-title-name\" automation-id=\"cd-cancel-redeem-symbol\">{{:: $ctrl.instrument.Name}}</span>                <span class=\"execution-main-head-title-display-name\" automation-id=\"cd-cancel-redeem-name\"><span class=\"divider\">|</span>  {{:: $ctrl.instrument.DisplayName}}</span>                <div class=\"execution-main-head-title-price\">                    <span class=\"execution-main-head-price-value\" automation-id=\"cd-cancel-redeem-current-rate\">{{ $ctrl.position.CurrentRate | formatRate:  $ctrl.instrument}}</span>                    <span ng-if=\"!$ctrl.position.IsBuy\"                          ng-class=\"{'negative':  $ctrl.instrument.rate.Change.askNumber('Daily') < 0, 'positive':  $ctrl.instrument.rate.Change.askNumber('Daily') > 0}\">                            <span data-etoro-automation-id=\"edit-position-top-info-instrument-rate-ask-change-daily\">                                {{ $ctrl.instrument.rate.Change.askNumber('Daily') | tofixed:  $ctrl.instrument.Precision}}                            </span>                            <span data-etoro-automation-id=\"edit-position-top-info-instrument-rate-ask-change-daily-percentage\">                                ({{  $ctrl.instrument.rate.Change.askPercent('Daily') |  percentageparser  }})                            </span>                        </span>                    <span ng-if=\"$ctrl.position.IsBuy\"                          ng-class=\"{'negative':  $ctrl.instrument.rate.Change.bidNumber('Daily') < 0, 'positive':  $ctrl.instrument.rate.Change.bidNumber('Daily') > 0}\">                            <span data-etoro-automation-id=\"edit-position-top-info-instrument-rate-bid-change-daily\">                                {{ $ctrl.instrument.rate.Change.bidNumber('Daily') | tofixed:  $ctrl.instrument.Precision}}                            </span>                            <span data-etoro-automation-id=\"edit-position-top-info-instrument-rate-bid-change-daily-percentage\">                                ({{  $ctrl.instrument.rate.Change.bidPercent('Daily') | percentageparser }})                            </span>                        </span>                </div>                <div class=\"disclaimer\" automation-id=\"cd-cancel-redeem-disclaimer\">                    <span>{{:: $root.t.dynamic('market' , 'disclaimer.' + $ctrl.instrument.ProviderPriceSource)}}</span>                    <span>{{:: $root.t.dynamic('market' , 'disclaimer.Currency' + $ctrl.instrument.SellCurrencyID) + ' |'}}</span>                    <i class=\"clock-icon\" ng-class=\"{'clock-open': $ctrl.instrument.IsActive, 'clock-close': !$ctrl.instrument.IsActive}\"></i>                    <span ng-class=\"{'market-open': $ctrl.instrument.IsActive}\" ng-bind-html=\"$root.t.dynamic('market', 'disclaimer.marketStateV2', $ctrl.instrument)\">                        </span>                </div>            </div>        </div>        <div class=\"w-sm-details-info-title\"            automation-id=\"cd-cancel-redeem-info\"             ng-bind-html=\"$root.t.dynamic('reverseRedeemPosition',(($ctrl.regulationId===4)||($ctrl.regulationId===10)) ? 'infoText.typeB' : 'infoText.typeA', this)\">        </div>        <div class=\"w-sm-amount-info-close clear-after\">            <div class=\"w-sm-amount-info-unit redeem-position clear-after\">                <div class=\"w-sm-amount-info-label\" automation-id=\"cd-cancel-redeem-sum-label\">{{:: $root.t.dynamic('orders' , 'units')}}</div>                <div class=\"w-sm-amount-info-value ng-binding\" automation-id=\"cd-cancel-redeem-sum-value\">{{$ctrl.position.Units | unitsOpenClose: $ctrl.instrument : 6 : true}}</div>            </div>        </div>    </div>    <div class=\"w-sm-footer\">        <button class=\"execution-button button-standard button-blue pointer\" ng-click=\"$ctrl.reverseRedeem()\" ng-disabled=\"$ctrl.isInProcess\" data-etoro-automation-id=\"reverse-button\">{{_reverseBtn_}}</button>    </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[287][0],["underscore"],function(){"use strict";function e(e,i,t,o,n,r,s,a,c,u,l){this.$q=e,this.$rootScope=i,this.$http=t,this.$timeout=o,this.$log=n,this.uiDialog=r,this.kycService=s,this.loader=a,this.executionCalculator=c,this.$injector=u,this.configService=l,this.config={openDelay:3e3}}return e.$inject=["$q","$rootScope","$http","$timeout","$log","uiDialog","bl.factories.payments.kycProvider","infrastruct.services.loader","bl.factories.trading.execution.executionCalculator","$injector","infrastruct.services.config"],e.prototype={redeemPosition:function(e){var i=this;this.loader.show();var t=i.isEligibleToRedeem({positionID:e.PositionID,units:e.Units,instrumentID:e.Instrument.InstrumentID,amount:e.Amount}).then(function(t){var o;o=i.isRedeemPopupV2Enabled()?'<et-redeem-popup-wizard [position]="uiDialogData.position" [response]="uiDialogData.response" (close-wizard-dialog)="uiDialogData.onClose()"></et-redeem-popup-wizard>':'<redeem-position-popup on-close="uiDialogData.onClose()" position="uiDialogData.position" response="uiDialogData.response"></redeem-position-popup>',i.uiDialog.open({plain:!0,template:o,data:{position:e,response:t,onClose:function(){i.uiDialog.close()}},className:"redeem-trade-dialog"})})["catch"](function(e){return e})["finally"](function(){i.loader.hide()});return t},isRedeemPopupV2Enabled:function(){var e=this.$rootScope.session.user;if(!e)return!1;var i=this.configService.dynamics.payments.redeem.redeemPopup.v2,t=i.isEnabledForAll,o=i.gcidWhitelist,n=i.countryIdWhitelist,r=Array.isArray(o)&&o.some(function(i){return+e.gcid===+i}),s=Array.isArray(n)&&n.some(function(i){return+e.countryId===+i}),a=t||r||s;return!!a},isEligibleToRedeem:function(e){return this.$q(function(i,t){this.$http.get("/api/billing/redeem/info",{params:e}).then(function(e){if(e.data.Success)i(e.data);else{var o=e.data.ErrorCode;switch(o){case"WireDepositsValidation":t({error:o,amount:e.data.WireAggrAmount});break;case"NotAutoVerifiedPhone":t({error:o});break;default:this._showToastNotification({}),t()}}}.bind(this))["catch"](function(){this._showToastNotification({}),t()}.bind(this))}.bind(this))},processRedeemRequest:function(e,i){var t=this;return this.kycService.loadWithdrawModal().then(function(){return this.$http.post("/api/billing/redeem/process",{positionID:e.PositionID,units:e.Units,instrumentID:e.Instrument.InstrumentID,amount:e.Amount,referenceID:i}).then(function(e){return e})["catch"](function(e){return t.$log.logJSON("info","log",{Categories:["KYC","Redeem"],Message:"KYC reject received on redeem Request"}),t.$q.reject(e)})}.bind(this))},openCancelRedeemPositionPopup:function(e,i){this.uiDialog.open({plain:!0,template:'<cancel-redeem-position-popup  on-complete="uiDialogData.onComplete()" on-close="uiDialogData.onClose()" position="uiDialogData.position"></cancel-redeem-position-popup>',data:{position:e,onComplete:function(){i&&"portfolioHistoryCashflows"===i&&this.$rootScope.$emit("payments:portfolioHistoryCashflows:cancelRedeemPositionPopupClosed")}.bind(this),onClose:function(){this.uiDialog.close()}.bind(this)}})},validateRedeem:function(e){var i={isEnabled:!1,errorReason:""};if(!e)return i;var t=e.isCMT;if(t)return i.errorReason="cmt",i;var o=e.Units<e.Instrument.MinPositionUnitsForRedeem,n=e.Units>e.Instrument.MaxPositionUnitsForRedeem;return o?(i.errorReason="min",i):n?(i.errorReason="max",i):(i.isEnabled=!0,i)},_showToastNotification:function(e){this.$injector.get("bl.factories.trading.walletNotificationsService").redeemError(e)}},e});define(rA[56][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/openPosition/openPosition.view.html","text":"<div ng-controller=\"apps.trader.portfolio.openPosition.openPositionCtrl as controller\"     data-instrument-id=\"{{:: model.instrument.InstrumentID}}\" data-instrument-rate=\"::model.instrument\"     data-etoro-locale-ns=\"portfolioOpenPosition\"     data-etoro-automation-id=\"execution-pop-up\">    <div class=\"execution longer-popup\" id=\"open-position-view\" ng-class=\"{ 'weekend' : model.marketMode === 'isMarket'}\">        <div class=\"execution-head\">            <span ng-if=\"model.isUsConfirmMode\"            ng-click=\"closeConfirm()\"            ui-if-breakpoint=\"mobile\"             class=\"us-confirm-back-icon sprite back\"> </span>            <div class=\"execution-head-buttons new-design\"  ng-if=\"model.instrument.IsAllowSell && model.instrument.IsAllowBuy && !model.instrument.isUsTrade && !(model.isConfirmForAll && model.isUsConfirmMode)\">                <button ng-class=\"{active: !model.isBuy}\" class=\"execution-head-button sell\"                        ng-click=\"switchTradeType(false)\" data-etoro-automation-id=\"execution-sell-button\">                    <span class=\"sell\" ng-if=\"model.changeSellToShort\">{{$root.t.dynamic('shortPromotionCard', 'short')}}</span>                    <span ng-if=\"!model.changeSellToShort\"> {{_sellButton_}}</span>                </button>                <button ng-class=\"{active: model.isBuy }\" class=\"execution-head-button buy\" ng-click=\"switchTradeType(true)\"                        data-etoro-automation-id=\"execution-buy-button\">{{_buyButton_}}                </button>            </div>            <div class=\"execution-head-buttons one-instrument\" ng-if=\"controller.isOnlyOneAllowed && !model.instrument.isUsTrade\">                <span class=\"single-instrument-head-title\">{{ _if(model.isBuy,'_btnBuy_','_btnSell_')_ }}</span>                <span class=\"single-instrument-head-title\">{{:: model.instrument.Name}}</span>            </div>            <div class=\"head-buttons-ph\">                <a class=\"head-button sprite close pointer\" ng-click=\"closeOpenTrade()\"                   data-etoro-automation-id=\"execution-head-button-close\"                   automation-id=\"close-dialog-btn\"></a>            </div>        </div>        <div ng-if=\"model.loading\" class=\"execution-main\">            <span class=\"execution-loading\"></span>        </div>        <div class=\"execution-main\" ng-show=\"!model.loading\"             ng-class=\"{ 'order-mode' : model.marketMode === 'isMarket' || model.marketMode === 'order' }\">            <div class=\"execution-wrap\">                <div class=\"execution-main-head\">                    <div class=\"execution-avatar-ph\">                        <img class=\"avatar\" ng-src=\"{{:: model.instrument.Avatars['default']}}\"                             alt=\"{{:: model.instrument.name}}\"/>                    </div>                    <div class=\"user-info stock-sell-buy open-trade\">                        <span ng-if=\"!model.changeSellToShort || model.isBuy\" class=\"execution-main-head-title-name\"                              data-etoro-automation-id=\"execution-title-description\">{{ _if(model.isBuy,'_btnBuy_','_btnSell_')_ }}</span>                        <span ng-if=\"model.changeSellToShort && !model.isBuy\" class=\"single-instrument-head-title\">{{$root.t.dynamic('shortPromotionCard', 'short')}}</span>                        <span class=\"execution-head-title-top\"                              data-etoro-automation-id=\"execution-title-instrument-name\">{{:: model.instrument.Name}}</span>                        <div class=\"execution-main-head-title-price\" ng-if=\"!model.instrument.isPreview\">                            <span class=\"execution-main-head-price-value\"                                  data-ng-if=\"model.marketMode !== model.marketModeOptions.order\"                                  data-etoro-automation-id=\"execution-view-rate\">                                {{model.viewRate | formatRate: model.instrument}}                            </span>                            <span class=\"execution-main-head-price-value\"                                  data-ng-if=\"model.marketMode === model.marketModeOptions.order\"                                  data-etoro-automation-id=\"execution-order-view-rate\">                                {{model.orderModeCurrentRate | formatRate: model.instrument}}                            </span>                            <span ng-if=\"model.isBuy\"                                  ng-class=\"{'negative':  model.instrument.getTheRateObject(isDiscountedRate()).Change.askNumber('Daily') < 0, 'positive':  model.instrument.rate.Change.askNumber('Daily') > 0}\">                                <span data-etoro-automation-id=\"execution-ask-change-daily-value\">{{ model.instrument.getTheRateObject(isDiscountedRate()).Change.askNumber('Daily') | tofixed:  model.instrument.Precision}}</span>                                <span data-etoro-automation-id=\"execution-ask-change-daily-percent\">({{  model.instrument.getTheRateObject(isDiscountedRate()).Change.askPercent('Daily') |  percentageparser  }})</span>                            </span>                            <span ng-if=\"!model.isBuy\"                                  ng-class=\"{'negative':  model.instrument.rate.Change.bidNumber('Daily') < 0, 'positive':  model.instrument.rate.Change.bidNumber('Daily') > 0}\">                                <span data-etoro-automation-id=\"execution-bid-change-daily-value\">{{ model.instrument.rate.Change.bidNumber('Daily') | tofixed:  model.instrument.Precision}}</span>                                <span data-etoro-automation-id=\"execution-bid-change-daily-percent\">({{  model.instrument.rate.Change.bidPercent('Daily') | percentageparser }})</span>                            </span>                            <et-nbbo-info ng-if=\"model.instrument.isUsTrade && model.instrument.IsActive\"                                 [instrument]=\"model.instrument\">                             </et-nbbo-info>                        </div>                        <div ng-if=\"model.instrument.isPreview\">                            <span class=\"execution-head-instrument-preview\">{{_pendingIPO_}}</span>                        </div>                        <div class=\"disclaimer\">                            <span data-etoro-automation-id=\"execution-disclaimer\">{{$root.t.dynamic('market' , 'disclaimer.' +  model.instrument.ProviderPriceSource)}}</span>                            {{$root.t.dynamic('market' , 'disclaimer.Currency' + model.instrument.SellCurrencyID) + ' |'}}                            <i class=\"clock-icon\"                                  ng-class=\"{'clock-open': model.instrument.IsActive, 'clock-close': !model.instrument.IsActive}\"></i>                            <span ng-bind-html=\"$root.t.dynamic('market', 'disclaimer.marketStateV2', model.instrument)\"></span>                        </div>                    </div>                    <div data-etoro-automation-id=\"execution-trade-mode-drop-box\"                         class=\"button-standard execution-dropper dropdown-menu\" dropdown-menu=\"\"                         ng-if=\" (model.instrument.IsActive || model.closeMarketSimilarToOpen) && !model.instrument.isUsTrade && model.instrument.AllowPendingOrders && !model.isUsConfirmMode\">                        <a class=\"drop-label\">                            {{ _if(model.marketMode === model.marketModeOptions.order, '_orderButton_' ,                            '_tradeButton_')_ }}                            <span class=\"drop-label-icon sprite\"></span>                        </a>                        <div id=\"drop\" class=\"drop-select-box\" drop-select-box=\"\">                            <a data-etoro-automation-id=\"execution-trade-mode-switch-to-order\"                               ng-click=\"switchType(model.marketModeOptions.order)\" class=\"drop-select-box-option\">                                {{_orderButton_}}                                <span class=\"drop-v-icon sprite\"></span>                            </a>                            <a data-etoro-automation-id=\"execution-trade-mode-switch-to-trade   \"                               ng-click=\"switchType(  model.closeMarketSimilarToOpen ? model.marketModeOptions.isMarket : model.marketModeOptions.active)\"                               class=\"drop-select-box-option\">                                {{_tradeButton_}}                                <span class=\"drop-v-icon sprite\"></span>                            </a>                        </div>                    </div>                </div>                <div ng-if=\"!model.isUsConfirmMode\">                    <div class=\"execution-main-steppers\">                    <div class=\"set-rate\" ng-if=\" !model.instrument.isUsTrade\" ng-class=\"{'market-closed-indication': model.marketMode === 'isMarket' && model.closeMarketSimilarToOpen }\">                        <div data-ui-input-number-incrementer=\"\"                            data-etoro-automation-id=\"execution-order-rate-input-section\"                            class=\"stepper-ph\"                            ng-if=\"model.marketMode === model.marketModeOptions.order && model.viewRate\"                            data-input-binding=\"model.viewRate\"                            data-formatter=\"rate\"                            data-formatter-options=\"{ getInstrumentPrecisionByRate: getInstrumentPrecisionByRate }\"                            data-on-change=\"orderRateChange\"                            data-on-blur=\"orderRateBlur\"                            data-on-focus=\"orderRateFocus\">                            <div data-area=\"title\" data-etoro-automation-id=\"execution-order-left-side-label\">                                {{_setRate_}}                            </div>                            <div data-area=\"side\">                                <div class=\"stepper-switch\" ng-if=\" !model.instrument.IsActive && !model.closeMarketSimilarToOpen\">                                    <a class=\"button-standard\" ng-click=\"switchType(model.marketModeOptions.isMarket)\"                                    data-etoro-automation-id=\"execution-button-switch-entry-order\" ng-disabled=\"model.isOnlyPendingOrdersAllowed\">                                        <span class=\"switcher sprite\" ng-class=\"{'disabled': model.isOnlyPendingOrdersAllowed}\"></span>                                        {{_marketoggleButton_}}                                    </a>                                    <div automation-id=\"execution-market-off-tool-tip-container\" ng-if=\"model.isOnlyPendingOrdersAllowed\" class=\"execution-market-off-tool-tip stepper-switch-tool-tip\" ng-class=\"{'hover-show-tooltip': !model.isMobile, 'display-block': model.isMobile && model.isTooltipOpen}\">                                        <div class=\"tool-tip-container listener-element-to-prevent\">                                            <span ng-if=\"model.instrument\" ng-bind-html=\":: $root.t.dynamic('restrictTrading', 'pendingOrderRestrictionToolTip', this)\"></span>                                            <span class=\"tool-tip-pick\"></span>                                        </div>                                    </div>                                        </div>                            </div>                            <div data-area=\"bottom\" class=\"stepper-info\"></div>                        </div>                        <div ng-if=\"model.marketMode === 'isMarket' && !model.closeMarketSimilarToOpen\" class=\"stepper-ph stop-loss\">                            <div class=\"stepper-label\" data-etoro-automation-id=\"execution-market-off-set-rate\">                                {{_setRateLabel_}}                            </div>                            <div class=\"stepper\" data-etoro-automation-id=\"execution-market-off-input-label\">                                <div class=\"market-label\">                                    <span class=\"market-label-text\">{{_atMarketToggleButton_}}</span>                                    <span class=\"info-sigh sprite\" ui-if-breakpoint=\"!mobile\"></span>                                </div>                                <div automation-id=\"execution-market-off-tool-tip-container\" ui-if-breakpoint=\"!mobile\" class=\"execution-market-off-tool-tip\">                                    <div class=\"tool-tip-container\">                                        {{_executionMarketOffToolTip_}}                                    </div>                                    <span class=\"tool-tip-pick\"></span>                                </div>                            </div>                            <div ng-if=\"!model.isOnlyPendingOrdersAllowed\" class=\"stepper-switch\" ng-class=\"{'instrument-preview': model.instrument.isPreview}\">                                <a class=\"button-standard \" ng-click=\"switchType(model.marketModeOptions.order)\"                                ng-disabled=\"model.isOnlyEntryOrdersAllowed || model.amount.amount === 0\"                                data-etoro-automation-id=\"execution-button-switch-order-rate\">                                    <span class=\"switcher sprite\" ng-class=\"{'disabled': model.isOnlyEntryOrdersAllowed || model.amount.amount === 0}\"></span>                                    {{_rateToggleButton_}}                                </a>                                <div automation-id=\"execution-market-off-tool-tip-container\" ng-if=\"model.isOnlyEntryOrdersAllowed\" class=\"execution-market-off-tool-tip stepper-switch-tool-tip\" ng-class=\"{'hover-show-tooltip': !model.isMobile, 'display-block': model.isMobile && model.isTooltipOpen}\">                                    <div class=\"tool-tip-container listener-element-to-prevent\">                                        <span ng-if=\"model.instrument\" ng-bind-html=\":: $root.t.dynamic('restrictTrading', 'entryOrderRestrictionToolTip', this)\"></span>                                        <span class=\"tool-tip-pick\"></span>                                    </div>                                    </div>                            </div>                        </div>                    </div>                    <div ng-if=\"model.amount.inUnitsMode\"                         class=\"amount-mode\"                        data-ui-input-number-incrementer=\"\"                        data-etoro-automation-id=\"execution-units-input-section\"                        data-input-binding=\"model.amount.unitsView\"                        data-formatter=\"number\"                        data-formatter-options=\"{precision: 2 }\"                        data-on-change=\"unitsChange\"                        data-on-focus=\"unitsFocus\"                        data-on-blur=\"unitsBlur\"                        data-on-defocus=\"unitsDeFocus\">                        <div data-area=\"title\" data-etoro-automation-id=\"execution-units-mode-left-title\" class=\"unit-info-title\">                            <sapn class=\"unit-info\" click-outside=\"closeUnitTooltip()\">                                <span>{{_setUnit_}}</span>                            </sapn>                        </div>                        <div data-area=\"side\">                            <div class=\"stepper-switch\" ng-class=\"{'instrument-preview': model.instrument.isPreview}\">                                <a class=\"button-standard \" ng-click=\"switchAmountMode()\"                                data-etoro-automation-id=\"execution-button-switch-to-amount\">                                    <span class=\"switcher sprite\"></span>                                    {{_amountToggleButton_}}                                </a>                            </div>                        </div>                        <div data-area=\"bottom\" class=\"stepper-info\">                            <div data-execution-messages=\"amount\" data-model=\"model.errors.amount\"                                data-etoro-automation-id=\"execution-units-section-error-messages\">                                <span ng-if=\"!model.instrument.isPreview\" class=\"inner-info\">                                    <b data-etoro-automation-id=\"execution-units-section-info-amount-value\">{{ model.amount.amount | tofixedNoZero:2 | lowerThanMinimum | currencyparser : 2 }}</b>                                    <span class=\"stepper-info-border\" data-etoro-automation-id=\"execution-units-section-info-amount-label\">                                        {{_estimatedMargin_}}                                    </span>                                </span>                                <span ui-if-breakpoint=\"!mobile\">                                    <span class=\"stepper-info-border inner-info\"                                        data-etoro-automation-id=\"execution-units-section-equity-info\">{{ model.amount.extra }}</span>                                    <span class=\"inner-info\">                                        <span data-etoro-automation-id=\"execution-units-section-exposure-label\">                                            {{_notional_}}                                        </span>                                        <span data-etoro-automation-id=\"execution-units-section-exposure-value\">                                            {{model.amount.exposure | currencyparser: 2}}                                        </span>                                    </span>                                </span>                                <span ui-if-breakpoint=\"mobile\">                                    <span>                                        <span data-etoro-automation-id=\"execution-units-section-exposure-label\">                                            {{_notional_}}                                        </span>                                        <span data-etoro-automation-id=\"execution-units-section-exposure-value\">                                            {{model.amount.exposure | currencyparser: 2}}                                        </span>                                    </span>                                    <div data-etoro-automation-id=\"execution-units-section-equity-info\">{{ model.amount.extra }}</div>                                </span>                            </div>                        </div>                    </div>                    <div ng-if=\"!model.amount.inUnitsMode && (model.isZeroAmount && !model.dirty)\"                        data-ui-input-number-incrementer=\"\"                        data-input-binding=\"0\"                        data-formatter=\"currency\"                        data-formatter-options=\"{precision: 2 }\"                        data-on-change=\"amountChange\"                        data-on-focus=\"amountFocus\"                        data-on-blur=\"amountBlur\"                        data-on-defocus=\"amountDeFocus\"                        data-etoro-automation-id=\"execution-amount-input-section\">                        <div data-area=\"title\" data-etoro-automation-id=\"execution-amount-mode-left-title\">                            {{_setAmount_}}                        </div>                        <div data-area=\"side\">                            <div class=\"stepper-switch\" ng-class=\"{'instrument-preview': model.instrument.isPreview}\">                                <a class=\"button-standard \" ng-click=\"switchAmountMode()\"                                data-etoro-automation-id=\"execution-button-switch-to-units\">                                    <span class=\"switcher sprite\"></span>                                    {{_unitToggleButton_}}                                </a>                            </div>                        </div>                        <div data-area=\"bottom\" class=\"stepper-info zero-amount\">                        </div>                    </div>                        <div ng-if=\"!model.amount.inUnitsMode && !(model.isZeroAmount && !model.dirty)\"                             data-ui-input-number-incrementer=\"\"                             data-input-binding=\"model.amount.amountView\"                             data-formatter=\"currency\"                             data-formatter-options=\"{precision: 2 }\"                             data-on-change=\"amountChange\"                             data-on-focus=\"amountFocus\"                             data-on-blur=\"amountBlur\"                             data-on-defocus=\"amountDeFocus\"                             data-etoro-automation-id=\"execution-amount-input-section\">                            <div data-area=\"title\" data-etoro-automation-id=\"execution-amount-mode-left-title\">                                {{_setAmount_}}                            </div>                            <div data-area=\"side\">                                <div class=\"stepper-switch\" ng-class=\"{'instrument-preview': model.instrument.isPreview}\">                                    <a class=\"button-standard \" ng-click=\"switchAmountMode()\"                                       data-etoro-automation-id=\"execution-button-switch-to-units\">                                        <span class=\"switcher sprite\"></span>                                        {{_unitToggleButton_}}                                    </a>                                </div>                            </div>                            <div data-area=\"bottom\" class=\"stepper-info\">                                <div data-execution-messages=\"amount\" data-model=\"model.errors.amount\"                                     data-etoro-automation-id=\"execution-amount-section-error-messages\">                                <span ng-if=\"!model.instrument.isPreview\" class=\"inner-info\">                                    <b data-etoro-automation-id=\"execution-amount-section-info-units-value\">{{ model.amount.units | tofixedNoZero:2 | number | lowerThanMinimum }}</b>                                    <span class=\"stepper-info-border\"                                          data-etoro-automation-id=\"execution-amount-section-info-units-label\">{{_amountUnits_}}</span>                                </span>                                    <span ui-if-breakpoint=\"!mobile\">                                    <span class=\"stepper-info-border inner-info\"                                          data-etoro-automation-id=\"execution-amount-section-equity-info\">{{ model.amount.extra }}</span>                                    <span class=\"inner-info\">                                        <span data-etoro-automation-id=\"execution-amount-section-exposure-label\">                                            {{_notional_}}                                        </span>                                        <span data-etoro-automation-id=\"execution-amount-section-exposure-value\">{{model.amount.exposure | currencyparser: 2}}</span>                                    </span>                                </span>                                    <span ui-if-breakpoint=\"mobile\">                                    <span>                                        <span data-etoro-automation-id=\"execution-amount-section-exposure-label\">                                            {{_notional_}}                                        </span>                                        <span data-etoro-automation-id=\"execution-amount-section-exposure-value\"> {{model.amount.exposure | currencyparser: 2}}</span>                                    </span>                                    <div data-etoro-automation-id=\"execution-amount-section-equity-info\">{{ model.amount.extra }}</div>                                </span>                                </div>                            </div>                        </div>                    </div>                    <div class=\"tab-box-wrapper\" ng-if=\"model.oneClickTrading.isActive && !controller.isNoneLeveragedOnly && !model.instrument.isUsTrade\">                    <tabs data-selected-index=\"-1\" data-name=\"OpenPositionOneClickTradingTabs\"                        nav-class-exp=\"::{ 'tab-box execution-start' : true }\">                        <tabsnotselected>                            <div class=\"tab-box-execution-content start active\"                                ng-show=\"model.oneClickTrading.showInfo\">                                <div class=\"execution-start-info\">{{_oneClikcTradingTradeActions_}}</div>                            </div>                        </tabsnotselected>                        <tabstitles class=\"tab-box-head clear-after display-block\">                            <tabtitle class-name=\"box-tab\" class=\"box-tab-wrapper\">                                <div class='box-tab-value'>{{ _dynamic( model.oneClickTrading.stopLoss)_ }}</div>                                <div class='box-tab-label'>{{_tabStopLoss_}}</div>                            </tabtitle>                            <tabtitle class-name=\"box-tab center-tab\" class=\"box-tab-wrapper\">                                <div class='box-tab-value'>X{{model.oneClickTrading.leverage}}</div>                                <div class='box-tab-label'>{{_tabRisk_}}</div>                            </tabtitle>                            <tabtitle class-name=\"box-tab\" class=\"box-tab-wrapper\">                                <div class='box-tab-value'>{{ _dynamic(model.oneClickTrading.takeProfit)_}}</div>                                <div class='box-tab-label'>{{_tabTakeProfit_}}</div>                            </tabtitle>                        </tabstitles>                        <tabscontent class=\"display-block tab-box-main\">                            <tab class=\"tab-box-execution-content ui-tab-pane\">                                <div class=\"group-buttons x{{model.oneClickTrading.rateOptions.length}}\">                                    <a class=\"risk-itemlevel link\"                                    ng-click=\"model.oneClickTrading.setRate(option, true)\"                                    ng-class=\"{active : option == model.oneClickTrading.stopLoss}\"                                    ng-repeat=\"option in model.oneClickTrading.rateOptions\">{{_dynamic(option)_}}</a>                                </div>                                <div class=\"stop-loss-execution-cheackbox\" ng-if=\"model.stopLoss.TSL.isFeatureEnabled\">                                    <div class=\"cheackbox-ph\">                                        <input data-etoro-automation-id=\"execution-tsl-check-box\"                                            class=\"cheackbox-input ng-pristine ng-untouched ng-valid\" type=\"checkbox\"                                            id=\"cbsl\" ng-model=\"model.oneClickTrading.isTslEnabled\">                                        <label data-etoro-automation-id=\"execution-tsl-label\"                                            class=\"cheackbox-label\" for=\"cbsl\">{{_trailingStopLoss_}}</label>                                        <div class=\"info-sigh sprite\">                                            <div data-etoro-automation-id=\"execution-tsl-tool-tip\"                                                class=\"tooltip-stoploss\"                                                ng-bind-html=\":: $root.t.dynamic('portfolioOpenPosition', 'tslToolTip', this)\">                                            </div>                                        </div>                                    </div>                                </div>                            </tab>                            <tab class=\"tab-box-execution-content ui-tab-pane\">                                <div class=\"group-buttons x{{model.displayLeverages.length}}\">                                    <a class=\"risk-itemlevel link\"                                    ng-click=\"setLeverage(leverage, $index)\"                                    ng-class=\"{active : $index == model.leverages.leverageIndex}\"                                    ng-repeat=\"leverage in model.displayLeverages\"                                    data-etoro-automation-id=\"execution-one-click-trading-risk-selection-{{:: leverage}}\">                                        x{{leverage}}                                    </a>                                </div>                            </tab>                            <tab class=\"tab-box-execution-content ui-tab-pane\">                                <div class=\"group-buttons x{{model.oneClickTrading.rateOptions.length}}\">                                    <a class=\"risk-itemlevel link\"                                    ng-click=\"model.oneClickTrading.setRate(option, false)\"                                    ng-class=\"{active : option == model.oneClickTrading.takeProfit}\"                                    ng-repeat=\"option in model.oneClickTrading.rateOptions\">{{_dynamic(option)_}}</a>                                </div>                            </tab>                        </tabscontent>                    </tabs>                    </div>                    <div class=\"tab-box-wrapper\" ng-if=\"!model.oneClickTrading.isActive && !controller.isNoneLeveragedOnly && !model.instrument.isUsTrade\">                    <tabs data-selected-index=\"-1\" data-name=\"OpenPositionTabs\"                        nav-class-exp=\"::{ 'tab-box execution-start' : true }\">                        <tabsnotselected>                            <div class=\"tab-box-execution-content start active\" ng-show=\"model.showInfo\">                                <div class=\"execution-start-info\"                                    data-etoro-automation-id=\"execution-start-info-trading\">                                    <div>                                        {{$root.t.dynamic('portfolioOpenPosition', controller.tradeActionsL1Key)}}                                    </div>                                    <div ng-if=\"model.showCFDDisclaimer\">{{$root.t.dynamic('portfolioOpenPosition',(model.isCMT ? 'CFDOnlyTradeActionsL2' : 'CFDTradeActionsL2'))}}</div>                                    <div                                            ng-if=\"!model.showCFDDisclaimer && !model.isLowLeverage\"                                            ng-bind-html=\"$root.t.dynamic('portfolioOpenPosition',(controller.isTRS ? 'TRSTradeActionsL2' : 'CFDOnlyTradeActionsL2'), this)\"                                    ></div>                                    <div ng-if=\"!model.showCFDDisclaimer && model.isLowLeverage && (isDiscountedRate() || model.isUSUser)\">                                        <i class=\"no-fees-icon\" ng-class=\"{ 'clickable': model.isUSUser && !model.instrument.IsAmericanStock }\"></i>                                        <span class=\"no-fees-message\" ng-class=\"{ 'pointer': model.isUSUser && !model.instrument.IsAmericanStock } \"ng-click=\"zeroCommissionClick()\">{{_ZeroCommission_}}</span>                                    </div>                                </div>                            </div>                        </tabsnotselected>                        <tabstitles class=\"tab-box-head clear-after display-block\">                            <tabtitle data-disabled = \"model.amount.amount === 0 ? true : undefined\" class-name=\"box-tab\" class=\"box-tab-wrapper\" name=\"stopLoss\">                                <div class='box-tab-value negative'                                    data-etoro-automation-id='execution-stop-loss-tab-title-value'>                                    {{isNoStopLoss() ? $root.t.dynamic('portfolioOpenPosition', 'noStopLossTabTitle') :                                    (model.stopLoss.dollar | currencyparser : 2)}}                                </div>                                <div class='box-tab-label'                                    data-etoro-automation-id='execution-stop-loss-tab-title-label'>{{_tabStopLoss_}}                                </div>                            </tabtitle>                            <tabtitle class-name=\"box-tab center-tab\" class=\"box-tab-wrapper\" name=\"leverage\">                                <div class='box-tab-value'                                    data-etoro-automation-id='execution-leverage-tab-title-value'>                                    X{{model.risk.amount}}                                </div>                                <div class='box-tab-label'                                    data-etoro-automation-id='execution-leverage-tab-title-label'>{{_tabRisk_}}                                </div>                            </tabtitle>                            <tabtitle data-disabled = \"model.amount.amount === 0 ? true : undefined\" class-name=\"box-tab\" class=\"box-tab-wrapper\" name=\"takeProfit\">                                <div class='box-tab-value positive'                                    data-etoro-automation-id='execution-take-profit-tab-title-value'>                                    {{isNoTakeProfit() ? $root.t.dynamic('portfolioOpenPosition',                                    'noTakeProfitTabTitle') : (model.takeProfit.dollar | currencyparser : 2)}}                                </div>                                <div class='box-tab-label'                                    data-etoro-automation-id='execution-take-profit-tab-title-label'>                                    {{_tabTakeProfit_}}                                </div>                            </tabtitle>                        </tabstitles>                        <tabscontent class=\"display-block tab-box-main\">                            <tab class=\"tab-box-execution-content ui-tab-pane\">                                <div ng-if=\"controller.enableStopLossEditing\">                                    <div ng-if=\"!model.stopLoss.inDollarMode && !model.stopLoss.isNoStopLossSet\"                                        data-ui-input-number-incrementer=\"\"                                        data-input-binding=\"model.stopLoss.amount\"                                        data-etoro-automation-id=\"execution-stop-loss-rate-input\"                                        data-formatter=\"rate\"                                        data-formatter-options=\"{ getInstrumentPrecisionByRate: getInstrumentPrecisionByRate }\"                                        data-on-change=\"stopLossRateChange\"                                        data-on-blur=\"stopLossBlur\"                                        data-on-defocus=\"stopLossBlur\"                                        data-on-focus=\"stopLossFocus\">                                        <div data-area=\"title\"                                            data-etoro-automation-id=\"execution-stop-loss-rate-editing-left-title\">                                            {{_setRate_}}                                        </div>                                        <div data-area=\"side\">                                            <a class=\"button-standard stepper-switch\"                                            ng-click=\"switchTradeMode(!model.stopLoss.inDollarMode, model.stopLoss)\"                                            data-etoro-automation-id=\"execution-stop-loss-rate-editing-switch-to-amount-button\">                                                <span class=\"switcher sprite\"></span>                                                {{_amountToggleButton_}}                                            </a>                                        </div>                                        <div data-area=\"bottom\" class=\"execution-sub-label\">                                            <div data-execution-messages=\"stopLoss\" data-model=\"model.errors.stopLoss\"                                                data-etoro-automation-id=\"execution-stop-loss-section-rate-editing-error-messages\">                                                <span data-etoro-automation-id=\"execution-stop-loss-rate-editing-info\">{{ model.stopLoss.message }}</span>                                            </div>                                        </div>                                    </div>                                    <div ng-if=\"model.stopLoss.inDollarMode && !model.stopLoss.isNoStopLossSet\"                                        data-ui-input-number-incrementer=\"\"                                        data-etoro-automation-id=\"execution-stop-loss-amount-input\"                                        data-input-binding=\"model.stopLoss.dollarView\"                                        data-formatter=\"currency\"                                        data-formatter-options=\"{precision: 2 }\"                                        data-on-change=\"stopLossMoneyChange\"                                        data-on-blur=\"stopLossBlur\"                                        data-on-defocus=\"stopLossBlur\"                                        data-on-focus=\"stopLossFocus\">                                        <div data-area=\"title\"                                            data-etoro-automation-id=\"execution-stop-loss-amount-editing-left-title\">                                            {{_setAmount_}}                                        </div>                                        <div data-area=\"side\">                                            <a class=\"button-standard stepper-switch\"                                            ng-if=\"model.marketMode !== model.marketModeOptions.isMarket\"                                            data-etoro-automation-id=\"execution-stop-loss-amount-editing-switch-to-rate-button\"                                            ng-click=\"switchTradeMode(!model.stopLoss.inDollarMode, model.stopLoss)\">                                                <span class=\"switcher sprite\"></span>                                                {{_rateToggleButton_}}                                            </a>                                        </div>                                        <div data-area=\"bottom\" class=\"execution-sub-label\">                                            <div data-execution-messages=\"stopLoss\" data-model=\"model.errors.stopLoss\"                                                data-etoro-automation-id=\"execution-stop-loss-section-amount-editing-error-messages\">                                                <span data-etoro-automation-id=\"execution-stop-loss-amount-editing-info\">{{ model.stopLoss.message }}</span>                                            </div>                                        </div>                                    </div>                                    <div class=\"execution-no-stop-loss\"                                        ng-if=\"controller.enableStopLossEditing && model.stopLoss.isNoStopLossSet\">                                        <span class=\"left-side\">                                            <div class=\"title-text\">                                                {{$root.t.dynamic('portfolioOpenPosition', model.stopLoss.inDollarMode ? 'setAmount' : 'setRate')}}                                            </div>                                        </span>                                        <div class=\"center-side\">                                            <div class=\"input-blank\">{{_noStopLossStepper_}}</div>                                        </div>                                    </div>                                    <div class=\"stop-loss-execution-cheackbox\"                                        ng-if=\"model.stopLoss.TSL.isFeatureEnabled || model.stopLoss.isLimitLessReachable\">                                        <div class=\"cheackbox-ph\" ng-if=\"model.stopLoss.TSL.isFeatureEnabled\">                                            <input class=\"cheackbox-input ng-pristine ng-untouched ng-valid\"                                                type=\"checkbox\" id=\"cbtsl\" ng-model=\"model.stopLoss.TSL.isEnabled\"                                                data-etoro-automation-id=\"execution-stop-loss-editing-tsl-check-box\">                                            <label class=\"cheackbox-label\" for=\"cbtsl\"                                                data-etoro-automation-id=\"execution-stop-loss-editing-tsl-label\">                                                {{_trailingStopLoss_}}                                            </label>                                            <div class=\"info-sigh sprite\"                                                data-etoro-automation-id=\"execution-stop-loss-editing-tsl-i\">                                                <div data-etoro-automation-id=\"execution-tsl-tool-tip\"                                                    class=\"tooltip-stoploss\"                                                    ng-bind-html=\":: $root.t.dynamic('portfolioOpenPosition', 'tslToolTip', this)\">                                                </div>                                            </div>                                        </div>                                        <a data-etoro-automation-id=\"execution-set-no-stop-loss-link\"                                        class=\"link right-side-action no-stop-loss\"                                        ng-if=\"model.stopLoss.isLimitLessReachable\" ng-click=\"setNoStopLoss()\">                                            {{$root.t.dynamic('portfolioOpenPosition', model.stopLoss.isNoStopLossSet ?                                            'cancelSetNoStopLoss' : 'setNoStopLoss')}}                                        </a>                                    </div>                                </div>                                <div data-etoro-automation-id=\"stop-loss-tab-disable-container\"                                    ng-if=\"!controller.enableStopLossEditing\" class=\"stopLossDisable\">                                    <span class=\"stopLossDisableLabel\"                                        ng-bind-html=\":: $root.t.dynamic('portfolioOpenPosition', 'editStopLossNotAllowed', this)\">                                    </span>                                </div>                            </tab>                            <tab class=\"tab-box-execution-content ui-tab-pane\">                                <div class=\"group-buttons x{{model.displayLeverages.length}}\">                                    <a class=\"risk-itemlevel link\" ng-click=\"setLeverage(leverage, $index)\"                                    ng-class=\"{active : $index == model.leverages.leverageIndex}\"                                    ng-repeat=\"leverage in model.displayLeverages\"                                    data-etoro-automation-id=\"execution-regular-risk-selection-{{:: leverage}}\">                                        x{{leverage}}                                    </a>                                </div>                                <div class=\"execution-sub-label\">                                    <div data-execution-messages=\"leverage\" data-model=\"model.errors.leverage\"                                        data-etoro-automation-id=\"execution-leverage-section-error-messages\">                                        <div ng-if=\"model.configLoaded && !model.displayLeveragesShowInfo\"                                            ng-switch=\"model.instrument.TypeID\">                                            <span ng-switch-when=\"5\"                                                data-etoro-automation-id=\"execution-regular-leverage-selection-label-instrument-type-5\">                                                <span ng-if=\"model.isRestricted\" class=\"link-in\"                                                    ng-click=\"restrictionClick()\"                                                    ng-bind-html=\":: $root.t.dynamic('portfolioOpenPosition', 'w8ben', this)\">                                                </span>                                                <div data-etoro-automation-id=\"execution-regular-leverage-selection-label-instrument-type-5-Line-2\" ng-if=\"model.isRestricted && model.isLowLeverage && isDiscountedRate()\">                                                    <i class=\"no-fees-icon\" ></i><span class=\"no-fees-message\">{{_ZeroCommission_}}</span></div>                                                <div data-etoro-automation-id=\"execution-regular-leverage-selection-label-instrument-type-5-Line-1\" ng-if=\"!model.isRestricted\">{{ _if(model.isLowLeverage, \"_nonLeveragedRealStockcurrencyMessage_\", \"_highLeverageCFDTradingMessageL1_\")_ }}</div>                                                <div data-etoro-automation-id=\"execution-regular-leverage-selection-label-instrument-type-5-Line-2\" ng-if=\"!model.isRestricted && !model.isLowLeverage\">{{_highLeverageCFDTradingMessageL2_}}</div>                                                <div data-etoro-automation-id=\"execution-regular-leverage-selection-label-instrument-type-5-Line-2\" ng-if=\"!model.isRestricted && model.isLowLeverage && isDiscountedRate()\">                                                    <i class=\"no-fees-icon\" ></i><span class=\"no-fees-message\">{{_ZeroCommission_}}</span></div>                                            </span>                                            <span ng-switch-when=\"6\"                                                data-etoro-automation-id=\"execution-regular-leverage-selection-label-instrument-type-6\">                                                <span ng-if=\"model.isRestricted\" class=\"link-in\" ng-click=\"restrictionClick()\"                                                    ng-bind-html=\":: $root.t.dynamic('portfolioOpenPosition', 'w8ben', this)\">                                                </span>                                                <div data-etoro-automation-id=\"execution-regular-leverage-selection-label-instrument-type-6-L1\" ng-if=\"!model.isRestricted\">{{ _if(model.isLowLeverage, \"_nonLeveragedRealETFMessage_\", \"_highLeverageCFDTradingMessageL1_\")_ }}</div>                                                <div data-etoro-automation-id=\"execution-regular-leverage-selection-label-instrument-type-6-L2\" ng-if=\"!model.isRestricted && !model.isLowLeverage\">{{_highLeverageCFDTradingMessageL2_}}</div>                                                <div data-etoro-automation-id=\"execution-regular-leverage-selection-label-instrument-type-6-L2\" ng-if=\"!model.isRestricted && model.isLowLeverage && isDiscountedRate()\">                                                    <i class=\"no-fees-icon\" ></i><span class=\"no-fees-message\">{{_ZeroCommission_}}</span>                                                </div>                                            </span>                                            <span ng-switch-when=\"10\"                                                data-etoro-automation-id=\"execution-regular-leverage-selection-label-instrument-type-10\">                                                <div data-etoro-automation-id=\"execution-regular-leverage-selection-label-instrument-type-10-L1\" >                                                    {{$root.t.dynamic('portfolioOpenPosition', controller.highLeverageTradingMessageL1Key)}}</div>                                                <div data-etoro-automation-id=\"execution-regular-leverage-selection-label-instrument-type-10-L2\" ng-if=\"!model.isLowLeverage || (!model.showCryptoInfo)\">{{_highLeverageCFDTradingMessageL2_}}</div>                                                <div data-etoro-automation-id=\"execution-regular-leverage-selection-label-instrument-type-10-L2\" ng-if=\"!!model.showCryptoInfo && model.isLowLeverage && (isDiscountedRate() || model.isUSUser)\">                                                    <i class=\"no-fees-icon\" ></i><span class=\"no-fees-message\" ng-class=\"{ 'pointer': model.isUSUser && !model.instrument.IsAmericanStock } \"ng-click=\"zeroCommissionClick()\">{{_ZeroCommission_}}</span>                                                </div>                                            </span>                                            <span ng-switch-default                                                data-etoro-automation-id=\"execution-regular-leverage-selection-label-default-instrument-type\">                                                <div data-etoro-automation-id=\"execution-regular-leverage-selection-label-default-instrument-type-L1\">{{ _if(!!model.isLowLeverage, \"_restInstrumentsRealLeverage_\", \"_restInstrumentsCFDLeverageL1_\")_ }}</div>                                                <div data-etoro-automation-id=\"execution-regular-leverage-selection-label-default-instrument-type-L2\" ng-if=\"!model.isLowLeverage\">{{_highLeverageCFDTradingMessageL2_}}</div>                                                <div data-etoro-automation-id=\"execution-regular-leverage-selection-label-default-instrument-type-L2\" ng-if=\"model.isLowLeverage && isDiscountedRate()\">                                                    <i class=\"no-fees-icon\" ></i><span class=\"no-fees-message\">{{_ZeroCommission_}}</span>                                                </div>                                            </span>                                        </div>                                        <div ng-if=\"model.displayLeveragesShowInfo\">                                            <span class=\"leverage-message\" data-etoro-automation-id=\"execution-regular-leverage-selection-esma-label\">                                                {{model.displayLeveragesMessage}}                                            </span>                                        </div>                                    </div>                                </div>                            </tab>                            <tab class=\"tab-box-execution-content ui-tab-pane\">                                <div ng-if=\"controller.enableTakeProfitEditing && !model.takeProfit.inDollarMode && !model.takeProfit.isNoTakeProfitSet\">                                    <div data-ui-input-number-incrementer=\"\"                                        data-input-binding=\"model.takeProfit.amount\"                                        data-formatter=\"rate\"                                        data-etoro-automation-id=\"execution-take-profit-rate-input\"                                        data-formatter-options=\"{ getInstrumentPrecisionByRate: getInstrumentPrecisionByRate }\"                                        data-on-change=\"takeProfitRateChange\"                                        data-on-blur=\"takeProfitBlur\"                                        data-on-defocus=\"takeProfitBlur\"                                        data-on-focus=\"takeProfitFocus\">                                        <div data-area=\"title\"                                            data-etoro-automation-id=\"execution-take-profit-rate-editing-left-title\">                                            {{_setRate_}}                                        </div>                                        <div data-area=\"side\">                                            <a class=\"button-standard stepper-switch\"                                            ng-click=\"switchTradeMode(!model.takeProfit.inDollarMode, model.takeProfit)\"                                            data-etoro-automation-id=\"execution-take-profit-rate-editing-switch-to-amount-button\">                                                <span class=\"switcher sprite\"></span>                                                {{_amountToggleButton_}}                                            </a>                                        </div>                                        <div data-area=\"bottom\" class=\"execution-sub-label\">                                            <div data-execution-messages=\"takeProfit\"                                                data-model=\"model.errors.takeProfit\"                                                data-etoro-automation-id=\"execution-take-profit-section-rate-editing-error-messages\">                                                <span data-etoro-automation-id=\"execution-take-profit-rate-editing-info\">                                                    {{ model.takeProfit.message }}                                                </span>                                            </div>                                        </div>                                    </div>                                </div>                                <div ng-if=\"controller.enableTakeProfitEditing && model.takeProfit.inDollarMode && !model.takeProfit.isNoTakeProfitSet\">                                    <div data-ui-input-number-incrementer=\"\"                                        data-input-binding=\"model.takeProfit.dollarView\"                                        data-etoro-automation-id=\"execution-take-profit-amount-input\"                                        data-formatter=\"currency\"                                        data-formatter-options=\"{precision: 2 }\"                                        data-on-change=\"takeProfitMoneyChange\"                                        data-on-blur=\"takeProfitBlur\"                                        data-on-defocus=\"takeProfitBlur\"                                        data-on-focus=\"takeProfitFocus\">                                        <div data-area=\"title\"                                            data-etoro-automation-id=\"execution-take-profit-amount-editing-left-title\">                                            {{_setAmount_}}                                        </div>                                        <div data-area=\"side\">                                            <a class=\"button-standard stepper-switch\"                                            ng-if=\"model.marketMode !== model.marketModeOptions.isMarket\"                                            data-etoro-automation-id=\"execution-take-profit-amount-editing-switch-to-rate-button\"                                            ng-click=\"switchTradeMode(!model.takeProfit.inDollarMode, model.takeProfit)\">                                                <span class=\"switcher sprite\"></span>                                                {{_rateToggleButton_}}                                            </a>                                        </div>                                        <div data-area=\"bottom\" class=\"execution-sub-label\">                                            <div data-execution-messages=\"takeProfit\"                                                data-model=\"model.errors.takeProfit\"                                                data-etoro-automation-id=\"execution-take-profit-section-amount-editing-error-messages\">                                                <span data-etoro-automation-id=\"execution-take-profit-amount-editing-info\">                                                    {{ model.takeProfit.message }}                                                </span>                                            </div>                                        </div>                                    </div>                                </div>                                <div class=\"execution-no-take-profit\"                                    ng-if=\"controller.enableTakeProfitEditing && model.takeProfit.isNoTakeProfitSet\">                                    <span class=\"left-side\">                                        <div class=\"title-text\">                                            {{$root.t.dynamic('portfolioOpenPosition', model.takeProfit.inDollarMode ? 'setAmount' : 'setRate')}}                                        </div>                                    </span>                                    <div class=\"center-side\">                                        <div class=\"input-blank\">{{_noTakeProfitStepper_}}</div>                                    </div>                                </div>                                <div class=\"take-profit-execution-cheackbox\"                                    ng-if=\"controller.enableTakeProfitEditing && model.takeProfit.isLimitLessReachable\">                                    <a data-etoro-automation-id=\"execution-set-no-take-profit-link\"                                    class=\"link right-side-action no-stop-loss\" ng-click=\"setNoTakeProfit()\">                                        {{$root.t.dynamic('portfolioOpenPosition', model.takeProfit.isNoTakeProfitSet ?                                        'cancelSetNoTakeProfit' : 'setNoTakeProfit')}}                                    </a>                                </div>                                <div data-etoro-automation-id=\"take-profit-tab-disable-container\"                                    ng-if=\"!controller.enableTakeProfitEditing\" class=\"takeProfitDisable\">                                    <span class=\"takeProfitDisableLabel\"                                        ng-bind-html=\":: $root.t.dynamic('portfolioOpenPosition', 'editTakeProfitNotAllowed', this)\">                                    </span>                                </div>                            </tab>                        </tabscontent>                    </tabs>                    </div>                    <div ng-if=\"controller.isNoneLeveragedOnly\" class=\"none-leverage-stop-loss\">                        <div ng-if=\"controller.enableStopLossEditing &&  !model.isBuy\"                            class=\"tab-box-wrapper\" ng-class=\"{'execution-stoploss' : model.stopLoss.isOpen}\">                            <div class=\"tab-box-body\">                                <a class=\"pointer box-execution-title copy start\">                                    <div class=\"text-label\"                                        ng-bind-html=\":: $root.t.dynamic('portfolioOpenPosition', 'noneLeverageTitleStopLoss')\"></div>                                    <span>                                    {{ model.stopLoss.dollarView | currencyparser:2 }}                                </span>                                    <span ng-click=\"toggleStopLossChange()\" ng-if=\"!model.stopLoss.isOpen\"                                        class=\"stop-point link\">                                    {{_editButton_}}                                </span>                                </a>                                <div class=\"box-execution-copy-info\" ng-class=\"{'open': model.stopLoss.isOpen}\">                                    <div class=\"box-execution-stoploss\">                                        <div ng-if=\"controller.enableStopLossEditing && !model.stopLoss.inDollarMode\">                                            <div data-ui-input-number-incrementer=\"\"                                                data-input-binding=\"model.stopLoss.amount\"                                                data-etoro-automation-id=\"execution-stop-loss-rate-input\"                                                data-formatter=\"rate\"                                                data-formatter-options=\"{ getInstrumentPrecisionByRate: getInstrumentPrecisionByRate }\"                                                data-on-change=\"stopLossRateChange\"                                                data-on-blur=\"stopLossBlur\"                                                data-on-defocus=\"stopLossBlur\"                                                data-on-focus=\"stopLossFocus\">                                                <div data-area=\"title\"                                                    data-etoro-automation-id=\"execution-stop-loss-rate-editing-left-title\">                                                    {{_setRate_}}                                                </div>                                                <div data-area=\"side\">                                                    <a class=\"button-standard stepper-switch\"                                                    ng-click=\"switchTradeMode(!model.stopLoss.inDollarMode, model.stopLoss)\"                                                    data-etoro-automation-id=\"execution-stop-loss-rate-editing-switch-to-amount-button\">                                                        <span class=\"switcher sprite\"></span>                                                        {{_amountToggleButton_}}                                                    </a>                                                </div>                                                <div data-area=\"bottom\" class=\"execution-sub-label\">                                                    <div data-execution-messages=\"stopLoss\"                                                        data-model=\"model.errors.stopLoss\"                                                        data-etoro-automation-id=\"execution-stop-loss-section-rate-editing-error-messages\">                                                        <span data-etoro-automation-id=\"execution-stop-loss-rate-editing-info\">{{ model.stopLoss.message }}</span>                                                    </div>                                                </div>                                            </div>                                        </div>                                        <div ng-if=\"controller.enableStopLossEditing && model.stopLoss.inDollarMode\">                                            <div data-ui-input-number-incrementer=\"\"                                                data-etoro-automation-id=\"execution-stop-loss-amount-input\"                                                data-input-binding=\"model.stopLoss.dollarView\"                                                data-formatter=\"currency\"                                                data-formatter-options=\"{precision: 2 }\"                                                data-on-change=\"stopLossMoneyChange\"                                                data-on-blur=\"stopLossBlur\"                                                data-on-defocus=\"stopLossBlur\"                                                data-on-focus=\"stopLossFocus\">                                                <div data-area=\"title\"                                                    data-etoro-automation-id=\"execution-stop-loss-amount-editing-left-title\">                                                    {{_setAmount_}}                                                </div>                                                <div data-area=\"side\">                                                    <a class=\"button-standard stepper-switch\"                                                    ng-if=\"model.marketMode !== model.marketModeOptions.isMarket\"                                                    data-etoro-automation-id=\"execution-stop-loss-amount-editing-switch-to-rate-button\"                                                    ng-click=\"switchTradeMode(!model.stopLoss.inDollarMode, model.stopLoss)\">                                                        <span class=\"switcher sprite\"></span>                                                        {{_rateToggleButton_}}                                                    </a>                                                </div>                                                <div data-area=\"bottom\" class=\"execution-sub-label\">                                                    <div data-execution-messages=\"stopLoss\"                                                        data-model=\"model.errors.stopLoss\"                                                        data-etoro-automation-id=\"execution-stop-loss-section-amount-editing-error-messages\">                                                        <span data-etoro-automation-id=\"execution-stop-loss-amount-editing-info\">{{ model.stopLoss.message }}</span>                                                    </div>                                                </div>                                            </div>                                        </div>                                        <div class=\"stop-loss-execution-cheackbox\"                                            ng-if=\"controller.enableStopLossEditing && model.stopLoss.TSL.isFeatureEnabled\">                                            <div class=\"cheackbox-ph\" ng-if=\"model.stopLoss.TSL.isFeatureEnabled\">                                                <input class=\"cheackbox-input ng-pristine ng-untouched ng-valid\"                                                    type=\"checkbox\" id=\"cbtsl2\" ng-model=\"model.stopLoss.TSL.isEnabled\"                                                    data-etoro-automation-id=\"execution-stop-loss-amount-editing-tsl-check-box\">                                                <label class=\"cheackbox-label\" for=\"cbtsl2\"                                                    data-etoro-automation-id=\"execution-stop-loss-amount-editing-tsl-label\">                                                    {{_trailingStopLoss_}}                                                </label>                                                <div class=\"info-sigh sprite\"                                                    data-etoro-automation-id=\"execution-stop-loss-amount-editing-tsl-i\">                                                    <div class=\"tooltip-stoploss\"                                                        ng-bind-html=\":: $root.t.dynamic('portfolioOpenPosition', 'tslToolTip', this)\"></div>                                                </div>                                            </div>                                        </div>                                        <div data-etoro-automation-id=\"stop-loss-tab-disable-container\"                                            ng-if=\"!controller.enableStopLossEditing\" class=\"stopLossDisable\">                                            <span class=\"stopLossDisableLabel\"                                                ng-bind-html=\":: $root.t.dynamic('portfolioOpenPosition', 'editStopLossNotAllowed', this)\">                                            </span>                                        </div>                                    </div>                                </div>                            </div>                        </div>                        <div data-etoro-automation-id=\"stop-loss-tab-disable-container\"                            ng-if=\"!model.isBuy && !controller.enableStopLossEditing\" class=\"stopLossDisable\">                            <span class=\"stopLossDisableLabel\"                                ng-bind-html=\":: $root.t.dynamic('portfolioOpenPosition', 'editStopLossNotAllowed', this)\">                            </span>                        </div>                        <div ng-if=\"(model.instrument.IsStock || model.instrument.IsETF) && model.isRestricted\" class=\"w8ben-text link-in\" ng-click=\"restrictionClick()\"                            ng-bind-html=\":: $root.t.dynamic('portfolioOpenPosition', 'w8ben', this)\"></div>                        <div                                class=\"cfd-real-indication\"                                ng-if=\"!model.instrument.isUsTrade\"                                ng-bind-html=\"$root.t.dynamic('portfolioOpenPosition', controller.isTRS ? 'TRSTradeActionsL1' : model.isLowLeverage ? 'RealTradeActions' : (model.isCMT ? 'CMTTradeActionsL1' : 'CFDOnlyTradeActionsL1'), this)\"                        ></div>                        <div                                class=\"cfd-real-indication second-line\"                                ng-if=\"!model.isLowLeverage\"                                ng-bind-html=\"$root.t.dynamic('portfolioOpenPosition', (controller.isTRS ? 'TRSTradeActionsL2' : 'CFDOnlyTradeActionsL2'), this)\"                        ></div>                        <div class=\"cfd-real-indication\" ng-class=\"{ 'second-line': !model.instrument.isUsTrade }\" ng-if=\"model.isLowLeverage && (isDiscountedRate() || model.isUSUser)\">                            <i class=\"no-fees-icon\" ng-class=\"{ 'clickable': model.isUSUser && !model.instrument.IsAmericanStock }\"></i>                            <span class=\"no-fees-message\" ng-class=\"{ 'pointer': model.isUSUser && !model.instrument.IsAmericanStock }\" ng-click=\"zeroCommissionClick()\">{{_ZeroCommission_}}</span>                        </div>                    </div>                    <div data-etoro-automation-id=\"execution-save-one-click-container\"                        class=\"cheackbox-ph box-execution-cheackbox-ph\"                        ng-if=\"model.isOneClickTradingEnabled && !model.isOneClickTrading && model.marketMode !== model.marketModeOptions.order && model.instrument.IsActive\">                        <input class=\"cheackbox-input\" type=\"checkbox\" id=\"cboneclick\"                            ng-model=\"model.oneClickTrading.isActive\"                            data-etoro-automation-id=\"execution-save-one-click-data-check-box\">                        <label class=\"cheackbox-label oct-label\" for=\"cboneclick\" data-etoro-automation-id=\"execution-save-one-click-data-label\">                            {{_oneClickTradingOperaions_}}                        </label>                    </div>                    <div class=\"execution-note\" ui-if-breakpoint=\"mobile\"                    ng-if=\"!model.closeMarketSimilarToOpen && !model.opentab &&  model.marketMode === model.marketModeOptions.isMarket && model.showInfo && model.oneClickTrading.showInfo\"                    data-etoro-automation-id=\"execution-market-close-title-tabs-init-state\">                    {{_marketModeOrderOpenMessage_}}                    </div>                    <div class=\"execution-note\"                    ng-if=\"!model.opentab && model.instrument.isContractExpiry && model.showInfo && model.oneClickTrading.showInfo\"                    ng-bind-html=\":: $root.t.dynamic('portfolioOpenPosition', 'expiryMessage', this)\">                    </div>                </div>                <div class=\"execution-confirm-us\" ng-if=\"model.isUsConfirmMode\">                    <span class=\"edit-btn link\" ui-if-breakpoint=\"!mobile\" ng-click=\"closeConfirm()\">                        {{_editButton_}}                    </span>                    <div ng-if=\"!(model.isConfirmForAll)\" class=\"w-sm-amount-info-open clear-after\" data-etoro-automation-id=\"open-position-info-container\">                        <div class=\"w-sm-amount-info-unit clear-after\">                            <div class=\"w-sm-amount-info-label\" data-etoro-automation-id=\"open-position-info-units-label\"> {{_estimatedShares_}} </div>                            <div class=\"w-sm-amount-info-value\" data-etoro-automation-id=\"open-position-info-units\">                                {{ model.confirmationData.units | tofixed: 2 }}                            </div>                        </div>                        <div class=\"execution-edit-info open-trade-confirm\">                            <div class=\"execution-left-side open-trade-confirm\">                                <span class=\"bold-info item-child\" data-etoro-automation-id=\"open-position-info-amount-label\"> {{_estimatedPrice_}} </span>                            </div>                            <div class=\"execution-right-side open-trade-confirm\">                                <span class=\"bold-info item-child\" data-etoro-automation-id=\"open-position-info-amount\">{{ model.confirmationData.amount | tofixed: 2  }}</span>                                <span class=\"item-child confirm-timestamp open-trade-confirm\">                                    <span data-etoro-automation-id=\"open-position-confirmation-timestamp\"> {{ model.confirmationData.timestamp | formatDate: 'HH:mm:ss' }} </span>                                </span>                            </div>                        </div>                        <div class=\"execution-edit-info open-trade-confirm total-fees\">                            <div class=\"execution-left-side open-trade-confirm\">                                <span class=\"bold-info item-child\" data-etoro-automation-id=\"open-position-confirm-info-amount-label\">{{_totalFees_}}</span>                                <div class=\"total-fees-tooltip-container\">                                    <span class=\"total-fees-tooltip-toggle info-sigh sprite\" data-etoro-automation-id=\"total-fees-tooltip\" ng-click=\"model.showFeesTooltip = !model.showFeesTooltip\"></span>                                    <div automation-id=\"no-fees-tool-tip-container-open-position-confirm\"                                        ng-if=\"model.showFeesTooltip\" click-outside=\"closeFeesTooltip()\"                                        class=\"execution-market-off-tool-tip fees-tool-tip display-block\">                                        <div class=\"tool-tip-container\">                                            <span class=\"no-fees-message\" ng-bind-html=\":: $root.t.dynamic('usFees', 'message', this)\"></span>                                            <span class=\"tool-tip-pick fees-pick\"></span>                                        </div>                                    </div>                                 </div>                            </div>                            <div class=\"execution-right-side open-trade-confirm\">                                <span class=\"bold-info item-child\" data-etoro-automation-id=\"open-position-confirm-info-amount\">                                    {{ 0 | currencyparser: 2 }}                                </span>                            </div>                        </div>                        <div class=\"w-sm-amount-info-unit total clear-after\">                            <div class=\"w-sm-amount-info-label\" data-etoro-automation-id=\"open-position-info-total-label\"> {{_totalCost_}} </div>                            <div class=\"w-sm-amount-info-value\" data-etoro-automation-id=\"open-position-info-total\">                                {{ model.confirmationData.amount | tofixedNoZero:2 | currencyparser:2 }}                            </div>                        </div>                    </div>                    <div ng-if=\"model.isConfirmForAll\" class=\"w-sm-amount-info-open clear-after confirm-all-info\" data-etoro-automation-id=\"open-position-info-container-all\">                        <div class=\"w-sm-amount-info-unit clear-after pad-10\">                            <div class=\"w-sm-amount-info-label\" >                                {{_if(model.confirmationData.isAmountMode, _amountToggleButton_, _estAmount_)_}} </div>                            <div class=\"w-sm-amount-info-value confirm-all\">                                {{ model.amount.amount | currencyparser: 2}}                            </div>                        </div>                        <div class=\"w-sm-amount-info-unit clear-after pad-10\">                            <div class=\"w-sm-amount-info-label\">                          {{_if(!model.confirmationData.isAmountMode, _unitToggleButton_, _estUnit_)_}}                            </div>                            <div class=\"w-sm-amount-info-value confirm-all\">                              {{ model.amount.units | tofixed: 2  }}                            </div>                        </div>                        <div class=\"w-sm-amount-info-unit clear-after pad-10\" ng-if=\"model.marketMode === model.marketModeOptions.order && model.viewRate\">                            <div class=\"w-sm-amount-info-label\">                                {{_setRate_}}                            </div>                            <div class=\"w-sm-amount-info-value confirm-all\">                                {{ model.viewRate | tofixed: 2  }}                            </div>                        </div>                        <div class=\"w-sm-amount-info-unit clear-after pad-10\" ng-if=\"!controller.isNoneLeveragedOnly\">                            <div class=\"w-sm-amount-info-label\" >                                {{_tabStopLoss_}} </div>                            <div class=\"w-sm-amount-info-value confirm-all\" >                                {{isNoStopLoss() ? $root.t.dynamic('portfolioOpenPosition', 'noStopLossTabTitle') :                                    (model.stopLoss.dollar | currencyparser : 2)}}                            </div>                        </div>                        <div class=\"w-sm-amount-info-unit clear-after pad-10\" ng-if=\"model.confirmationData.leverages && !controller.isNoneLeveragedOnly\">                            <div class=\"w-sm-amount-info-label\">                                {{_tabRisk_}}                            </div>                            <div class=\"w-sm-amount-info-value confirm-all\">                                X{{ model.confirmationData.leverages}}                            </div>                        </div>                        <div class=\"w-sm-amount-info-unit clear-after pad-10\" ng-if=\"model.confirmationData.takeProfit\">                            <div class=\"w-sm-amount-info-label\">                                {{_tabTakeProfit_}}                            </div>                            <div class=\"w-sm-amount-info-value confirm-all\">                                {{ model.takeProfit.dollar | currencyparser : 2  }}                            </div>                        </div>                        <div class=\"w-sm-amount-info-unit total clear-after\">                            <div class=\"w-sm-amount-info-label confirm-all\" data-etoro-automation-id=\"open-position-info-total-label\"> {{_totalCost_}} </div>                            <div class=\"w-sm-amount-info-value\" data-etoro-automation-id=\"open-position-info-total\">                                {{model.amount.amount | tofixedNoZero:2 | currencyparser:2 }}                            </div>                        </div>                    </div>                </div>                <!--<div class=\"error execution_bsl_account_liquidation_error\" ng-if=\"showAccountLiquidationError\" ng-bind-html=\":: $root.t.dynamic('portfolioOpenPosition', 'AccountLiquidationError', this)\"></div>-->                <div class=\"execution-button-wrapper mobile-ui\">                    <div class=\"execution-action-button\" ng-class=\"{'us-execution': model.instrument.isUsTrade}\">                        <div  data-etoro-automation-id='execution-cash-available-wrap' class=\"top-button-text\" ng-if=\"(model.closeMarketText || model.availableCash) && !model.isUsConfirmMode\">                            <span ng-if=\"model.closeMarketText\" class=\"market-close\"> {{$root.t.dynamic('portfolioOpenPosition', 'marketClosedIndication')}}</span>                            <span data-etoro-automation-id='execution-cash-available-title' ng-if= \"model.availableCash && !model.closeMarketText\"> {{$root.t.dynamic('portfolioOpenPosition', 'availableCash')}}</span>                            <span data-etoro-automation-id='execution-cash-available-amount'  ng-if=\"model.availableCash && !model.closeMarketText\">{{model.availableCash | currencyparser : 2}}</span>                        </div>                        <button ng-if=\"!model.amount.isNeedToDeposit && model.marketMode === model.marketModeOptions.active\"                                data-etoro-automation-id='execution-open-position-button'                                ng-class=\"{ 'loading': model.isLoading }\" ng-disabled=\"model.isTradeActionDisabled\"                                ng-click=\"openPosition()\" class=\"execution-button button-standard button-blue pointer\">                            {{$root.t.dynamic('portfolioOpenPosition', controller.openTradeButtonKey)}}                        </button>                        <button ng-if=\"!model.amount.isNeedToDeposit && model.marketMode === model.marketModeOptions.order\"                                data-etoro-automation-id='execution-open-order-button'                                ng-class=\"{ 'loading': model.isLoading }\" ng-disabled=\"model.isTradeActionDisabled\"                                ng-click=\"openOrder()\" class=\"execution-button button-standard button-blue pointer\">                            {{$root.t.dynamic('portfolioOpenPosition', controller.setOrderButtonKey)}}                        </button>                        <button ng-if=\"!model.amount.isNeedToDeposit && model.marketMode === model.marketModeOptions.isMarket\"                                data-etoro-automation-id='execution-open-entry-order-button'                                ng-class=\"{ 'loading': model.isLoading }\" ng-disabled=\"model.isTradeActionDisabled\"                                ng-click=\"openMarketOrder()\"                                class=\"execution-button button-standard button-blue pointer\">                            {{$root.t.dynamic('portfolioOpenPosition', controller.setOrderButtonKey)}}                        </button>                        <button data-etoro-automation-id='execution-deposit-button'                                ng-if=\"model.amount.isNeedToDeposit && !model.isExpressCheckout\"                                ng-disabled=\"model.isRestricted\"                                ng-class=\"{ 'loading': model.isLoading }\"                                ng-click=\"depositFunds()\"                                class=\"execution-button button-standard button-blue pointer\"                                data-analytics-on=\"click\"                                data-analytics-event=\"Open Trade - Deposit Now\"                                data-analytics-instrument-name=\"{{:: model.instrument.Name}}\"                                data-analytics-amount=\"{{model.amount.amount}}\"                                data-analytics-funds-to-add=\"{{model.amount.amountToAdd | math:'ceil'}}\"                                data-analytics-funds-to-add-percentage=\"{{model.amount.amountToAddPercentage | math:'round'}}\"                                data-analytics-instrument-type=\"{{:: model.instrument.instrumentType.InstrumentTypeDescription}}\">                            {{controller.depositButtonLabel}}                        </button>                        <button ng-if=\"model.amount.isNeedToDeposit && model.marketMode === model.marketModeOptions.active && model.isExpressCheckout\"                                data-etoro-automation-id='execution-express-check-out-deposit-button-trade'                                ng-class=\"{ 'loading': model.isLoading }\" ng-disabled=\"model.isTradeActionDisabled\"                                ng-click=\"expressCheckout()\"                                class=\"execution-button button-standard button-blue pointer\">{{_openPositionButton_}}                        </button>                        <button ng-if=\"model.amount.isNeedToDeposit && model.marketMode === model.marketModeOptions.order && model.isExpressCheckout\"                                data-etoro-automation-id='execution-express-check-out-deposit-button-order'                                ng-class=\"{ 'loading': model.isLoading }\" ng-disabled=\"model.isTradeActionDisabled\"                                ng-click=\"expressCheckout()\"                                class=\"execution-button button-standard button-blue pointer\">{{_setOrderButton_}}                        </button>                        <button ng-if=\"model.amount.isNeedToDeposit && model.marketMode === model.marketModeOptions.isMarket && model.isExpressCheckout\"                                data-etoro-automation-id='execution-express-check-out-deposit-button-entry-order'                                ng-class=\"{ 'loading': model.isLoading }\" ng-disabled=\"model.isTradeActionDisabled\"                                ng-click=\"expressCheckout()\"                                class=\"execution-button button-standard button-blue pointer\">{{_setMarketOrderButton_}}                        </button>                    </div>                </div>                <div class=\"execution-footer mobile-ui\" ng-if=\"!model.loading && model.configLoaded && !model.instrument.isUsTrade\">                    <div data-etoro-automation-id=\"execution-bottom-fees-section\"                         class=\"footer-spread-info\"   ng-class=\"{'confirm-for-all':model.confirmationData && model.confirmationData.isConfirmForAll}\"                         ng-if=\"(!model.isCFD) ||                        (model.instrument.TypeID === 5 && (!model.isLowLeverage)) ||                        (model.instrument.TypeID === 6 && (!model.isLowLeverage)) ||                        (model.instrument.TypeID === 10 && (!model.showCryptoInfo || !model.isLowLeverage)) ||                         (model.confirmationData && model.confirmationData.isConfirmForAll && !model.isLowLeverage)\">                        <b data-etoro-automation-id=\"execution-is-refund-title\">{{_if(model.leverageFees.isRefund,                            'refund', 'rollover')_}}</b>:                        <span data-etoro-automation-id=\"execution-is-refund-daily-label\">{{_daily_}} : </span>                        <span data-etoro-automation-id=\"execution-is-refund-daily-value\">{{ model.leverageFees.overNight | currencyparser:2 }}</span>                        |                        <span data-etoro-automation-id=\"execution-is-refund-week-label\">{{_weekend_}}: </span>                        <span data-etoro-automation-id=\"execution-is-refund-week-value\">{{ model.leverageFees.weekend | currencyparser:2 }}</span>                    </div>                    <div data-etoro-automation-id=\"execution-bottom-stock-message\" class=\"footer-spread-info\"                         ng-if=\"model.instrument.TypeID === 5 && model.isLowLeverage\"                         ng-bind-html=\"$root.t.dynamic('portfolioOpenPosition', 'buyRealStockcurrencyMessage' + controller.regulatingKeyCode , this)\"></div>                    <div data-etoro-automation-id=\"execution-bottom-etf-message\" class=\"footer-spread-info\"                         ng-if=\"model.instrument.TypeID === 6 && model.isLowLeverage\"                         ng-bind-html=\"$root.t.dynamic('portfolioOpenPosition', 'buyingRealETFsMessage' + controller.regulatingKeyCode , this)\"                         data-etoro-automation-id='execution-buying-real-ETFs-message'></div>                    <div data-etoro-automation-id=\"execution-bottom-crypto-message\" class=\"footer-spread-info\"                         ng-if=\"!!model.showCryptoInfo && model.instrument.TypeID === 10 && model.isLowLeverage\"                         ng-bind-html=\"$root.t.dynamic('portfolioOpenPosition', 'buyingRealCryptocurrencyMessage' + controller.regulatingKeyCode , this)\"></div>                </div>                <div class=\"execution-footer us-disclaimer-container footer-spread-info mobile-ui\" ng-if=\"model.instrument.isUsTrade\">                    <span class=\"us-disclaimer\">                        {{ _if(model.isUsConfirmMode,'_usConfirmDisclaimer_','_usDisclaimer_')_ }}                    </span>                </div>            </div>        </div>    </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[66][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/updatePosition/updatePosition.view.html","text":"<div data-etoro-automation-id=\"update-position-dialog\"     class=\"execution edit update-position\" ng-controller=\"apps.trader.portfolio.updatePosition.updatePositionCtrl as controller\"     data-instrument-id=\"{{:: model.instrument.InstrumentID}}\" data-instrument-rate=\"::model.instrument\"     data-etoro-locale-ns=\"portfolioUpdatePosition\">    <div data-etoro-automation-id=\"update-position-header-container\"         class=\"execution-head\">        <div data-etoro-automation-id=\"update-position-header-title\" ng-if=\"model.instrument\"             class=\"execution-head-title\">{{ _if(model.instrument.isUsTrade,'_tradeInfoTitle_','_editTradeTitle_')_ }}</div>        <div data-etoro-automation-id=\"update-position-header-close-button\"             class=\"head-buttons-ph\">            <a ng-click=\"closePopup()\" class=\"head-button sprite close pointer\" automation-id=\"close-dialog-btn\"></a>        </div>    </div>    <div ng-if=\"model.loading\" class=\"w-execution-main\">        <span class=\"execution-loading\"></span>    </div>    <div class=\"execution-main\" ng-if=\"!model.loading\">        <div class=\"execution-wrap\">            <div data-etoro-automation-id=\"edit-position-top-info-container\"                 class=\"execution-main-head\">                <div class=\"execution-avatar-ph\">                    <img data-etoro-automation-id=\"edit-position-top-info-instrument-image\"                         class=\"avatar\" ng-src=\"{{:: model.instrument.Avatars['default']}}\"                         alt=\"{{:: model.instrument.name}}\"/>                </div>                <div class=\"user-info stock-sell-buy edit-trade\">                    <span data-etoro-automation-id=\"edit-position-top-info-action-label\"                          class=\"execution-head-title-top\">                        {{_if(model.isBuy, 'buyTitle', 'sellTitle')_ }}                    </span>                    <span data-etoro-automation-id=\"edit-position-top-info-instrument-symbol\"                          class=\"execution-main-head-title-name\">                        {{:: model.instrument.Name}}                    </span>                    <div class=\"execution-main-head-title-price\">                        <span data-etoro-automation-id=\"edit-position-top-info-instrument-current-rate\"                              class=\"execution-main-head-price-value\">                            {{ model.position.CurrentRate | formatRate:  model.instrument }}                        </span>                        <span data-etoro-automation-id=\"edit-position-top-info-rate-container\"                              ng-if=\"!model.position.IsBuy\"                              ng-class=\"{'negative':  model.instrument.getTheRateObject(model.position.IsDiscounted).Change.askNumber('Daily') < 0, 'positive':  model.instrument.getTheRateObject(model.position.IsDiscounted).Change.askNumber('Daily') > 0}\">                            <span data-etoro-automation-id=\"edit-position-top-info-instrument-rate-ask-change-daily\">                                {{ model.instrument.getTheRateObject(model.position.IsDiscounted).Change.askNumber('Daily') | tofixed:  model.instrument.Precision}}                            </span>                            <span data-etoro-automation-id=\"edit-position-top-info-instrument-rate-ask-change-daily-percentage\">                                ({{  model.instrument.getTheRateObject(model.position.IsDiscounted).Change.askPercent('Daily') |  percentageparser  }})                            </span>                        </span>                        <span data-etoro-automation-id=\"edit-position-top-info-rate-container\"                              ng-if=\"model.position.IsBuy\"                              ng-class=\"{'negative':  model.instrument.getTheRateObject(model.position.IsDiscounted).Change.bidNumber('Daily') < 0, 'positive':  model.instrument.getTheRateObject(model.position.IsDiscounted).Change.bidNumber('Daily') > 0}\">                            <span data-etoro-automation-id=\"edit-position-top-info-instrument-rate-bid-change-daily\">                                {{ model.instrument.getTheRateObject(model.position.IsDiscounted).Change.bidNumber('Daily') | tofixed:  model.instrument.Precision}}                            </span>                            <span data-etoro-automation-id=\"edit-position-top-info-instrument-rate-bid-change-daily-percentage\">                                ({{  model.instrument.getTheRateObject(model.position.IsDiscounted).Change.bidPercent('Daily') | percentageparser }})                            </span>                        </span>                    </div>                    <div data-etoro-automation-id=\"edit-position-top-info-disclaimer-container\"                         class=\"disclaimer\">                        <span data-etoro-automation-id=\"edit-position-top-info-disclaimer-price-by\">                            {{:: $root.t.dynamic('market' , 'disclaimer.' + model.instrument.ProviderPriceSource)}}                        </span>                        <span data-etoro-automation-id=\"edit-position-top-info-disclaimer-currency\">                            {{:: $root.t.dynamic('market' , 'disclaimer.Currency' + model.instrument.SellCurrencyID) + ' |'}}                        </span>                         <i data-etoro-automation-id=\"edit-position-top-info-disclaimer-market-status-icon\"                            class=\"clock-icon\" ng-class=\"{'clock-open': model.instrument.IsActive, 'clock-close': !model.instrument.IsActive}\">                         </i>                        <span data-etoro-automation-id=\"edit-position-top-info-disclaimer-market-status-label\" ng-bind-html=\"$root.t.dynamic('market', 'disclaimer.marketStateV2', model.instrument)\">                        </span>                    </div>                </div>            </div>            <div data-etoro-automation-id=\"edit-position-middle-info-container\"                 class=\"execution-main-update-info update-position\">                <div data-etoro-automation-id=\"edit-position-middle-info-first-row\"                     class=\"execution-edit-info update-position\">                    <div class=\"execution-left-side\">                        <span data-etoro-automation-id=\"edit-position-middle-info-invested-label\"                              class=\"bold-info item-child\">{{_investedLabel_}}</span>                        <div class=\"execution-main-head-redeem-conatiner\">                            <div class=\"redeem-warning\">                                <div ng-if=\"redeemStatus.isEnabled\">                                    <a class=\"link item-child redeem\"                                       ng-if=\"model.isRealAccount && model.position.isRedeemEnabled && redeemStatus.isEnabled\"                                       ng-click=\"redeemPosition()\"                                       data-etoro-automation-id=\"edit-position-transfer-to-wallet\"                                       ng-bind-html=\"$root.t.dynamic('portfolioUpdatePosition',((model.regulationId===4)||(model.regulationId===10)) ? 'redeem.typeB' : 'redeem.typeA', this)\">                                    </a>                                    <a class=\"link item-child redeem\"                                       ng-if=\"model.isRealAccount && model.position.isRedeemPending\"                                       ng-click=\"cancelRedeem()\" data-etoro-automation-id=\"edit-position-cancel-redeem\"                                       ng-bind-html=\"$root.t.dynamic('portfolioUpdatePosition',((model.regulationId===4)||(model.regulationId===10)) ? 'cancelRedeem.typeB' : 'cancelRedeem.typeA' , this)\">                                    </a>                                    <span class=\"info-sigh sprite redeem-icon\"                                          ng-if=\"model.isRealAccount && model.position.isRedeemEnabled && redeemStatus.isEnabled && ((model.regulationId===4)||(model.regulationId===10))\"                                          data-etoro-automation-id=\"edit-position-middle-info-tool-tip-icon-not-error\">                                        <div class=\"redeem-error-tool-tip\"                                             data-etoro-automation-id=\"edit-position-middle-info-tool-tip-text-not-error\"                                             ng-bind-html=\"$root.t.dynamic('portfolioUpdatePosition','redeemCfdTooltip.explanation', this)\">                                        </div>                                    </span>                                </div>                                <div ng-if=\"model.isRealAccount && (model.position.isRedeemEnabled || model.position.isCMT) && !redeemStatus.isEnabled\">                                    <span class=\"redeem-warning-info\"                                          data-etoro-automation-id=\"edit-position-middle-info-message\"                                          ng-bind-html=\"$root.t.dynamic('portfolioUpdatePosition',((model.regulationId===4)||(model.regulationId===10)) ? 'redeemNotAvilable.typeB' : 'redeemNotAvilable.typeA', this)\">                                    </span>                                    <span class=\"info-sigh sprite redeem-icon\"                                          data-etoro-automation-id=\"edit-position-middle-info-tool-tip-icon\">                                        <div class=\"redeem-error-tool-tip\"                                             ng-click=\"goToPhoneVerification($event)\"                                             data-etoro-automation-id=\"edit-position-middle-info-tool-tip-text\"                                             ng-bind-html=\"$root.t.dynamic('portfolioUpdatePosition',((model.regulationId===4)||(model.regulationId===10)) ? 'redeemError.typeB.'+ redeemStatus.errorReason : 'redeemError.typeA.'+ redeemStatus.errorReason , this)\">                                        </div>                                    </span>                                </div>                            </div>                        </div>                    </div>                    <div class=\"execution-right-side\">                        <span data-etoro-automation-id=\"edit-position-middle-info-invested-value\"                              class=\"bold-info item-child\">{{ model.position.Amount | tofixedNoZero: 2 | currencyparser:2}}</span>                        <span data-etoro-automation-id=\"edit-position-middle-info-units-group\" class=\"item-child\">                            <span data-etoro-automation-id=\"edit-position-middle-info-units-value\">{{ model.position.Units | unitsOpenClose: model.instrument : 6 : true }}</span>                            <span data-etoro-automation-id=\"edit-position-middle-info-units-label\">{{_unitsLabel_}}</span>                        </span>                    </div>                </div>                <div class=\"execution-redeem-errortooltip\" ng-if=\"model.isRealAccount && model.position.isRedeemEnabled && redeemStatus.isEnabled && showValidationRedeemError\">                    <div ng-bind-html=\":: $root.t.html('portfolioUpdatePosition',((model.regulationId===4)||(model.regulationId===10)) ? 'redeemWireError.typeB' : 'redeemWireError.typeA' , this )\"></div>                    <a href=\"#\" ng-click=\"closeTooltipError()\" class=\"sprite execution-redeem-errortooltip-close\"></a>                </div>                <div data-etoro-automation-id=\"edit-position-middle-info-second-row\" class=\"execution-edit-info update-position\">                    <div class=\"execution-left-side\">                        <span data-etoro-automation-id=\"edit-position-middle-info-open-label\" class=\"bold-info item-child\">{{ _if(model.instrument.isUsTrade,'_buyingPrice','_openLabel_')_ }}</span>                    </div>                    <div class=\"execution-right-side\">                        <span data-etoro-automation-id=\"edit-position-middle-info-open-rate-value\" class=\"bold-info item-child\">{{:: model.position.OpenRate | unitsOpenClose: model.instrument}}</span>                        <span data-etoro-automation-id=\"edit-position-middle-info-open-date-time-value\" class=\"item-child\">{{:: model.initDate | formatDate: 'HH:mm' }}</span>                    </div>                </div>                <div data-etoro-automation-id=\"edit-position-middle-info-thrid-row\" class=\"execution-edit-info update-position\">                    <div class=\"execution-left-side\">                        <span data-etoro-automation-id=\"edit-position-middle-info-profit-label\" class=\"item-child bold-info\">{{_plLabel_}}</span>                    </div>                    <div class=\"execution-right-side\">                        <span data-etoro-automation-id=\"edit-position-middle-info-profit-value\" class=\"item-child bold-info\"                          ng-class=\"{negative: model.position.Gain < 0, positive: model.position.Gain > 0}\">{{model.position.Profit| currencyparser:2}}</span>                        <span data-etoro-automation-id=\"edit-position-middle-info-gain-value\" class=\"item-child\"                              ng-class=\"{negative: model.position.Gain < 0, positive: model.position.Gain > 0}\">{{model.position.Gain | percentageparser}}</span>                    </div>                </div>            </div>            <div data-etoro-automation-id=\"edit-position-tabs-container\"                 ng-if=\"model.instrument.AllowClosePosition && !model.instrument.isUsTrade\"                 class=\"tab-box-wrapper\">                <tabs data-selected-index=\"-1\" data-name=\"OpenPositionTabs\"                      nav-class-exp=\"::{ 'tab-box execution-start' : true }\">                    <tabsnotselected>                        <div class=\"tab-box-execution-content start active\" ng-show=\"model.showInfo\">                            <div data-etoro-automation-id=\"edit-position-leverage-default-text\"                                 class=\"execution-start-info\">                                {{_tradeActions_}}                            </div>                        </div>                    </tabsnotselected>                    <tabstitles data-etoro-automation-id= \"edit-position-tabs-titles-conatiner\"                                class=\"tab-box-head clear-after display-block\">                        <tabtitle data-etoro-automation-id= \"edit-position-tab-title-stop-loss-container\"                                  class-name=\"box-tab\"                                  ng-class = \"{'box-tab-wrapper' : !controller.isNoneLeveragedOnly, 'box-tab-wrapper-half' : controller.isNoneLeveragedOnly}\">                            <div data-etoro-automation-id=\"edit-position-tab-title-stop-loss-amount-value\"                                 class='box-tab-value'                                 ng-class='{negative : model.stopLoss.dollar < 0, positive: model.stopLoss.dollar > 0}'>                                {{isEndlessStopLoss() ? $root.t.dynamic('portfolioOpenPosition', 'noStopLossTabTitle') : (model.stopLoss.dollar | currencyparser : 2)}}                            </div>                            <div data-etoro-automation-id=\"edit-position-tab-title-stop-loss-label\"                                 class='box-tab-label'>                                {{_tabStopLoss_}}                            </div>                        </tabtitle>                        <tabtitle data-etoro-automation-id = \"edit-position-tab-title-leverage-container\"                                  ng-hide = \"controller.isNoneLeveragedOnly\"                                  class-name=\"box-tab center-tab\" class=\"box-tab-wrapper\" data-disabled=\"true\">                            <div data-etoro-automation-id=\"edit-position-tab-title-leverage-value\"                                 class='box-tab-value'>                                X{{model.position.Leverage}}                            </div>                            <div data-etoro-automation-id=\"edit-position-tab-title-leverage-label\"                                 class='box-tab-label'>                                {{_tabRisk_}}                            </div>                        </tabtitle>                        <tabtitle data-etoro-automation-id = \"edit-position-tab-title-take-profit-container\"                                  class-name=\"box-tab\"                                  ng-class = \"{'box-tab-wrapper' : !controller.isNoneLeveragedOnly, 'box-tab-wrapper-half' : controller.isNoneLeveragedOnly}\">                            <div data-etoro-automation-id=\"edit-position-tab-title-take-profit-value\"                                 class='box-tab-value'                                 ng-class='{negative : model.takeProfit.dollar < 0, positive: model.takeProfit.dollar > 0}'>                                {{isEndlessTakeProfit() ? $root.t.dynamic('portfolioOpenPosition', 'noTakeProfitTabTitle') : (model.takeProfit.dollar | currencyparser : 2)}}                            </div>                            <div data-etoro-automation-id=\"edit-position-tab-title-take-profit-label\" class='box-tab-label'>{{_tabTakeProfit_}}</div>                        </tabtitle>                    </tabstitles>                    <tabscontent class=\"display-block tab-box-main\">                        <tab class=\"tab-box-execution-content ui-tab-pane\">                            <div data-etoro-automation-id=\"edit-position-stop-loss-rate-input-section\"                                 data-ui-input-number-incrementer=\"\"                                 ng-if=\"!model.stopLoss.inDollarMode && controller.enableStopLossEditing && !model.stopLoss.isNoStopLossSet\"                                 data-input-binding=\"model.stopLoss.amount\"                                 data-formatter=\"rate\"                                 data-formatter-options=\"{ getInstrumentPrecisionByRate: getInstrumentPrecisionByRate }\"                                 data-on-change=\"stopLossRateChange\"                                 data-on-blur=\"stopLossBlur\"                                 data-on-focus=\"stopLossFocus\">                                <div data-etoro-automation-id=\"edit-position-stop-loss-rate-left-title\"                                     data-area=\"title\">                                    {{_setRate_}}                                </div>                                <div data-area=\"side\">                                    <a data-etoro-automation-id=\"edit-position-stop-loss-rate-right-switch-button\"                                       class=\"button-standard stepper-switch\"                                       ng-click=\"switchTradeMode(!model.stopLoss.inDollarMode, model.stopLoss)\">                                        <span class=\"switcher sprite\"></span>                                        <span data-etoro-automation-id=\"edit-position-stop-loss-rate-right-switch-button-label\">                                            {{_amountToggleButton_}}                                        </span>                                    </a>                                </div>                                <div data-area=\"bottom\" class=\"execution-sub-label\">                                    <div data-etoro-automation-id=\"edit-position-stop-loss-rate-edit-error-messages\"                                         data-execution-messages=\"stopLoss\" data-model=\"model.errors.stopLoss\">                                        <span data-etoro-automation-id=\"edit-position-stop-loss-rate-bottom-message-money-to-give\"                                              ng-if=\"model.amountToGiveOrTake < 0\">                                            {{_dynamic('AmountToGiveBack')_}}                                        </span>                                        <span data-etoro-automation-id=\"edit-position-stop-loss-rate-bottom-message-money-to-take\"                                              ng-if=\"model.amountToGiveOrTake > 0\">                                            {{_dynamic('AmountToTake')_}}                                        </span>                                        <span data-etoro-automation-id=\"edit-position-stop-loss-rate-bottom-message-regular\"                                              ng-if=\"!model.amountToGiveOrTake\">                                            {{ model.stopLoss.message }}                                        </span>                                    </div>                                </div>                            </div>                            <div data-etoro-automation-id=\"edit-position-stop-loss-amount-input-section\"                                 data-ui-input-number-incrementer=\"\"                                 ng-if=\"model.stopLoss.inDollarMode && controller.enableStopLossEditing && !model.stopLoss.isNoStopLossSet\"                                 data-input-binding=\"model.stopLoss.dollar\"                                 data-formatter=\"currency\"                                 data-formatter-options=\"{precision: 2 }\"                                 data-on-change=\"stopLossMoneyChange\"                                 data-on-blur=\"stopLossBlur\"                                 data-on-focus=\"stopLossFocus\">                                <div data-etoro-automation-id=\"edit-position-stop-loss-amount-left-title\"                                     data-area=\"title\">                                    {{_setAmount_}}                                </div>                                <div data-area=\"side\">                                    <a data-etoro-automation-id=\"edit-position-stop-loss-amount-right-switch-button\"                                       class=\"button-standard stepper-switch\"                                       ng-if=\"model.marketMode !== model.marketModeOptions.isMarket\"                                       ng-click=\"switchTradeMode(!model.stopLoss.inDollarMode, model.stopLoss)\">                                        <span class=\"switcher sprite\"></span>                                        <span data-etoro-automation-id=\"edit-position-stop-loss-amount-right-switch-button-label\">                                            {{_rateToggleButton_}}                                        </span>                                    </a>                                </div>                                <div data-area=\"bottom\" class=\"execution-sub-label\">                                    <div data-etoro-automation-id=\"edit-position-stop-loss-amount-edit-error-messages\"                                         data-execution-messages=\"stopLoss\" data-model=\"model.errors.stopLoss\">                                        <span data-etoro-automation-id=\"edit-position-stop-loss-amount-bottom-message-money-to-give\"                                               ng-if=\"model.amountToGiveOrTake < 0\">{{_dynamic('AmountToGiveBack')_}}                                        </span>                                        <span data-etoro-automation-id=\"edit-position-stop-loss-amount-bottom-message-money-to-take\"                                              ng-if=\"model.amountToGiveOrTake > 0\">{{_dynamic('AmountToTake')_}}                                        </span>                                        <span data-etoro-automation-id=\"edit-position-stop-loss-amount-bottom-message-regular\"                                              ng-if=\"!model.amountToGiveOrTake\">{{ model.stopLoss.message }}                                        </span>                                    </div>                                </div>                            </div>                            <div class=\"execution-no-stop-loss\" ng-class=\"{'hide-padding-bottom': model.amountToGiveOrTake !== 0}\"                                 ng-if=\"controller.enableStopLossEditing && model.stopLoss.isNoStopLossSet\">                                <span class=\"left-side\">                                    <div class=\"title-text\">                                        {{$root.t.dynamic('portfolioOpenPosition', model.stopLoss.inDollarMode ? 'setAmount' : 'setRate')}}                                    </div>                                </span>                                <div class=\"center-side\">                                    <div class=\"input-blank\">                                        {{:: $root.t.dynamic('portfolioOpenPosition', 'noStopLossStepper')}}                                    </div>                                </div>                                <div class=\"execution-sub-label\">                                    <span data-etoro-automation-id=\"edit-position-stop-loss-rate-bottom-message-money-to-give\"                                          ng-if=\"model.amountToGiveOrTake < 0\">                                    {{_dynamic('AmountToGiveBack')_}}                                    </span>                                    <span data-etoro-automation-id=\"edit-position-stop-loss-rate-bottom-message-money-to-take\"                                          ng-if=\"model.amountToGiveOrTake > 0\">                                        {{_dynamic('AmountToTake')_}}                                    </span>                                </div>                            </div>                            <div class=\"stop-loss-execution-cheackbox\" ng-if = \"controller.enableStopLossEditing && (model.stopLoss.TSL.isFeatureEnabled || model.stopLoss.isLimitLessReachable)\">                                <div class=\"cheackbox-ph\" ng-if=\"model.stopLoss.TSL.isFeatureEnabled\">                                    <input class=\"cheackbox-input ng-pristine ng-untouched ng-valid\" type=\"checkbox\" id=\"cbtsl\" ng-model=\"model.stopLoss.TSL.isEnabled\"                                           data-etoro-automation-id = \"execution-stop-loss-editing-tsl-check-box\">                                    <label class=\"cheackbox-label\" for=\"cbtsl\"                                           data-etoro-automation-id = \"execution-stop-loss-editing-tsl-label\">                                        {{_trailingStopLoss_}}                                    </label>                                    <div class=\"info-sigh sprite\"                                         data-etoro-automation-id = \"execution-stop-loss-editing-tsl-i\">                                        <div class=\"tooltip-stoploss\" ng-bind-html=\":: $root.t.dynamic('portfolioOpenPosition', 'tslToolTip', this)\"></div>                                    </div>                                </div>                                <a data-etoro-automation-id=\"edit-position-pop-up-no-stop-loss\"                                   class=\"link right-side-action no-stop-loss\" ng-if=\"model.stopLoss.isLimitLessReachable\" ng-click=\"setNoStopLoss()\">                                    {{$root.t.dynamic('portfolioOpenPosition', model.stopLoss.isNoStopLossSet ? 'cancelSetNoStopLoss' : 'setNoStopLoss')}}                                </a>                            </div>                            <div data-etoro-automation-id=\"stop-loss-tab-disable-container\"                                 ng-if= \"!controller.enableStopLossEditing\" class=\"stopLossDisable\">                                <span class=\"stopLossDisableLabel\"                                      ng-bind-html = \":: $root.t.dynamic('portfolioOpenPosition', 'editStopLossNotAllowed', this)\">                                </span>                            </div>                        </tab>                        <tab class=\"tab-box-execution-content ui-tab-pane\">                        </tab>                        <tab class=\"tab-box-execution-content ui-tab-pane\">                            <div data-etoro-automation-id=\"edit-position-take-profit-rate-input-section\"                                 data-ui-input-number-incrementer=\"\"                                 ng-if=\"!model.takeProfit.inDollarMode && controller.enableTakeProfitEditing && !model.takeProfit.isNoTakeProfitSet\"                                 data-input-binding=\"model.takeProfit.amount\"                                 data-formatter=\"rate\"                                 data-formatter-options=\"{ getInstrumentPrecisionByRate: getInstrumentPrecisionByRate }\"                                 data-on-change=\"takeProfitRateChange\"                                 data-on-blur=\"takeProfitBlur\"                                 data-on-focus=\"takeProfitFocus\">                                <div data-etoro-automation-id=\"edit-position-take-profit-rate-left-title\"                                     data-area=\"title\">                                    {{_setRate_}}                                </div>                                <div data-area=\"side\">                                    <a data-etoro-automation-id=\"edit-position-take-profit-rate-right-switch-button\"                                       class=\"button-standard stepper-switch\"                                       ng-click=\"switchTradeMode(!model.takeProfit.inDollarMode, model.takeProfit)\">                                        <span class=\"switcher sprite\"></span>                                        <span data-etoro-automation-id=\"edit-position-take-profit-rate-right-switch-button-label\">                                            {{_amountToggleButton_}}                                        </span>                                    </a>                                </div>                                <div data-area=\"bottom\" class=\"execution-sub-label\">                                    <div data-etoro-automation-id=\"edit-position-take-profit-rate-edit-error-messages\"                                         data-execution-messages=\"takeProfit\" data-model=\"model.errors.takeProfit\">                                        <span data-etoro-automation-id=\"edit-position-take-profit-rate-bottom-message-regular\">                                            {{ model.takeProfit.message }}                                        </span>                                    </div>                                </div>                            </div>                            <div data-etoro-automation-id=\"edit-position-take-profit-amount-input-section\"                                 data-ui-input-number-incrementer=\"\"                                 ng-if=\"model.takeProfit.inDollarMode && controller.enableTakeProfitEditing && !model.takeProfit.isNoTakeProfitSet\"                                 data-input-binding=\"model.takeProfit.dollar\"                                 data-formatter=\"currency\"                                 data-formatter-options=\"{precision: 2 }\"                                 data-on-change=\"takeProfitMoneyChange\"                                 data-on-blur=\"takeProfitBlur\"                                 data-on-focus=\"takeProfitocus\">                                <div data-etoro-automation-id=\"edit-position-take-profit-amount-left-title\"                                     data-area=\"title\">                                    {{_setAmount_}}                                </div>                                <div data-area=\"side\">                                    <a data-etoro-automation-id=\"edit-position-take-profit-amount-right-switch-button\"                                       class=\"button-standard stepper-switch\"                                       ng-if=\"model.marketMode !== model.marketModeOptions.isMarket\"                                       ng-click=\"switchTradeMode(!model.takeProfit.inDollarMode, model.takeProfit)\">                                        <span class=\"switcher sprite\"></span>                                        <span data-etoro-automation-id=\"edit-position-take-profit-amount-right-switch-button-label\">                                            {{_rateToggleButton_}}                                        </span>                                    </a>                                </div>                                <div data-area=\"bottom\" class=\"execution-sub-label\">                                    <div data-etoro-automation-id=\"edit-position-take-profit-amount-edit-error-messages\"                                         data-execution-messages=\"takeProfit\" data-model=\"model.errors.takeProfit\">                                        <span data-etoro-automation-id=\"edit-position-take-profit-amount-bottom-message-regular\">                                            {{ model.takeProfit.message }}                                        </span>                                    </div>                                </div>                            </div>                            <div class=\"execution-no-take-profit\" ng-if=\"controller.enableTakeProfitEditing && model.takeProfit.isNoTakeProfitSet\">                                    <span class=\"left-side\">                                        <div class=\"title-text\">                                            {{$root.t.dynamic('portfolioOpenPosition', model.takeProfit.inDollarMode ? 'setAmount' : 'setRate')}}                                        </div>                                    </span>                                <div class=\"center-side\">                                    <div class=\"input-blank\">                                        {{:: $root.t.dynamic('portfolioOpenPosition', 'noTakeProfitStepper')}}                                    </div>                                </div>                            </div>                            <div class=\"stop-loss-execution-cheackbox\" ng-if=\"controller.enableTakeProfitEditing && model.takeProfit.isLimitLessReachable\">                                <a data-etoro-automation-id=\"edit-position-pop-up-no-take-profit\"                                   class=\"link right-side-action no-stop-loss\" ng-click=\"setNoTakeProfit()\">                                    {{$root.t.dynamic('portfolioOpenPosition', model.takeProfit.isNoTakeProfitSet ? 'cancelSetNoTakeProfit' : 'setNoTakeProfit')}}                                </a>                            </div>                            <div data-etoro-automation-id=\"take-profit-tab-disable-container\"                                 ng-if= \"!controller.enableTakeProfitEditing\" class=\"takeProfitDisable\">                                <span class=\"takeProfitDisableLabel\"                                      ng-bind-html = \":: $root.t.dynamic('portfolioOpenPosition', 'editTakeProfitNotAllowed', this)\">                                </span>                            </div>                        </tab>                    </tabscontent>                </tabs>            </div>            <div ng-if=\"model.instrument.AllowClosePosition\" class=\"execution-button-wrapper mobile-ui\">                <div class=\"execution-action-button full-execution-button\">                    <button data-etoro-automation-id=\"edit-position-update-button\"                            ng-if=\"!model.instrument.isUsTrade\"                            ng-click=\"updatePosition(model.position.PositionID)\"                            ng-disabled=\"model.isTradeActionDisabled\"                            class=\"execution-button button-standard button-blue\">{{_updateButton_}}                    </button>                </div>                <div class=\"execution-action-button mobile-on \">                    <button ng-click=\"closePosition()\"                       data-etoro-automation-id=\"update-position-close-button\"                      ng-disabled=\"model.isTradeActionDisabled || (!model.instrument.IsActive && !model.instrument.AllowExitOrder) || model.pdtStatus === 3\"                      class=\"execution-button button-standard button-red top-space\">{{_closeButton_}}                    </button>                    <!-- <div                       data-etoro-automation-id=\"update-position-pdt-warning\"                       ng-if=\"model.pdtStatus === 2 || model.pdtStatus === 3\"                      class=\"pdt-warning\">                      <span                         ng-if=\"model.pdtStatus === 2\"                         ng-bind-html=\"$root.t.dynamic('portfolioClosePosition', '3rdRoundMessageV1' , this)\"                        class=\"pdt-warning-text\"></span>                      <span                         ng-if=\"model.pdtStatus === 3\"                         ng-bind-html=\"$root.t.dynamic('portfolioClosePosition', '4thRoundMessageV1' , this)\"                        class=\"pdt-warning-text\"></span>                    </div> -->                </div>            </div>            <div class=\"execution-footer mobile-ui\">                <span ui-if-breakpoint=\"mobile\">                    <div data-etoro-automation-id=\"edit-position-bottom-conatiner\" class=\"footer-spread-info off-market-disclaimer\" ng-if=\"!model.instrument.IsActive && !model.instrument.AllowExitOrder\">                        <span data-etoro-automation-id=\"edit-position-off-market-disclaimer\">{{_offMarketDisclaimer_}}</span>                    </div>                        <div data-etoro-automation-id=\"edit-position-bottom-conatiner\" class=\"footer-spread-info\" ng-if=\"model.instrument.IsActive || model.instrument.AllowExitOrder\">                        <span data-etoro-automation-id=\"edit-position-id-label\">{{_positionId_}}</span>                        <span data-etoro-automation-id=\"edit-position-id-value\">#{{:: model.position.PositionID}} </span>                        <span class=\"separator\"></span>                        <span data-etoro-automation-id=\"edit-position-fee-label\">{{_if(model.position.TotalFees < 0, \"_totalRefunds_\", \"_totalFees_\")_}}</span>                        <span data-etoro-automation-id=\"edit-position-fee-value\">{{ model.position.TotalFees | math:'abs' | currencyparser:2:true}}</span>                    </div>                </span>                <span ui-if-breakpoint=\"!mobile\">                    <div data-etoro-automation-id=\"edit-position-bottom-conatiner\" class=\"footer-spread-info\">                        <span data-etoro-automation-id=\"edit-position-id-label\">{{_positionId_}}</span>                        <span data-etoro-automation-id=\"edit-position-id-value\">#{{:: model.position.PositionID}} </span>                        <span class=\"separator\"></span>                        <span data-etoro-automation-id=\"edit-position-fee-label\">{{_if(model.position.TotalFees < 0, \"_totalRefunds_\", \"_totalFees_\")_}}</span>                        <span data-etoro-automation-id=\"edit-position-fee-value\">{{ model.position.TotalFees | math:'abs' | currencyparser:2:true}}</span>                    </div>                </span>            </div>        </div>    </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[43][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/closePosition/closePosition.view.html","text":"<div class=\"w-sm close-trade\" ng-class=\"{ 'us-confirm-mode': model.isUsConfirmMode }\" data-etoro-automation-id=\"close-position-table\" ng-controller=\"apps.trader.portfolio.closePosition.closePositionCtrl\" data-etoro-locale-ns=\"portfolioClosePosition\">    <div class=\"w-confirmation-modal-title\" data-etoro-automation-id=\"close-position-title\" ng-if=\"model.position.Instrument\">        {{_if(model.isUsUser,'_sellTrade','_copyHistoryClosePosition_')_}}    </div>    <div class=\"w-share-header-nav-button-x sprite\" data-etoro-automation-id=\"close-position-x-button\" ng-click=\"closePopup()\" automation-id=\"close-dialog-btn\"></div>    <div ng-if=\"model.loading\" class=\"w-sm-main\">        <span class=\"w-execution-loading\"></span>    </div>    <div class=\"w-sm-main\" ng-if=\"!model.loading\">        <div class=\"w-execution-main-head\" data-etoro-automation-id=\"close-position-main-head\">            <div class=\"w-execution-main-head-avatar-ph\" data-etoro-automation-id=\"close-position-avatar-container\">                <img class=\"w-execution-main-head-avatar\" data-etoro-automation-id=\"close-position-avatar\" ng-src=\"{{model.position.Instrument.Avatars['default']}}\" alt=\"{{model.position.instrument.name}}\" />            </div>            <div class=\"w-execution-main-head-title stock\" data-etoro-automation-id=\"close-position-head-title-container\">                <span class=\"w-execution-main-head-title-name\">                    <span data-etoro-automation-id=\"close-position-head-title-buy-sell\">                        {{ _if(model.position.IsBuy, '_buy_' , '_sell_')_  }}                    </span>                    <span data-etoro-automation-id=\"close-position-head-title-instrument-name\">{{:: model.position.Instrument.Name}}</span>                </span>                <div class=\"w-execution-main-head-title-price\">                    <span class=\"w-execution-main-head-title-price-value\" data-etoro-automation-id=\"close-position-head-title-rate\">                        {{ (model.position.Instrument.isUsTrade                             ? model.position.Instrument.BidRounded()                             : model.position.CurrentRate) | formatRate: model.instrument }}                    </span>                    <et-nbbo-info ng-if=\"model.instrument.isUsTrade && model.instrument.IsActive\"                         [instrument]=\"model.instrument\"                        tooltip-class=\"close-position-tooltip\">                    </et-nbbo-info>                </div>            </div>            <div class=\"w-sm-position-info-trade\">                <div class=\"w-sm-position-info-trade-value\" data-etoro-automation-id=\"close-position-position-id\">#{{ model.position.PositionID}}</div>                <div class=\"w-sm-position-info-trade-label\">{{_tradePosition_}}</div>            </div>        </div>        <div ng-if=\"!model.isUsConfirmMode\" class=\"w-sm-amount-info-close clear-after\" data-etoro-automation-id=\"close-position-info-container\">            <div class=\"execution-edit-info close-trade \">                <div class=\"execution-left-side close-trade\">                    <span class=\"bold-info item-child\" data-etoro-automation-id=\"close-position-info-amount-label\">{{_amountLabel_}}</span>                </div>                <div class=\"execution-right-side close-trade\">                    <span class=\"bold-info item-child\" data-etoro-automation-id=\"close-position-info-amount\">{{ model.position.Amount | currencyparser:2  }}</span>                    <span class=\"item-child\">                            <span data-etoro-automation-id=\"close-position-info-units\">{{ model.position.Units | unitsOpenClose: model.position.Instrument : 6 : true  }}</span>                            <span data-etoro-automation-id=\"close-position-info-units-label\">{{_units_}}</span>                        </span>                </div>            </div>            <div class=\"w-sm-amount-info-unit clear-after\">                <div class=\"w-sm-amount-info-label\" data-etoro-automation-id=\"close-position-info-pnl-label\">{{_if(model.position.Instrument.isUsTrade,'_plEstimated_','_pl_')_}}</div>                <div class=\"w-sm-amount-info-value\" data-etoro-automation-id=\"close-position-info-pnl\" ng-class=\"{negative: model.position.Profit < 0, positive: model.position.Profit > 0}\">                    {{ model.position.Profit | currencyparser:2 }}                </div>            </div>            <div class=\"w-sm-amount-info-unit total clear-after\">                <div class=\"w-sm-amount-info-label\" data-etoro-automation-id=\"close-position-info-total-label\">{{_copyHistoryTotal_}}</div>                <div class=\"w-sm-amount-info-value\" data-etoro-automation-id=\"close-position-info-total\">                    {{ (model.position.Amount + model.position.Profit) | tofixedNoZero:2 | currencyparser:2 }}                </div>            </div>        </div>        <div ng-if=\"model.isUsConfirmMode\" class=\"execution-confirm-us close-confirm w-sm-amount-info-close clear-after\" data-etoro-automation-id=\"close-position-confirm-info-container\">            <div class=\"execution-edit-info close-trade \">                <div class=\"execution-left-side close-trade\">                    <span class=\"bold-info item-child\" data-etoro-automation-id=\"close-position-confirm-info-amount-label\">{{_amountLabel_}}</span>                </div>                <div class=\"execution-right-side close-trade\">                    <span class=\"bold-info item-child\" data-etoro-automation-id=\"close-position-confirm-info-amount\">{{ model.position.Amount | currencyparser:2  }}</span>                    <span class=\"item-child\">                            <span data-etoro-automation-id=\"close-position-confirm-info-units\">{{ model.position.Units | unitsOpenClose: model.position.Instrument : 6 : true  }}</span>                            <span data-etoro-automation-id=\"close-position-confirm-info-units-label\">{{_units_}}</span>                        </span>                </div>            </div>            <div class=\"execution-edit-info close-trade\">                <div class=\"execution-left-side close-trade\">                    <span class=\"bold-info item-child\" data-etoro-automation-id=\"close-position-confirm-info-amount-label\">{{_buyingPrice_}}</span>                </div>                <div class=\"execution-right-side close-trade\">                    <span class=\"bold-info item-child\" data-etoro-automation-id=\"close-position-confirm-info-amount\">{{ model.position.OpenRate | unitsOpenClose: model.position.Instrument : 2 }}</span>                    <span class=\"item-child confirm-timestamp\">                        <span data-etoro-automation-id=\"close-position-confirm-info-units\">{{ model.position.OpenDateTime | formatDate: 'HH:mm' }}</span>                    </span>                </div>            </div>            <div class=\"execution-edit-info close-trade\">                <div class=\"execution-left-side close-trade\">                    <span class=\"bold-info item-child\" data-etoro-automation-id=\"close-position-confirm-info-amount-label\">{{_plEstimated_}}</span>                </div>                <div class=\"execution-right-side close-trade\">                    <span class=\"bold-info item-child\" data-etoro-automation-id=\"close-position-confirm-info-amount\" ng-class=\"{negative: model.position.Profit < 0, positive: model.position.Profit > 0}\">                         {{ model.position.Profit > 0 ? '+' : '' }}{{ model.confirmationData.profit | currencyparser:2 }}                    </span>                    <span class=\"item-child\" ng-class=\"{negative: model.position.Gain < 0, positive: model.position.Gain > 0}\">                        <span data-etoro-automation-id=\"close-position-confirm-info-units\">                            {{ model.position.Profit > 0 ? '+' : '' }}{{ model.confirmationData.gain | percentageparser }}                        </span>                    </span>                </div>            </div>            <div class=\"execution-edit-info w-sm-amount-info-unit estimated-sell-confirm-us close-trade total\">                <div class=\"execution-left-side close-trade\">                    <span class=\"bold-info item-child\" data-etoro-automation-id=\"close-position-confirm-info-amount-label\">{{_estimatedSellAmount_}}</span>                </div>                <div class=\"execution-right-side close-trade\">                    <span class=\"bold-info item-child\" data-etoro-automation-id=\"close-position-confirm-info-amount\">                        {{ (checkboxModel.value1 ? model.amount.amountView : (model.position.Amount + model.confirmationData.profit)) | tofixedNoZero: 2 | currencyparser: 2 }}                    </span>                    <span class=\"item-child\">                        <span data-etoro-automation-id=\"close-position-confirm-info-units\">                            {{ (checkboxModel.value1 ? model.amount.unitsView : model.position.Units) | unitsOpenClose: model.position.Instrument : 6 : true  }}                        </span>                        <span data-etoro-automation-id=\"close-position-confirm-info-units-label\">{{_units_}}</span>                    </span>                </div>            </div>            <div class=\"execution-edit-info close-trade total-fees\">                <div class=\"execution-left-side close-trade\">                    <span class=\"bold-info item-child\" data-etoro-automation-id=\"close-position-confirm-info-amount-label\">{{_totalFees_}}</span>                    <div class=\"total-fees-tooltip-container\">                        <span class=\"total-fees-tooltip-toggle info-sigh sprite\" data-etoro-automation-id=\"total-fees-tooltip\" ng-click=\"model.showFeesTooltip = !model.showFeesTooltip\"></span>                        <div automation-id=\"no-fees-tool-tip-container-close-position-confirm\"                             ng-if=\"model.showFeesTooltip\" click-outside=\"closeFeesTooltip()\"                             class=\"execution-market-off-tool-tip fees-tool-tip display-block\">                            <div class=\"tool-tip-container\">                                <span class=\"no-fees-message\" ng-bind-html=\":: $root.t.dynamic('usFees', 'message', this)\"></span>                                <span class=\"tool-tip-pick fees-pick\"></span>                            </div>                        </div>                     </div>                </div>                <div class=\"execution-right-side close-trade\">                    <span class=\"bold-info item-child\" data-etoro-automation-id=\"close-position-confirm-info-amount\">                        {{ model.position.TotalFees | math: 'abs' | currencyparser: 2 : true }}                    </span>                </div>            </div>            <div class=\"execution-edit-info w-sm-amount-info-unit close-trade total-label\">                <div class=\"execution-left-side close-trade\">                    <span class=\"bold-info item-child\" data-etoro-automation-id=\"close-position-confirm-info-amount-label\">{{_copyHistoryTotal_}}</span>                </div>                <div class=\"execution-right-side close-trade\">                    <span class=\"bold-info item-child\" data-etoro-automation-id=\"close-position-confirm-info-amount\">                        {{ (checkboxModel.value1 ? (model.amount.amountView - model.position.TotalFees) : (model.position.Amount + model.confirmationData.profit - model.position.TotalFees)) | tofixedNoZero: 2 | currencyparser: 2 }}                    </span>                    <span class=\"item-child confirm-timestamp\">                        <span data-etoro-automation-id=\"close-position-confirm-timestamp\"> {{ model.confirmationData.timestamp | formatDate: 'HH:mm:ss' }} </span>                    </span>                </div>            </div>        </div>        <div class=\"execution-cb-container\" ng-if=\"isTherePartialCloseAllowed && !model.isUsConfirmMode\">            <div class=\"e-cb\" data-etoro-automation-id=\"close-position-cb-container\">                <input data-etoro-automation-id=\"close-position-cb\" class=\"e-cb-input\" type=\"checkbox\" id=\"CB\" name=\"check\"                       ng-model=\"checkboxModel.value1\" ng-disabled=\"model.closeBtnDisabled\"/>                <label data-etoro-automation-id=\"close-position-cb-label\" class=\"e-cb-label i-login-sub_title close-all-positions-check-box\" for=\"CB\">{{_partialCloseNote_}}</label>            </div>        </div>        <div class=\"execution-push-down-info\" ng-if=\"!model.hasConnection\">{{_pushDownInfo_}}</div>        <div class=\"execution-main-steppers close-trade\" data-etoro-automation-id=\"close-position-stepper-container\" ng-if=\"checkboxModel.value1 && !model.isUsConfirmMode\">            <div ng-if=\"model.amount.inUnitsMode\"                 data-ui-input-number-incrementer=\"\"                 data-input-binding=\"model.amount.unitsView\"                 data-formatter=\"number\"                 data-formatter-options=\"{precision: 2 }\"                 data-on-change=\"unitsChange\"                 data-on-focus=\"unitsFocus\"                 data-on-blur=\"unitsBlur\"                 data-on-defocus=\"unitsDeFocus\"                 data-etoro-automation-id=\"close-position-stepper-units-mode-container\">                <div data-area=\"title\" data-etoro-automation-id=\"close-position-stepper-units-mode-units-label\">                    {{_if(model.isUsUser,'_sellUnits_','_closeUnits_')_}}                </div>                <div data-area=\"side\">                    <div class=\"stepper-switch\" ng-if=\"!model.position.Instrument.isUsTrade\" data-etoro-automation-id=\"close-position-stepper-switch-units-mode\" ng-class=\"{'instrument-preview': model.instrument.isPreview}\">                        <a class=\"button-standard \" ng-click=\"switchAmountMode()\">                            <span class=\"switcher sprite\"></span>                            {{_amountLabel_}}                        </a>                    </div>                </div>                <div data-area=\"bottom\" class=\"stepper-info\" data-etoro-automation-id=\"close-position-stepper-units-mode-bottom-container\">                    <div data-execution-messages=\"amount\" data-model=\"model.errors.amount\">                        <span ng-if=\"!model.instrument.isPreview\" class=\"inner-info\" data-etoro-automation-id=\"close-position-stepper-units-mode-bottom-amount\">                            <b>{{ model.amount.amountView | tofixedNoZero:2 | currencyparser : 2 }}</b>                            <span>{{_amountLabel_}}</span>                        </span>                    </div>                </div>            </div>            <div ng-if=\"!model.amount.inUnitsMode\"                 data-ui-input-number-incrementer=\"\"                 data-input-binding=\"model.amount.amountView\"                 data-formatter=\"currency\"                 data-formatter-options=\"{precision: 2 }\"                 data-on-change=\"amountChange\"                 data-on-focus=\"amountFocus\"                 data-on-blur=\"amountBlur\"                 data-on-defocus=\"amountDeFocus\"                 data-etoro-automation-id=\"close-position-stepper-amount-mode-container\">                <div data-area=\"title\" data-etoro-automation-id=\"close-position-stepper-amount-mode-amount-label\">                    {{ _if(model.isUsUser,'_sellAmount_','_closeAmount_')_ }}                </div>                <div data-area=\"side\">                    <div class=\"stepper-switch\" data-etoro-automation-id=\"close-position-stepper-switch-amount-mode\" ng-class=\"{'instrument-preview': model.instrument.isPreview}\">                        <a class=\"button-standard \" ng-click=\"switchAmountMode()\">                            <span class=\"switcher sprite\"></span>                            {{_units_}}                        </a>                    </div>                </div>                <div data-area=\"bottom\" class=\"stepper-info\" data-etoro-automation-id=\"close-position-stepper-amount-mode-bottom-container\">                    <div data-execution-messages=\"amount\" data-model=\"model.errors.amount\">                        <span ng-if=\"!model.instrument.isPreview\" class=\"inner-info\" data-etoro-automation-id=\"close-position-stepper-amount-mode-bottom-units\">                            <b>{{ model.amount.unitsView | unitsOpenClose: model.instrument : 6 : true }}</b>                            <span>{{_units_}}</span>                        </span>                    </div>                </div>            </div>        </div>        <div class=\"w-sm-disclaimer\" ng-if=\"!model.position.Instrument.isUsTrade\">            <div class=\"close-all-positions-disclaimer-note close-position\" ng-if=\"!model.loading && !model.position.Instrument.IsActive\">                <div class=\"footer-spread-info off-market-disclaimer\" data-etoro-automation-id=\"close-position-disclaimer\">                    {{ _if(!model.instrument.IsActive && !model.instrument.AllowExitOrder, '_offMarketDisclaimer_' , '_atMarketPositionCloseNote_')_  }}                </div>            </div>        </div>    </div>    <div class=\"w-sm-footer\" ng-if=\"model.position.Instrument && !model.amountFocusedOnMobile\">      <button data-etoro-automation-id=\"close-position-close-button\"            class=\"w-sm-footer-button e-btn-big red pointer button-standard\"            ng-class=\"{'close-position-btn-us': model.position.Instrument.isUsTrade,                        'close-position-btn-pdt': (model.pdtStatus === 2 || model.pdtStatus === 3) && !model.isUsConfirmMode,                        'drop-elevate': model.showFeesTooltip }\"            ng-disabled=\"model.closeBtnDisabled || (!model.instrument.IsActive && !model.instrument.AllowExitOrder)\"            ng-click=\"closePosition()\">        {{ $root.t.dynamic('portfolioClosePosition', model.closeBtnKey) }}      </button>      <div class=\"execution-footer us-disclaimer-container footer-spread-info\"        ng-class=\"{'us-disclaimer-container-pdt': (model.pdtStatus === 2 || model.pdtStatus === 3) && !model.isUsConfirmMode }\"        ng-if=\"model.position.Instrument.isUsTrade\">        <span class=\"us-disclaimer\">            {{ _if(!model.isUsConfirmMode,'_usDisclaimer_','_usConfirmDisclaimer_')_ }}        </span>      </div>      <div        data-etoro-automation-id=\"close-position-pdt-warning\"         ng-if=\"(model.pdtStatus === 2 || model.pdtStatus === 3) && !model.isUsConfirmMode\"        class=\"pdt-warning\">        <span           ng-if=\"model.pdtStatus === 2\"           ng-bind-html=\"$root.t.dynamic('portfolioClosePosition', '3rdRoundMessageV1' , this)\"          class=\"pdt-warning-text\"></span>        <span           ng-if=\"model.pdtStatus === 3\"           ng-bind-html=\"$root.t.dynamic('portfolioClosePosition', '4thRoundMessageV1' , this)\"          class=\"pdt-warning-text\"></span>      </div>  </div>    </div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[374][0],["moduleDefiner",rA[295][0],rA[296][0],rA[487][0]],function(t,e,i,c){"use strict";var r=t("bl.factories.execution.calculators",[c,e,i]);return r});define(rA[295][0],["moduleDefiner","underscore"],function(t,e){function n(t){return!!(t.position&&t.position.PositionID>0)}function a(t,a,i,o,s,u){function m(e){var n,a,i,o=p.getRateObject(e.instrument,e.isBuy,e.leverages.selectedLeverage),r=t.calculatePips(e.instrument,o.Ask,o.Bid);return e.isBuy?(n=e.viewRate,a=t.calculateRate(n,-1*r,e.instrument.Precision)):(a=e.viewRate,n=t.calculateRate(a,r,e.instrument.Precision)),i={Bid:toFixed(a,e.instrument.Precision),Ask:toFixed(n,e.instrument.Precision)}}function l(t,e,n){return{property:t,data:e,message:n}}function c(t){return t.isBuy?1===t.leverages.selectedLeverage?t.instrument.MaxStopLossPercentageNonLeveragedBuy:t.instrument.MaxStopLossPercentageLeveragedBuy:1===t.leverages.selectedLeverage?t.instrument.MaxStopLossPercentageNonLeveragedSell:t.instrument.MaxStopLossPercentageLeveragedSell}function d(e,i,o,r,s,u){if(n(e)&&o){var m=p.getRate(e,o);r||(i.dollar=p.getAmountFromRate(e,m,s));var d=p.calculateMoneyToTakeOrGiveBack(e);if(d>0){var g=a.session.user.portfolio.availibleToTrade;if(d>g){var h=c(e),f=toFixed(h*e.position.UnitsBaseValueDollars/100,2),v=g+e.position.Amount-e.position.UnitsBaseValueDollars+f,R=p.getRateFromAmount(e,m,-1*v,!0,!1);R=t.roundNumberByType(R,e.isBuy,o,e.instrument.Precision);var M=-1*parseToFloat(e.amount.amount),P=p.getMinMaxRatesRange(e,M,!0);if(R<P.minRate&&(R=P.minRate),R>P.maxRate&&(R=P.maxRate),i.amount=R,i.dollar=toFixed(p.getAmountFromRate(e,m,R),2),u!==!0){var A="";A=r?e.isBuy?"stopLossAmountCannotBeLowerThanMinAmount":"stopLossAmountCannotBeHigherThanMaxAmount":e.isBuy?"stopLossRateCannotBeLowerThanMinRate":"stopLossRateCannotBeHigherThanMaxRate",a.$broadcast("trading:executionCalculator:error",l("stopLoss",{minRate:i.amount,maxRate:i.amount,minAmount:i.dollar,maxAmount:i.dollar,precision:e.instrument.Precision},A))}return!1}}}return!0}function g(t,e){for(var n=t[0],a=Math.abs(e-n),i=0;i<t.length;i++){var o=Math.abs(e-t[i]);a>o&&(a=o,n=t[i])}return n}function h(t){var e=Math.floor(t),n=String(e).length;if(1>=n)return e;var a=n>=3?n-2:1;return res=Math.floor(e/Math.pow(10,a))*Math.pow(10,a),res}function f(t,e,n,a,i,o){switch(i){case"default_amount_zero_test":return 0;case"default_amount_min_test":return t;case"default_amount_max_test":return Math.min(n.availableCash,e);case"default_amount_10_test":return h(10*a/100);case"default_amount_50_test":return h(50*a/100);default:return o}}var p,v=[],R=0;return p={getRateOrDiscountedRateForClosePosition:function(t,e,n){return t?e.AskRounded(n):e.BidRounded(n)},getRateOrDiscountedRate:function(t,e,n,a){var i=this.isLowLeverage(e,n,a)&&e.AllowDiscountedRates;return t?e.AskRounded(i):e.BidRounded(i)},getRateObject:function(t,e,n){var a=this.isDiscountedRate(t,e,n);return a&&t.rateDiscounted?t.rateDiscounted:t.rate},isDiscountedRate:function(t,e,n){var a=this.isLowLeverage(t,e,n);return t.AllowDiscountedRates&&a},getDefaultStopLossPercentage:function(t){return 1===t.DefaultLeverage?t.DefaultStopLossPercentageNonLeveraged:t.DefaultStopLossPercentageLeveraged},getMaxTakeProfitPercentage:function(){return s.dynamics.portfolio.maxTPpercentage},setLeverageList:function(t,n,a){v=t.Leverages,R=a&&a.selectedLeverage?a.selectedLeverage:n||g(v,t.DefaultLeverage);var i=e.indexOf(v,R);return-1===i?p.setLeverageList(t):{leverageList:v,leverageIndex:i,selectedLeverage:R}},setLeverageListForUpdatePosition:function(t,e){return v=t.Leverages,R=e,{leverageList:v,selectedLeverage:R}},_changeLeverageByAmount:function(t,e){var n=!0,i=t.instrument,o=this.calculateMaxUnits(i,t),r=this.calculateUnitMargin(i,t),s=this.calculateUnits(r,t.amount.amount,e);return s>o&&(a.$broadcast("trading:executionCalculator:error",l("leverage",{leverage:e,units:s,maxPositionUnits:o},"currentUnitsLargerThanMaxPositionUnits")),e=t.risk.amount,n=!1),R=e,t.risk.amount=e,this.updateUnits(t),n},_changeLeverageByUnit:function(t,e){var n=!0,i=t.instrument,o=this.calculateUnitMargin(i,t),r=this.calculateAmount(t.amount.units,o,e),s=this.calculateMinPositionAmount(i,e,t.isBuy);return s>r&&(a.$broadcast("trading:executionCalculator:error",l("leverage",{minPositionAmount:s},"currentAmountLowerThenMinAmount")),e=t.risk.amount,n=!1),R=e,t.risk.amount=e,this.updateAmount(t),n},changeLeverage:function(t,e,n){return n?this._changeLeverageByUnit(t,e):this._changeLeverageByAmount(t,e)},setOpenPositionDefaultAmount:function(t,e,n,a,i,o,r){var s,u,m=this.calculateMinPositionAmount(n,a.risk.amount,a.isBuy);if(i)s=i.amount;else if(o)s=o;else{u=a.defaultRiskPercentage/a.stopLoss.defaultPercent,s=t*u,s%10!=0&&(s=s+10-s%10);var l=s,c=this.calculateMaxUnits(n,a),d=this.calculateUnitMargin(n,a),g=this.calculateAmount(c,d,R);s=f(m,g,a,t,r,l)}return s=this.validateAmount(s,n,e,a,!0)},setOneClickTradingDefaultAmount:function(t,e,n){var a,i=this.calculateMinPositionAmount(e,n);if(i>t)return-1;var a=.1*t;if(t>=i&&(a%10!=0&&(a=a+10-a%10),a>t&&(a=Math.ceil(.1*t)),i>a&&(a=i)),a>t)return-1;if(n){var o=e.getUnitMargin(!1),r=this.calculateUnits(o,a,n);if(r>e.MaxPositionUnits){var s=e.MaxPositionUnits*o/n;a=Math.max(.1*s,i)}}return a},setDefaultStopLoss:function(t,e){var n;e?(e.amount?(t.stopLoss.amount=e.amount,this.rateToAmount(t,t.stopLoss,!0)):e.dollar&&this.recalculatePrices(t,!0,!1,e.dollar),this.changeStopLossTakeProfit(t,0,!0)):t.isBuy&&t.instrument.isNoneLeveragedOnly?(n=-1*toFixed(numberFromPercent(parseToFloat(t.amount.amount),c(t)),2),this.recalculatePrices(t,!0,!1,n)):(n=-1*toFixed(numberFromPercent(parseToFloat(t.amount.amount),t.stopLoss.defaultPercent),2),this.recalculatePrices(t,!0,!1,n))},setDefaultTakeProfit:function(t,e){var n,a;if(e)e.amount?(t.takeProfit.amount=e.amount,this.rateToAmount(t,t.takeProfit,!1)):e.dollar&&this.recalculatePrices(t,!1,!0,e.dollar),this.changeStopLossTakeProfit(t,0,!1);else if(t.instrument.isNoneLeveragedOnly)if(t.isBuy)t.takeProfit.amount=0,t.takeProfit.dollar=0;else{var i=this.calculateMinPositionAmount(instrument,t.risk.amount,t.isBuy),o=t.amount.amount?t.amount.amount:i;n=toFixed(numberFromPercent(parseToFloat(o),t.instrument.MaxTakeProfitPercentage),2),this.recalculatePrices(t,!1,!0,n),this.changeStopLossTakeProfit(t,0,!1)}else a=toFixed(numberFromPercent(parseToFloat(t.amount.amount),t.takeProfit.defaultPercent),2),this.recalculatePrices(t,!1,!0,a),this.changeStopLossTakeProfit(t,0,!1)},get maxDepositAmount(){return toFixed(s.dynamics.deposit.maxDeposit,2)},validateAmount:function(t,e,n,i,o){var r=this.calculateMinPositionAmount(e,i.risk.amount,i.isBuy),s=!1,u=this.isAbsoluteMinAmount(e,i.risk.amount),m=this.calculateMaxUnits(e,i),c=this.calculateUnitMargin(e,i),d=this.calculateAmount(m,c,R),g=this.isDiscountedRate(e,i.isBuy,R);r>t&&(o||a.$broadcast("trading:executionCalculator:error",l("amount",{amount:t,minPositionAmount:u?r:e.MinPositionAmount,instrumentSymbol:e.SymbolFull,MinPositionAmountAbsoluteDiscounted:e.MinPositionAmountAbsoluteDiscounted},this.isDiscountedRate(e,i.isBuy,i.risk.amount)?"lowerThanAbsoluteMinPositionAmountDiscounted":u?"lowerThanAbsoluteMinPositionAmount":"lowerThanMinPositionAmount")),t=r,s=!0),i.amount.isNeedToDeposit=!1;var h=!1;if(t>n){var f=toFixed(p.maxDepositAmount+n,2);if(t>f&&(t=f),t>d&&(t=d,h=n>=t),h)o||a.$broadcast("trading:executionCalculator:error",l("amount",{amount:t,maxPositionUnits:m},"currentUnitsLargerThanMaxPositionUnits"));else{var v=s?u||g?"depositRequiredForOpenOrderAfterAbsoluteMinError":"depositRequiredForOpenOrderAfterMinError":"depositRequiredForOpenOrder";i.marketMode===i.marketModeOptions.active&&(v=s?u||g?"depositRequiredForOpenTradeAfterAbsoluteMinError":"depositRequiredForOpenTradeAfterMinError":"depositRequiredForOpenTrade"),i.amount.isNeedToDeposit=!0,a.$broadcast("trading:executionCalculator:error",l("amount",{amount:t-n,minAmount:u||g?r:e.MinPositionAmount},v))}}else t>d&&(t=d,o||a.$broadcast("trading:executionCalculator:error",l("amount",{amount:t,maxPositionUnits:m},"currentUnitsLargerThanMaxPositionUnits")));return t},validateOneClickTradingAmount:function(t,e,n,i){var o=this.calculateMinPositionAmount(e.instrument,e.risk.amount),r=this.isAbsoluteMinAmount(e.instrument,e.risk.amount);t>n&&(i||a.$broadcast("trading:executionCalculator:error",l("amount",{amount:t},"largerThanCurrentCredit")),t=n),o>t&&(a.$broadcast("trading:executionCalculator:error",l("amount",{amount:t,minPositionAmount:r?o:e.instrument.MinPositionAmount,instrumentSymbol:e.instrument.SymbolFull},r?"lowerThanAbsoluteMinPositionAmount":"lowerThanMinPositionAmount")),t=o);var s=e.instrument.getUnitMargin(!1),u=this.calculateUnits(s,t,R);return u>e.instrument.MaxPositionUnits&&(a.$broadcast("trading:executionCalculator:error",l("amount",{amount:t,units:u,maxPositionUnits:e.instrument.MaxPositionUnits},"currentUnitsLargerThanMaxPositionUnits")),t=e.instrument.MaxPositionUnits*s/R),t},recalculatePrices:function(e,n,a,i){n="undefined"==typeof n?!0:n,a="undefined"==typeof a?!0:a;var o,r=i||parseToFloat(e.amount.amount);if(null!=e.takeProfit&&null!=e.stopLoss){if(n){o=this.getRate(e,!0);var s=this.getRateFromAmount(e,o,r,!0);if(e.marketMode===e.marketModeOptions.order&&0>s){var u=t.getPrecisionByRate(e.instrument,0);s=t.calculateRate(0,1,u)}e.stopLoss.amount=s,this.rateToAmount(e,e.stopLoss,!0)}if(a){o=this.getRate(e,!1);var m=this.getRateFromAmount(e,o,r,!1);e.takeProfit.amount=m,this.rateToAmount(e,e.takeProfit,!1)}}},rateToAmount:function(t,e,n){var a=parseToFloat(t.amount.amount),r=this.getRate(t,n,t.viewRate),s=toFixed(this.getAmountFromRate(t,r,e.amount),2),u=Math.abs(s)/a*100;e.message=o(i.getLocale("execution.percentOfAmount"))({percent:toFixedSting(u,2)}),e.dollar=s},getAmountFromRate:function(e,a,i){var o,r=parseToFloat(e.amount.amount),s=t.getPositionConversionRate(n(e),e.isBuy,e.instrument.rate);if(n(e))o=e.position.Units;else{var u=this.calculateUnitMargin(e.instrument,e);o=this.calculateUnits(u,r,null,s)}i=parseFloat(i),a=parseFloat(a);var m=e.isBuy?-1:1;return 1==e.instrument.BuyCurrencyID&&(s=1/i),(a-i)*m*o*s},getRateFromAmount:function(e,a,i,o,r){r=void 0===r?!0:r;var s=parseToFloat(e.amount.amount);a=parseToFloat(a);var u,m=t.getPositionConversionRate(n(e),e.isBuy,e.instrument.rate);if(n(e))u=e.position.Units;else{var l=this.calculateUnitMargin(e.instrument,e);u=this.calculateUnits(l,s,null,m)}var c,d=u,g=1;if(1==e.instrument.BuyCurrencyID?(g=e.isBuy?-1:1,d+=i*g,0>=d&&(d=1),c=u*a/d):(g=e.isBuy?1:-1,c=i*g/(u*m)+a),!r)return c;var h=t.getPrecisionByRate(e.instrument,c),c=toFixed(c,h);return 0>=c&&(c=t.calculateRate(0,1,h)),c},changeStopLossTakeProfit:function(e,n,i,o){var r=i?e.stopLoss:e.takeProfit,s=parseToFloat(o)||parseToFloat(r.amount),u=i?-1:1,m=parseToFloat(e.amount.amount)*u,c=this.getMinMaxRatesRange(e,m,i),g=s,h=t.getPrecisionByRate(e.instrument,g,0>n);if(g=t.calculateRate(s,n,h),h=t.getPrecisionByRate(e.instrument,g),g=t.roundNumberByType(g,e.isBuy,i,h),g<c.minRate){var f=r.amount<c.minRate?c.minRate:r.amount;a.$broadcast("trading:executionCalculator:error",l(i?"stopLoss":"takeProfit",{prevValue:s,newValue:g,minRate:c.minRate,maxRate:c.maxRate,precision:t.getPrecisionByRate(e.instrument,f)},(i?"stopLoss":"takeProfit")+"RateCannotBeLowerThanMinRate")),g=e.instrument.isAmericanPrecision?c.minRate.toFixed(h):c.minRate}else g>c.maxRate&&(a.$broadcast("trading:executionCalculator:error",l(i?"stopLoss":"takeProfit",{prevValue:s,newValue:g,minRate:c.minRate,maxRate:c.maxRate,precision:e.instrument.Precision},(i?"stopLoss":"takeProfit")+"RateCannotBeHigherThanMaxRate")),g=e.instrument.isAmericanPrecision?c.maxRate.toFixed(h):c.maxRate);return d(e,r,i,!1,g)?(r.amount=g,void this.rateToAmount(e,r,i)):this.changeStopLossTakeProfit(e,0,i,null)},changeStopLossTakeProfitByDollar:function(e,n,i,o){var s=i?n.instrument.MinStopLossPercentage:n.instrument.MinTakeProfitPercentage;void 0===s&&(s=r),s=Math.max(s,r);var u=i?n.stopLoss:n.takeProfit,m=parseToFloat(toFixed(u.dollar,2)),g=parseToFloat(n.amount.amount),h=this.getRate(n,i);g*=i?-1:1;var f,p=this.getMinMaxRatesRange(n,g,i),v=0,R=t.getStepJump(m);if(e&&n.marketMode!==n.marketModeOptions.isMarket){var M,P,A="+"===e?1:-1,x=null,L=u.amount;for(n.isBuy&&i?(M=toFixed(this.getAmountFromRate(n,h,p.minRate),2),P=toFixed(this.getAmountFromRate(n,h,p.maxRate),2)):n.isBuy&&!i?(M=toFixed(this.getAmountFromRate(n,h,p.maxRate),2),P=toFixed(this.getAmountFromRate(n,h,p.minRate),2)):!n.isBuy&&i?(M=toFixed(this.getAmountFromRate(n,h,p.maxRate),2),P=toFixed(this.getAmountFromRate(n,h,p.minRate),2)):n.isBuy||i||(M=toFixed(this.getAmountFromRate(n,h,p.minRate),2),P=toFixed(this.getAmountFromRate(n,h,p.maxRate),2));null==x||x===u.dollar&&x>P&&M>x;)L=t.calculateRate(L,A,n.instrument.Precision),x=Math.abs(toFixed(this.getAmountFromRate(n,h,L),2));R=Math.max(R,Math.abs(Math.abs(m)-x))}if("+"===e?m+=R:"-"===e&&(m-=R),n.marketMode===n.marketModeOptions.isMarket){var T=m/g*100,B=c(n),y=i?B:n.instrument.MaxTakeProfitPercentage;return s>T?(a.$broadcast("trading:executionCalculator:error",l(i?"stopLoss":"takeProfit",{percent:Math.abs(s)},(i?"stopLoss":"takeProfit")+"PercentCannotBeLowerThan5Percent")),T=s,f=toFixed(g*T/100,2)):T>y?(a.$broadcast("trading:executionCalculator:error",l(i?"stopLoss":"takeProfit",{percent:Math.abs(y)},(i?"stopLoss":"takeProfit")+"PercentCannotBeHigherThanMaxStopLossPercentage")),T=y,f=toFixed(g*T/100,2)):f=toFixed(m,2),u.dollar=toFixed(f,2),{percentage:Math.abs(T),limitAmount:f,rate:null}}if(f=toFixed(m,2),v=this.getRateFromAmount(n,h,f,i),v>p.maxRate)a.$broadcast("trading:executionCalculator:error",l(i?"stopLoss":"takeProfit",{rate:v,maxRate:p.maxRate,minRate:p.minRate,maxAmount:this.getAmountFromRate(n,h,p.maxRate),minAmount:this.getAmountFromRate(n,h,p.maxRate)},(i?"stopLoss":"takeProfit")+(n.isBuy?"AmountCannotBeHigherThanMaxAmount":"AmountCannotBeLowerThanMinAmount"))),v=p.maxRate;else if(v<p.minRate){var k="";i&&n.isBuy?k="stopLossAmountCannotBeLowerThanMinAmount":i&&!n.isBuy?k="stopLossAmountCannotBeHigherThanMaxAmount":!i&&n.isBuy?k="takeProfitAmountCannotBeLowerThanMinAmount":i||n.isBuy||(k="takeProfitAmountCannotBeHigherThanMaxAmount"),a.$broadcast("trading:executionCalculator:error",l(i?"stopLoss":"takeProfit",{rate:v,minRate:p.minRate,maxRate:p.maxRate,minAmount:this.getAmountFromRate(n,h,p.minRate),maxAmount:this.getAmountFromRate(n,h,p.minRate)},k)),v=p.minRate}return f=this.getAmountFromRate(n,h,v),T=Math.abs(f)/g*100,u.amount=toFixed(v,t.getPrecisionByRate(n.instrument,v)),u.dollar=toFixed(f,2),d(n,u,i,!0)?{percentage:Math.abs(T),limitAmount:f,rate:v}:this.changeStopLossTakeProfitByDollar(null,n,i,o)},changeOrderRate:function(e,n,i){n=parseToFloat(n);var o=t.getPrecisionByRate(e.instrument,n,0>i),r=t.calculateRate(n,i,o),s=p.getMinOrderRate(e.orderModeCurrentRate),u=100*e.orderModeCurrentRate;return s>r?(a.$broadcast("trading:executionCalculator:error",l("orderRate",{orderRate:r},"lowerThanMinimunRate")),r=s):r>u&&(a.$broadcast("trading:executionCalculator:error",l("orderRate",{orderRate:r},"lowerThanMaximumRate")),r=u),toFixed(r,o)},calculateAmountByRatio:function(t,e){var n=t,a=e.Equity,i=e.Units;return i>0?(e.Instrument.isUsTrade&&(n=Math.round(n)),n/i*a):0/0},calculateAmount:function(t,e,n){return t*e/n},calculateUnits:function(t,e,n){n=n||R;var a=e*n/t;return a},getFactor:function(t,e){var n=1;return e&&(n=-1),n*(t?-1:1)},getMinMaxRatesRange:function(e,a,i){var o,r,s=0,u=0;r=e.marketMode===e.marketModeOptions.order?m(e):this.getRateObject(e.instrument,e.isBuy,e.leverages.selectedLeverage),o=t.getClientViewRate(n(e),e.isBuy,r);var l=t.calculateRate(0,1,e.instrument._Precision),d=!1,g=!1;if(i)if(e.isBuy)if(n(e)){s=l;var h=this.getRateOrDiscountedRate(!1,e.instrument,e.isBuy,e.leverages.selectedLeverage);u=t.calculateRate(h,-1,t.getPrecisionByRate(e.instrument,h,!0));var f=this.getRateFromAmount(e,o,-1*e.position.UnitsBaseValueDollars*(e.instrument.MinStopLossPercentage/100),i,!1),p=this.getRateFromAmount(e,e.position.OpenRate,-1*e.position.UnitsBaseValueDollars*(e.instrument.MinStopLossPercentage/100),i,!1);u=Math.min(u,Math.max(f,p)),g=!0,d=!1}else{u=Math.min(t.calculateRate(r.Bid,-1,t.getPrecisionByRate(e.instrument,r.Bid,!0)),this.getRateFromAmount(e,o,a*(e.instrument.MinStopLossPercentage/100),i,!1));var v=c(e);s=this.getRateFromAmount(e,o,a*(v/100),i,!1),g=!0,d=!1}else if(n(e)){u=Number.MAX_VALUE;var h=this.getRateOrDiscountedRate(!0,e.instrument,e.isBuy,e.leverages.selectedLeverage);s=t.calculateRate(h,1,t.getPrecisionByRate(e.instrument,h));var R=this.getRateFromAmount(e,o,-1*e.position.UnitsBaseValueDollars*(e.instrument.MinStopLossPercentage/100),i,!1),M=this.getRateFromAmount(e,e.position.OpenRate,-1*e.position.UnitsBaseValueDollars*(e.instrument.MinStopLossPercentage/100),i,!1);s=Math.max(s,Math.min(R,M)),g=!1,d=!0}else{s=Math.max(t.calculateRate(r.Ask,1,t.getPrecisionByRate(e.instrument,r.Ask)),this.getRateFromAmount(e,o,a*(e.instrument.MinStopLossPercentage/100),i,!1));var v=c(e);u=this.getRateFromAmount(e,o,a*(v/100),i,!1),g=!1,d=!0}else e.isBuy?n(e)?(s=Math.max(t.calculateRate(r.Bid,1,t.getPrecisionByRate(e.instrument,r.Bid)),this.getRateFromAmount(e,o,a*(e.instrument.MinTakeProfitPercentage/100),i,!1)),u=this.getRateFromAmount(e,e.position.OpenRate,(a+e.position.Profit)*(e.instrument.MaxTakeProfitPercentage/100),i,!1),g=!1,d=!0):(s=Math.max(t.calculateRate(r.Ask,1,t.getPrecisionByRate(e.instrument,r.Ask)),this.getRateFromAmount(e,o,a*(e.instrument.MinTakeProfitPercentage/100),i,!1)),u=this.getRateFromAmount(e,o,a*(e.instrument.MaxTakeProfitPercentage/100),i,!1),g=!1,d=!0):n(e)?(s=Math.max(l,this.getRateFromAmount(e,e.position.OpenRate,(a+e.position.Profit)*(e.instrument.MaxTakeProfitPercentage/100),i,!1)),u=Math.min(this.getRateFromAmount(e,o,a*(e.instrument.MinTakeProfitPercentage/100),i,!1),t.calculateRate(o,-1,t.getPrecisionByRate(e.instrument,o,!0))),g=!0,d=!1):(s=Math.max(l,this.getRateFromAmount(e,o,a*(e.instrument.MaxTakeProfitPercentage/100),i,!1)),u=Math.min(t.calculateRate(o,-1,t.getPrecisionByRate(e.instrument,o,!0)),this.getRateFromAmount(e,o,a*(e.instrument.MinTakeProfitPercentage/100),i,!1)),g=!0,d=!1);return l>u&&(u=l),l>s&&(s=l),s=t.roundNumberByType(s,e.isBuy,i,t.getPrecisionByRate(e.instrument,s),d),u=t.roundNumberByType(u,e.isBuy,i,t.getPrecisionByRate(e.instrument,u),g),{minRate:s,maxRate:u}},getMinOrderRate:function(t){var e=10;return t*e/100},updateUnitsByRatio:function(t){var e=parseToFloat(t.amount.amount),n=t.position.Equity,a=t.position.Units;n>0&&(t.amount.units=e/n*a,t.instrument.isUsTrade&&(t.amount.units=Math.round(t.amount.units),0===t.amount.units&&(t.amount.units=1)))},updateUnits:function(t){var e=parseToFloat(t.amount.amount),n=this.calculateUnitMargin(t.instrument,t);t.amount.units=this.calculateUnits(n,e,R)},updateAmount:function(t){var e=parseToFloat(t.amount.units),n=this.calculateUnitMargin(t.instrument,t);t.amount.amount=this.calculateAmount(e,n,R)},recalculateAmountAndUnits:function(t,e,n){e?this._changeOpenPositionUnits(n,t):this._changeOpenPositionAmount(n,t)},_changeOpenPositionAmount:function(e,n){if(a.session&&a.session.user){n.amount.isNeedToDeposit=!1;var i=parseToFloat(n.amount.amount),o=a.session.user.portfolio.availibleToTrade,r=t.getStepJump(i);"+"===e?i+=r:"-"===e&&(i-=r),i=this.validateAmount(i,n.instrument,o,n),n.amount.amount=i,this.updateUnits(n)}},_changeOpenPositionUnits:function(e,n){if(a.session&&a.session.user){n.amount.isNeedToDeposit=!1;var i=parseToFloat(n.amount.units),o=a.session.user.portfolio.availibleToTrade;if(e){var r=t.getStepJump(i);"+"===e?i+=r:"-"===e&&(i-=r)}var s=this.calculateUnitMargin(n.instrument,n),u=this.calculateAmount(i,s,n.leverages.selectedLeverage);u=this.validateAmount(u,n.instrument,o,n),n.amount.amount=u,this.updateUnits(n)}},recalculateAmountAndUnitsOneClick:function(t,e,n){e?this._changeOneClickTradingUnits(n,t):this._changeOneClickTradingAmount(n,t)},_changeOneClickTradingAmount:function(e,n){var i=parseToFloat(n.amount.amount),o=a.session.user.portfolio.availibleToTrade,r=t.getStepJump(i),s=i;"+"===e?i+=r:"-"===e&&(i-=r);var u=e&&s===o||!e;i=this.validateOneClickTradingAmount(i,n,o,!u),n.amount.amount=i,this.updateUnits(n)},_changeOneClickTradingUnits:function(e,n){var i=parseToFloat(n.amount.units),o=0,r=a.session.user.portfolio.availibleToTrade,s=t.getStepJump(i);"+"===e?i+=s:"-"===e&&(i-=s);var u=toFixed(n.amount.amount,2),m=e&&u===r||!e,l=n.instrument.getUnitMargin(!1);o=this.calculateAmount(i,l,n.risk.amount),o=this.validateOneClickTradingAmount(o,n,r,!m),n.amount.amount=o,this.updateUnits(n)},updateAmountPercent:function(t){var e=parseToFloat(t.amount.amount),n=a.session.user.portfolio.equity,r=toFixed(Math.abs(e/n*100),2);t.amount.extra=o(i.getLocale("execution.percentOfEquity"))({percent:toFixedSting(r,2)})},getRate:function(e,a,i){var o,r=n(e);if(r)o=e.position.OpenRate;else if(i)o=i;else{var s=e.marketMode===e.marketModeOptions.order?{Bid:toFixed(e.viewRate,e.instrument.Precision),Ask:toFixed(e.viewRate,e.instrument.Precision)}:this.getRateObject(e.instrument,e.isBuy,R);o=t.getClientViewRate(r,e.isBuy,s)}return e.marketMode===e.marketModeOptions.isMarket&&(o=t.calculateRate(o,2*(e.isBuy?1:-1),e.instrument.Precision)),o},getThresholdAmount:function(t){var e=Math.abs(parseToFloat(t.stopLoss.dollar)),n=c(t),a=toFixed(n*t.position.UnitsBaseValueDollars/100,2);return e-a+t.position.UnitsBaseValueDollars},calculateEditPositionMoneyTake:function(t){var e=c(t),n=toFixed(e*t.position.UnitsBaseValueDollars/100,2),a=parseToFloat(t.stopLoss.dollar),i=Math.abs(a),o=0>a;if(o){if(t.position.Amount!==t.position.UnitsBaseValueDollars){var r=this.getThresholdAmount(t);return Math.max(0,Math.max(r,t.position.UnitsBaseValueDollars)-t.position.Amount)}if(i>n)return toFixed(i-n,2)}return 0},calculateEditPositionMoneyGiveBack:function(t){var e=0,n=this.getThresholdAmount(t);return t.position.UnitsBaseValueDollars<t.position.Amount&&(e=Math.max(0,t.position.Amount-Math.max(n,t.position.UnitsBaseValueDollars))),0>e&&(e=0),e},calculateMoneyToTakeOrGiveBack:function(t){var e=this.calculateEditPositionMoneyGiveBack(t);return e>0?e*=-1:e=this.calculateEditPositionMoneyTake(t),e},calculateLeverageFee:function(t,e,n){if(!t.instrument)return 0;var a=t.instrument[e];return t.risk.amount>1&&(a=t.instrument[n]),void 0===a?0:a*t.amount.units},calculateMinPositionAmount:function(t,e,n,a,i){var o;return a?o=i:(o=!1,void 0!==n&&null!==n&&(o=this.isDiscountedRate(t,n,e))),o?t.MinPositionAmountAbsoluteDiscounted:Math.max(t.MinPositionAmount/e,t.MinPositionAmountAbsolute)},calculateMinPositionAmountForOpenExecutionForm:function(t){var n,a=t.Leverages,i=a[a.length-1],o=e.indexOf(a,i);return-1===o&&(i=g(a,i)),n=this.calculateMinPositionAmount(t,i),t.MinPositionAmountAbsoluteDiscounted?Math.min(t.MinPositionAmountAbsoluteDiscounted,n):n},isAbsoluteMinAmount:function(t,e){var n=t.MinPositionAmount/e,a=t.MinPositionAmountAbsolute;return a>=n},calculateExposure:function(t,e){return t*e},updateExposure:function(t){t.amount.exposure=this.calculateExposure(t.amount.amount,t.risk.amount)},calculateMaxUnits:function(e,n){if(n){var a=this._isOrderMode(n);if(a){var i=this.getRateObject(n.instrument,n.isBuy,R),o=n.isBuy,r=t.getClientViewRate(!1,o,i),s=n.viewRate;return this._calculateMaxUnitsOrder(e.MaxPositionUnits,r,s)}}return e.MaxPositionUnits},_calculateMaxUnitsOrder:function(t,e,n){return 0===n&&(n=1),t*e/n},checkAccountLiquidation:function(t){if(a.session&&a.session.user&&a.session.user.bsl&&a.session.user.bsl.executionBlocked&&a.session.user.bsl.isBslAvalible&&t&&t.instrument&&t.amount&&R){{var e=this.getRateObject(t.instrument,t.isBuy,R);(e.Ask-e.Bid)*t.amount.amount*R}if(a&&a.session&&a.session.user&&a.session.user.bsl){a.session.user.portfolio.equity-a.session.user.bsl.bonusAmount}}},_isOrderMode:function(t){return t&&t.marketModeOptions&&t.marketMode&&t.marketMode===t.marketModeOptions.order?!0:!1},_isEntryMode:function(t){return t&&t.marketModeOptions&&t.marketMode&&t.marketMode===t.marketModeOptions.isMarket?!0:!1},calculateUnitMargin:function(t,e){var n=this._isOrderMode(e),a=this.isDiscountedRate(t,e.isBuy,e.leverages.selectedLeverage);return n&&t.rate?this._calculateUnitMarginForOrder(e.viewRate,t.rate.ConversionRateBid):e.oneClickModel?t.getUnitMargin(!1):t.getUnitMargin(e.isBuy,a)},_calculateUnitMarginForOrder:function(t,e){return t*e},isLowLeverage:function(t,e,n){if(!t)return!1;var a=e?t.RealTradeBuyMaxLeverage:t.RealTradeSellMaxLeverage;return void 0!==a&&a>=n},isTRS:function(t,e,n){return t&&!this.isLowLeverage(t,e,n)&&t.IsCrypto&&e&&1===n&&t.IsNonRealAsTRS},getTradeActionDescriptorObject:function(t,e,n,a,i){var o=this.isLowLeverage(e,t,a),r=this.isMarginTradeLeverage(e,t,a),s=this.isTRS(e,t,a),u=e&&e.InstrumentTypeID;return{isCMT:r,isTRS:s,isReal:o,isBuy:t,source:i,leverage:a,instrument:e,isDemoMode:n,instrumentTypeID:u}},isMarginTradeLeverage:function(t,e,n){if(!t)return!1;var a=e?t.MarginTradeBuyMaxLeverage:t.MarginTradeSellMaxLeverage,i=e?t.RealTradeBuyMaxLeverage:t.RealTradeSellMaxLeverage;return void 0!==a&&void 0!==i&&n>i&&a>=n},getFirstLowLeverageObj:function(t,e){var n={index:-1,leverage:-1};if(t){var a=e?t.RealTradeBuyMaxLeverage:t.RealTradeSellMaxLeverage,i=t.Leverages;if(i&&a>0)for(var o=0;o<i.length&&n.index<0;o++)i[o]<=a&&(n.index=o,n.leverage=i[o])}return n},checkStopLossLimit:function(e){if(e&&e.instrument){var a;if(n(e))if(e.isBuy&&1===e.leverages.selectedLeverage){var i=t.calculateRate(0,1,e.instrument._Precision);a=this.getMaxRate(e,!0)<=i}else a=!1;else if(e.isBuy&&1===e.leverages.selectedLeverage)if(this._isEntryMode(e))a=e.isBuy?100===e.instrument.MaxStopLossPercentageNonLeveragedBuy:100===e.instrument.MaxStopLossPercentageNonLeveragedSell;else{var o=this.getMaxRate(e,!0),r=t.calculateRate(0,1,e.instrument._Precision);a=r>=o}else a=!1;a||(e.stopLoss.isNoStopLossSet=!1),e.stopLoss.isLimitLessReachable=a}},checkTakeProfitLimit:function(e){if(!e||!e.instrument)return!1;var a=!1;if(n(e)){if(1==e.leverages.selectedLeverage)if(e.isBuy)a=!0;else{var i=this.getMaxRate(e,!1),o=t.calculateRate(0,1,e.instrument._Precision);a=o>=i}}else{if(1===e.leverages.selectedLeverage)if(e.isBuy)a=!0;else if(this._isEntryMode(e))a=e.instrument.MaxTakeProfitPercentage>=100;else{var i=this.getMaxRate(e,!1),o=t.calculateRate(0,1,e.instrument._Precision);a=o>=i}a||(e.takeProfit.isNoTakeProfitSet=!1)}e.takeProfit.isLimitLessReachable=a},getMaxAmount:function(t,e){if(!t||!t.instrument)return 0;var a;if(n(t)){var i=p.getRate(t,e),o=this.getMaxRate(t,e);a=this.getAmountFromRate(t,i,o)}else a=e?toFixed(-1*(c(t)/100)*t.amount.amount,2):toFixed(t.instrument.MaxTakeProfitPercentage/100*t.amount.amount,2);return a},getMaxRate:function(e,a){if(!e||!e.instrument)return 0;var i,o=a?-1:1,r=o*e.amount.amount,s=this.getMinMaxRatesRange(e,r,a);if(n(e))if(a){var m=(t.calculateRate(0,1,e.instrument.Precision),this._getStopLossModel(e));i=e.isBuy?s.minRate:s.maxRate;try{d(m,m.stopLoss,!0,!1,i,!0)||(i=m.stopLoss.amount)}catch(l){u.error("execution calculator stop loss max rate error: "+(l||""))}}else i=e.isBuy?s.maxRate:s.minRate;else i=a?e.isBuy?s.minRate:s.maxRate:e.isBuy?s.maxRate:s.minRate;return i},isNoStopLoss:function(t){return t&&t.instrument&&1===t.risk.amount?this.isEndlessStopLoss(t):!1},isEndlessStopLoss:function(e){if(!e||!e.instrument)return!1;var a=t.getPrecisionByRate(e.instrument,0),i=!1;if(n(e))i=e.stopLoss.amount<=t.calculateRate(0,1,a);else if(this._isEntryMode(e)){var o=this.getMaxAmount(e,!0);i=e.stopLoss.dollar==o&&100===c(e)}else i=e.stopLoss.amount<=t.calculateRate(0,1,a);return i},isNoTakeProfit:function(t){return t&&t.instrument&&1===t.risk.amount?this.isEndlessTakeProfit(t):!1},isEndlessTakeProfit:function(e){if(!e||!e.instrument)return!1;var a=!1;if(n(e))a=e.isBuy?0===e.takeProfit.amount:e.takeProfit.amount<=t.calculateRate(0,1,e.position.Instrument.Precision);else if(this._isEntryMode(e))if(e.isBuy)a=0===e.takeProfit.dollar;else{var i=this.getMaxAmount(e,!1);a=e.takeProfit.dollar===i&&e.instrument.MaxTakeProfitPercentage>=100}else a=e.isBuy?0===e.takeProfit.amount:e.takeProfit.amount<=t.calculateRate(0,1,e.instrument.Precision);return a},_getStopLossModel:function(t){return{position:t.position,marketModeOptions:angular.extend({},t.marketModeOptions||{}),instrument:t.instrument,viewRate:t.viewRate,isBuy:t.isBuy,amount:{amount:t.amount.amount,units:t.amount.units},stopLoss:{amount:t.stopLoss.amount,dollar:t.stopLoss.dollar,inDollarMode:t.stopLoss.inDollarMode},leverages:{leverageIndex:t.leverages.leverageIndex,selectedLeverage:t.leverages.selectedLeverage}}},recalculateAmountAndUnitsClosePosition:function(t,e,n){R=t.position.Leverage,e?this._changeOpenPositionUnitsClosePosition(n,t):this._changeOpenPositionAmountClosePosition(n,t)},_changeOpenPositionAmountClosePosition:function(e,n){if(a.session&&a.session.user){var i=parseToFloat(n.amount.amount),o=t.getStepJump(i);"+"===e?i+=o:"-"===e&&(i-=o),i=this.validateAmountClosePosition(i,n.instrument,n),n.amount.amount=i,this.updateUnitsByRatio(n)}},_changeOpenPositionUnitsClosePosition:function(e,n){if(a.session&&a.session.user){var i=parseToFloat(n.amount.units);if(e){var o=t.getStepJump(i);"+"===e?i+=o:"-"===e&&(i-=o)}var r=this.calculateAmountByRatio(i,n.position);r=this.validateAmountClosePosition(r,n.instrument,n),n.amount.amount=r,this.updateUnitsByRatio(n)}},validateAmountClosePosition:function(t,e,n){var i=this.calculateMinPositionAmount(e,n.risk.amount,n.isBuy,!0,n.position.IsDiscounted),o=n.position.Equity,r=o-i,s=n.instrument.isUsTrade?this.calculateAmountByRatio(1,n.position):this.getMinAmountToClose(n);if(s>t&&(t=s,a.$broadcast("trading:executionCalculator:error",l("amount",{minAmountToClose:s},"partialCloseCurrentAmountLowerThanMin"))),t>r){if(t=r,n.instrument.isUsTrade){var u=this.calculateUnitMargin(e,n),m=this.calculateUnits(u,r,R);m=Math.floor(m);var c=this.calculateAmountByRatio(m,n.position);t=c,r=c}a.$broadcast("trading:executionCalculator:error",l("amount",{maxAmountToClose:r},"partialCloseCurrentAmountLargerThanMax"))}return t},isTherePartialClose:function(t){if(t){var e=this.calculateMinPositionAmount(t.instrument,t.risk.amount,t.isBuy,!0,t.position.IsDiscounted),n=t.position.Equity,a=n-e,i=this.getMinAmountToClose(t);if(t.instrument.isUsTrade){var o=this.calculateAmountByRatio(1,t.position);return n-o>e}return a-i>0}return!1},getMinAmountToClose:function(t){var e=t.position.IsDiscounted?t.instrument.MinPositionAmountAbsoluteDiscounted:t.instrument.MinPositionAmountAbsolute;if(!t.instrument.isUsTrade)return e;var n=(this.calculateUnitMargin(t.instrument,t),this.calculateAmountByRatio(1,t.position));return Math.max(e,n)}}}var i="bl.factories.trading.execution.executionCalculator",o=t(i,["bl.factories.trading.execution.tradingCalculator","infrastruct.services.localization"]),r=.5;return o.factory(i,["bl.factories.trading.execution.tradingCalculator","$rootScope","infrastruct.services.localization.localizeFactory","$interpolate","infrastruct.services.config","$log",a]),o});define(rA[57][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/openPosition/openPositionInsufficientFunds.view.html","text":"<div class=\"execution\"  data-etoro-locale-ns=\"openPositionInsufficientFunds\">    <div class=\"execution-head\">        <div class=\"head-buttons-ph\">            <a ng-click=\"closeThisDialog()\" class=\"head-button sprite close pointer\" automation-id=\"close-dialog-btn\"></a>        </div>        <div class=\"execution-head-title\">{{_headerTitle_}}</div>    </div>    <div class=\"execution-main\">        <div class=\"execution-copy-error execution-wrap\">            <span class=\"case-no-funds\">                <span class=\"execution-copy-image\"></span>                <b>{{_title_}}</b>                <span>{{_html(message)_}}</span>            </span>        </div>    </div>    <div class=\"execution-button-wrapper\" ng-if=\"uiDialogData.isRealAccount\">        <div class=\"execution-action-button\">            <a class=\"execution-button button-standard\" ng-click=\"uiDialogData.goToVirtualMode()\">{{_virtualPortfolioButtonText_}}</a>        </div>        <div class=\"execution-action-button\">            <a class=\"execution-button button-standard button-blue\" ng-click=\"uiDialogData.loadDeposit();closeThisDialog();\">{{_fundButtonText_}}</a>        </div>    </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[33][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/priceAlerts/openPriceAlert/openPriceAlert.view.html","text":"<div ng-controller='apps.priceAlerts.openPriceAlertCtrl' data-instrument-id=\"{{:: model.instrument.InstrumentID}}\"     data-instrument-rate=\"::model.instrument\" data-etoro-locale-ns=\"priceAlert\">    <div class=\"execution price-alert\" id=\"open-alert-view\" ng-class=\"{ 'weekend' : model.marketMode === 'isMarket' }\">        <div class=\"execution-head\">            <div class=\"price-alert-title\" ng-if=\"!model.inEditMode\">{{_setPriceAlertTitle_}}</div>            <div class=\"price-alert-title\" ng-if=\"model.inEditMode\">{{_updatePriceAlertTitle_}}</div>            <div class=\"head-buttons-ph\">                <a class=\"head-button sprite close pointer\" ng-click=\"closePopup()\" automation-id=\"close-dialog-btn\"></a>            </div>        </div>        <div ng-if=\"model.loading\" class=\"execution-main\">            <span class=\"execution-loading\"></span>        </div>        <div class=\"execution-main\" ng-show=\"!model.loading\"             ng-class=\"{ 'order-mode' : model.marketMode === 'isMarket' || model.marketMode === 'order' }\">            <div class=\"execution-wrap\">                <div class=\"execution-main-head\">                    <div class=\"execution-avatar-ph\">                        <img class=\"avatar\" ng-src=\"{{:: model.instrument.Avatars['default']}}\"                             alt=\"{{:: model.instrument.name}}\"/>                    </div>                    <div class=\"user-info stock-sell-buy\">                        <h1 class=\"user-nickname\">{{:: model.instrument.Name}}</h1>                        <span ng-if=\":: model.instrument.TypeID==4 || model.instrument.TypeID==2\"                          class=\"user-fullname\">{{:: model.instrument.DisplayName}}</span>                            <h2 ng-if=\":: model.instrument.TypeID!=4 &&  model.instrument.TypeID!=2\"                                class=\"user-fullname\">{{:: model.instrument.DisplayName}}</h2>                        <div class=\"execution-main-head-title-price\">                            <span class=\"execution-main-head-price-value\">{{model.viewRate | formatRate: model.instrument}}</span>                            <span ng-class=\"{'negative':  model.instrument.rate.Change.bidNumber('Daily') < 0, 'positive':  model.instrument.rate.Change.bidNumber('Daily') > 0}\">                                {{ model.instrument.rate.Change.bidNumber('Daily') | tofixed:  model.instrument.Precision}}                                ({{  model.instrument.rate.Change.bidPercent('Daily') | percentageparser }})                            </span>                        </div>                        <div class=\"disclaimer\">                            {{ $root.t.dynamic('market' , 'disclaimer.' +  model.instrument.ProviderPriceSource)}}                            {{ $root.t.dynamic('market' , 'disclaimer.Currency' + model.instrument.SellCurrencyID) + ' | '}} <i class=\"clock-icon\" ng-class=\"{'clock-open': model.instrument.IsActive, 'clock-close': !model.instrument.IsActive}\"></i>                            <span ng-bind-html=\"$root.t.dynamic('market', 'disclaimer.marketStateV2', model.instrument)\"></span>                        </div>                    </div>                </div>                <div class=\"price-alert-label\">                    <b>                        {{_alertTitle_}}                    </b>                </div>                <div>                    <div ng-if=\"model.stopLossModel.amount.inRateMode && !model.loading\">                        <div data-ui-input-number-incrementer=\"\"                             data-input-binding=\"model.stopLossModel.amount.moneyAmount\"                             data-formatter=\"rate\"                             data-formatter-options=\"{ getInstrumentPrecisionByRate: getInstrumentPrecisionByRate }\"                             data-on-change=\"stopLossMoneyChange\"                             data-on-blur=\"stopLossBlur\"                             data-on-focus=\"stopLossFocus\">                            <div data-area=\"title\">                                {{_setRate_}}                            </div>                            <div data-area=\"side\">                                <a class=\"button-standard stepper-switch\"                                   ng-click=\"switchMode()\">                                    <span class=\"switcher sprite\"></span>                                    {{_percentageToggleButton_}}                                </a>                            </div>                        </div>                    </div>                    <div ng-if=\"!model.stopLossModel.amount.inRateMode\">                        <div data-ui-input-number-incrementer=\"\"                             data-input-binding=\"model.stopLossModel.amount.percentDisplayAmount\"                             data-formatter=\"percent\"                             data-formatter-options=\"{precision: 1 }\"                             data-on-change=\"stopLossPercentChange\"                             data-on-blur=\"stopLossBlur\"                             data-on-focus=\"stopLossFocus\">                            <div data-area=\"title\">                                {{_setPercent_}}                            </div>                            <div data-area=\"side\">                                <a class=\"button-standard stepper-switch\"                                   ng-click=\"switchMode()\">                                    <span class=\"switcher sprite\"></span>                                    {{_rateToggleButton_}}                                </a>                            </div>                        </div>                    </div>                </div>            </div>        </div>        <div class=\"price-alert-button-wrapper et-flex-column et-flex-center\">            <div class=\"price-alert-action-button et-flex\" automation-id=\"price-alert-buttons-wrapper\">                <button ng-if=\"!model.inEditMode\" ng-class=\"{ 'ets-button-disabled': model.isLoading, 'ets-button-secondary': !model.isLoading }\"                    automation-id=\"price-alert-create-button\"                    ng-click=\"openPriceAlert()\" ng-disabled=\"model.actionDisabled\" class=\"ets-button-basic ets-button-big\">                    {{_createAlert_}}                </button>                <button ng-if=\"model.inEditMode\" ng-class=\"{ 'ets-button-disabled': model.isLoading, 'ets-button-secondary': !model.isLoading }\"                    automation-id=\"price-alert-update-button\"                    ng-click=\"updatePriceAlert()\" ng-disabled=\"model.actionDisabled\" class=\"ets-button-basic ets-button-big\">                    {{_updateAlert_}}                </button>                <button ng-if=\"model.inEditMode\" ng-class=\"{ 'ets-button-disabled': model.isLoading, 'ets-button-primary-var': !model.isLoading }\"                    automation-id=\"price-alert-remove-button\"                    ng-click=\"removePriceAlert()\" class=\"ets-button-basic ets-button-big\">                    {{_removeAlert_}}                </button>            </div>            <a ng-href=\"{{ _learnMoreLink_ }}\" target=\"_blank\" class=\"ets-link-secondary et-font-xs et-margin-top-m\"                automation-id=\"price-alert-learn-more-link\">                 {{ $root.t.dynamic('portfolioOpenPosition', 'educationalTradingLearnMore') }}            </a>        </div>    </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[495][0],["angular",rA[334][0],rA[381][0],rA[353][0],rA[487][0],rA[431][0],rA[323][0],rA[130][0],rA[128][0],rA[272][0],rA[129][0],rA[322][0],rA[127][0]],function(s,e,i,o,r,t,n,a,c,f,l,b,u){"use strict";var d=s.module("bl.factories.base.session",["ngCookies","ngRoute",i.name,o.ngModule.name,t.name]);return d.service("bl.factories.session.sessionFactory",n),d.service("bl.factories.session.sessionStorageFactory",f),d.service("bl.factories.session.userClassificationService",b),d.factory("bl.factories.session.headersInjector",a),d.factory("bl.factories.session.unAuthorizedInjector",c),d.factory("bl.factories.session.userClassificationInjector",l),d.factory("bl.factories.session.sessionAbTestHeadersInterceptor",u),d.config(["$httpProvider",function(s){s.interceptors.push("bl.factories.session.headersInjector"),s.interceptors.push("bl.factories.session.unAuthorizedInjector"),s.interceptors.push("bl.factories.session.userClassificationInjector"),s.interceptors.push("bl.factories.session.sessionAbTestHeadersInterceptor")}]),d.run(["bl.factories.session.userClassificationService",function(){}]),d});define(rA[431][0],["angular",rA[471][0],rA[487][0]],function(angular,loginModule,configModule){"use strict";function ToaEmbedService(n,t,e,i,o,l){var a=window.navigator.userAgent;this.$http=n,this.$rootScope=t,this.$location=e,this.$q=i,this.config=l,this.$injector=o,this.isToaEmbed=/One Account (IOS|Android)/gi.test(a),this._initialized=!1,this.init()}var mod=angular.module("infrastruct.services.toaEmbed",[loginModule.name,configModule.name]);return mod.service("infrastruct.services.toaEmbed",ToaEmbedService),ToaEmbedService.$inject=["$http","$rootScope","$location","$q","$injector","infrastruct.services.config"],ToaEmbedService.prototype={init:function init(){this.isToaEmbed&&!this._initialized&&(this._initialized=!0,this._setConfigOptions(),!function(window,undefined){function newApp(){var n={callbacks:{}},t=Array.prototype.slice,e=navigator.userAgent.toUpperCase();n.IS_ANDROID=-1!=e.indexOf("ANDROID"),n.IS_IOS=-1!=e.indexOf("IPHONE OS"),n.IS_WP=-1!=e.indexOf("WINDOWS")&&-1!=e.indexOf("PHONE"),n.IS_YZT=/One Account (IOS|Android)/gi.test(e),n.callbacks.__leftAction__=function(){var e="function"==typeof n.callbacks.leftAction,i=t.call(arguments);if(e)if(setTimeout(function(){n.callbacks.leftAction.apply(n.callbacks,i)},0),n.IS_ANDROID)n.call(["called"]);else if(n.IS_IOS)return!0};var i=0,o=function(n){return"function"==typeof n},l=function(n){return"object"==typeof n};return n.call=function(e){var a=t.call(arguments,1),c=e[e.length-1];if(n.IS_YZT)if(n.IS_ANDROID)if(window.HostApp){for(var s=[],u=0;u<a.length;u++)if(o(a[u])){var r=c+"Callback"+i;window[r]=a[u],s.push(r),i++}else s.push(l(a[u])?JSON.stringify(a[u]):a[u]);try{HostApp[c].apply(window.HostApp,s)}catch(f){var d=t.call(arguments,0);setTimeout(function(){n.call.apply(window.App,d)},300)}}else{var d=t.call(arguments,0);setTimeout(function(){n.call.apply(window.App,d)},1e3)}else if(n.IS_IOS){for(var h=[],u=0;u<a.length;u++)if(o(a[u])){var r=c+"Callback"+i;window[r]=a[u],h.push(r),i++}else a[u]&&h.push(a[u]);i++;var g=document.createElement("iframe"),p="callnative://"+c+"/"+(h&&h.length?encodeURIComponent(JSON.stringify(h))+"/"+i:"");console.log(p),g.src=p,g.style.display="none",document.body.appendChild(g),g.parentNode.removeChild(g),g=null}else{console.warn("Tips: No available environment WP");for(var u=0;u<a.length;u++)if(o(a[u]))return void a[u]({})}else{console.warn("Tips: No available environment, NO YZT");for(var u=0;u<a.length;u++)if(o(a[u]))return void a[u]({})}},n}function oldApp(){var callIndex=0,isIOSNative=navigator.userAgent.indexOf("One Account IOS")>-1,isAndroidNative=navigator.userAgent.indexOf("One Account Android")>-1,App={};return App.isIOS=isIOSNative,App.isAndroid=isAndroidNative,App.isNative=isIOSNative||isAndroidNative,App.isHighVersion=window.isChangeSkin?"true"!==window.isChangeSkin:!1,App.nativeCallbacks={},App.call=function(){function processArguments(n){for(var t=Array.prototype.slice.call(arguments,1),e="",i=null,o=0,l=t.length;l>o;o++)i=t[o],"undefined"==typeof i?i="":"function"==typeof i?(e=n+"_Callback"+callIndex++,window[e]=i,i=e):"object"==typeof i&&(i=JSON.stringify(i)),t[o]=encodeURI(i);return t}var call;return call=isIOSNative?function(n){var t=processArguments.apply(this,arguments);t=t.length?"/"+t.join("||"):"/",++callIndex;var e=document.createElement("iframe");e.style.display="none",e.src=/paone:\/\//gi.test(n)?n+t+"||"+callIndex:"native://"+n+t+"||"+callIndex,console.log(e.src),document.body.appendChild(e),document.body.removeChild(e),e=null}:isAndroidNative?function call(methodName){var args=processArguments.apply(this,arguments);try{for(var i=0,len=args.length;len>i;i++)args[i]="'"+args[i]+"'";eval("window.android."+methodName+"("+args.join(",")+")")}catch(e){console.log(e)}}:function(){}}(),App}window.App=newApp(),window.App.oldVersion=oldApp()}(window),function(n){function t(t){var e,i;t?(e=n.onpagehide,i=function(){n.YztApp&&n.YztApp.configureGoBack(!1)}):(e=n.onbeforeunload,i=function(){o(function(){n.YztApp&&n.YztApp.configureGoBack(!1)})}),e=e?function(){e.call(n),i()}:i,t?n.onpagehide=e:n.onbeforeunload=e}function e(n){return Object.prototype.toString.call(n)}function i(n){return"string"==typeof n?JSON.parse(n):n}function o(n,t){setTimeout(function(){n&&n()},t||0)}var l={},a=n.App,c="success",s="error",u="true",r="false",f=function(){var n,e;n=window.navigator.userAgent.match(/Toa\/(.+?)(;| )/),e=n?n[1]:"",this.isIOS=a.IS_IOS,this.isAndroid=a.IS_ANDROID,this.isYztApp=a.IS_YZT,this._menus=[],this._setShareData(),this._setShareIsAvailable(!0),this.isOldVersion=e&&"4.2.0">e,t(this.isIOS)};f.prototype={constructor:f,configureShare:function(n,t,e,i,a){n=n||{},n.successCallback="yztShareSuccessFn",n.failCallback="yztShareFailFn",l[n.successCallback]=function(n){o(function(){e&&e(n)})},l[n.failCallback]=function(n){o(function(){i&&i(n)})},this._setShareIsAvailable(t,a),this._setShareData(n)},_setShareData:function(n){l.getShareData=function(){return n="object"==typeof n?JSON.stringify(n):n,this.isIOS?n:void(this.isAndroid&&o(function(){a.call(["onGetShareData"],n)}))}.bind(this)},_setMenuActions:function(){var n=this._menus.length?this._menus:[];this.isAndroid&&o(function(){a.call(["onGetMenuVariableActions"],JSON.stringify(n))}),l.getMenuVariableActions=function(){return this.isIOS?JSON.stringify(n):void(this.isAndroid&&o(function(){a.call(["onGetMenuVariableActions"],JSON.stringify(n))}))}.bind(this)},_setShareIsAvailable:function(n,t){this._setMenuActionConfig("share",n,t)},_setMenuActionConfig:function(n,t,e){t=t?u:r,e=e?u:r,this._menus.length?this._menus.forEach(function(i){i.feature===n&&(i.enable=t,i.isNeedLogin=e)}):this._menus.push({feature:n,enable:t,isNeedLogin:e}),this._setMenuActions()},callShareToFunc:function(n,t){a.call(["shareTo"],{shareType:n||"0"}),t&&this._setShareData(t)},callShareAllFunc:function(n){a.call(["shareAll"],function(n){console.log(n)},function(n){console.log(n)},{}),n&&this._setShareData(n)},accessNativeModule:function(n,t,e){a.call(["openURL"],function(n){t&&t(n?c:s,n)},function(n){t&&t(s,n)},{url:n,isClearPath:!!e})},getLoginStatus:function(n){a.call(["checkLoginStatus"],function(t){n&&n(c,i(t))},function(t){n&&n(s,t)},{})},getDeviceInfo:function(n){a.call(["sendMessage"],function(t){n&&n(c,i(t))},function(t){n&&n(s,t)},["getDeviceInfo"])},getGPParams:function(n){a.call(["getPublicParameters"],function(t){n&&n(c,i(t))},function(t){n&&n(s,t)},{})},setTitle:function(n){a.call(["setNavTitle"],{title:n||""}),document&&(document.title=n)},getSSOTicket:function(n){a.call(["sendMessage"],function(t){n&&n(c,i(t))},function(t){n&&n(s,t)},["getSSOTicket"])},getNativeInfo:function(n){this.isOldVersion?a.oldVersion.call("getNativeInfo",function(t){n&&n(i(t))}):a.call(["getNativeInfo"],function(t){n&&n(i(t))},function(t){n&&n(t)},{})},showOrHideNav:function(n){a.call(["showNavigationBar"],null,null,{show:!!n})},showOrHideNavMoreBtn:function(n){a.call(["showRightBarButtonItem"],null,null,{show:!!n})},ubt:function(n,t,e){a.call(["talkingData"],null,null,{eventId:n||"",label:t||"",params:e||{}})},showLoading:function(){a.call(["showProgress"],null,null,null)},hideLoading:function(){a.call(["hideProgress"],null,null,null)},showToast:function(n){a.call(["showSuccessMsg"],null,null,{message:n||""})},disableSwipeBack:function(){this.isIOS&&a.oldVersion.call("paone://leftSlipBackDisabled")},callLogin:function(){this.isOldVersion?a.call(["goToLogin"],null,null,null):this.accessNativeModule("patoa://pingan.com/login",null,!1)},updateUserIndentify:function(){a.call(["setUserIndentity"],null,null,null)},resetPassword:function(){a.call(["resetLoginPassword"],null,null,null)},configureGoBack:function(n,t){a.call(["isNeedJSBack"],null,null,{status:n?u:r});var e=function(){window.history.back()};t&&(e=function(){o(t)}),a.goBackAction=e},showOrHideCloseBtn:function(n){a.call(["closeBtnControl"],null,null,{status:n?u:r})},setWebviewBg:function(n){var t="";n&&(t=n.split("#"),t&&t.length>1&&(n=t[1]),a.call(["setBackgroundColor"],null,null,{backgroundColor:n}))},getAccessTicket:function(n){a.call(["getAccessTicket"],function(t){n&&n(c,i(t))},function(t){n&&n(s,i(t))},{})},closeWebAndRefresh:function(){a.call(["closeWebAndRefresh"],null,null,{needRefresh:!0})},setWebviewBounce:function(n){n!==!1&&(n=!0),this.isIOS&&a.call(["setWebViewBounce"],null,null,{enableBounce:n})},configureRightBtns:function(n){a.call(["setRightButtons"],null,null,{rightButtonsArray:n})},getUserNickname:function(n){a.call(["getUserNickname"],function(t){n&&n(c,i(t))},function(t){n&&n(s,i(t))},{})},selectContact:function(n){a.call(["getSingleContact"],function(t){n&&n(c,i(t))},function(t){n&&n(s,i(t))},{})},getUserCardInfo:function(n){a.call(["getIdCardInfo"],function(t){n&&n(c,i(t))},function(t){n&&n(c,i(t))},{})},setNavStyle:function(n,t){var i=e(n);"[object String]"===i?a.call(["setNavStyle"],null,null,{bgColor:n,alpha:t||1}):"[object Object]"===i?a.call(["setNavStyle"],null,null,n):console.warn("")}},n.YztApp=new f,n.nativeCallback=l}(window),window.module&&(module.exports=window.YztApp),this.$rootScope.$on("$routeChangeSuccess",this._routeChangeSuccessHandler.bind(this)),this.$rootScope.$on("logout:success",this.closeWebView.bind(this)))},login:function(){return this.getSSOTicket().then(this._changeSSOTokenToSTS.bind(this))},getSSOTicket:function(){return window.YztApp?this.$q(function(n,t){window.YztApp.getSSOTicket(function(e,i){"success"===e&&i&&i.SSOTicket?n(i):(window.YztApp.callLogin(),t())},t)}):this.$q.reject()},setTitle:function(n){setTimeout(function(){try{window.YztApp&&window.YztApp.setTitle(n)}catch(t){}},500)},showCloseButton:function(){setTimeout(function(){try{window.YztApp&&window.YztApp.showOrHideCloseBtn(!0)}catch(n){}},500)},closeWebView:function(){setTimeout(function(){try{window.YztApp&&window.YztApp.closeWebAndRefresh(function(){})}catch(n){}},500)},_changeSSOTokenToSTS:function(n){var t=this.$injector.get("bl.factories.login.loginFactory");return t.loginWithToaTicket(n)["catch"](this._handleChangeError.bind(this))},_handleChangeError:function(n){return this.$q(function(t,e){var i="STSUnExpectedError";n&&n.data&&angular.isString(n.data.failureReason)&&(i=n.data.failureReason),"External_Toa_NotExistsInEtoro"===i&&(this.loginErrorData=n.data.toaData,this.$location.path("/accounts/sign-up")),e()}.bind(this))},_routeChangeSuccessHandler:function(){this.setTitle("e"),this.showCloseButton()},_setConfigOptions:function(){this.config.statics.isFacebookConnectEnabled=!1,this.config.statics.isGoogleConnectEnabled=!1,this.config.statics.isWechatConnectEnabled=!1,this.config.statics.isToaConnectEnabled=!1,this.config.statics.isSocialConnectEnabled=!1}},mod});define(rA[471][0],["angular",rA[430][0],rA[345][0],rA[487][0],rA[476][0]],function(e,i,a,r,s){"use strict";var t=e.module("bl.factories.login",[a.name,r.name,s.name]);return t.config(["$provide","infrastruct.services.configProvider",function(e,i){var a=i.getConfig();e.value("requestedScopes",a.statics.login.requiredScopes),e.value("getwayAppId",a.statics.login.gatewayAppId);var r="file:"===window.location.protocol?"file://":a.calculated.baseUrl;e.value("applicationDomain",r)}]),t.service("qs",i),t});define(rA[430][0],["angular","underscore",rA[191][0]],function(t,e,n){"use strict";function r(r,i){function a(t,e,r){t=t||{},this.level=e?e:"error",t=t||{},t instanceof a?(this.ancestor=t.ancestor,this.parent=t,this.index=t.index,this.data=t.data,this.childrenNum=0,this.type=t.type):(this._guid=r?r:n(),this.ancestor=this,this.childrenNum=0,this.index="1",this.data={},t.hasOwnProperty("data")&&(this.data=t.data,delete t.data),this.parent=null,this.type=t.hasOwnProperty("type")?t.type:"",this.setContext(t,e,1))}function s(t){return r(function(e,n){t(e,function(t,e,r){var i=t;t instanceof a||(i=new a(t,e,r)),n(i)})})}function o(){var t=r.defer();return t.reject=c(t,t.reject),t}function c(t,e){return function(n,r,i){n instanceof a||(n=new a(n,r,i)),e.call(t,n)}}return window.tempAppLog=a,a.prototype={setContext:function(t,n,r){var a=r?this:this.clone();a.parent&&(a.parent.childrenNum++,a.index=a.parent.index+"."+a.parent.childrenNum,t.hasOwnProperty("data")&&(a.data=t.data,delete t.data)),a.type=t.type?t.type:a.type,n=n?n:a.level,t.ActionGUID=a.guid,t.ActionIndex=a.index;var s="error"===n?["AppError"]:["AppLog"];return e.has(t,"Categories")||(t.Categories=s),i.logJSON(n,"log",t),a},get guid(){return this.ancestor._guid},clone:function(){var t=new a(this,this.level);return t}},t.extend(s,r),s.defer=o,s}return r.$inject=["$q","$log"],r});define(rA[323][0],["angular"],function(t){"use strict";function e(t,e,i,n,o,a,s,r,c,u,g,h,l){this.sessionStorage=u,this.localizeFactory=c,this.toaEmbedService=g,this.localStorage=r,this.config=s,this.requestedScopes=h,this.$rootScope=t,this.$location=e,this.$route=i,this.$log=n,this.$q=o,this.$cookies=a,this.$injector=l,this.restored=!1,this._initDeffered=null,t.$on("logout:success",this.destroy.bind(this)),t.$on("app:maintenance",this.destroy.bind(this)),t.$on("user:settings:revoke:success",this._removeApplicationLoginData.bind(this))}return e.$inject=["$rootScope","$location","$route","$log","$q","$cookies","infrastruct.services.config","infrastruct.services.localStorage","infrastruct.services.localization.localizeFactory","bl.factories.session.sessionStorageFactory","infrastruct.services.toaEmbed","requestedScopes","$injector"],e.prototype={get user(){return this._user},get token(){return this.stsData&&this.stsData.accessToken},get csrfToken(){return this._csrfToken||(this.stsData&&this.stsData.antiCsrfToken?(this._csrfToken=this.stsData.antiCsrfToken,this.localStorage.setItem("cToken",this._csrfToken)):this.config.query.ctoken?(this._csrfToken=this.config.query.ctoken,this.localStorage.setItem("cToken",this._csrfToken)):this._csrfToken=this.localStorage.getItem("cToken")),this._csrfToken},get authenticationToken(){return this.authenticationData&&this.authenticationData.accessToken},get deviceToken(){return this.deviceAuthData&&this.deviceAuthData.token},get stsData(){return this._stsData},get authenticationData(){return this._authenticationData},get deviceAuthData(){return this._deviceAuthData},get appInfoData(){return this._appInfoData},get isLoggedIn(){return!!this.user&&!!this.stsData},get locale(){return this.localizeFactory.language},get userRole(){return this.isLoggedIn?"user":"guest"},create:function(t){return this.setSts(t)},setSts:function(e){if(!t.isObject(e))return this.$q.reject(new AppError("try to create session with empty data","sessionFactory","STS_ERROR",null));var i=this;return this._stsData=e,this.sessionStorage.saveApplicationLoginData(this).then(function(){return i.$q.resolve(e)})},restore:function(){var t=this;return this._initDeffered?this._initDeffered:(t._updatePerformanceData("appRestoreStart"),this._initDeffered=this.$q(function(e,i){{var n=function(n){return function(){t.restored=!0,t._updatePerformanceData("appRenderStarAfterSessionRestore"),n?e():i(),t.isLoggedIn&&t._updatePerformanceData("appRenderStarAfterAutoLogin")}};t.$injector.get("bl.factories.login.loginFactory")}t.signupLogin().then(n(!0))["catch"](function(){t.createAndOpenVault()["finally"](function(){t.localStorageApplicationLogin().then(n(!0))["catch"](function(){t.localStorageAuthentication().then(n(!0))["catch"](function(){t.secureStorageDeviceLogin().then(n(!0))["catch"](function(){t.autoLogin().then(n(!0))["catch"](function(){t.toaLogin().then(n(!0))["catch"](n(!1))})})})})})})}))},getAppInfo:function(){var t=this.$injector.get("bl.factories.login.loginFactory");return t.getAppInfo()},createAndOpenVault:function(){if(!this.config.dynamics.isWrapper)return this.$q.resolve();var t=this.$injector.get("auth.biometricLoginService");return t.initVault()},localStorageApplicationLogin:function(){var t=this;return this.duringLocalStorageApplicationLogin=!0,this.getAppInfo().then(function(e){return t.setApplicationData(e),t.sessionStorage.getApplicationLoginData(e.applicationId).then(function(e){if(!e||!e.accessToken||t._isApplicationTokenExpired(e.expirationUnixTimeMs))return t.$q.reject();if(t._restoreAuthenticationData()["catch"](function(){}),t._restoreDeviceAuthData()["catch"](function(){}),t.config.dynamics.isRefreshTokenEnabled){var i=t.$injector.get("bl.factories.login.loginFactory");i.startRefreshTokenTimer(e.expirationUnixTimeMs)}var n=t.$injector.get("bl.factories.login.permissions.approval");return n.hasMissingPermissions(t.requestedScopes,e.accessToken).then(function(i){return i.hasMissingScopes?(t.setApplicationData(i),t.$q.reject()):t._login({source:{type:"auto"},timerData:{label:"reloginFunnel"},logData:{ReLogin:!0,SilentLogin:!1},tracking:{Type:"Auto"}},e)})})})["finally"](function(){t.duringLocalStorageApplicationLogin=!1})},localStorageAuthentication:function(){var t=this,e=this.$injector.get("bl.factories.login.loginFactory"),i=this.$injector.get("bl.factories.login.permissions.approval");return this._restoreAuthenticationData().then(function(){return t._restoreDeviceAuthData()["catch"](function(){}),i.hasMissingPermissions(t.requestedScopes).then(function(i){return i.hasMissingScopes?(t.setApplicationData(i),t.$q.reject()):e.refreshToken().then(function(e){return t._login({source:{type:"auto exchange"},timerData:{label:"reloginFunnel"},logData:{ReLogin:!0,SilentLogin:!1,AutoExchange:!0},tracking:{Type:"Auto"}},e)})})})},secureStorageDeviceLogin:function(){if(!this.config.dynamics.isWrapper)return this.$q.reject();var t=this.$injector.get("auth.biometricLoginService"),e=t.getSavedBioData(),i=t.getLastUserGcid();if(!e[i]||!e[i].hasBio)return this.$q.reject();var n=this,o=this.$injector.get("bl.factories.login.permissions.approval");return this._restoreDeviceAuthData().then(function(){return o.hasMissingPermissions(n.requestedScopes).then(function(e){return e.hasMissingScopes?(n.setApplicationData(e),n.$q.reject()):t.biometricLogin().then(function(t){return n._login({source:{type:"auto device"},timerData:{label:"reloginFunnel"},logData:{ReLogin:!0,SilentLogin:!1},tracking:{Type:"Auto"}},t)})})})},_updatePerformanceData:function(t){window.eToroLoadPerformance&&window.eToroLoadPerformance.setTime(t)},_restoreAuthenticationData:function(){var t=this;return this.getAppInfo().then(function(e){return t.setApplicationData(e),t.sessionStorage.getAuthenticationData().then(function(e){return e&&e.accessToken?(t.setAuthenticationData(e,!0),e):t.$q.reject()})})},_restoreDeviceAuthData:function(){var t=this,e=this.$injector.get("auth.secureStorageService");if(!this.config.dynamics.isWrapper)return this.$q.resolve();var i=this.$injector.get("auth.biometricLoginService"),n=i.getSavedBioData(),o=i.getLastUserGcid(),a=n[o]&&n[o].hasBio;return a?t.sessionStorage.getDeviceAuthData().then(function(i){return i&&i.token?t.setDeviceAuthData(i):e.isUserCanceled?t.$q.reject():(n[o].hasBio=!1,e.isUserCanceled=!1,t.localStorage.setItem("bioData",n),t.$log.logJSON("error","log",{Categories:["Login","Biometrics"],Message:"Deactivating biometric user - device token is invalid for biometric user",failureReason:i?"No token":"No device auth data"}),t.$injector.get("bl.factories.notifications.infraNotificationsService").biometricTypeChangeError(),e.initializeVault()["finally"](function(){return t.$q.reject()}))}):this.$q.resolve()},autoLogin:function(){var t=this.config.initialParams.loginData,e=this;return t&&t.accessToken?(delete this.config.initialParams.loginData,this.getAppInfo().then(function(i){return e.setApplicationData(i),e._login({source:{type:"silent"},timerData:{label:"silentLoginFunnel"},logData:{ReLogin:!1,SilentLogin:!0},tracking:{Type:"Silent"}},t)})):this.$q.reject()},manualLogin:function(t,e){var i=Math.random().toString(36).slice(2),n=this;return t&&t.accessToken?this.getAppInfo().then(function(o){return n.setApplicationData(o),n._login({source:{type:"manual"},timerData:{label:"loginFunnel"},logData:{ReLogin:!1,SilentLogin:!1,TypedUsername:e,Username:e,LoginID:i},tracking:{TypedUsername:e,Type:"Manual",category:"login",label:"login"}},t)}):this.$q.reject()},signupSocialLogin:function(t){var e=this.$injector.get("bl.factories.login.loginFactory"),i=this;return!t&&this.sessionStorage.hasRegistrationData&&(t=this.sessionStorage.getRegistrationData()),t&&t.accessToken?(this.setAuthenticationData(t),this.getAppInfo().then(function(n){return i.setApplicationData(n),t.missingScopes&&t.missingScopes.length>0?(i.setApplicationData({hasMissingScopes:!0,missingScopes:t.missingScopes}),i.$q.reject()):e.refreshToken().then(function(t){return i._login({source:{type:"socialRegistration"},timerData:{label:"socialRegistrationFunnel"},logData:{ReLogin:!1,SilentLogin:!0},tracking:{Type:"SSO"}},t)})})):this.$q.reject()},signupLogin:function(t){return this._signupLogin(t)},_signupLogin:function(t){var e=this;return!t&&this.sessionStorage.hasRegistrationData&&(t=this.sessionStorage.getRegistrationData()),t&&t.accessToken?(this.setAuthenticationData(t),this.localStorage.setItem("isRegistered",!0),this.getAppInfo().then(function(i){if(e.setApplicationData(i),t.missingScopes&&t.missingScopes.length>0)return e.setApplicationData({hasMissingScopes:!0,missingScopes:t.missingScopes}),e.$q.reject();var n=e.$injector.get("bl.factories.login.loginFactory");return n.refreshToken().then(function(t){return e._login({source:{type:"registration"},timerData:{label:"registrationLoginFunnel"},logData:{ReLogin:!1,SilentLogin:!0},tracking:{Type:"Registration"}},t)})})):this.$q.reject()},toaLogin:function(){var t=this,e=this.toaEmbedService;return e.isToaEmbed?this.getAppInfo().then(function(i){return t.setApplicationData(i),e.login().then(function(e){return t._login({source:{type:"toaSSO"},timerData:{label:"toaSSOLoginFunnel"},logData:{ReLogin:!1,SilentLogin:!1},tracking:{Type:"TOASSO"}},e)})}):this.$q.reject()},isAuthorized:function(e){return t.isArray(e)||(e=[e]),-1!==e.indexOf(this.userRole)},isInMaintenance:function(t){return!!this.config.dynamics.apisMaintenance[t]},setApplicationData:function(e){this._appInfoData?t.extend(this._appInfoData,e):this._appInfoData=e},setAuthenticationData:function(e,i){var n=this;return t.isObject(e)?(this._authenticationData=e,i?this.$q.resolve(e):this.sessionStorage.saveAuthenticationData(this).then(function(){return n.$q.resolve(e)})):this.$q.reject(new AppError("try to create authentication data with empty data","sessionFactory","STS_ERROR",null))},setDeviceAuthData:function(t){this._deviceAuthData=t;var e=this;return this.sessionStorage.saveDeviceAuthData(t).then(function(){return e.$q.resolve(t)})},assertMaintenance:function(t){return this.isInMaintenance(t)?(this.$injector.get("bl.factories.notifications.infraNotificationsService").appMaintenanceServiceError({service:t}),!0):!1},assertIsAuthorized:function(t){return t||(t="user"),this.isAuthorized(t)?!0:"signup"===this.config.query.funnel?(this.$location.path("/accounts/sign-up"),!1):(this.$location.path("/login"),!1)},destroy:function(t,e){this._destroy(e)},_isApplicationTokenExpired:function(t){return this.config.dynamics.isRefreshTokenEnabled?!1:Date.now()>=t},_login:function(e,i){var n=t.extend({Message:"Login success"},e.logData,{Categories:["Login"]});return this.$log.logJSON("info","log",n),this.create(i).then(function(t){return this._setRedirectCookie(),t}.bind(this))},_destroy:function(t){var e=this;this._removeLoginData(t).then(function(){e.duringLocalStorageApplicationLogin||(e._initDeffered=null),e._stsData=null,e._user=null,e._csrfToken=null})["catch"](function(){})},_removeApplicationLoginData:function(t,e){e&&e.application&&this.sessionStorage.removeApplicationLoginData(e.application)},_removeLoginData:function(t){var e=!(!t||!t.isManual),i=!(!t||!t.isAuthTokenUnauthorized);return i?this.sessionStorage.removeAuthenticationData():e&&this.appInfoData.isInternal?this.sessionStorage.removeLoginData():this.sessionStorage.removeApplicationLoginData(this.appInfoData)},_setRedirectCookie:function(){var t=new Date;t.setFullYear(2100),this.$cookies.put("etoroHPRedirect","1",{path:"/",expires:t})}},e});define(rA[130][0],[],function(){"use strict";function e(e,t,i,n){var o={request:function(o){function s(){try{return/embed/.test(window.location.href)}catch(e){}}var a=e.session,r=t.dynamics.urls.staticApiUrl;if(o.timeout=o.timeout||3e4,!t.dynamics.disableStaticAPI&&o.staticAPI===!0)return-1===o.url.indexOf(r)&&(o.url=r+o.url),o;if(o.addHeaders===!1)return o;var c=o.addHeaders||{},u=o.headers;if(0!=c.accountType&&(u.AccountType||(u.AccountType=a.isLoggedIn&&a.user&&a.user.portfolio&&a.user.portfolio.account&&a.user.portfolio.account.type?a.user.portfolio.account.type:"Real")),0!=c.auth&&(0!=c.csrfToken&&a.csrfToken&&(u["X-CSRF-TOKEN"]=a.csrfToken),c.authenticationToken&&a.authenticationToken?u.Authorization=a.authenticationToken:c.deviceToken&&a.deviceToken?u.Authorization=a.deviceToken:a.token&&(u.Authorization=a.token)),0!=c.appInfo&&(u.ApplicationIdentifier=t.statics.ApplicationIdentifier,u.ApplicationVersion=t.statics.ApplicationVersion,t.statics.httpConfig&&t.statics.httpConfig.withCredentials)){var d=t.dynamics.http&&t.dynamics.http.withCredentialsRoutes;d&&("*"===d||o.url.match(new RegExp(d,"gi")))&&(o.withCredentials=!0)}return c.gatewayAppId&&(u["X-STS-GatewayAppId"]=i),c.appDomain&&(u["X-STS-AppDomain"]=n),c.refreshToken&&!s()&&t.dynamics.isRefreshTokenEnabled&&(u["X-STS-JWT"]=!0),0!=c.deviceId&&(u["X-STS-DeviceId"]=t.dynamics.userSession),0!=c.sessionId&&(u["X-Session-Id"]=t.dynamics.sessionGuid),o}};return o}return e.$inject=["$rootScope","infrastruct.services.config","getwayAppId","applicationDomain"],e});define(rA[128][0],[],function(){"use strict";function e(e,t,n,i,o){function r(n){window.startTimeStempFromLoginBTN=void 0,window.startTimeStempEver=void 0;var i=t.path();e.$broadcast("logout:success",{isAuthTokenUnauthorized:n}),i&&"/login"!==i&&(o.query.next=encodeURI(t.url())),t.url("/login").search(t.search())}function a(e,t){if(!c){var o=n.get("bl.factories.login.loginFactory");c=o.refreshToken()}return c.then(function(t){return c=null,e.headers.Authorization=t.accessToken,e})["catch"](function(){return c=null,r(t),i.reject({data:{error:{failureReason:"refreshTokenUnauthorized"}},status:401,config:e})})}function s(t){var o=n.get("$http");return i(function(i,r){var a=n.get("uiDialog");a.open({plain:!0,template:'<et-elevation-dlg [dialog-reason]="uiDialogData.dialogReason" (on-close)="closeThisDialog();uiDialogData.onClose()" (on-success)="closeThisDialog();uiDialogData.onSuccess(sts)"></et-elevation-dlg>',data:{dialogReason:e.session.user.isAccountClosureInProcess?"closeAccount":"passwordConfirmation",onSuccess:function(){i(o(t.config))}.bind(this),onClose:function(){r(t)}.bind(this)},isNewDesign:!0})})}function u(e){var t=n.get("auth.secureStorageService"),o=n.get("auth.biometricLoginService"),r=n.get("$http");return t.showBioPrompt().then(function(){return o.biometricLogin().then(function(){return r(e.config)})["catch"](function(){return n.get("auth.loginNotifications").elevationBioLoginFalied(),i.reject(e)})})["catch"](function(){return s(e)})}var c=null;return{request:function(t){var n=!(!t.addHeaders||!t.addHeaders.authenticationToken),s=t.headers.Authorization;if(!s||!o.dynamics.isRefreshTokenEnabled)return t;var u=e.session.stsData,c=e.session.authenticationData;if(c&&c.expirationUnixTimeMs){var f=Date.now()>c.expirationUnixTimeMs-3e5;if(f)return r(n),i.reject({data:{error:{failureReason:"refreshTokenUnauthorized"}},status:401,config:t})}if(u&&u.expirationUnixTimeMs&&!n){var f=Date.now()>u.expirationUnixTimeMs;if(f)return a(t)}return t},responseError:function(t){var c=t.config||{},f=!(!c.addHeaders||!c.addHeaders.authenticationToken),l=!(!c.headers||!c.headers.Authorization),d=e.session.stsData&&e.session.stsData.expirationUnixTimeMs,h=n.get("$http");if(t&&t.status&&401===t.status){if("Partial"===t.headers("x-unauthorizedstatus")){var g=n.get("auth.biometricLoginService"),v=o.dynamics.isWrapper;return v&&g.isCurrUserBioEnabled()?u(t):s(t)}if(f||!o.dynamics.isRefreshTokenEnabled)r(f);else if(l&&d&&Date.now()>d)return a(t.config,f).then(function(e){return h(e)})}return i.reject(t)}}}return e.$inject=["$rootScope","$location","$injector","$q","infrastruct.services.config"],e});define(rA[272][0],["underscore"],function(t){"use strict";function e(t,e,a,i,n,o){this.localStorage=t,this.sessionStorage=e,this.$cookies=i,this.ETORO_APP_ID=1,this.$injector=n,this.$q=o,this.config=a}return e.$inject=["infrastruct.services.localStorage","infrastruct.services.sessionStorage","infrastruct.services.config","$cookies","$injector","$q"],e.prototype={get rememberMe(){return this.localStorage.getItem("rememberMe")!==!1},get hasRegistrationData(){return!!this.$cookies.get("regData")},getLoginObject:function(){return this._getStorage().getAsyncEncodedItem("loginData").then(function(t){return t?t:null})},getDeviceLoginObject:function(){return this._getStorage().getAsyncEncodedItem("deviceLoginData").then(function(t){return t?t:null})},getAuthenticationData:function(){var t=this;return this.getLoginObject().then(function(e){return t._isValidAuthenticationData(e)?e.authenticationData:null})},getApplicationLoginData:function(t){var e=this;return this.getLoginObject().then(function(a){return t===e.ETORO_APP_ID?e._isValidApplicationLoginData(a,t)||e._isValidOldLoginData(a)?a["stsData_app_"+t]||a.stsData:null:e._isValidApplicationLoginData(a,t)?a["stsData_app_"+t]:null})},getDeviceAuthData:function(){var t=this;return this.getDeviceLoginObject().then(function(e){return t._isValidDeviceAuthData(e)?e.deviceAuthData:null})},getRegistrationData:function(){var t=this.$cookies.get("regData"),e=JSON.parse(window.atob?window.atob(t):t);return this._isValidAuthenticationData(e)?(this.$cookies.remove("regData"),e.authenticationData):null},saveApplicationLoginData:function(e){var a,i={};if(e&&e.appInfoData&&e.stsData){a=e.appInfoData.applicationId,i["stsData_app_"+a]=e.stsData,a===this.ETORO_APP_ID&&(i.stsData=e.stsData);var n=this;return this.getLoginObject().then(function(e){return n._getStorage().setAsyncEncodedItem("loginData",t.extend(e||{},i))})}return this.$q.resolve()},saveAuthenticationData:function(t){var e=this;return this.removeLoginData().then(function(){return t&&t.authenticationData?e._getStorage().setAsyncEncodedItem("loginData",{authenticationData:t.authenticationData}):void 0})},saveDeviceAuthData:function(t){return this._getStorage().setAsyncEncodedItem("deviceLoginData",{deviceAuthData:t})},removeApplicationLoginData:function(t){if(t){var e=this;return this.getLoginObject().then(function(a){var i=t.applicationId;return a?(delete a["stsData_app_"+i],i===e.ETORO_APP_ID&&delete a.stsData,Object.keys(a).length>0?e._getStorage().setAsyncEncodedItem("loginData",a):e.removeLoginData()):void 0})}return this.$q.resolve()},removeAuthenticationData:function(){var t=this;return this.getLoginObject().then(function(e){return e?(delete e.authenticationData,Object.keys(e).length>0?t._getStorage().setAsyncEncodedItem("loginData",e):t.removeLoginData()):void 0})},removeLoginData:function(){this.localStorage.removeItem("loginData"),this.sessionStorage.removeItem("loginData");var t=this.$injector.get("auth.secureStorageService");return t.isVaultExist&&!t.isVaultLocked&&t.removeItem("loginData"),this.$q.resolve()},_getStorage:function(){var t=this.$injector.get("auth.secureStorageService");return t.isVaultExist&&!t.isVaultLocked?t:this.rememberMe?this.localStorage:this.sessionStorage},_isValidAuthenticationData:function(t){if(!t||!t.authenticationData)return!1;var e=t.authenticationData;if(isNaN(e.expirationUnixTimeMs)||new Date(e.expirationUnixTimeMs)<=new Date)return!1;var a=this.localStorage.getItem("bioData")||{},i=this.localStorage.getItem("lastUserGcid"),n=a[i]&&a[i].hasBio;return this.config.dynamics.isWrapper&&n&&new Date(e.expirationUnixTimeMs)<=new Date(Date.now()+432e5)?!1:!0},_isValidApplicationLoginData:function(t,e){if(!t||!t["stsData_app_"+e])return!1;var a=t["stsData_app_"+e];return isNaN(a.expirationUnixTimeMs)||new Date(a.expirationUnixTimeMs)<=new Date?!1:!0},_isValidDeviceAuthData:function(t){return t&&t.deviceAuthData},_isValidOldLoginData:function(t){return t&&t.stsData?isNaN(t.stsData.expirationUnixTimeMs)||new Date(t.stsData.expirationUnixTimeMs)<=new Date?!1:!0:!1}},e});define(rA[129][0],[],function(){"use strict";function e(e,s,n,i,r,t,a){function o(s){if(s&&s.isInMaintenance&&s.MaintenanceRedirectUrl){var n=e.session&&e.session.user&&e.session.user.username||"Visitor";i.eventTrack("Login - Error",{Reason:"Throttling",Username:n}),a.navigate(s.MaintenanceRedirectUrl)}}return{request:function(s){var n=t.dynamics;return n.userCalssification&&s.addHeaders!==!1&&(n.disableStaticAPI||s.staticAPI!==!0)?(s.headers["X-Etoro-U-Class"]=r.info.uClass,s.headers["X-Etoro-U-In-App"]=e.session.isLoggedIn,s):s},responseError:function(e){return e&&503===e.status&&e.data&&o(e.data.error),n.reject(e)}}}return e.$inject=["$rootScope","$location","$q","$analytics","bl.factories.session.userClassificationService","infrastruct.services.config","infrastruct.services.maintenanceNavigation"],e});define(rA[322][0],["angular"],function(s){"use strict";function i(s,i){this.cacheKey="uScore",this.$rootScope=s,this.localStorage=i,this.isDepositor=!1,this.scoring={pi:500,etorian:400,platinum:300,gold:200,silver:100,depositor:50},this.playerLevelScoreMap={4:this.scoring.etorian,2:this.scoring.platinum,3:this.scoring.gold,5:this.scoring.silver},this.info=this._getInfo(),s.$on("login:success",this._setInfo.bind(this)),s.$on("logout:success",this._setInfo.bind(this)),s.$on("user:info:depositor",this._isDepositor.bind(this))}return i.$inject=["$rootScope","infrastruct.services.localStorage"],i.prototype={_getUserClass:function(s){var i=s.playerLevelId;return s.isPi?this.scoring.pi:this.playerLevelScoreMap[i]?this.playerLevelScoreMap[i]:this.isDepositor?this.scoring.depositor:50===this.info.uClass?50:0},_isDepositor:function(){this.isDepositor=!0,this._setInfo()},_setInfo:function(){this.$rootScope.session.isLoggedIn&&(this.info.uClass=this._getUserClass(this.$rootScope.session.user),this.localStorage.setItem(this.cacheKey,this.info))},_getInfo:function(){var i=this.localStorage.getItem(this.cacheKey);return i&&s.isDefined(i.uClass)?i:{uClass:0}}},i});define(rA[127][0],[],function(){"use strict";function e(e){var r={response:function(r){try{var t=e.get("genericAbTestService"),n=r.headers(),s=new Map;Object.keys(n).forEach(function(e){s.set(e,n[e])}),t.headersInterceptorHaldler(s)}catch(c){console.error(c)}return r}};return r}return e.$inject=["$injector"],e});define(rA[472][0],["angular","underscore",rA[353][0],rA[323][0],rA[372][0]],function(e,t,i,o,s){"use strict";function n(e,t,i,o,s,n,r,a,c,u,l,g,f,d,h,p,m,y,v,D,S,C,L,$){this.sessionAccountService=D,this.instrumentsGroupsFactory=m,this.instrumentsFactory=p,this.usersFactory=h,this.preferences=v,this.localizeFactory=d,this.portfolioFactory=f,this.countriesFactory=y,this.localStorage=g,this.uiDialog=u,this.config=l,this.qs=c,this.$cookies=s,this.$analytics=e,this.$injector=t,this.$location=i,this.$route=n,this.$log=r,this.$q=a,this.defaultScreenService=S,this.copyTraderFunnelService=C,this.funnelLoaderService=L,this.languagePickerOnSelectListener,this.detectIncognitoService=$,this.runBaseCtor(),this._sessionDeffered=null,o.$on("login:success",this._setRedirectCookie.bind(this)),o.$on("logout:success",function(){this.$analytics.reset()}.bind(this))}return n.$inject=["$analytics","$injector","$location","$rootScope","$cookies","$route","$log","$q","qs","uiDialog","infrastruct.services.config","infrastruct.services.localStorage","bl.factories.trading.portfolio.portfolioFactory","infrastruct.services.localization.localizeFactory","bl.factories.trading.users.usersFactory","bl.factories.trading.instruments.instrumentsFactory","bl.factories.trading.instruments.instrumentsGroupsFactory","bl.factories.countries.countriesFactory","bl.factories.settings.preferences","bl.factories.session.sessionAccount","bl.factories.session.defaultScreenService","bl.factories.session.copyTraderFunnelService","bl.factories.session.funnelLoaderService","infrastruct.services.detectIncognito"],n.prototype={get accountMode(){return this.isLoggedIn?this.user.portfolio.account.type:this.preferences.getPreferences("lastAccount")||"Real"},set accountMode(e){this.preferences.setPreferences({lastAccount:e})},create:function(e,t){var i=this;return this._sessionDeffered||(this._sessionDeffered=this.qs(function(o,s){i.setSts(e).then(i._loadDependencies.bind(i,t)).then(o)["catch"](function(e){s(e),i.accountMode="Real",i.destroy()})})),this._sessionDeffered},openLoginDialog:function(e){this.uiDialog.open({template:'<et-login-dlg [app-info]="uiDialogData.appInfo" (on-success)="closeThisDialog();uiDialogData.onSuccess()" [default-screen]="uiDialogData.defaultScreen"></et-login-dlg>',plain:!0,isNewDesign:!0,className:"signup-login-dialog",onCloseCallback:function(){this.$injector.get("bl.factories.social.ssoService").removeSocialLoginSessionData()}.bind(this),data:{appInfo:this.appInfoData,defaultScreen:"login",isLoginSignUpDialog:!0,onSuccess:function(){return this.$route.reload(),e&&e(),!1}.bind(this)},showClose:!1}),this._createLanguagePickerSelectListener()},assertIsAuthorized:function(e,t,i,o){return e||(e="user"),this.isAuthorized(e)?!0:"signup"===this.config.query.funnel?(this.$location.path("/accounts/sign-up"),!1):(this.uiDialog.open({template:'<et-login-dlg [app-info]="uiDialogData.appInfo" (on-success)="closeThisDialog();uiDialogData.onSuccess()" [trade-item]="uiDialogData.context" [default-screen]="uiDialogData.defaultScreen"></et-login-dlg>',plain:!0,isNewDesign:!0,className:"signup-login-dialog",onCloseCallback:function(){this.$injector.get("bl.factories.social.ssoService").removeSocialLoginSessionData()}.bind(this),data:{appInfo:this.appInfoData,context:t,defaultScreen:this.defaultScreenService.getDefaultScreen(i),isLoginSignUpDialog:!0,onSuccess:function(){return this.$route.reload(),o&&o(),!1}.bind(this)},showClose:!1}),this._createLanguagePickerSelectListener(),!1)},_createLanguagePickerSelectListener:function(){var e=this;e.languagePickerOnSelectListener||(e.languagePickerOnSelectListener=this.$rootScope.$on("languagePicker:on:select",function(){var t=e.uiDialog.isDialogOpen&&e.uiDialog.dialogOptions.data.isLoginSignUpDialog;t&&(e.uiDialog.closeAll(),e.assertIsAuthorized(null,null,!0,null))}))},destroy:function(e,t){this._destroy(t),this._sessionDeffered=null},removeRedirectCookie:function(){var e=new Date;e.setFullYear(2e3),this.$cookies.put("etoroHPRedirect","0",{path:"/",expires:e}),this.$cookies.remove("etoroHPRedirect")},isNZUser:function(){return this.isLoggedIn?this.isNZCountry(this.user.countryId):!1},isNZCountry:function(e){var t=[146];return-1!==t.indexOf(e)},isIsraelUser:function(){return this.isLoggedIn?this.isIsraelCountry(this.user.countryId):!1},isIsraelCountry:function(e){var t=[101];return-1!==t.indexOf(e)},isUsUser:function(){return this.isLoggedIn?this.countriesFactory.isUsaCountry(this.user.countryId):this.config.statics.isUsIp},isUsRegulation:function(){if(!this.isLoggedIn)return!1;var e=this.config.dynamics.trading.usTradingConfig.usRegulationIds;return e&&-1!==e.indexOf(this.user.designatedRegulationId)},getUsTerritory:function(){return this.isUsUser()?219:-1},signupLogin:function(e){var t=this;return this._signupLogin(e).then(function(){t.localStorage.getItem("isRegistered")&&t.localStorage.setItem("lastUsername",t.user.username)})},_login:function(i,o){var s=this,n=i.timerData.label,r=i.tracking||{},a=i.source,c=function(t){return e.extend(t,i.logData,{Categories:["Login"]})};return t.extend(r,{category:"login",label:"login"}),o&&o.accessToken&&o.antiCsrfToken?(this.$log.time(n,null,"Login"),this.$analytics.eventTrack("Login - Attempt",r),this.$log.logJSON("info","log",c({Message:"Login attempt"})),this.$q(function(e,t){this.create(o,i).then(function(){s._redirectLoggedUser(),s.$rootScope.$broadcast("login:success",{source:a}),e(),r.label="success",s.detectIncognitoService.detectIncognito().then(function(e){r.isIncognitoMode=e})["finally"](function(){s.$analytics.eventTrack("Login - Success",r)}),s.$log.logJSON("info","log",c({Message:"Login success"})),s.$log.timeEnd(n,{action:n,status:"success"},null,"Login");var t=!!window.startTimeStempFromLoginBTN,i=!!window.startTimeStempEver;if(t||i){var o=(new Date).getTime()-(t?window.startTimeStempFromLoginBTN:window.startTimeStempEver);window.autoLogin=i,s.$log.logJSON("info","log",{Categories:["Login"],Message:"Performance Login"+(t?"Manual":"autoLogin"),TotalTime:o})}window.startTimeStempFromLoginBTN=void 0,window.startTimeStempEver=void 0})["catch"](function(e){window.startTimeStempFromLoginBTN=void 0,window.startTimeStempEver=void 0,s.$rootScope.$broadcast("logout:success"),t(e),-1==e.type.indexOf("logoutBeforeEmailVerificationAttempt")&&s.$analytics.eventTrack("Login - Error",r),s.$log.timeEnd(n,{action:n,status:"error"},null,"Login"),s.$log.logJSON("error","log",c({Message:"Login failed",LoginFailureReason:e&&e.type||"NoReasonProvided",LoginFailureDescription:e&&e.message||"NoMessageProvided",requestID:s.config.requestId||""}))})}.bind(this))):this.$q.reject()},_redirectLoggedUser:function(){var e=this.config.initialParams.target||this.config.query.next;delete this.config.query.next,e&&"/"!==e?this.$location.url(decodeURI(e)):this._redirectLoggedUserPatch||this.$location.path("/")},_redirectLoggedUserPatchActivate:function(){this._redirectLoggedUserPatch=!0,setTimeout(function(){this._redirectLoggedUserPatch=!1}.bind(this),50)},_loadDependencies:function(e){var i=this,o=this.portfolioFactory.init(this),n=this.sessionAccountService.getAggregatedLoginData(o,"Login",e),r=this.instrumentsGroupsFactory.init();return this.countriesFactory.init()["catch"](function(){}),this.qs(function(a,c){i.$q.all([n,r]).then(function(n){var r,u=n[0],l=u.CurrentUserData.Content.users[0];if(i.instrumentsFactory.getPrivateTradingSettings(),i.instrumentsGroupsFactory.getPrivateInstrumentsTypes(),i._stsData.gcid||(i._stsData.gcid=l.gcid),i._stsData.realCid||(i._stsData.realCid=l.realCID),i._stsData.demoCid||(i._stsData.demoCid=l.demoCID),u.MirrorsUserData.Content){i.usersFactory._setUsers(u.MirrorsUserData.Content.users);var g=t.pluck(u.MirrorsUserData.Content.users,"gcid");if(g&&g.length>0){var f=i.$injector.get("bl.factories.trading.mirror-configurations.mirrorConfigurationsService");f.getMultiMirrorConfigurationsData(g)}}r=l&&l.languageIsoCode?l.languageIsoCode.toLowerCase():"",i.localizeFactory.resetLocales(i.countriesFactory.isUsaCountry(l.country),r),i.localizeFactory.isSupportedLocale(l.languageIsoCode)||(r=l.languageIsoCode=i.localizeFactory.defaultLanguage);var d=r!==i.localizeFactory.language?i.localizeFactory.setLanguage(r):i.$q.resolve();d["finally"](function(){i.portfolioFactory.setAccount(o,u.PrivatePortfolio.Content,!0).then(function(){i._user=i.$injector.instantiate(s,{userData:l});var t=i.$injector.get("bl.factories.session.emailVerificationService");i._user._updateRestrictions(u.CustomerRestrictions&&u.CustomerRestrictions.Content&&u.CustomerRestrictions.Content.CustomerRestrictions),i._user.calculateBsl(u.PrivatePortfolio.Content&&u.PrivatePortfolio.Content.ClientPortfolio&&u.PrivatePortfolio.Content.ClientPortfolio.BonusCredit,"Real"===o.type),i._setAnalytics(),i.copyTraderFunnelService.saveData();var n=e.source.type;t.emailVerificationInit(e,n).then(function(){a(),i.copyTraderFunnelService.checkIfShouldRedirectUserToCopyTraderFunnel().then(function(e){e||i.funnelLoaderService.getFunnelService().then(function(e){e.userRedirect()})})})["catch"](c)})["catch"](c)})})["catch"](c)})},_setAnalytics:function(){var e=this;e.user&&(e.$analytics.setUserInfo({CID:e.user.realCID,GCID:e.user.gcid,externalID:e.user.externalId,silverpopID:null,verificationLevel:function(){return e.user&&e.user.verificationLevel}}),e.$analytics.setUserId(e.user.gcid),e.$analytics.setUsername(e.typedUsername),e.$analytics.setUserProperties({$name:e.user.fullName,$username:e.user.username,$first_name:e.user.firstName,$last_name:e.user.lastName,$CID:e.user.realCID,$GCID:e.user.gcid,"Club Id":e.user.playerLevelId}),e.$analytics.setGlobalEventProperties({Available:function(){return e.user&&e.user.portfolio&&0!==e.user.portfolio.availibleToTrade?e.user.portfolio.availibleToTrade>0?1:-1:0},PnL:function(){return e.user&&e.user.portfolio&&0!==e.user.portfolio.totalProfit?e.user.portfolio.totalProfit>0?1:-1:0},Equity:function(){return e.user&&e.user.portfolio&&0!==e.user.portfolio.equity?e.user.portfolio.equity>0?1:-1:0},hasSeenKYCBefore:function(){return e.user&&e.user.kycState>-1?!0:!1},funnelFromID:function(){return e.config.query&&e.config.query.funnelFromId?e._getFunnelNameById(e.config.query.funnelFromId):"Unknown"}}),e.user.isValidForExpressCheckout().then(function(t){e.$analytics.setGlobalEventProperties({isExpressCheckout:t})}))},_getFunnelNameById:function(e){var t="Unknown";return this.config.dynamics.compliance.funnelsMap&&(t=this.config.dynamics.compliance.funnelsMap[e]),t},_getSearchParams:function(){for(var e,t={},i=/\+/g,o=/([^&=]+)=?([^&]*)/g,s=function(e){return decodeURIComponent(e.replace(i," "))},n=window&&window.location.search.substring(1);e=o.exec(n);)e[1]&&(t[s(e[1]||"").toLowerCase()]=s(e[2]));return t}},i(n,o),n});define(rA[372][0],["angular",rA[191][0]],function(t,e){"use strict";function i(e,i,s,r,o,n,a,u,c,h,l){this.sessionAccountService=h,this.portfolioFactory=a,this.countriesFactory=u,this.$injector=o,this.usersFactory=c,this.uiDialog=l,this.$q=r,this.$http=s,this.$rootScope=i,this.$filter=n,this.countryId=e.country,this.Name=e.username,this.fullName=e.allowDisplayFullName&&e.firstName&&e.lastName?e.firstName+" "+e.lastName:e.username,this.DisplayName=e.allowDisplayFullName?e.fullName:e.username,this.Url=("/people/"+e.username).toLowerCase(),this.realCID=parseInt(this.realCID),this.languageIsoCode=(e.languageIsoCode||"en-gb").toLowerCase(),this.updateAvatars(e.avatars),this.SubType=9===e.accountType?"fund":"user",this.EMAIL_VERIFICATION_STATUS={OPTIONAL:1,REQUIRED:2,EXEMPT:3,VERIFIED:4},delete e.avatars,delete e.country,delete e.languageIsoCode,this.watchers=[],this.watchers.push(this.$rootScope.$on("user:credit:update:success",function(){this._isDepositorExpired=!0}.bind(this))),this.watchers.push(this.$rootScope.$on("UserSettings.Updated",function(e,i){t.isDefined(i.PrivacyPolicyTypeId)&&this.setOptOut(i)}.bind(this))),this.watchers.push(this.$rootScope.$on("logout:success",function(){this.watchers.forEach(function(t){t&&t()})}.bind(this))),t.extend(this,e)}return i.$inject=["userData","$rootScope","$http","$q","$injector","$filter","bl.factories.trading.portfolio.portfolioFactory","bl.factories.countries.countriesFactory","bl.factories.trading.users.usersFactory","bl.factories.session.sessionAccount","uiDialog"],i.prototype={setOptOut:function(t){this.optOut=2===t.PrivacyPolicyTypeId},get portfolio(){return this.portfolioFactory.get()},get country(){return this.countriesFactory.getById(this.countryId)},get isUserVerified(){return 13!==this.playerStatus},setDesignatedRegulation:function(t){this.designatedRegulationId=t},syncUserData:function(){var e="/api/logininfo/v1.1/aggregatedInfo?cidlist=["+this.$rootScope.session.user.realCID+"]&realCids=True";return this.$http({method:"GET",url:e}).then(function(e){var i=e.data;i&&i.Users&&i.Users.length>0&&(i=e.data.Users[0],this.countryId=i.country,delete i.avatars,delete i.country,delete i.languageIsoCode,delete i.CustomerRestrictions,(null===i.playerStatus||void 0===i.playerStatus)&&delete i.playerStatus,t.extend(this,i))}.bind(this))},isValidForExpressCheckout:function(){var t=this.portfolio.balance;return 0!==t?this.$q.resolve(!1):this.getIsDepositor().then(function(e){return 0===t&&e===!1})["catch"](function(){return!1})},getIsDepositor:function(){return!this._isDepositor||this._isDepositorExpired?(this._isDepositorExpired=!1,this._isDepositor=this.$http({method:"get",url:"/api/billing/billingInfo",actionUrl:"/api/billing/billingInfo"}).then(function(t){var e=t.data,i=!!e&&e.HasApprovedDeposits;return i&&this.$rootScope.$emit("user:info:depositor"),i}.bind(this))["catch"](function(){return void 0})):this._isDepositor},getEquityDetails:function(t){return this._equityDetails||(this._equityDetails=this.$http({method:"get",url:"/sapi/userstats/Equity/UserName/"+this.username,actionUrl:"/sapi/userstats/Equity/UserName/:username",params:{mindate:this.$filter("date")(t,"MM/dd/yyyy")}}).then(function(t){return t.data})),this._equityDetails},getProfilePageViews:function(t){return this._profilePageViews||(this._profilePageViews=this.$http({method:"get",url:"/sapi/userstats/PageViews/UserName/"+this.username+"/History",actionUrl:"/sapi/userstats/PageViews/UserName/:username/History",params:{mindate:this.$filter("date")(t,"MM/dd/yyyy")}}).then(function(t){return t.data},function(){return this._profilePageViews=null,this.$q.$reject()}.bind(this))),this._profilePageViews},getUserEmail:function(){return this._userEmail||(this._userEmail=this.$http({method:"GET",url:"/api/users/v1/users/me/contactInfo",actionUrl:"/api/users/v1/users/me/contactInfo"}).then(function(t){return t},function(){return this._userEmail=null,this.$q.$reject()}.bind(this))),this._userEmail},updateBio:function(e){return t.isString(e)?this.$http({method:"put",url:"/api/account/v1/user/"+this.gcid+"/bio/update",data:{aboutMe:e}}).then(function(){return this.aboutMe=e}.bind(this)):this.$q.reject(new AppError("update user bio error","userSession","InputTypeError",null))},updateUserBio:function(t){return t?this.$http({method:"put",url:"/api/account/v1/user/"+this.gcid+"/bio/update",data:t}).then(function(){return this.bio=t}.bind(this)):this.$q.reject(new AppError("update user bio error","userSession","InputTypeError",null))},updateUserRestrictions:function(){var t="real"===this.portfolio.account.type.toLowerCase();return this.$http({method:"get",url:"/sapi/trade-"+this.portfolio.account.type.toLowerCase()+"/customer-restrictions/"+(t?this.realCID:this.demoCID),actionUrl:"/sapi/trade-"+this.portfolio.account.type}).then(function(t){return this._updateRestrictions(t.data.CustomerRestrictions)}.bind(this))},reloadAccount:function(t){this.sessionAccountService.reloadAccount(t)},toggleAccount:function(t,e){return this.sessionAccountService.toggleAccount(t,e)},getKycProgress:function(){return 3==this.$rootScope.session.user.verificationLevel?Promise.resolve(100):this.$http({method:"get",url:"/sapi/kyc/api/v1/users/"+this.gcid+"/verificationCompletionPercentage"}).then(function(t){return t.data.percentage})},getRanking:function(t){return this.$injector.get("bl.factories.discovery.rankingsFactory").getByUserId(this.realCID,t)},updateAvatars:function(e){this.Avatars||(this.Avatars={}),t.forEach(e,function(t){this.Avatars[t.width+"x"+t.height]=t.url},this),this.Avatars["default"]=this.Avatars["150x150"]},assertOptOut:function(){return this.optOut?(this.uiDialog.open({plain:!0,template:'<et-opt-out-error (on-close)="closeThisDialog()"></et-opt-out-error>',closeByNavigation:!0}),!1):!0},setWebPushStatus:function(t){(1===t||2===t)&&this.$http({method:"PUT",url:"/api/notifications/v1/channelConfirmation/WebPush",actionUrl:"/api/notifications/v1/channelConfirmation/WebPush",params:{correlationId:e()()},data:{ChannelConfirmationStatus:t}})},getWebPushStatus:function(){return this.$http({method:"GET",url:"/api/notifications/v1/channelConfirmation/WebPush",actionUrl:"/api/notifications/v1/channelConfirmation/WebPush",params:{correlationId:e()()}}).then(function(t){var e=t.data;return e&&e.ChannelConfirmationStatus})["catch"](function(){return null})},calculateBsl:function(t,e){var i;if(this.bsl={isBslAvalible:!0,executionBlocked:!1,bonusAmount:t},i=this.CustomerRestrictions,e&&i&&i.length>0)for(var s=0;s<i.length;s++)if(21===i[s].RestrictionTypeID){this.bsl.executionBlocked=!0;break}},updateUserEmail:function(t){this.email=t},updateIsUserEmailVerified:function(t){this.isEmailVerified=t},updateUserPhone:function(t){this.phone=t},updateEmailVerificationStatus:function(t){this.emailVerificationStatus=this.EMAIL_VERIFICATION_STATUS[t.toUpperCase()]},_updateRestrictions:function(t){return this.CustomerRestrictions||(this.CustomerRestrictions=[]),this.CustomerRestrictions.length=0,t&&t.length&&this.CustomerRestrictions.push.apply(this.CustomerRestrictions,t),this.CustomerRestrictions}},i});define(rA[373][0],["angular","underscore"],function(t,n){"use strict";function e(t,n,e,o,i,r,s,c,a,u,l){this.$http=n,this.$rootScope=t,this.$injector=i,this.localizeFactory=c,this.usersFactory=u,this.portfolioFactory=a,this.$location=e,this.config=s,this.qs=r,this.maintenanceNavigation=l,this._accountSyncInterval=null,this._accountSyncIntervalMs=18e5,this._privateInstrumentsSyncIntervalMs=18e5,this._privateInstrumentsSyncInterval=null,t.$on("login:success",function(){this._startAccountSync(),this._startPrivateInstrumentsSync()}.bind(this)),t.$on("logout:success",function(){this._stopAccountSync(),this._stopPrivateInstrumentsSync()}.bind(this)),t.$on("app:connection:success",function(){t.session.isLoggedIn&&this.reloadAccount(!0),t.session.isLoggedIn&&this._restartPrivateInstrumentsSync(!0)}.bind(this)),t.$on("app:refreshPortfolio",function(){t.session.isLoggedIn&&this.reloadAccount(!0),t.session.isLoggedIn&&this._restartPrivateInstrumentsSync(!0)}.bind(this)),t.$on("portfolio:toggle:success",function(){o.reload()})}return e.$inject=["$rootScope","$http","$location","$route","$injector","qs","infrastruct.services.config","infrastruct.services.localization.localizeFactory","bl.factories.trading.portfolio.portfolioFactory","bl.factories.trading.users.usersFactory","infrastruct.services.maintenanceNavigation"],e.prototype={getAggregatedLoginData:function(n,e,o){var i=this,r=new Date,s={AccountType:n.type},c={conditionIncludeMetadata:!1,conditionIncludeMarkets:!1,conditionIncludeDisplayableInstruments:!1,conditionIncludeMirrorValidation:!1},a=o&&o.source&&o.source.type,u={};return e=e||"AggregatedLogin",a&&"manual"!==a&&"registration"!==a&&(r.setMinutes(r.getMinutes()-r.getTimezoneOffset()),s["X-STS-ClientTime"]=r.toISOString().substring(0,19),s["X-STS-AUTOLOGIN"]=!0),"AccountReconnect"===e||"PortfolioSync"===e?u={conditionIncludeCustomerRestrictions:!1,conditionIncludeCurrentUserData:!1,conditionIncludeMirrorsUserData:!1}:"PortfolioChange"===e&&(u={conditionIncludeCurrentUserData:!1}),t.extend(c,u),i.qs(function(t,n){i.config.dynamics.whenReady().then(function(){var o=i.config.dynamics;return o&&o.apisMaintenance&&o.apisMaintenance.login?(i.maintenanceNavigation.navigate(),i.$rootScope.$broadcast("app:maintenance"),void n({message:"server in Maintenance",namespace:"sessionUser",type:"MaintenanceMode",Categories:[e]},"error")):void i.$http({method:"get",url:"/api/logindata/v1.1/logindata",maxRetries:2,categories:[e],params:c,headers:s}).then(function(o){var r=o.data,s=r.AggregatedResult,c=s.ResponseSummary,a=s.ApiResponses||{},u=r.Configuration;if(c.IsInMaintenance)return n({message:"server in Maintenance",namespace:"sessionUser",type:"MaintenanceMode",Categories:[e]},"error"),void setTimeout(function(){i.maintenanceNavigation.navigate(c.MaintenanceRedirectUrl)},2e3);i.config.dynamics.domainChange&&i.config.dynamics.domainChange.isActive||!u||!u.Push||(u.Push.DemoUrl&&i.config.setDynamicKey("pushConfig.Demo.url",u.Push.DemoUrl),u.Push.RealUrl&&i.config.setDynamicKey("pushConfig.Real.url",u.Push.RealUrl)),u&&u.Intercom&&(i.config.statics.intercomConfig.userToken=u.Intercom.UserToken);var l=this._getLoginAggregatorFailureSources(a,e);return 200!==c.StatusCode||""!==l?void n({message:"login aggregator error in one or more api calls",namespace:"sessionUser",status:200,Categories:[e],type:"AggregatedAPIError",errorSources:l}):void t(a)}.bind(this),function(t){var o=this._getLoginAggregatorFailureSources(t,e),i={message:"login aggregator failed",namespace:"sessionUser",Categories:[e],status:t&&t.status,type:"AggregatedAPIHTTPError",requestID:t&&t.config&&t.config.requestId||"",errorSources:o};n(i,"error",t&&t.config&&t.config.requestId)}.bind(this))}.bind(this))}.bind(this))},_getLoginAggregatorFailureSources:function(n,e){var o={PrivatePortfolio:[],MirrorsUserData:["AccountReconnect","PortfolioSync"],CurrentUserData:["AccountReconnect","PortfolioSync","PortfolioChange"]},i=[];return t.isObject(n)?(t.forEach(o,function(t,o){var r=n[o],s=-1!==t.indexOf(e);(!r||r.StatusCode<200||r.StatusCode>299)&&(s||i.push(o))}),i.join(",")):""},reloadAccount:function(t){var n=t?"AccountReconnect":"PortfolioSync",e=this.$rootScope,o=e.session,i=o.isLoggedIn?this.portfolioFactory.get():null;i&&("PortfolioSync"!==n||0!==i.equity&&this.config.dynamics.enablePortfolioSync)&&(e.$emit("portfolio:sync:start"),this.portfolioFactory.removePortfolioPromise(i.account.type),this.toggleAccount(i.account,n).then(function(){e.$emit("portfolio:sync:success")})["catch"](function(){e.$emit("portfolio:sync:error")}))},toggleAccount:function(t,e){var o=this.portfolioFactory.get().account,i=this;return e=e||"PortfolioChange",t=t||this.portfolioFactory.getAccount("Real"===o.type?"Demo":"Real"),t&&"Demo"===t.type&&this.config.dynamics.disableDemo?("PortfolioChange"===e&&i.$injector.get("bl.factories.trading.portfolioNotificationsService").demoMaintenance(),i.qs.reject()):(this._restartAccountSync(),this.getAggregatedLoginData(t,e).then(function(r){var s,c=i.$rootScope.session.user,a=r.MirrorsUserData&&r.MirrorsUserData.Content;return a&&(i.usersFactory._setUsers(r.MirrorsUserData.Content.users),s=n.pluck(r.MirrorsUserData.Content.users,"gcid")),"AccountReconnect"!==e&&c._updateRestrictions(r.CustomerRestrictions&&r.CustomerRestrictions.Content&&r.CustomerRestrictions.Content.CustomerRestrictions),c.calculateBsl(r.PrivatePortfolio.Content&&r.PrivatePortfolio.Content.ClientPortfolio&&r.PrivatePortfolio.Content.ClientPortfolio.BonusCredit,"Real"===t.type),i.portfolioFactory.setAccount(t,r.PrivatePortfolio.Content,t!==o).then(function(){if(t!==o){if(a&&s&&s.length>0){var n=i.$injector.get("bl.factories.trading.mirror-configurations.mirrorConfigurationsService");n.getMultiMirrorConfigurationsData(s)}i.portfolioFactory.removePortfolio(o.type),i.$rootScope.$emit("portfolio:toggle:success",t)}})})["catch"](function(n,o,r,s){var c=s&&s.requestId||"NO REQUEST ID";"PortfolioChange"===e&&(i.$injector.get("bl.factories.trading.portfolioNotificationsService").toggleFailed(t),i.reloadAccount());n.setContext({message:"toggle portfolio account failed",namespace:"sessionUser",status:o,type:"UnExpectedError"},"error",c)}))},_startAccountSync:function(){this._accountSyncInterval=setInterval(function(){this.reloadAccount()}.bind(this),this.config.dynamics.accountSyncInterval||this._accountSyncIntervalMs)},_stopAccountSync:function(){clearInterval(this._accountSyncInterval),this._accountSyncInterval=null},_restartAccountSync:function(){this._stopAccountSync(),this._startAccountSync()},_startPrivateInstrumentsSync:function(){this._privateInstrumentsSyncInterval=setInterval(function(){this.$rootScope.$emit("privateInstruments:reload")}.bind(this),this.config.dynamics.privateInstrumentsSyncInterval||this._privateInstrumentsSyncIntervalMs)},_stopPrivateInstrumentsSync:function(){clearInterval(this._privateInstrumentsSyncInterval),this._privateInstrumentsSyncInterval=null},_restartPrivateInstrumentsSync:function(){this._stopPrivateInstrumentsSync(),this._startPrivateInstrumentsSync()}},e});define(rA[325][0],["angular"],function(){"use strict";function e(e){this.localStorage=e}return e.$inject=["infrastruct.services.localStorage"],e.prototype={getDefaultScreen:function(e){return e||!this.localStorage.getItem("lastUsername")?"signup":"login"}},e});define(rA[324][0],["angular"],function(){"use strict";function e(e,t,i,r,a,n,o,s,u,c,d){this.$rootScope=e,this.$q=t,this.$location=i,this.$log=r,this.$timeout=a,this.config=n,this.localStorage=o,this.guide=s,this.appDataService=function(){return d.get("infrastruct.services.appDataService")},this.uiDialog=u,this.uiIfBreakpoint=c,this.$injector=d;var l=this,h=e.$on("app:ready",function(){l.config.dynamics.whenReady().then(function(){h(),l._checkIfShouldRedirectVisitorToCopyTraderFunnel()})});document.addEventListener("resume",l._checkIfShouldRedirectVisitorToCopyTraderFunnel.bind(l),!1)}return e.$inject=["$rootScope","$q","$location","$log","$timeout","infrastruct.services.config","infrastruct.services.localStorage","integrations.guide","uiDialog","infrastruct.ui.uiIfBreakpoint","$injector"],e.prototype={checkIfShouldShowGuidanceFromOutsideTheFunnel:function(){var e=this;e.$rootScope.session.isUsUser()&&this.config.dynamics.whenReady().then(function(){e.config.dynamics.copyTraderFunnel.enableDisplayOutsideTheFunnel&&(e.$rootScope.session.isLoggedIn?e._runFunnelForUSUser():e._runFunnelForUSVisitor())})},checkIfShouldRedirectUserToCopyTraderFunnel:function(){return this._isActive(!0)?this._runFunnelForUser():this.$q.resolve(!1)},getEnabledParams:function(){var e=this;return this.$q(function(t){var i;e._getData().then(function(e){i=e})["finally"](function(){if(!i)return void t({isEnabledRedirectTo:!1});var r=i.tutorialId&&!i.hasSeenTutorial&&!e.localStorage.getItem("hasSeenTutorial"),a=i.guideId&&!i.hasSeenGuide&&!e.localStorage.getItem("hasSeenGuide"),n=i.redirectTo&&(r||a),o={isEnabledTutorial:r,isEnabledGuide:a,isEnabledRedirectTo:n,tutorialId:i.tutorialId,guideId:i.guideId,redirectTo:i.redirectTo};t(o)})})},saveData:function(){this._isActive(!0)&&(this._storeData(),this.localStorage.getItem("hasSeenTutorial")&&(this.appDataService().setItem("firstTimeTutorial",{hasSeen:!0}),this.localStorage.removeItem("hasSeenTutorial")),this.localStorage.removeItem("copyTraderFunnelData"))},_checkIfShouldRedirectVisitorToCopyTraderFunnel:function(){this._isActive(!1)&&(this._storeData(),this._runFunnelForVisitor())},_storeData:function(){var e=this.config.query&&this.config.query.guideid,t=this.config.query&&this.config.query.tutorialid,i=this.config.query&&this.config.query.redirectto&&decodeURIComponent(this.config.query.redirectto),r=this.config.query&&this.config.query.funnelfromid;if(t||e||i||r){try{t=parseInt(t)}catch(a){return this._sendErrorLog("tutorialId"),void this._cleanQueryUrl()}try{e=parseInt(e)}catch(a){return this._sendErrorLog("guideId"),void this._cleanQueryUrl()}try{r=parseInt(r)}catch(a){return this._sendErrorLog("funnelFromId"),void this._cleanQueryUrl()}var n={};t&&(n.tutorialId=t),e&&(n.guideId=e),i&&(n.redirectTo=i),this.localStorage.setItem("copyTraderFunnelData",n),r&&this.localStorage.setItem("funnelFromId",r),this._cleanQueryUrl()}},_sendErrorLog:function(e){this.$log.logJSON("error","log",{Categories:["CopyTraderFunnel"],Message:"The query parameter: "+e+" is not a valid number"})},_cleanQueryUrl:function(){this.config.query&&(delete this.config.query.tutorialid,delete this.config.query.guideid,delete this.config.query.redirectto,delete this.config.query.funnelfromid)},_getData:function(){var e=this.appDataService().getItem("firstTimeTutorial")["catch"](function(){}),t=this.appDataService().getItem("firstTimeGuide")["catch"](function(){}),i=this.appDataService().getItem("copyTraderFunnelData")["catch"](function(){}),r=[],a=this.$q.defer();return e.then(function(e){r.push(e),t.then(function(e){r.push(e),i.then(function(e){r.push(e);var t={hasSeenTutorial:r[0]&&r[0].hasSeen,hasSeenGuide:r[1]&&r[1].hasSeen,tutorialId:r[2]&&r[2].tutorialId,guideId:r[2]&&r[2].guideId,redirectTo:r[2]&&r[2].redirectTo};a.resolve(t)})["catch"](function(){})})["catch"](function(){})})["catch"](function(){}),a.promise},_isActive:function(e){return this.config.dynamics.copyTraderFunnel.enable&&e===this.$rootScope.session.isLoggedIn},_runFunnelForVisitor:function(){var e=this.localStorage.getItem("copyTraderFunnelData"),t=e&&e.tutorialId,i=this.localStorage.getItem("hasSeenTutorial");t&&!i&&(this._activateTutorial(!1),this.localStorage.setItem("hasSeenTutorial",!0))},_runFunnelForUSVisitor:function(){var e=this.localStorage.getItem("copyTraderFunnelData"),t=e&&e.tutorialId;t||(this._activateTutorial(!1),this.localStorage.setItem("hasSeenTutorial",!0),this.localStorage.setItem("copyTraderFunnelData",{tutorialId:this._getGuideId()}))},_runFunnelForUser:function(){return this.getEnabledParams().then(function(e){return e.isEnabledTutorial?(this._activateTutorial(e.isEnabledGuide),this.localStorage.setItem("hasSeenTutorial",!0),this.appDataService().setItem("firstTimeTutorial",{hasSeen:!0})):e.isEnabledGuide&&this._activateGuide(),e.isEnabledRedirectTo&&this.$location.path(e.redirectTo),e.isEnabledRedirectTo}.bind(this))},_runFunnelForUSUser:function(){this.appDataService().getItem("firstTimeTutorial").then(function(e){e&&e.hasSeen?this.appDataService().getItem("copyTraderFunnelData").then(function(e){e&&e.guideId||(this._activateGuide(),this.appDataService().setItem("copyTraderFunnelData",{tutorialId:this._getGuideId(),guideId:this._getGuideId()}))}.bind(this))["catch"](function(){}):(this._activateTutorial(!0,!0),this.localStorage.setItem("hasSeenTutorial",!0),this.appDataService().setItem("firstTimeTutorial",{hasSeen:!0}),this.appDataService().setItem("copyTraderFunnelData",{tutorialId:this._getGuideId()}))}.bind(this))["catch"](function(){})},_activateTutorial:function(e,t){var i=this;this.$timeout(function(){i.uiDialog.open({template:'<discovery-copytrader-popup on-close="uiDialogData.onClose();closeThisDialog()"></discovery-copytrader-popup>',plain:!0,isNewDesign:!0,data:{onClose:function(){e&&(i._activateGuide(),t&&i.appDataService().setItem("copyTraderFunnelData",{tutorialId:i._getGuideId(),guideId:i._getGuideId()}))}},showClose:!1})},0)},_activateGuide:function(){this.guide.activateTopic(this._getGuideId()),this.localStorage.setItem("hasSeenGuide",!0),this.appDataService().setItem("firstTimeGuide",{hasSeen:!0})},_getGuideId:function(){return this.uiIfBreakpoint.isDevice?this.config.dynamics.copyTraderFunnel.deviceGuide:this.config.dynamics.copyTraderFunnel.desktopGuide}},e});define(rA[326][0],["angular"],function(){"use strict";function e(e,n,t,i,r,o){this.$rootScope=e,this.$q=n,this.$injector=t,this.$timeout=i,this.config=r,this.$http=o,this._injectorCounter=0,this._funnelService=null;var u=this,c=e.$on("app:ready",function(){u.config.dynamics.whenReady().then(function(){c(),u.getFunnelId()})});document.addEventListener("resume",u.getFunnelId.bind(u),!1)}return e.$inject=["$rootScope","$q","$injector","$timeout","infrastruct.services.config","$http"],e.prototype={getFunnelId:function(){this._loadFunnelService(this).then(function(e){e.getFunnelFromId()})},getFunnelService:function(){return this._loadFunnelService(this)},_loadFunnelService:function(e){return e._funnelService?e.$q.resolve(e._funnelService):e.$q(function(n,t){try{e._funnelService=e.$injector.get("bl.factories.FunnelService"),n(e._funnelService)}catch(i){e._injectorCounter>30&&t(),++e._injectorCounter,e.$timeout(function(){n(e._loadFunnelService(e))},20)}})},getEmbedSignupTexts:function(){var e,n=this.$injector.get("bl.factories.FunnelService");return n.isFunnelABTrue()?n.getFunnelFromId().then(function(n){return e=n,this.$http({method:"GET",url:"/api/funnel/v1/registration/visitors/"+e+"/Desktop"}).then(function(e){return e.data})}.bind(this)):(e=0,Promise.reject({}))}},e});define(rA[451][0],["angular",rA[293][0],rA[477][0],rA[294][0]],function(o,r,e,c){"use strict";var t=o.module("bl.factories.countries",[e.name]);return t.service("bl.factories.countries.countriesFactory",r),t.factory("bl.factories.countries.models.country",c.$factory),t.run(["bl.factories.countries.models.country",function(){}]),t});define(rA[293][0],["underscore",rA[294][0]],function(t,e){"use strict";function n(t,e,n,r){this.$q=t,this.$injector=e,this.$log=n,this.$rootScope=r,this.$http=e.get("$http"),this.filteredCountries=[],this._countries={},this._defered=null,this._fallbackCountry,this._countryByIp}return n.$inject=["$q","$injector","$log","$rootScope"],n.prototype={get naCountryId(){return 0},get etoroCountryId(){return 250},isUsaCountry:function(t){var e=this.$injector.get("infrastruct.services.config"),n=e&&e.dynamics&&e.dynamics.americanCountries||[4,166,86,153,214,189,219];return-1!==n.indexOf(t)},init:function(){var t=this;return t._defered?t._defered:(t._defered=t.$q(function(e,n){t.$http({url:"/api/account/v1/user/geolocation/countries",categories:["generalConfig"],staticAPI:!0,"public":!0,resourceVersionId:"countries"}).then(function(n){e(t._handleInitSuccess(n.data)),n.data&&0!==n.data.countries.length||(t.$log.logJSON("error","log",{Categories:["CountriesFactory"],Message:"The countries response is empty"}),t._defered=null)})["catch"](function(){n(new AppError("Unable to fetch countries","CountriesFactory","CountriesAPIError",null)),t.filteredCountries.length=0,t._defered=null})}),t._defered)},getAll:function(){return this.filteredCountries.concat(this.getFallbackCountry())},getAllAvailable:function(){return this.filteredCountries},getById:function(t){return this._countries[t]||this.getFallbackCountry()},getByName:function(e){var n=e.toLowerCase();return t.find(this._countries,function(t){return t.name.toLowerCase()===n})||this.getFallbackCountry()},getFallbackCountry:function(){return this._fallbackCountry||(this._fallbackCountry=new e({abbreviation:" ",countryId:this.naCountryId,name:"Not available",phonePrefix:"",riskGroupID:0}))},getCountryByIp:function(){var t=this;return new Promise(function(e,n){return t._countryByIp?void e(t._countryByIp):void t.$http.get("https://ipme.etorostatic.com",{accelerated:!1}).then(function(n){t._countryByIp=t.getByName(n.data.countryName),e(t._countryByIp)})["catch"](n)})},_handleInitSuccess:function(t){var n=this;return t&&t.countries&&t.countries.forEach(function(t){t=new e(t),n._countries[t.countryId]=t,t.countryId!==n.etoroCountryId&&t.countryId!==n.naCountryId?n.filteredCountries.push(t):t.countryId===n.naCountryId&&(n._fallbackCountry=t)}),n._countries}},n});define(rA[294][0],["underscore",rA[382][0]],function(t){"use strict";function e(e){t.extend(this,e)}return e.prototype={get displayName(){return e.localizeFactory.getResource("countries."+this.abbreviation,!0,!0)||"N/A"}},e.$factory=["infrastruct.services.localization.localizeFactory",function(c){return t.extend(e,{localizeFactory:c}),function(t){return new e(t)}}],e});define(rA[455][0],["moduleDefiner","angular","underscore",rA[296][0]],function(t,r,i,e){"use strict";var o=t("bl.factories.trading.users.userPortfolio",[e]),s={1:"sl",3:"sl",5:"tp",6:"tp",7:"cr",8:"bu",9:"",10:"c",12:"c",13:"csl",14:"",15:"mc",16:"mc"};return o.factory("bl.factories.trading.users.userPortfolioFactory",["$q","$http","$filter","bl.factories.trading.instruments.instrumentsFactory","bl.factories.trading.users.usersFactory","bl.factories.trading.execution.tradingCalculator",function(t,r,e,o,n){function u(t,r){this.groups=[],this.CreditByRealizedEquity=r.CreditByRealizedEquity,this.CreditByUnrealizedEquity=r.CreditByUnrealizedEquity,this.lastUpdated=e("formatDate")(new Date),this.user=t,this.Url=t.Url+"/portfolio"}function a(t,r,e){this.GroupName="",this.Avatar=r.Avatars["default"],this.Url=e.Url,this.TradeItemUrl=r.Url,this.TradeItem=r,this.getPortfolio=function(){return e},i.extend(this,t)}function c(t,r,i){a.call(this,t,r,i),this.InstrumentID=r.InstrumentID,this.Type="positionsGroup",this.Instrument=r,this.InstrumentTypeID=r.InstrumentTypeID,this.IsStock=r.IsStock,this.GroupName=r.Name,this.Url=(i.Url+"/"+this.GroupName).toLowerCase()}function l(t,r,i){a.call(this,t,r,i),this.user=r,this.GroupName=r.username||t.ParentUsername,this.Url=(i.Url+"/"+this.GroupName).toLowerCase(),this.Type="mirrorGroup",this.SubType=r.SubType}function h(t){i.extend(this,t),this.Occurred=new Date(this.CloseDateTime),this.Avatar=this.Instrument&&this.Instrument.Avatars["default"]}function p(t,r){i.extend(this,t),this.getMirror=function(){return r},this.Occurred=new Date(this.Occurred),this.Amount=this.MirrorAmountDelta}function d(t){i.extend(this,t),this.Instrument=o.getById(this.InstrumentID),this.OpenDateTime=new Date(this.OpenDateTime)}var f={},g={};return u.prototype={getGroupByName:function(t){return i.isString(t)?i.find(this.groups,function(r){return r.GroupName.toLowerCase()===t.toLowerCase()}):null},getExposure:function(){return r({method:"get",url:"/sapi/trade-data-real/live/public/portfolios/exposure",actionUrl:"/sapi/trade-data-real/live/public/portfolios/exposure",params:{CID:this.user.realCID}}).then(function(t){var r=t.data&&t.data.InstrumentIdExposurePercentageList||[];return r.forEach(function(t){t.Instrument=o.getById(t.InstrumentID),t.InstrumentTypeID=t.Instrument.InstrumentTypeID}),r})}},c.prototype={getPositions:function(){var e=this.getPortfolio().user;return t(i.bind(function(t,o){return this._positions?void t(this._positions):void r({method:"get",url:"/sapi/trade-data-real/live/public/positions",params:{cid:e.realCID,InstrumentID:this.InstrumentID}}).success(i.bind(function(r){this._positions=[],i.extend(this,r),i.each(r.PublicPositions,function(t){this._positions.push(new d(t))},this),t(this._positions)},this)).error(function(t,r){o(new AppError("public portfolio positions api - error","publicPortfolioFactory","UnExpectedError",null,t,r))})},this))}},l.prototype={getPositions:function(){return t(i.bind(function(t,e){return this._positions?void t(this._positions):void r({method:"get",url:"/sapi/trade-data-real/live/public/mirrors/"+this.MirrorID,actionUrl:"/sapi/trade-data-real/live/public/mirrors/:MirrorID"}).success(i.bind(function(r){this._positions=r.PublicMirror.Positions||[],delete r.PublicMirror.Positions,i.extend(this,r.PublicMirror),i.each(this._positions,function(t){t.Instrument=o.getById(t.InstrumentID),t.OpenDateTime=new Date(t.OpenDateTime)}),t(this._positions)},this)).error(function(t,r){e(new AppError("public portfolio positions api - error","publicPortfolioFactory","UnExpectedError",null,t,r))})},this))},getHistory:function(){return t(i.bind(function(t,e){return this._history?void t(this._history):void r({method:"get",url:"/sapi/trade-data-real/live/public/mirrors/history/"+this.MirrorID,actionUrl:"/sapi/trade-data-real/live/public/mirrors/history/:MirrorID",params:{PageNumber:1,ItemsPerPage:1e4}}).success(i.bind(function(r){this._history=[],i.each(r.PublicMirrorOperations,function(t){this._history.push(new p(t,this))},this),i.each(r.PublicHistoryPositions,function(t){this._history.push(new h(t,this))},this),this._history.sort(function(t,r){return r.Occurred.getTime()-t.Occurred.getTime()}),t(this._history)},this)).error(function(t,r){e(new AppError("public portfolio mirror history api - error","publicPortfolioFactory","UnExpectedError",null,t,r))})},this))}},h.prototype={get ItemId(){return this.PositionID},get ActionTypeId(){return this.ClosePositionActionType?this.ClosePositionActionType:this.CloseReason},get classNameAvatar(){return s[this.ActionTypeId]},get Instrument(){return o.getById(this.InstrumentID,!0)}},p.prototype={get ItemId(){return this.getMirror().MirrorID},get ActionTypeId(){return this.IsCopyDividend?"IsCopyDividend":3===this.MirrorOperationID&&this.IsMoneyOut?2:this.MirrorOperationID},get Avatar(){return this.getMirror()?this.getMirror().Avatar:null},get isPi(){return this.getMirror()?this.getMirror().TradeItem.isPi:!1},get piLevel(){return this.getMirror()&&this.isPi?this.getMirror().TradeItem.piLevel:void 0}},{get:function(e){return t(function(t,s){return f[e.realCID]?void t(f[e.realCID]):void r({method:"get",url:"/sapi/trade-data-real/live/public/portfolios",params:{cid:e.realCID}}).success(function(r){var s=r.AggregatedPositions.length>0?i.pluck(r.AggregatedPositions,"InstrumentID"):[],a=r.AggregatedMirrors.length>0?i.pluck(r.AggregatedMirrors,"ParentCID"):[],h=o.getByIds(s),p=f[e.realCID]=new u(e,r);i.each(r.AggregatedPositions,function(t){p.groups.push(new c(t,h[t.InstrumentID],p))}),n.getByIds(a).then(function(e){i.each(r.AggregatedMirrors,function(t){p.groups.push(new l(t,e[t.ParentCID],p))}),t(p)})["catch"](function(r,i){new AppError("public portfolio api - failed to fetch users","publicPortfolioFactory","UnExpectedError",null,r,i);t(p)})}).error(function(t,r){s(new AppError("public portfolio api - error","publicPortfolioFactory","UnExpectedError",null,t,r))})})},remove:function(t){delete f[t.realCID]},getHistory:function(e){return t(i.bind(function(t,o){return g[e]?void t(g[e]):void r({method:"get",url:"/sapi/trade-data-real/live/public/mirrors/history/"+e,actionUrl:"/sapi/trade-data-real/live/public/mirrors/history/:MirrorID",params:{PageNumber:1,ItemsPerPage:1e4}}).success(i.bind(function(r){g[e]=[],i.each(r.PublicMirrorOperations,function(t){g[e].push(new p(t,this))},this),i.each(r.PublicHistoryPositions,function(t){g[e].push(new h(t,this))},this),g[e].sort(function(t,r){return r.Occurred.getTime()-t.Occurred.getTime()}),t(g[e])},this)).error(function(t,r){o(new AppError("public portfolio mirror history api - error","publicPortfolioFactory","UnExpectedError",null,t,r))})},this))}}}]),o});define(rA[275][0],["moduleDefiner"],function(e){"use strict";var i=e("bl.factories.trading.upsell",[]);return i});define(rA[454][0],["angular","underscore",rA[274][0],rA[479][0]],function(t,r,e,n){"use strict";function o(t,r,e,n){this.$interpolate=t,this.$route=r,this.localizeFactory=e,this.instrumentsGroupsFactory=n}var u=t.module("bl.factories.trading.portfolioGraph",[n.name]);u.service("bl.factories.trading.portfolioGraphService",o);var i="Equity",a="Value",c="value",s="portfolioCharts",l="publicPortfolioCharts";return o.$inject=["$interpolate","$route","infrastruct.services.localization.localizeFactory","bl.factories.trading.instruments.instrumentsGroupsFactory"],o.prototype={createPublicAllocationGraph:function(t,n){var o=this,u=t.groups,i=function(t){return t.MirrorID>0},c=function(t){return!t.MirrorID},s=new e("allocation",o.localizeFactory.dynamic(l,"allocationTitle"),function(){return o._sum(s.nodes)},function(){var f=new e("mirrors",o.localizeFactory.dynamic(l,"mirrorsTitle"),function(){return o._sum(f.nodes)},function(){var t=r.chain(u).filter(i).collect(function(t){return{sum:t[a],value:t}}).sortBy(o._sortBySumIterator).value(),c=o._collectMirrorsWithOther(n,t,function(t){var r=t.value,n=r.GroupName,o=new e(n,n,function(){return r[a]},void 0,r);return o.onClickAction="other"!=n,o.parent=f,o},a);return c}),m=new e("markets",o.localizeFactory.dynamic(l,"marketsTitle"),function(){return o._sum(m.nodes)},function(){var t=o._distributePositionGroupsToMarkets(m,r.chain(u).filter(c),n);return t}),h=new e("balance",o.localizeFactory.dynamic(l,"balanceTitle"),function(){return t.CreditByUnrealizedEquity});return r.collect([m,f,h],function(t){return t.parent=s,t})});return s},createPublicExposureGraph:function(t){var n=this,o=(n.instrumentsGroupsFactory.getTypesDictionary(),new e("exposure",n.localizeFactory.dynamic(l,"exposureTitle"),function(){return n._sum(o.nodes)},function(){var e=o.exposure||[];return 0===e.length?[]:n._distributePositionGroupsToMarkets(o,r.chain(e),t,"ExposurePercentage")}));return o},createPublicRiskGraph:function(){var t=this,n=new e("risk",t.localizeFactory.dynamic(l,"riskTitle"),function(){return t._sum(n.nodes)},function(){var o=n.riskContributors||[];if(o.length){var u=0,i=r.chain(o).each(function(t){var r=t.riskContributionPct;return u+=r,t}).collect(function(t){var r=t.tradedItem,o=r.SymbolFull,i=new e(o,r.Name,function(){return t.riskContributionPct/u*100});return i.onClickAction="other"!=o,i.parent=n,i}).value(),a=100-u;if(a>0){var c=new e("other",t.localizeFactory.dynamic(l,"otherTitle"),function(){return 0>a?-1*a:a});c.parent=n,i.push(c)}return i}return[]});return n},createPrivateExposureGraph:function(t,n){var o=this,u=new e("exposure",o.localizeFactory.dynamic(s,"exposureTitle"),function(){return o._sum(u.nodes)},function(){var e=r.flatten(r.collect(t,function(t){return t.Positions})),i=o._distributePositionsToMarkets(u,r.chain(e),n);return r.sortBy(i,function(t){return t[c]}).reverse()});return u.ready=!0,u},getGraphBaseUrl:function(t){var r=this.$route.current;return r&&r.$$route.chartBaseUrl?this.$interpolate(r.$$route.chartBaseUrl)(r.params):(t=t||"","/"!=t.charAt(t.length-1)&&(t+="/"),t)},_sum:function(t,e){return e=e||c,r.reduce(t,function(t,r){return t+r[e]},0)},_sortBySumIterator:function(t){return-1*t.sum},_collectMirrorsWithOther:function(t,e,n,o){if(o=o||i,e.length>t){var u=this._sum(r.chain(e).rest(t-e.length-1).pluck(c).value(),o);return r.collect(r.first(e,t-1).concat([{value:{value:u,Equity:u,Value:u,GroupName:"Other"},sum:u}]),n)}return r.collect(e,n)},_distributePositionGroupsToMarkets:function(t,e,n,o){var u=this,i=e.groupBy(function(t){return t.InstrumentTypeID});o=o||a;var c=r.chain(i).collect(function(t){var r=u._sum(t,o);return{sum:r,value:t}}).sortBy(u._sortBySumIterator).value();return this._collectWithOtherCategories(c,u._instrumentToNode(t,o,n),o,n)},_collectWithOtherCategories:function(t,e,n,o){var u=this;if(n=n||i,t.length>o){var a=r.chain(t).rest(o-t.length-1).pluck(n).reduce(function(t,r){return t+r[n]},0).value();return r.collect(r.first(t,o-1).concat({Instrument:{SymbolFull:"other",Name:u.localizeFactory.dynamic(l,"otherTitle")},Equity:a}),e)}return r.collect(t,e)},_instrumentToNode:function(t,n,o){var u=this,a=u.instrumentsGroupsFactory.getTypesDictionary();return n=n||i,function(i){var s=i.value[0].Instrument.TypeID;i.InstumentType=u.instrumentsGroupsFactory.getTypeById(s),i.Avatar=i.InstumentType.Avatars?i.InstumentType.Avatars["default"]:"";var l=a[s],f=new e(l,u.localizeFactory.dynamic("instrumentTypes",l),function(){return u._sum(f.nodes)},function(){var t=r.chain(i.value).collect(function(t){return{sum:t[n],value:t}}).sortBy(u._sortBySumIterator).value();return u._collectWithOther(t,function(t){t.Avatar=t[c].Instrument.Avatars?t[c].Instrument.Avatars["default"]:"";var r=t[c].Instrument,n=r.SymbolFull,o=new e(n,r.Name,function(){return t.sum},void 0,t);return o.onClickAction="other"!=n,o.parent=f,o},n,o)},i);return f.parent=t,f}},_collectWithOther:function(t,e,n,o){var u=this;if(n=n||i,t.length>o){var a=r.chain(t).rest(o-t.length-1).pluck(c).reduce(function(t,r){return t+r[n]},0).value();return r.collect(r.first(t,o-1).concat({value:{Instrument:{SymbolFull:"other",Name:u.localizeFactory.dynamic(l,"otherTitle")}},sum:a}),e)}return r.collect(t,e)},_distributePositionsToMarkets:function(t,r,e){var n=this,o=r.groupBy(function(t){return t.Instrument.TypeID}),u=o.collect(function(t){var r=n._positionsByCategory(t);return{sum:Math.abs(n._sumUnitsExposure(t)),value:r}}).sortBy(n._sortBySumIterator).value();return n._collectWithOtherCategories(u,n._instrumentToNode(t,"CalculatedUnits",e),"CalculatedUnits",e)},_positionsByCategory:function(t){var e=this;return r.chain(t).groupBy(function(t){return t.Instrument.InstrumentID}).collect(function(t){return{Instrument:t[0].Instrument,Equity:e._sum(t,i),CalculatedUnits:Math.abs(e._sumUnitsExposure(t)),CalculatedNetUnits:e._sumUnitsExposure(t),Positions:t}}).value()},_sumUnitsExposure:function(t){return r.reduce(t,function(t,r){return t+r.Units*(r.IsBuy?1:-1)*r.Instrument.getUnitMargin(r.IsBuy)},0)}},u});define(rA[274][0],["underscore"],function(t){"use strict";function e(e,n,c,i,a){var o=this;o.uid=t.uniqueId("ng"),o.valueCallback=c,o.nodeFilterCallback=i,o.name=n,o.id=e,o[r]=t.memoize(function(e){return t.result(o.node,e)}),o.node=o,o.nodeData=a}var n="value",r="cache",c=["#104A69","#F8C958","#9BBE52","#257099","#58A5CE","#9DC8EC"];return e.prototype={get value(){return this[r]("calculatedValue")},get nodes(){return this[r]("filterNodes")},get percentage(){var t;return this.parent?(t=this.parent.value,t?this[r](n)/t*100:0):100},get totalPercentage(){var t=this,e=t.lastParent;if(e){var c=e.value;return c?t[r](n)/c*100:0}return t.percentage},get lastParent(){var t=this.getParentBranch();return 1==t.length?!1:t[t.length-1]},get relativePath(){var e=this.getParentBranch();return t.collect(e.reverse(),function(t){return t.id}).join("/")},get color(){var t=this,e=t.parent,n=e?e.nodes.indexOf(t):0;return-1==n?n=0:n,c[n%c.length]},get drilldown(){var t=this,e=t.nodes;return e&&e.length?t.id||t.name:!1},get y(){return this.percentage},get data(){return this.nodes},calculatedValue:function(){return t.result(this,"valueCallback")},filterNodes:function(){return t.result(this,"nodeFilterCallback")},clearCache:function(){var t=this,e=t.parent;t[r][r]={},e&&e.clearCache()},getParentBranch:function(){for(var t,e=this,n=[this];!t;)e.parent?(e=e.parent,n.push(e)):t=e;return n},findNode:function(e){return t.find(this.nodes,function(t){return t.id==e})},loadAllNodes:function(){return t.each(this.nodes,function(t){t.value,t.loadAllNodes()}),this}},e});define(rA[501][0],["angular","underscore","moduleDefiner",rA[313][0],rA[486][0],rA[475][0],rA[450][0],rA[405][0],rA[403][0],rA[404][0],rA[468][0],rA[445][0],rA[406][0],rA[361][0],rA[483][0],rA[363][0],rA[448][0],rA[446][0],rA[447][0],rA[364][0],rA[449][0],rA[497][0],rA[478][0],rA[500][0],rA[292][0],rA[443][0],rA[263][0],rA[467][0],rA[262][0],rA[402][0],rA[464][0],rA[365][0],rA[444][0]],function(o,e,r,t,i,a,n,s,l,p,c,f,d,u,v,w,g,h,m,y,P,b,$,C,N,A,T,S,I,U,q,F,k){"use strict";var R=r("traderApp",["ngRoute","ngSanitize",i,a,n,P,b,C,$,N,A,T,S,q,k]);return R.config(["$routeProvider","ctrlResolverProvider",function(e,r){var t=r.register,i={sharePages:{showShareButton:!0,urlKey:"MyUserPagePortfolio"},template:"",authRoles:["user"],mainNavId:"portfolio",resolve:{whichPage:["$route","$q","bl.factories.settings.trading","$location","infrastruct.services.config","bl.factories.trading.infra.abTestingService","bl.factories.trading.mixpanelEventsService",function(o,e,r,t,i,a){var n=a.getAbTestingConfig("showNewPortfolio")>-1;return i.dynamics.trading.showNewPortfolio&&n?(t.path("/portfolio/overview").replace(),e(function(){})):e(function(o){r.getCurrentPage().then(function(e){t.path(e.url).replace(),o()})})}]}},a={sharePages:{showShareButton:!0,urlKey:"MyUserPagePortfolio"},templateUrl:"/etoro/apps/trader/portfolio/detailedView/detailedView.view.html",authRoles:["user"],mainNavId:"portfolio",showFooter:!0,resolve:{fundPublicPortfolio:["$q","bl.factories.trading.portfolio.portfolioFactory","$route","$injector",function(o,e,r,t){var i,a=e.get();return r&&r.current&&r.current.params&&r.current.params.id&&(i=a.getGroupByName(r.current.params.id)),i&&i.user&&"fund"===i.user.SubType?t.get("bl.factories.trading.users.userPortfolioFacade").get(i.user.realCID):o.resolve()}]}};e.when("/portfolio-page",i),e.when("/app/portfolio-page",i),e.when("/portfolio",t(R,rA[405][0],{sharePages:{showShareButton:!0,urlKey:"MyUserPagePortfolio"},templateUrl:"/etoro/apps/trader/portfolio/overview/overview.view.html",authRoles:["user"],mainNavId:"portfolio",controllerAs:"overviewCtrl",showFooter:!0,view:"LIST",resolve:{redirect:["$location","$q","infrastruct.services.config","bl.factories.trading.infra.abTestingService",function(o,e,r,t){var i=t.getAbTestingConfig("showNewPortfolio")>-1;return r.dynamics.trading.showNewPortfolio&&i?(o.path("/portfolio/overview").replace(),e(function(){})):void 0}]}})).when("/portfolio/manual-trades",t(R,rA[405][0],{sharePages:{showShareButton:!0,urlKey:"MyUserPagePortfolio"},templateUrl:"/etoro/apps/trader/portfolio/overview/overview.view.html",authRoles:["user"],mainNavId:"portfolio",controllerAs:"overviewCtrl",showFooter:!0,view:"MANUALTRADES",resolve:{redirect:["$q","$location","infrastruct.services.config","bl.factories.trading.infra.abTestingService",function(o,e,r,t){var i=t.getAbTestingConfig("showNewPortfolio")>-1;return r.dynamics.trading.showNewPortfolio&&i?(e.path("/portfolio/overview").replace(),o(function(){})):void 0}]}})).when("/portfolio/orders",{authRoles:["user"],mainNavId:"portfolio",showFooter:!0,resolve:{redirect:["$q","$location",function(o,e){var r=e.search().groupId;return e.url(r?"/portfolio/breakdown/"+r:"/portfolio/overview").replace(),o(function(){})}]}}).when("/portfolio/card-trades",t(R,rA[405][0],{sharePages:{showShareButton:!0,urlKey:"MyUserPagePortfolio"},templateUrl:"/etoro/apps/trader/portfolio/overview/overview.view.html",authRoles:["user"],mainNavId:"portfolio",controllerAs:"overviewCtrl",showFooter:!0,view:"CARD",resolve:{redirect:["$q","$location","infrastruct.services.config","bl.factories.trading.infra.abTestingService",function(o,e,r,t){var i=t.getAbTestingConfig("showNewPortfolio")>-1;return r.dynamics.trading.showNewPortfolio&&i?(e.path("/portfolio/overview/card-trades").replace(),o(function(){})):void 0}]}})).when("/portfolio/chart/:graph?",t(R,rA[405][0],{sharePages:{showShareButton:!0,urlKey:"MyUserPagePortfolio"},templateUrl:"/etoro/apps/trader/portfolio/overview/overview.view.html",authRoles:["user"],mainNavId:"portfolio",controllerAs:"overviewCtrl",showFooter:!0,view:"CHART",keepUrl:"portfolio_chart"})).when("/portfolio/chart/:graph/:relativePath*/drilldown",{sharePages:{showShareButton:!0,urlKey:"MyUserPagePortfolio"},controller:"apps.trader.portfolio.overview.overviewCtrl as overviewCtrl",showFooter:!0,templateUrl:"/etoro/apps/trader/portfolio/overview/overview.view.html",authRoles:["user"],mainNavId:"portfolio",view:"CHART",keepUrl:"portfolio_chart"}).when("/portfolio/overview/:activeState?",{template:'<et-portfolio-overview [active-state]="$resolve.activeState" (deposit-clicked)="$resolve.loadFundYourAccount()" [page-id]="$resolve.pageId"></et-portfolio-overview>',resolve:{activeState:["$route","$q","$location","infrastruct.services.config","bl.factories.trading.infra.abTestingService","infrastruct.ui.uiIfBreakpoint",function(o,e,r,t,i,a){var n=o.current&&o.current.params&&o.current.params.activeState||a&&a.isMobile&&JSON.parse(localStorage.getItem("portfolioViewMode")),s=i.getAbTestingConfig("showNewPortfolio")>-1;return t.dynamics.trading.showNewPortfolio&&s?e.resolve(n):(r.path(n?"/portfolio/"+n:"/portfolio").replace(),e(function(){}))}],pageId:["bl.factories.settings.trading","$q",function(o,e){return e(function(e){o.getCurrentPage().then(function(o){e(o.id)})})}],loadFundYourAccount:["bl.factories.payments.deposit.depositLoader","$q",function(o,e){return e.resolve(o.loadFundYourAccount.bind(o))}]},authRoles:["user"],showFooter:!0,mainNavId:"portfolio"}).when("/portfolio/breakdown/:id",{template:'<et-portfolio-breakdown [group-id]="$resolve.groupId"></et-portfolio-breakdown>',authRoles:["user"],showFooter:!0,mainNavId:"portfolio",resolve:{groupId:["$q","bl.factories.trading.portfolio.portfolioFactory","$route","$location","infrastruct.services.config","bl.factories.trading.infra.abTestingService",function(o,e,r,t,i,a){var n=r&&r.current&&r.current.params&&r.current.params.id,s=a.getAbTestingConfig("showNewPortfolio")>-1;if(!i.dynamics.trading.showNewPortfolio||!s)return t.path("/portfolio/"+n).replace(),o(function(){});var l,p=e.get();return n&&(l=p.getGroupByName(n)),o.resolve(l&&l.UniqueId||"aggregatedOrder-"+n)}]}}).when("/portfolio/breakdown/:id/copy-history",{template:'<et-portfolio-copy-history [group-id]="$resolve.groupId"></et-portfolio-copy-history>',authRoles:["user"],showFooter:!0,mainNavId:"portfolio",resolve:{groupId:["$q","bl.factories.trading.portfolio.portfolioFactory","$route","$location","infrastruct.services.config","bl.factories.trading.infra.abTestingService",function(o,e,r,t,i,a){var n=r&&r.current&&r.current.params&&r.current.params.id,s=a.getAbTestingConfig("showNewPortfolio")>-1;if(!i.dynamics.trading.showNewPortfolio||!s)return t.path("/portfolio/"+n).replace(),o(function(){});var l,p=e.get();return n&&(l=p.getGroupByName(n)),o.resolve(l.UniqueId)}]}}).when("/portfolio/breakdown/:group/:id",{template:'<et-portfolio-breakdown [group-id]="$resolve.groupId" [positions-group-name]="$resolve.groupName"></et-portfolio-breakdown>',authRoles:["user"],showFooter:!0,mainNavId:"portfolio",resolve:{groupId:["$q","bl.factories.trading.portfolio.portfolioFactory","$route","$location","infrastruct.services.config","bl.factories.trading.infra.abTestingService",function(o,e,r,t,i,a){var n=r&&r.current&&r.current.params&&r.current.params.group,s=r&&r.current&&r.current.params&&r.current.params.id,l=a.getAbTestingConfig("showNewPortfolio")>-1;if(!i.dynamics.trading.showNewPortfolio||!l)return t.path("/portfolio/"+n+"/"+s).replace(),o(function(){});var p,c=e.get();return n&&(p=c.getGroupByName(n)),o.resolve(p.UniqueId)}],groupName:["$q","bl.factories.trading.portfolio.portfolioFactory","$route","$location","$rootScope",function(o,e,r){var t;return r&&r.current&&r.current.params&&(t=r.current.params.id),o.resolve(t)}]}}).when("/portfolio/:id",t(R,rA[403][0],o.merge({resolve:{group:["$q","bl.factories.trading.portfolio.portfolioFactory","$route","$location","$rootScope","infrastruct.services.config","bl.factories.trading.infra.abTestingService",function(o,e,r,t,i,a,n){var s=r&&r.current&&r.current.params&&r.current.params.id,l=n.getAbTestingConfig("showNewPortfolio")>-1;if(a.dynamics.trading.showNewPortfolio&&l)return t.path("/portfolio/breakdown/"+s).replace(),o(function(){});var p,c=e.get();return s&&(p=c.getGroupByName(s)),p&&p.user&&"fund"===p.user.SubType&&t.path(t.path()+"/chart").search(t.search()).replace(),o.resolve()}]}},a))).when("/portfolio/:id/all-items",t(R,rA[403][0],o.merge({},a,{viewMode:"LIST"}))).when("/portfolio/:id/chart/:graph?",t(R,rA[403][0],o.merge({},a,{viewMode:"CHART",view:"CHART",chartBaseUrl:"/portfolio/{{id}}/chart/",keepUrl:function(o,e){return e&&e.params?"portfolio_chart_user"+e.params.id:!1}}))).when("/portfolio/:id/chart/:graph/:relativePath*/drilldown",t(R,rA[403][0],o.merge({},a,{viewMode:"CHART",view:"CHART",chartBaseUrl:"/portfolio/{{id}}/chart/",keepUrl:function(o,e){return e&&e.params?"portfolio_chart_user"+e.params.id:!1}}))).when("/portfolio/:id/:subItem",t(R,rA[403][0],a)).when("/app/trade-shortcut",{template:"",resolve:{openPopup:["$location","$rootScope","$analytics","apps.trader.portfolio.portfolioActionsEvents","bl.factories.trading.users.usersFactory","bl.factories.trading.instruments.instrumentsFactory","$q","infrastruct.services.config","bl.factories.session.sessionFactory",function(o,e,r,t,i,a,n,s,l){return n(function(){var n=s.query,p="copy"===n.action?i.getByUserName(n.copy_username):a.init().then(function(){return a.getBySymbol(n.symbol)}),c=n.landing_page,f=function(r){c||o.path(r.Url).replace();var i=e.session.user;return i?i.isValidForExpressCheckout().then(function(e){n.isExpressCheckout=e,t.handleAutoExecutionPopup(r,n,o.path())}):void 0};p.then(function(o){o&&(r.eventTrack("Open Trade Deeplink",{"Copied Username":n.copy_username,Symbol:n.symbol}),l.assertIsAuthorized("user",o,!1,f.bind(null,o))&&f(o))}),c&&"/app/trade-shortcut"!=c&&o.path(decodeURI(c)).replace()})}]}}).when("/app/trader/bsl",{template:"",authRoles:["user"],resolve:{openPopup:["$location","$rootScope","$q","infrastruct.services.config","uiDialog",function(o,e,r,t,i){return r(function(){var r=e.session,a=r.user.portfolio.equity,n=r.user.bsl,s=n&&n.bonusAmount?a-n.bonusAmount:a;e.session.user&&e.session.user.portfolio&&e.session.user.portfolio.account&&e.session.user.portfolio.account.type&&"real"===e.session.user.portfolio.account.type.toLowerCase()&&i.open({template:'<bsl-notification equity="uiDialogData.equity" real-funds="uiDialogData.realFunds" on-close="closeThisDialog()"></bsl-notification>',data:{realFunds:s,equity:a},plain:!0,allowNavigation:!0});var l=t.query.landing_page||"/";"/app/trader/bsl"!=l&&o.path(decodeURI(l)).replace()})}]}}).when("/app/kyc/:kycDeepLink",{template:"",authRoles:["user"],resolve:{openKyc:["$q","bl.factories.payments.kycProvider","$route","$location","infrastruct.services.config","$parse",function(o,e,r,t,i,a){return o(function(){var o=a("current.params.kycDeepLink")(r);if(o){var n={deepLink:o};e.loadVolunteerModal(n)}t.path("/portfolio").search(i.query||t.search())})}]}})}]),R.component("tabSwitch",T),t(R,"overviewTimeLog"),s(R,"apps.trader.portfolio.overview.overviewCtrl"),l(R,"apps.trader.portfolio.detailedView.detailedViewCtrl"),p(R,"apps.trader.portfolio.openTrades.openTradesCtrl"),f(R,"apps.trader.portfolio.executePositionCtrl"),c(R,"apps.trader.portfolio.openPosition.openPositionCtrl"),d(R,"apps.trader.portfolio.updatePosition.updatePositionCtrl"),u(R,"apps.trader.portfolio.closePosition.closePositionCtrl"),R.component("portfolioListView",v),w(R,"apps.trader.portfolio.overview.chart.chartCtrl"),g(R,"allocationSmallGraph"),h(R,"allocationDetailedGraph"),m(R,"allocationPie"),y(R,"myPortfolio"),R.component("instrumentPreview",I),R.component("closeAllPositions",U),R.component("redeemLimit",F),R});define(rA[313][0],["underscore","moduleDefiner",rA[486][0]],function(e,i,r){"use strict";function o(e){return{resctrict:"A",scope:{viewName:"@"},compile:function(){return{post:function(i){setTimeout(function(){var r={ViewMode:i.viewName,Message:"Old Portfolio Overview Performance"};e.timeEnd("oldPortfolioOverviewTime",null,r)},4)}}}}}return function(e,t){return i(e,[r]).directive(t,["$log",o])}});define(rA[450][0],["angular","underscore","moduleDefiner",rA[479][0]],function(t,r,e,n){"use strict";var s=e("apps.trader.rates",[n]);return s.directive("instrumentRate",["bl.factories.trading.instruments.rates.ratesFactory","bl.factories.trading.instruments.instrumentsFactory",function(t,r){return{restrict:"A",scope:!0,link:{pre:function(e,n,s){var i;e.$watch(s.instrumentRate,function(e,n){i=e,i&&(t.subscribe(i),r.getPrivateInstrument(i)),n&&n!=i&&t.unsubscribe(n)}),e.$on("$destroy",function(){i&&t.unsubscribe(i)})}}}}]),s});define(rA[405][0],["angular","underscore","moduleDefiner"],function(e,o,t){"use strict";function i(e,t,i,s,r,l,n,a,d,p,c,u,f,h,m,v,g,S){function $(){e.$broadcast("app:ui:table:openEditDialog")}function w(o){o&&o.stopImmediatePropagation(),e.model.investingMode=!e.model.investingMode,e.viewModeService.updateViewModeByToggle(e.model.investingMode),e.$emit("app:ui:oldAngular:layoutViewChange")}function b(){var e=C.indexOf(I.mode);e++,e>=C.length&&(e=0),"CARD"===C[e]&&i.eventTrack("Portfolio Cards - Page View"),t.path(F[C[e]])}function T(o,t,i){I.mode=i?i:I.mode,e.model.selectedFilter.group=o,e.model.selectedFilter.subGroup=t,A.portfolio&&(e.model.positions=o?A.portfolio.filterGroupsByType(o,t):A.portfolio.groups,o?d.setItem("portfolioFilteredBy",{groupType:o,tradeItemTypeId:t}):d.removeItem("portfolioFilteredBy"),e.$emit("app:ui:oldAngular:layoutViewChange"))}g.time("oldPortfolioOverviewTime"),this.portfolioFactory=n;var A=this,M=l.getTypes(),y=[],I={mode:s&&s.current&&s.current.$$route&&s.current.$$route.view?s.current.$$route.view:"LIST",categories:y},D=d.getItem("portfolioFilteredBy");e.appSource="apps-trader-portfolio-overview-overview.view",e.model={portfolioUpsellBannerData:{shouldShowOpenTradeUpsellPopup:!1},investingMode:!1,viewState:I,positions:"MANUALTRADES"===I.mode?A.portfolio.getManualTrades():A.portfolio.groups,selectedFilter:{group:null,subGroup:null},get hasOrders(){var e=A.portfolio.orders.filter(function(e){return"ExitOrder"!==e.SubType});return e.length>0},get ordersAmount(){for(var e=0,o=0;o<A.portfolio.orders.length;o++){var t=A.portfolio.orders[o],i="OrderForClose"===t.SubType?0:t.Amount;e+=i}return e}};var F={LIST:"/portfolio",MANUALTRADES:"/portfolio/manual-trades",CHART:"/portfolio/chart"},C=["LIST","MANUALTRADES","CHART"];c.isMobile&&(F.CARD="/portfolio/card-trades",C.splice(0,0,"CARD")),D&&"LIST"===I.mode&&T(D.groupType,D.tradeItemTypeId,e.model.viewState.mode),o.each(M,function(e){y.push(e)}),p.sort(y,"Order"),e.switchView=b,e.openTableEdit=$,e.toggleViewMode=w,e.filter=T,this.config=v,this.$scope=e,this.$rootScope=a,this.guide=f,this.localizeFactory=h,this.localStorage=m,this.abTestingService=S,this.uiIfBreakpoint=c,this.$analytics=i,e.viewModeService=u,this.viewModeSelectedOption=e.viewModeService.getCurrentMode(),this.isViewModeForced=e.viewModeService.isViewModeForced(),this.isInvestingMode=e.viewModeService.isInvestingMode(),e.model.investingMode=this.isInvestingMode,e.model.regulationId=this.$rootScope.session.user.regulationId,e.model.closeAll=function(e,o){var i=e.Instrument&&e.Instrument.isUsTrade?v.dynamics.portfolio.isSellAllEnabled:v.dynamics.portfolio.isCloseAllEnabled;i?e.Instrument.closeAllTrades(o):t.path(e.Url)},e.$injector=r,this.loadPortfolioUpsellBannerData(),this.loadConfigData(),this.reportMixPanel(),this.templates={DEFAULT:{isNgInclude:!1,template:'<portfolio-list-view positions="model.positions" is-investing-mode="model.investingMode"  model="model" view-state-mode="LIST" app-source=":: appSource"  upsell-data= "model.portfolioUpsellBannerData" is-close-all-enabled = "model.isCloseAllEnabled"></portfolio-list-view>'},EMPTY:{isNgInclude:!0,template:"/etoro/apps/trader/portfolio/empty/empty.view.html"},CHART:{isNgInclude:!0,template:"/etoro/apps/trader/portfolio/overview/chart/chart.view.html"},CARD:{isNgInclude:!0,template:"/etoro/apps/trader/portfolio/overview/card/cardTrades.view.html"},MANUALTRADES:{isNgInclude:!1,template:'<portfolio-list-view positions="model.positions" model="model" view-state-mode="MANUALTRADES" app-source=":: appSource"></portfolio-list-view>'}},this.addListeners(),this.activateGuide()}return i.prototype={get portfolio(){return this.portfolioFactory.get()},get template(){return 0===this.$scope.model.positions.length?this.templates.EMPTY:this.templates[this.$scope.model.viewState.mode]?this.templates[this.$scope.model.viewState.mode]:this.templates.DEFAULT},loadConfigData:function(){this.config.dynamics.whenReady().then(function(){this.$scope.model.isCloseAllEnabled=this.config.dynamics.portfolio.isCloseAllEnabled}.bind(this))},loadPortfolioUpsellBannerData:function(){var e=this.$scope.$injector.get("bl.factories.trading.upsell.upsellService");e.shouldShowPortfolioUpsellBanner(this.portfolio)&&e.getPortfolioUpsellBannerData(this.portfolio).then(function(e){e&&(this.$scope.model.portfolioUpsellBannerData=e)}.bind(this))["catch"](function(){})},addListeners:function(){var e,o,t,i,s,r=this.$scope.model.viewState.mode;if(-1!==["LIST","CARD"].indexOf(r)){var l,n;e=this.$rootScope.$on("portfolio:group:removed",function(){l=this.$scope.model.selectedFilter.group,n=this.$scope.model.selectedFilter.subGroup,this.$scope.filter(l,n,r)}.bind(this)),o=this.$rootScope.$on("portfolio:group:added",function(){l=this.$scope.model.selectedFilter.group,n=this.$scope.model.selectedFilter.subGroup,this.$scope.filter(l,n,r)}.bind(this)),t=this.$rootScope.$on("portfolio:sync:success",this.onPortfolioSync.bind(this)),i=this.$rootScope.$on("portfolio:position:open:success",this.loadPortfolioUpsellBannerData.bind(this)),s=this.$rootScope.$on("portfolio:position:closed:success",this.loadPortfolioUpsellBannerData.bind(this))}this.$scope.$on("$destroy",function(){e&&e(),o&&o(),t&&t(),i&&i(),s&&s()})},onPortfolioSync:function(){this.$scope.model.positions="MANUALTRADES"===this.$scope.model.viewState.mode?this.portfolio.getManualTrades():this.portfolio.groups;var e=this.$scope.model.selectedFilter.group,o=this.$scope.model.selectedFilter.subGroup;this.$scope.filter(e,o,this.$scope.model.viewState.mode)},activateGuide:function(){if(this.guide.isMobile&&-1!==["MANUALTRADES"].indexOf(this.$scope.model.viewState.mode)&&!this.localStorage.getItem("hasSeenMobilePortfolioGuide")){var e=this.localizeFactory.getResource("guides.devices.portfolioId",!0);e&&(this.guide.activateTopic(e),this.localStorage.setItem("hasSeenMobilePortfolioGuide",!0))}},reportMixPanel:function(){var e,o=this.$scope.model.viewState.mode;if(this.uiIfBreakpoint.isMobile&&!this.isInvestingMode&&"LIST"===o){e=this.localStorage.getItem("abColsData");var t=e&&e.username===this.$rootScope.session.user.username?e.shouldUse:0===this.abTestingService.getAbTestingConfig("portfolioColumns"),i=t?"B":"A",s=this.localStorage.getItem("uiTable");s=s&&s.portfolioOverview?s.portfolioOverview.slice(0,4):t?["units","avgOpen","current","equity"]:["investedAmount","netProfit","pnl","equity"],e={cols:s,version:i}}var r=e?{Mode:o,abColsData:e}:{Mode:o};this.$analytics.eventTrack("Portfolio Overview - Page View",r)}},function(e,o){return t(e,["bl.factories.trading.portfolio"]).controller(o,["$scope","$location","$analytics","$route","$injector","bl.factories.trading.instruments.instrumentsGroupsFactory","bl.factories.trading.portfolio.portfolioFactory","$rootScope","infrastruct.services.sessionStorage","infrastruct.services.sorterFactory","infrastruct.ui.uiIfBreakpoint","bl.factories.settings.viewMode","integrations.guide","infrastruct.services.localization.localizeFactory","infrastruct.services.localStorage","infrastruct.services.config","$log","bl.factories.trading.infra.abTestingService",i])}});define(rA[403][0],["underscore","moduleDefiner",rA[475][0],rA[486][0],rA[497][0]],function(o,e,r,t,i){"use strict";function l(o,e,r,t,i,l,n,u,a,d){function p(){l.history.back()}function c(e){var r=o.model.portfolio;if(r&&r.groups){var t=r.groups.length;2>t||(e?s++:s--,0>s?s=t-1:s>=t&&(s=0),i.path(r.groups[s].Url))}}function f(e){o.model.viewState=e,t.$emit("app:ui:oldAngular:layoutViewChange")}var s;return o.isMirrorManualViewMode=!1,o.changMirrorViewModeListener=t.$on("app:ui:mirror:viewMode",function(e,r){o.isMirrorManualViewMode=r.manualViewMode}),o.$watch(function(){return o.model.group},function(e,r){o.isFundAllocation=i.url().indexOf("chart")>-1,e!==r&&(e||i.url("/portfolio").replace(),t.$emit("portfolio.detailedView.on.group.changed"))}),o.model={get portfolio(){return n.get()},get group(){return o.model.portfolio?o.model.portfolio.getGroupByName(u.id):null},get isCustomizedColumnsAction(){return"OPEN_TRADES"===this.viewState||"FUND"===this.viewState&&o.isFundAllocation!==!0||"COPY_HISTORY"===this.viewState}},o.model.group?(o.model.groups=o.model.portfolio.groups,o.model.fundPublicPortfolio=d,o.model.viewState="fund"===o.model.group.SubType?"FUND":"OPEN_TRADES",o.model.isMirror="mirrorGroup"===o.model.group.Type,o.isFundAllocation=!1,o.model.regulationId=t.session.user.regulationId,o.moveToView=c,o.back=p,o.setView=f,s=o.model.portfolio.groups.indexOf(o.model.group),a.mixInto(o),void r.eventTrack("Portfolio Breakdown - Page View",{Mode:"mirrorGroup"===o.model.group.Type?"People":"Market"})):void i.url("/portfolio").replace()}return function(o,n){return e(o,[t,"infrastruct.services",r,i]).controller(n,["$scope","$route","$analytics","$rootScope","$location","$window","bl.factories.trading.portfolio.portfolioFactory","$routeParams","apps.trader.portfolio.portfolioActionsEvents","fundPublicPortfolio",l])}});define(rA[404][0],["underscore","moduleDefiner",rA[475][0],rA[486][0],rA[497][0]],function(o,e,i,n,r){"use strict";function t(o,e,i,n,r,t,s,d,l,c,a){function u(e,i){i="undefined"==typeof i?!0:i,f.column===e?i&&(f.descending=!f.descending):(f.column=e,f.descending=!0),l.setItem("portfolio:viewStateMode:DETAILEDVIEW:sort",f),o.model&&o.model.group&&o.model.group.Positions&&e&&d.sort(o.model.group.Positions,e,f.descending)}function p(o){return o==f.column&&(f.descending?"sort down":"sort up")}var f={column:"Gain",descending:!0};o.appSource="apps-trader-portfolio-detailedView-openTrades-openTrades.view",o.viewModeService=c,o.isInvestingMode=o.viewModeService.isInvestingMode(),o.isUsUser=e.session.isUsUser(),o.loadConfigData=function(){a.dynamics.whenReady().then(function(){var e=o.model.group.Instrument&&o.model.group.Instrument.isUsTrade;o.isCloseAllEnabled=e?a.dynamics.portfolio.isSellAllEnabled:a.dynamics.portfolio.isCloseAllEnabled}.bind(this))},o.loadConfigData(),o.sellBtn=function(o,e){s.closeAllTrades(e.TradeItem.uniqueId,this.appFullSource)},o.cancelClosePosition=function(e,n,r){if(n)o.closeOrder(e,void 0,void 0,o.appSource,r);else{var t=s.buildSourceObj(o.appSource,i.path());e.cancelCloseExitMarketOrder(t)}},o.executeDefault=function(e,i){e.isExecutionBlocked()||!e||o.model.group.MirrorID&&o.model.group.PendingForClosure||e.isClosedRequested||(e.isPendingClose||e.isPartialPendingClose?o.cancelClosePosition(e,!0,i):o.model.group.MirrorID?e.Instrument&&e.Instrument.AllowClosePosition&&o.closePosition(e,o.appSource,i):o.updatePosition(e,void 0,o.appSource))};var g=l.getItem("portfolio:viewStateMode:DETAILEDVIEW:sort");g&&(f.descending=g.descending),d.sort(o.model.group.Positions,f.column,f.descending),o.sort=u,o.sortSelectedClassName=p;var m=e.$on("portfolio.detailedView.on.group.changed",function(){o.sort(f.column,!1)});o.$on("$destroy",function(){m&&m()}),s.mixInto(o)}return function(o,s){return e(o,[n,"infrastruct.services",i,r]).controller(s,["$scope","$rootScope","$location","$window","bl.factories.trading.portfolio.portfolioFactory","$routeParams","apps.trader.portfolio.portfolioActionsEvents","infrastruct.services.sorterFactory","infrastruct.services.localStorage","bl.factories.settings.viewMode","infrastruct.services.config",t])}});define(rA[468][0],["underscore","moduleDefiner",rA[475][0],rA[486][0],rA[445][0],rA[348][0],rA[57][0]],function(e,o,t,i,s,n){"use strict";function a(o,t,i,s,n,a,r,l,d,m,u,c,p,f,g,T,v,h,C){function L(s,n,a,r){K&&K.$rootScope&&K.$rootScope.session&&K.$rootScope.session.$log&&s&&K.$rootScope.session.$log.logJSON("info","log",{Categories:["OpenPositionPopup"],Message:"OpenPositionPopup init",instrumentData:{symbolFull:s.SymbolFull,instrumentId:s.InstrumentID,isActive:s.rate.IsActive,isExchangeOpen:s.rate.IsExchangeOpen,isUsTrade:s.isUsTrade,restrictedManualOpen:s.RestrictedManualOpen,allowManualTrading:s.AllowManualTrading,allowEntryOrders:s.AllowEntryOrders,allowPendingOrders:s.AllowPendingOrders}}),K._initLocalizations(),K.instrument=s,K.restrictionsSummary=r,K.isNoneLeveragedOnly=s.isNoneLeveragedOnly,K.isDepositClicked=!1,K.abTestsConfig=a&&a.abTestsConfig||{};var d=!a||0===Object.keys(a).length;a=a||{};var m=c.getDefaultOptions(s);o.model.loading=!0,o.model.isBuy="undefined"==typeof n?o.model.isBuy:n,a&&"undefined"!=typeof a.isBuy&&(o.model.isBuy=a.isBuy),a&&"undefined"!=typeof a.isExpressCheckout&&(o.model.isExpressCheckout=a.isExpressCheckout),o.model.availableCash=H(),o.model.convertedSymbol="$",o.model.instrument=s,o.model.closeMarketSimilarToOpen=P(),o.model.closeMarketText=I(),o.model.amount.isNeedToDeposit=!1,o.model.amount.inUnitsMode=!(!a.amount||!a.amount.inUnitsMode),o.model.isZeroAmount=F(a),o.model.changeSellToShort=U(),o.model.amountEditMode=a.amountEditMode,o.model.isConfirmForAll=w(),o.model.isUsConfirmMode=!1,o.model.confirmationData={amount:"",units:"",timestamp:""},o.model.showFeesTooltip=!1,o.model.isCopyText=x(),o.model.isCopyTextUs=B(),o.model.isOneClickTradingEnabled=!K.isNoneLeveragedOnly&&c.isEnabled()&&!t.session.isUsUser(),o.model.oneClickTrading={leverage:m.leverage,stopLoss:m.rate,takeProfit:m.rate,isTslEnabled:m.isTslEnabled,get rateOptions(){return e.values(c.getRateOptions())},showInfo:!0,setRate:function(e,o){o?this.stopLoss=e:this.takeProfit=e},isActive:!1,inUnitsMode:!!m.inUnitsMode};var u=o.$on("ui-tab-clicked.OpenPositionOneClickTradingTabs",function(){o.model.oneClickTrading.showInfo=!1,u()});o.model.dafaultLeverage=$(),o.model.leverages=l.setLeverageList(o.model.instrument,o.model.dafaultLeverage,a.leverages),o.model.displayLeverages=o.model.instrument.mergedLeveragesList||o.model.leverages,o.model.risk.amount=o.model.leverages.selectedLeverage,o.model.isUSUser=t.session.isUsUser();var p=l.getRateOrDiscountedRate(n,o.model.instrument,n,o.model.leverages.selectedLeverage);o.model.viewRate=p,o.model.viewRateContext.clientViewRate=p,o.model.viewRateContext.clientViewRateID=o.model.instrument.rate.PriceRateID,o.model.viewRateContext.clientRateForCalc=p,o.model.viewRateContext.clientRateForCalcID=o.model.instrument.rate.PriceRateID,o.model.orderModeCurrentRate=p,a&&a.marketMode===o.model.marketModeOptions.order&&(o.model.marketMode=a.marketMode,a.viewRate&&(o.model.viewRate=l.changeOrderRate(o.model,a.viewRate,0),o.model.orderModeCurrentRate=a.viewRate)),o.model.isShowUnitTooltip=K.abTestsConfig&&K.abTestsConfig.isShowUnitTooltip,o.UpdateShowCFDDisclaimer(),o.setDefaultAmount(a.amount,s,a.amountInput),o.model.instrument.IsActive||o.model.marketMode===o.model.marketModeOptions.order||(o.model.marketMode=o.model.marketModeOptions.isMarket,a&&a.stopLoss&&void 0!==a.stopLoss.amount&&(a.stopLoss.amount=void 0),a&&a.takeProfit&&void 0!==a.takeProfit.amount&&(a.takeProfit.amount=void 0),o.switchTradeMode(!0,o.model.stopLoss),o.switchTradeMode(!0,o.model.takeProfit)),l.setDefaultStopLoss(o.model,a.stopLoss),l.setDefaultTakeProfit(o.model,a.takeProfit),o.model.stopLoss.TSL.isEnabled=o.model.instrument.AllowTrailingStopLoss&&a&&a.stopLoss&&void 0!==a.stopLoss.isTSLEnabled?!!a.stopLoss.isTSLEnabled:s.DefaultTrailingStopLoss,o.model.oneClickTrading.isTslEnabled=o.model.stopLoss.TSL.isEnabled,d||J(a),o.model.oneClickTrading.leverage=o.model.risk.amount,o.model.loading=!1,o.model.mixPanelTimestap=Date.now(),o.model.mixpanelDefaultAmount=o.model.amount?o.model.amount.amount:null,o.model.mixpanelDefaultstopLoss=o.model.stopLoss?o.model.stopLoss.dollar:null,o.syncDollarViews(!0),o.syncAmountInput(!0),h.sendOpenTradeEvent(o.model),angular.forEach(["user:credit:update:success","portfolio:position:open:success","portfolio:position:closed:success"],function(e){var i=t.$on(e,function(){o.clearErrors("amount"),o.recalculateAmountAndUnits()});K.watchers.push(i)}),o.$on("$destroy",function(){e.each(K.watchers,function(e){e&&e()}),K.isNeedToDepositWatcher&&K.isNeedToDepositWatcher(),K.watchers=[]}),K.isNeedToDepositWatcher=o.$watch("model.amount.isNeedToDeposit",function(e){e&&(K.isNeedToDepositWatcher&&K.isNeedToDepositWatcher(),i.eventTrack("Open Trade - Switch to Deposit",{instrumentType:s.instrumentType.InstrumentTypeDescription,instrumentName:s.Name}))}),v.track("Open Trade",{category:"Trade",label:"Presented",action:"Open",name:K.instrument.Name,id:K.instrument.ItemId,dimension71:K.instrument.instrumentType&&K.instrument.instrumentType.key||""}),o.model.isExpressCheckout&&i.eventTrack("Open Trade - Express Checkout"),K.enableStopLossEditing=s.AllowEditStopLoss,K.enableTakeProfitEditing=s.AllowEditTakeProfit,K._initPopUp(o),l.checkStopLossLimit(o.model),l.checkTakeProfitLimit(o.model);var f=!!(a&&a.stopLoss&&a.stopLoss.isNoStopLossSet),g=!!(a&&a.takeProfit&&a.takeProfit.isNoTakeProfitSet),T=o.model.instrument.isNoneLeveragedOnly;!T&&o.model.stopLoss.isLimitLessReachable&&f&&o.setNoStopLoss(!0),!T&&o.model.takeProfit.isLimitLessReachable&&g&&o.setNoTakeProfit(!0)}function b(){o.model.ActiveTab=q(),N(),j(!0),h.sendOpenTradeEvent(o.model,"Exit"),o.closeThisDialog()}function k(){o.model.oneClickTrading.isActive&&(c.updateOpenPositionModel(o.model.instrument,o.model.isBuy,o.model.oneClickTrading,o.model),c.addOrUpdateInstrument(o.model.instrument,{leverage:o.model.oneClickTrading.leverage,stopLoss:o.model.oneClickTrading.stopLoss,takeProfit:o.model.oneClickTrading.takeProfit,amount:o.model.amount.amount,isTslEnabled:o.model.oneClickTrading.isTslEnabled,units:o.model.amount.units,inUnitsMode:o.isEditByUnit()}))}function O(){if(!o.model.isTradeActionDisabled){if(K&&K.$rootScope&&K.$rootScope.session&&K.$rootScope.session.$log&&K.$rootScope.session.$log.logJSON("info","log",{Categories:["OpenPositionPopup"],Message:"Click on openPosition button",InstrumentID:o.model.instrument.InstrumentID}),(w()||o.model.instrument.isUsTrade)&&!o.model.isUsConfirmMode){o.model.confirmationData=w()?M():{amount:o.model.amount.amount,units:o.model.amount.units,timestamp:Date.now()};var e=o.model.instrument.isUsTrade?o.model.isBuy?"Buy":"Sell":"Open Trade";return N(),R(),h.sendOpenTradeEvent(o.model,e),void(o.model.isUsConfirmMode=!0)}k(),E(),R(),Z.portfolio.openPosition(o.model,y()),o.model.actionDisabled=!0,o.model.isLoading=!0,o.closeThisDialog(),o.model.ActiveTab=q();var t=o.model.isUsConfirmMode&&(o.model.instrument.isUsTrade||o.model.isConfirmForAll)?"Submit":"Open Trade";h.sendOpenTradeEvent(o.model,t),W(),j(!1)}}function y(){return l.isDiscountedRate(o.model.instrument,o.model.isBuy,o.model.leverages.selectedLeverage)}function S(){o.model.isUSUser&&!o.model.instrument.IsAmericanStock&&window.open("https://www.etoro.com/en-us/trading/market-hours-fees/#crypto","_blank")}function D(){if(!o.model.isTradeActionDisabled){if(K&&K.$rootScope&&K.$rootScope.session&&K.$rootScope.session.$log&&K.$rootScope.session.$log.logJSON("info","log",{Categories:["OpenPositionPopup"],Message:"Click on openOrder button",InstrumentID:o.model.instrument.InstrumentID}),w()&&!o.model.isUsConfirmMode)return o.model.confirmationData=M(),h.sendOpenTradeEvent(o.model,"Set Order"),void(o.model.isUsConfirmMode=!0);N(),R(),_(),k(),E(),Z.portfolio.openOrder(o.model,y()),o.model.actionDisabled=!0,o.model.isLoading=!0,o.closeThisDialog(),o.model.ActiveTab=q();var e=o.model.isUsConfirmMode&&o.model.isConfirmForAll?"Confirm":"Set Order";h.sendOpenTradeEvent(o.model,e),R(),W(),j(!1)}}function w(){return K.abTestsConfig&&K.abTestsConfig.isConfirmForAll}function M(){return{isConfirmForAll:w(),isAmountMode:!o.isEditByUnit(),amount:o.model.amount.amount,units:o.model.amount.units,stopLoss:o.model.stopLoss.dollar,takeProfit:o.model.takeProfit.dollarView,leverages:o.model.leverages.selectedLeverage,timestamp:Date.now()}}function A(){if(!o.model.isTradeActionDisabled){if(K&&K.$rootScope&&K.$rootScope.session&&K.$rootScope.session.$log&&K.$rootScope.session.$log.logJSON("info","log",{Categories:["OpenPositionPopup"],Message:"Click on openMarketOrder button",InstrumentID:o.model.instrument.InstrumentID}),w()&&!o.model.isUsConfirmMode)return o.model.confirmationData=M(),h.sendOpenTradeEvent(o.model,"Set Order"),N(),void(o.model.isUsConfirmMode=!0);N(),R(),_(),k(),E(),Z.portfolio.openEntryMarketOrder(o.model,y()),o.model.actionDisabled=!0,o.model.isLoading=!0,o.closeThisDialog(),o.model.ActiveTab=q();var e=o.model.isUsConfirmMode&&o.model.isConfirmForAll?"Confirm":"Set Order";h.sendOpenTradeEvent(o.model,e),W(),j(!1)}}function E(){var e=o.model;e&&(e.openByUnits=o.isEditByUnit())}function P(){return!o.model.isOnlyPendingOrdersAllowed&&!o.model.instrument.IsActive&&K.abTestsConfig&&K.abTestsConfig.marketClosedIndication&&"market_closed_indication_original_test"===K.abTestsConfig.marketClosedIndication}function I(){return!o.model.instrument.IsActive&&K.abTestsConfig&&K.abTestsConfig.marketClosedIndication&&"market_closed_indication_text_test"===K.abTestsConfig.marketClosedIndication}function U(){return(o.model.instrument.IsStock||o.model.instrument.IsETF)&&K.abTestsConfig&&K.abTestsConfig.cardSellTerminology}function x(){return K.abTestsConfig&&K.abTestsConfig.changeButtonText}function B(){return K.abTestsConfig&&K.abTestsConfig.changeButtonTextUs}function F(e){return K.abTestsConfig&&K.abTestsConfig.defaultAmount&&"default_amount_zero_test"===K.abTestsConfig.defaultAmount&&!e.amountInput}function $(){var e=o.model.instrument.DefaultLeverage;if(K.abTestsConfig&&K.abTestsConfig.rememberLastLeverage&&(o.model.instrument.IsStock||o.model.instrument.IsETF)&&!o.model.instrument.isNoneLeveragedOnly){var t=o.model.instrument.IsStock?"Stock":"ETF",i=C.getItem("DefaultLeverage"+t);i&&(e=i)}return e}function R(){(o.model.instrument.IsStock||o.model.instrument.IsETF)&&o.model.isRealAccount&&o.model.leverages&&o.model.leverages.selectedLeverage&&o.model.leverages.selectedLeverage>1&&i.eventTrack("AB Stock ETF Above Leverage 1")}function _(){o.model.isRealAccount&&!o.model.instrument.IsActive&&i.eventTrack("Open Trade when Market Closed")}function N(){C.getItem("highLeverageUser")||o.model.leverages&&o.model.leverages.selectedLeverage&&o.model.leverages.selectedLeverage>1&&(o.model.instrument.IsStock||o.model.instrument.IsETF)&&C.setItem("highLeverageUser",!0)}function j(e){if(K.abTestsConfig&&K.abTestsConfig.rememberLastLeverage&&(o.model.instrument.IsStock||o.model.instrument.IsETF)&&!o.model.instrument.isNoneLeveragedOnly){var t=o.model.instrument.IsStock?"Stock":"ETF";C.setItem("DefaultLeverage"+t,o.model.leverages.selectedLeverage),o.model.leverages.selectedLeverage!==o.model.dafaultLeverage&&h.sendOpenTradeLeverageChanged(o.model,e)}}function z(){if(!K.isDepositClicked){K.isDepositClicked=!0;var e=Math.ceil(o.model.amount.amount-Z.portfolio.availibleToTrade);if(o.model.isRealAccount){o.model.amount.amountToAdd=o.model.isExpressCheckout?100*Math.ceil(e/100):e,o.model.amount.amountToAddPercentage=o.model.amount.amountToAdd/Z.portfolio.availibleToTrade*100,o.closeThisDialog(),o.model.leverages.selectedLeverage=o.model.instrument.DefaultLeverage;var t=o.saveTradeSnapShot();p.loadInvestDeposit({amount:o.model.amount.amountToAdd},{eventName:"continue:trading:funnel",eventProperties:{action:"openTrade",url:n.path(),data:t}})}else{var i=o.model.marketMode==o.model.marketModeOptions.active?o.model.actions.openTrade:o.model.actions.openOrder;o.showDepositDemoMode(i,e)}o.model.ActiveTab=q(),h.sendOpenTradeEvent(o.model,"Deposit Now")}}function V(){t.session.user.verificationLevel<2&&"Real"==t.session.user.portfolio.account.type?(o.closeThisDialog(),f.loadDepositModal({fromTradePopup:!0}).then(e.bind(function(){z()},this))["catch"](function(){})["finally"](function(){})):z(),i.eventTrack("Open Trade - Start Express Checkout")}function W(){var e=t.session.user,i=o.model&&o.model.isExpressCheckout&&e.verificationLevel<3&&"Real"==e.portfolio.account.type;i&&f.loadVolunteerModal()}function J(e){var t=!!e.stopLoss&&void 0!==e.stopLoss.amount&&null!==e.stopLoss.amount,i=!!e.takeProfit&&void 0!==e.takeProfit.amount&&null!==e.takeProfit.amount,s=!!e.stopLoss&&void 0!==e.stopLoss.dollar&&null!==e.stopLoss.dollar,n=!!e.takeProfit&&void 0!==e.takeProfit.dollar&&null!==e.takeProfit.dollar,a=!!e.viewRate;o.setStopLossAndTakeProfitAsChanged(t,s,i,n),o.setOrderRateAsChanged(a),s?o.switchTradeMode(!0,o.model.stopLoss):t&&o.switchTradeMode(!1,o.model.stopLoss),n?o.switchTradeMode(!0,o.model.takeProfit):i&&o.switchTradeMode(!1,o.model.takeProfit)}function q(){var e=-1,o=document.querySelectorAll(".ui-tab-pane");return o.forEach(function(o,t){var i=o.clientHeight;i&&i>0&&(e=t)}),e}function H(){return K.portfolio.availibleToTrade}var K=this,Z=t.session.user;this.$rootScope=t,this.$scope=o,this.executionCalculator=l,this.localizeFactory=T,this.restrictionsService=g,this.portfolio=r.get(),this.isNoneLeveragedOnly=!1,this.watchers=[],o.$watch("model.oneClickTrading.isActive",function(e,t){e!==t&&(o.model.oneClickTrading.showInfo=!0,e?o.model.oneClickTrading.isTslEnabled=o.model.stopLoss.TSL.isEnabled:o.model.stopLoss.TSL.isEnabled=o.model.oneClickTrading.isTslEnabled,void 0!==t&&(o.model.showInfo=!0))}),o.uiDialogData&&o.init(o.uiDialogData.instrument,o.uiDialogData.isBuy,o.uiDialogData.source).then(function(){L(o.uiDialogData.instrument,o.uiDialogData.isBuy,o.uiDialogData.model,o.uiDialogData.restrictionsSummary)}),o.openPosition=O,o.openOrder=D,o.openMarketOrder=A,o.depositFunds=z,o.expressCheckout=V,o.isDiscountedRate=y,o.zeroCommissionClick=S,o.closeOpenTrade=b,o.setDefaultAmount=function(e,i,s){var n=t.session.user,a=o.isEditByUnit(),r=!1;if(e&&(e.amount>=0&&!a||e.units>=0&&a)&&(r=!0),r)o.model.amount.amount=e.amount,o.model.amount.units=e.units;else{var d=K.abTestsConfig&&K.abTestsConfig.defaultAmount;o.model.amount.amount=l.setOpenPositionDefaultAmount(n.portfolio.equity,n.portfolio.availibleToTrade,i,o.model,e,s,d),l.updateUnits(o.model)}o.recalculateAmountAndUnits()},o.switchAmountMode=function(){o.model.dirty=!0,o.model.amount.inUnitsMode=!o.model.amount.inUnitsMode,o.model.amountEditMode=o.model.amount.inUnitsMode?o.model.amountEditOptions.Units:o.model.amountEditOptions.Amount;var e=o.model.amount.inUnitsMode?o.model.amountEditOptions.Units:o.model.amountEditOptions.Amount;h.sendOpenTradeEvent(o.model,null,"Amount or Units",e)},o.unitsChange=function(e,i){t.session.user&&t.session.user.portfolio&&(o.model.dirty=!0,o.model.amount.isFocus=!1,o.model.amountEditMode=o.model.amountEditOptions.Units,e?o.clearAllErrors():o.model.amount.units=i,o.onInputChange(e))},o.unitsFocus=function(){o.model.amount.isFocus=!0,o.model.amountEditMode=o.model.amountEditOptions.Units},o.unitsBlur=function(e){o.model.amount.isFocus=!1,e&&o.clearAllErrors(),o.disableExecutionButton()},o.unitsDeFocus=function(){o.model.amount.isFocus=!1},o.amountChange=function(e,i){o.model.dirty=!0,t.session.user&&t.session.user.portfolio&&(o.model.amount.isFocus=!1,o.model.amountEditMode=o.model.amountEditOptions.Amount,e?o.clearAllErrors():o.model.amount.amount=i,o.onInputChange(e))},o.amountFocus=function(){o.model.amount.isFocus=!0,o.model.amountEditMode=o.model.amountEditOptions.Amount},o.amountBlur=function(e){o.model.amount.isFocus=!1,e&&o.clearAllErrors(),o.disableExecutionButton()},o.amountDeFocus=function(){o.model.amount.isFocus=!1},o.onInputChange=function(e){o.model.viewRateContext.clientRateForCalc=l.getRateOrDiscountedRate(o.model.isBuy,o.model.instrument,o.model.isBuy,o.model.leverages.selectedLeverage),o.model.viewRateContext.clientRateForCalcID=o.model.instrument.rate.PriceRateID;var t=o.model.stopLoss.isNoStopLossSet,i=o.model.takeProfit.isNoTakeProfitSet;o.recalculateAmountAndUnits(e),o.syncStopLossTakeProfitAmount(),o.syncAmountInput(),o.syncDollarViews();var s=o.model.stopLoss.isNoStopLossSet,n=o.model.takeProfit.isNoTakeProfitSet;(t&&!s||i&&!n)&&o.validate()},o.restrictionClick=function(){var e=o.saveTradeSnapShot(),t="openTrade";o.closeThisDialog(),i.eventTrack("Open Trade - Sign W-8BEN Form - Click"),g.loadwW8BANFunnel(e,t)},o.checkRestrictions=function(){var e=o.model;e&&(e.leverages&&e.instrument?(e.isLowLeverage=l.isLowLeverage(e.instrument,e.isBuy,e.leverages.selectedLeverage),e.isCMT=l.isMarginTradeLeverage(e.instrument,e.isBuy,e.leverages.selectedLeverage)):(e.isLowLeverage=!1,e.isCMT=!1),e.isRestricted=g.isW8BANRestrict(e.leverages.selectedLeverage,e.instrument,e.isBuy,e.isRealAccount,K.restrictionsSummary))},o.setDepositButtonLabel=function(){if(K&&K.localizeFactory&&o.model)if(K.localizations){var e=K.localizations,t=e.btnDepositText,i=o.model;i.isRestricted&&(t=i.marketMode===i.marketModeOptions.active?e.btnOpenPositionText:i.marketMode===i.marketModeOptions.order?e.btnOpenOrderText:e.btnOpenEntryOrderText),K.depositButtonLabel=t}else K.depositButtonLabel=K.localizeFactory.getLocale("portfolioOpenPosition.depositNow")},o.toggleStopLossChange=function(){o.model.stopLoss.isOpen=!o.model.stopLoss.isOpen,o.model.stopLoss.inDollarMode=!0},o.UpdateShowCFDDisclaimer=function(){o.model.showCFDDisclaimer=o.model.risk.amount>1&&l.isLowLeverage(o.model.instrument,o.model.isBuy,1)},o.closeFeesTooltip=function(){o.model.showFeesTooltip=!1,o.$applyAsync()},o.closeUnitTooltip=function(){o.model.showUnitTooltip=!1},o.closeConfirm=function(){o.model.showFeesTooltip&&(o.model.showFeesTooltip=!1),o.model.isUsConfirmMode=!1},o.getCopyTextValue=function(e){if(K.abTestsConfig&&K.abTestsConfig.changeButtonText)switch(K.abTestsConfig.changeButtonText){case"change_button_text_invest_test":return o.model.isBuy?"invest":e;case"change_button_text_placeorder_test":return"placeOrder";case"change_button_text_buysell_test":return o.model.isBuy?"btnBuy":"btnSell";default:return"defaultValue"}},o.getCopyTextValueUs=function(e){if(K.abTestsConfig&&K.abTestsConfig.changeButtonTextUs){switch(K.abTestsConfig.changeButtonTextUs){case"change_button_text_us_next_confirm_test":return o.model.isUsConfirmMode?"confirmButton":"next";case"change_button_text_us_review_submit_test":return o.model.isUsConfirmMode?"submit":"review"}return e}}}return a.prototype={get isOnlyOneAllowed(){return!!this.instrument&&(this.instrument.IsAllowBuy&&!this.instrument.IsAllowSell||!this.instrument.IsAllowBuy&&this.instrument.IsAllowSell)},get setOrderButtonKey(){return this.$scope.model.isUsConfirmMode?"confirmButton":this.$scope.model.isCopyText?this.$scope.getCopyTextValue("setOrderButton"):"setOrderButton"},get openTradeButtonKey(){return this.instrument&&this.instrument.isUsTrade?this.$scope.model.isCopyTextUs?this.$scope.getCopyTextValueUs(this.$scope.model.isUsConfirmMode?"confirmButton":"buyButton"):this.$scope.model.isUsConfirmMode?"confirmButton":"buyButton":this.$scope.model.isConfirmForAll&&this.$scope.model.isUsConfirmMode?"confirmButton":this.$scope.model.isCopyText?this.$scope.getCopyTextValue("openPositionButton"):"openPositionButton"},get isTRS(){return this.executionCalculator.isTRS(this.instrument,this.$scope.model.isBuy,this.$scope.model.leverages.selectedLeverage)},get highLeverageTradingMessageL1Key(){return this.$scope.model.showCryptoInfo&&this.$scope.model.isLowLeverage?"nonLeveragedRealCryptocurrencyMessage":this.isTRS?"highLeverageTRSTradingMessageL1":this.$scope.model.isCMT?"highLeverageCMTTradingMessageL1":"highLeverageCFDTradingMessageL1"},get tradeActionsL1Key(){return this.isTRS?"TRSTradeActionsL1":this.$scope.model.showCFDDisclaimer||!this.$scope.model.isLowLeverage?this.$scope.model.isCMT?"CMTTradeActionsL1":"CFDTradeActionsL1":"RealTradeActions"},_initLocalizations:function(){this.localizations={btnOpenPositionText:this.localizeFactory.getLocale("portfolioOpenPosition.openPositionButton"),btnOpenOrderText:this.localizeFactory.getLocale("portfolioOpenPosition.setOrderButton"),btnOpenEntryOrderText:this.localizeFactory.getLocale("portfolioOpenPosition.setMarketOrderButton"),btnDepositText:this.localizeFactory.getLocale("portfolioOpenPosition.depositNow")}},_initPopUp:function(e){if(e.model){var o,t=!1,i=!1;e.checkRestrictions();var s=this.$rootScope.session.user;if(this.regulatingKeyCode=void 0===s.regulationId||""===s.regulationId?"":"-"+s.regulationId,e.model.isRestricted)t=!0;else{var n=this.restrictionsService.isSignedByIntroduction(this.restrictionsSummary);n&&(o=this._getFirstLowLeverageObj(e.model),o&&o.index>=0&&o.leverage>0&&(i=!0))}o&&i?this._openAndSetLeverageSection(e,o):(t||(e.model.instrument.IsStock||e.model.instrument.IsETF)&&this.abTestsConfig&&this.abTestsConfig.leverageTrayStocks)&&this._openLeverageSection(e),e.setDepositButtonLabel()}},_getFirstLowLeverageObj:function(e){var o={};if(e){var t=e.instrument,i=e.isBuy;o=this.executionCalculator.getFirstLowLeverageObj(t,i)}return o},_openAndSetLeverageSection:function(e,o){e&&o&&(e.model.showInfo=!1,setTimeout(function(){e.setLeverage(o.leverage,o.index),e.$broadcast("ui-tab-set-by-name","leverage")},50))},_openLeverageSection:function(e){e&&(e.model.showInfo=!1,setTimeout(function(){e.$broadcast("ui-tab-set-by-name","leverage")},50))}},function(e,s){return o(e,["infrastruct.services",t,i,n]).inheritController(s,"apps.trader.portfolio.executePositionCtrl",["$scope","$rootScope","$analytics","$filter","$location","bl.factories.trading.instruments.instrumentsFactory","bl.factories.trading.portfolio.portfolioFactory","bl.factories.trading.execution.executionCalculator","bl.factories.trading.execution.tradingCalculator","$timeout","uiDialog","bl.factories.trading.oneClickTrading","bl.factories.payments.deposit.depositLoader","kycRolloutService","bl.factories.trading.restrictions.service","infrastruct.services.localization.localizeFactory","infrastruct.services.ecommerceTrackingService","bl.factories.trading.mixpanelEventsService","infrastruct.services.localStorage",a])}});define(rA[445][0],["underscore","moduleDefiner",rA[475][0],rA[486][0],rA[500][0],rA[67][0]],function(e,o,t,s,i,r){"use strict";function n(o,t,s,i,n,a,l,d,m,u,c,f,p,g,v,k,L,P,y,O){function M(){return t.session.user&&t.session.user.bsl&&t.session.user.bsl.executionBlocked&&t.session.user.bsl.isBslAvalible?t.session.user.bsl.executionBlocked&&t.session.user.bsl.isBslAvalible:!1}function h(t,s,i){return W||(W=u.defer()),t?(o.model.marketMode=T(t),o.getInstrumentPrecisionByRate=d.getPrecisionByRate.bind(null,t),m.getPromiseById(t).then(function(){m.subscribe(t),o.model.loading=!1,W.resolve({instrument:t,isBuy:s})})["catch"](function(e,o){new AppError("Unable to get rate","getPromiseById",!1,e,o),W.resolve({instrument:t,isBuy:s})}),p.dynamics.whenReady().then(function(){o.model.configLoaded=!0,o.model&&t&&(o.model.showCryptoInfo=10===t.TypeID&&!!p.calculated.showCryptoInfo)}),o.model.stopLoss.defaultPercent=l.getDefaultStopLossPercentage(t)||o.model.stopLoss.defaultPercent,o.model.takeProfit.defaultPercent=t.DefaultTakeProfitPercentage||o.model.takeProfit.defaultPercent,o.model.isCFD=J.indexOf(t.TypeID)>=0,o.model.stopLoss.TSL.isFeatureEnabled=t.AllowTrailingStopLoss,o.model.isMobile=g.isMobile,o.model.isMobile&&(o.model.isTooltipOpen=!1),e.extend(o.model.source,i||o.model.source||{}),W.promise):(W.reject(new AppError("Instrument not found","executePositionCtrl: ","UnexpectedError",null)),W.promise)}function T(e){if(e.IsActive)return o.model.marketModeOptions.active;var t=o.getOnlyPendingOrEntryAllowedOrder(e);return t.isAllowedOrder?t.orderType===o.model.orderOptions.entry?(o.model.isOnlyEntryOrdersAllowed=!0,o.model.marketModeOptions.isMarket):t.orderType===o.model.orderOptions.pending?(o.model.isOnlyPendingOrdersAllowed=!0,o.model.marketModeOptions.order):void 0:o.model.marketModeOptions.active}function R(e){var t=parseToFloat(o.model.amount.amount);return 0===t?0:(e=Math.abs(parseToFloat(e)),toFixed(e/t*100,2))}function S(e,s){var i=o.model.isBuy,r=o.model.instrument,a=!o.model.isRealAccount,d="positionAction",m=l.getTradeActionDescriptorObject(i,r,a,e,d);Q().getPotentialLeverageFlowDialog(m).then(function(i){i&&("None"===i.flow||"IdentFlow"===i.flow&&i.passedIdentFlow?(o.model.displayLeveragesShowInfo=!1,b(e,s)):"PotentialHighLeverage"===i.flow?i.updateDisplayedLeverages&&!i.regulationChanged?w(i.tradingRiskStatusId,e,s,i.updateDisplayedLeverages):w(i.tradingRiskStatusId,e,s):"PotentialRealStockLeverage"===i.flow&&i.regulationChanged&&(t.$emit("TradingRiskStatus:change"),n.assertPrivateInstrument(o.model.instrument).then(function(){b(e,s)}.bind(this))))}.bind(this))["catch"](function(){})}function w(e,t,s,i){if(2===e)o.model.isRestricted=!0,o.model.leverages.leverageIndex=s,o.model.leverages.selectedLeverage=t,o.model.displayLeveragesShowInfo=!0,o.model.displayLeveragesMessage=k.getLocale("portfolioOpenPosition.statusPending"),o.$applyAsync();else if(4===e){o.model.displayLeveragesShowInfo=!1;var r=o.model.instrument.mergedLeveragesList||o.model.leverages||[];o.model.instrument.Leverages=r,b(t,s)}else{var n=o.model.instrument.Leverages||o.model.leverages||[];if(n.length>0){var a=n[n.length-1];a&&(o.model.displayLeveragesShowInfo=!0,o.model.displayLeveragesMessage=c(k.getResource("portfolioOpenPosition.statusLow",!1,!0))({leverage:a})),i&&(o.model.displayLeverages=n)}}}function b(e,s){o.model.takeProfit.isNoTakeProfitSet=!1,o.model.stopLoss.isNoStopLossSet=!1,x("leverage");{var i=o.isEditByUnit(),r=l.changeLeverage(o.model,e,i);t.session.user}if(r){o.model.leverages.leverageIndex=s,o.model.leverages.selectedLeverage=e,o.model.oneClickTrading.leverage=e,x("amount"),o.recalculateAmountAndUnits();var n=toFixed(numberFromPercent(parseToFloat(o.model.amount.amount),o.model.stopLoss.defaultPercent),2),a=toFixed(numberFromPercent(parseToFloat(o.model.amount.amount),o.model.takeProfit.defaultPercent),2);K?z?l.changeStopLossTakeProfit(o.model,0,!0):C(null,!0,o.model.stopLoss.dollar):l.recalculatePrices(o.model,!0,!1,-1*n),q?H?l.changeStopLossTakeProfit(o.model,0,!1):C(null,!1,o.model.stopLoss.dollar):(l.recalculatePrices(o.model,!1,!0,a),l.changeStopLossTakeProfit(o.model,0,!0)),o.syncDollarViews(),o.syncAmountInput(),o.checkRestrictions(),o.setDepositButtonLabel(),l.checkStopLossLimit(o.model),l.checkTakeProfitLimit(o.model);var m;m=o.model.marketMode===o.model.marketModeOptions.order?_?o.model.viewRate:d.calculateRate(m,2*(o.model.isBuy?1:-1),o.model.instrument.Precision):l.getRateOrDiscountedRate(o.model.isBuy,o.model.instrument,o.model.isBuy,o.model.leverages.selectedLeverage),o.model.viewRateContext.clientRateForCalc=m,o.model.viewRateContext.clientRateForCalcID=o.model.instrument.rate.PriceRateID,F(m,o.model.instrument.rate.PriceRateID)}}function A(e){var s=o.model.instrument,i=!o.model.isRealAccount,r=o.model.leverages.selectedLeverage,a="positionAction",d=l.getTradeActionDescriptorObject(e,s,i,r,a);Q().getPotentialLeverageFlowDialog(d).then(function(s){if(s&&s.flow)if("None"===s.flow)D(e);else if("PotentialRealStockLeverage"===s.flow)if(s.regulationChanged)t.$emit("TradingRiskStatus:change"),n.assertPrivateInstrument(o.model.instrument).then(function(){D(e)}.bind(this));else{var i=o.model.leverages.leverageList.indexOf(s.leverage);b(s.leverage,i),D(e)}}.bind(this))["catch"](function(){}),O.sendOpenTradeEvent(o.model,null,"Buy or Sell",e?"Buy":"Sell")}function D(e){o.model.takeProfit.isNoTakeProfitSet=!1,o.model.stopLoss.isNoStopLossSet=!1,o.model.stopLoss.isOpen=!1,x("stopLoss"),x("takeProfit"),x("amount"),G=!1,Z=!1,o.model.amount.isFocus=!1,o.model.isBuy=e,K=!1,q=!1,z=!0,H=!0;var t=l.getRateOrDiscountedRate(e,o.model.instrument,e,o.model.leverages.selectedLeverage),s=o.model.viewRate;o.model.orderModeCurrentRate=t,o.model.marketMode===o.model.marketModeOptions.order?F(d.calculateRate(t,2*(o.model.isBuy?1:-1),o.model.instrument.Precision),o.model.instrument.rate.PriceRateID):F(t,o.model.instrument.rate.PriceRateID);var i=o.model;i.stopLoss.TSL.isEnabled=o.model.instrument.DefaultTrailingStopLoss,_&&o.orderRateChange("!",s,o.model.viewRate),o.checkRestrictions(),o.setDepositButtonLabel(),l.checkStopLossLimit(o.model),l.checkTakeProfitLimit(o.model),o.UpdateShowCFDDisclaimer()}function B(e){var s="",i="";o.model.takeProfit.isNoTakeProfitSet=!1,o.model.stopLoss.isNoStopLossSet=!1,G=!1,Z=!1,o.model.amount.isFocus=!1;var r=o.model;if(o.model.instrument.IsActive?(s="Trade or Order",i=e===o.model.marketModeOptions.active?"Trade":"Order"):(s="Market or Manual",i=e===o.model.marketModeOptions.isMarket?"Market":"Manual"),O.sendOpenTradeEvent(o.model,null,s,i),e&&r.marketModeOptions[e]&&r.marketMode!==r.marketModeOptions[e]&&0!==r.amount.amount)if(e===o.model.marketModeOptions.order&&o.model.isOnlyEntryOrdersAllowed||e===o.model.marketModeOptions.isMarket&&o.model.isOnlyPendingOrdersAllowed){if(!o.model.isMobile)return;if(!o.model.isTooltipOpen){o.model.isTooltipOpen=!0,o.listenToClickOutside("",function(){o.model.isTooltipOpen=!1});var n=o.model.isOnlyEntryOrdersAllowed?"onlyEntryOrdersAllowed - user clicked on Rate":"onlyPendingOrdersAllowed - user clicked on Market";P.eventTrack("trading - execution popup - "+n)}}else if(e!==o.model.marketModeOptions.order||o.model.instrument.AllowPendingOrders){r.marketMode=r.marketModeOptions[e],_=!1,x("amount");var a=t.session.user;if(l.validateAmount(o.model.amount.amount,o.model.instrument,a.portfolio.availibleToTrade,o.model,!0),r.marketMode!==r.marketModeOptions.order){o.recalculateAmountAndUnits();var m=l.getRateOrDiscountedRate(r.isBuy,r.instrument,r.isBuy,r.leverages.selectedLeverage);F(m,r.instrument.rate.PriceRateID)}else r.marketMode===r.marketModeOptions.order&&(F(toFixed(d.calculateRate(r.viewRate,2*(r.isBuy?1:-1),r.instrument.Precision),r.instrument.Precision)),o.model.oneClickTrading.isActive=!1);r.marketMode===r.marketModeOptions.isMarket&&(o.switchTradeMode(!0,o.model.stopLoss),o.switchTradeMode(!0,o.model.takeProfit)),o.setDepositButtonLabel(),l.checkStopLossLimit(o.model),l.checkTakeProfitLimit(o.model)}}function E(e,t){if(t.inDollarMode=e,o.model.marketMode===o.model.marketModeOptions.order)return void F(o.model.viewRate);var s=l.getRateOrDiscountedRate(o.model.isBuy,o.model.instrument,o.model.isBuy,o.model.leverages.selectedLeverage);F(s,o.model.instrument.rate.PriceRateID)}function N(e,t,s,i){e&&x(i?"stopLoss":"takeProfit");var r=(i?"stopLoss":"takeProfit")+":change";if("+"===e)l.changeStopLossTakeProfit(o.model,1,i);else if("-"===e)l.changeStopLossTakeProfit(o.model,-1,i);else{(0===Math.abs(s)||0>s)&&(s=d.calculateRate(0,1,o.model.instrument.Precision));var n=d.calculatePips(o.model.instrument,s,t);l.changeStopLossTakeProfit(o.model,n,i,t),o.$evalAsync(function(){})}o.syncDollarViews(),o.$broadcast(r)}function C(e,t,s){e&&x(t?"stopLoss":"takeProfit");var i=(t?"stopLoss":"takeProfit")+":change",r=l.changeStopLossTakeProfitByDollar(e,o.model,t,s);o.syncDollarViews();var n=t?o.model.stopLoss:o.model.takeProfit,a=k.getLocale("execution.ratePercentOfAmount");o.model.instrument.IsActive||o.model.marketMode===o.model.marketModeOptions.order||(a=k.getLocale("execution.percentOfAmount")),n.message=c(a)({percent:toFixedSting(r.percentage,2),rate:toFixedSting(r.rate,d.getPrecisionByRate(o.model.instrument,r.rate))}),o.$evalAsync(function(){o.$broadcast(i)})}function F(e,t){if(!(isNaN(e)||(o.model.viewRate=e,o.model.viewRateContext.clientViewRate=e,o.model.viewRateContext.clientViewRateID=t,o.isOpenPositionMode()?o.recalculateAmountAndUnits():(l.checkStopLossLimit(o.model),l.checkTakeProfitLimit(o.model)),o.model.position&&o.model.position.PositionID>0))){var s=toFixed(numberFromPercent(parseToFloat(o.model.amount.amount),o.model.stopLoss.defaultPercent),2),i=toFixed(numberFromPercent(parseToFloat(o.model.amount.amount),o.model.takeProfit.defaultPercent),2),r=o.model.instrument.isNoneLeveragedOnly;if(o.model.isBuy&&(r||o.model.stopLoss.isNoStopLossSet)?o.model.marketMode===o.model.marketModeOptions.isMarket?o.model.stopLoss.dollar=l.getMaxAmount(o.model,!0):(o.model.stopLoss.amount=l.getMaxRate(o.model,!0),l.changeStopLossTakeProfit(o.model,0,!0)):K?o.model.stopLoss.inDollarMode?C(null,!0,o.model.stopLoss.dollar):l.changeStopLossTakeProfit(o.model,0,!0):(l.recalculatePrices(o.model,!0,!1,-1*s),l.changeStopLossTakeProfit(o.model,0,!0)),o.model.isBuy&&(r||o.model.takeProfit.isNoTakeProfitSet)?(o.model.takeProfit.amount=0,o.model.takeProfit.dollar=0):o.model.isBuy||!r&&!o.model.takeProfit.isNoTakeProfitSet?q?o.model.takeProfit.inDollarMode?C(null,!1,o.model.takeProfit.dollar):l.changeStopLossTakeProfit(o.model,0,!1):(l.recalculatePrices(o.model,!1,!0,i),l.changeStopLossTakeProfit(o.model,0,!1)):o.model.marketMode===o.model.marketModeOptions.isMarket?o.model.takeProfit.dollar=l.getMaxAmount(o.model,!1):(o.model.takeProfit.amount=l.getMaxRate(o.model,!1),l.changeStopLossTakeProfit(o.model,0,!1)),o.model.marketMode===o.model.marketModeOptions.order){var n=d.calculateRate(0,1,o.model.instrument._Precision);o.model.stopLoss.amount<0&&N(null,null,n,!0),o.model.takeProfit.amount<0&&N(null,null,n,!1)}o.syncAmountInput(),o.syncDollarViews(),o.$evalAsync(function(){})}}function x(e){o.model.errors[e]=null}function I(){e.each(o.model.errors,function(e,o){x(o)})}function j(){if(!o.model.errors)return!1;for(var e in o.model.errors)if(o.model.errors.hasOwnProperty(e)&&o.model.errors[e])return!0;return!1}function U(e){K=!!e,q=!!e}function V(e){o.model.actionDisabled=!0,e&&$?f.cancel($):$=f(function(){o.model.actionDisabled=!1},500)}var $,W=null,_=!1,K=!1,q=!1,z=!0,H=!0,G=(t.session.user,!1),Z=!1,J=[5,6,10];o.model={risk:{amount:0,extra:""},amount:{amount:0,amountView:"",extra:"",message:"",units:0,unitsView:"",minAmount:0,maxAmount:0,exposure:0,inUnitsMode:!1,isFocus:!1},takeProfit:{amount:0,dollar:"",dollarView:"",inDollarMode:!1,get percentAmount(){return R(this.dollar)},message:"",defaultPercent:50,isLimitLessReachable:!1,isNoTakeProfitSet:!1},stopLoss:{amount:0,dollarView:"",dollar:"",get percentAmount(){return R(this.dollar)},inDollarMode:!1,message:"",TSL:{isEnabled:!1,isFeatureEnabled:!1},defaultPercent:50,isLimitLessReachable:!1,isNoStopLossSet:!1},position:null,instrument:null,isBuy:!0,isExpressCheckout:!1,viewRate:"",orderModeCurrentRate:"",spread:null,perPip:null,showInfo:!0,leverages:{},displayLeverages:[],displayLeveragesShowInfo:!1,displayLeveragesMessage:"",viewRateContext:{clientViewRate:0,clientViewRateID:0,clientRateForCalc:0,clientRateForCalcID:0},weekendFee:0,candeChange:{},selectedTradingMode:"",errors:{},isLoading:!1,marketMode:null,marketModeOptions:{active:"active",order:"order",isMarket:"isMarket"},isOnlyEntryOrdersAllowed:!1,isOnlyPendingOrdersAllowed:!1,orderOptions:{entry:"entry",pending:"pending"},isTooltipOpen:!0,isMobile:!0,mainValidationError:!1,mainValidationErrorType:null,mainValidationErrorTypes:{InsufficientFunds:"InsufficientFunds"},get hasConnection(){return a.isTradingConnectionAvailable},actionDisabled:!0,isStopLossInputDirty:!1,isTakeProfitInputDirty:!1,openTab:void 0,defaultRiskPercentage:5,maxDepositAmount:1e4,actions:{openTrade:"openTrade",openOrder:"openOrder"},isRealAccount:"real"===t.session.user.portfolio.account.type.toLowerCase(),get isTradeActionDisabled(){return o.model.isRestricted||o.model.isZeroAmount&&!o.model.dirty?!0:!this.instrument||!this.hasConnection||this.actionDisabled||!this.position&&(this.isBuy&&!this.instrument.IsAllowBuy||!this.isBuy&&!this.instrument.IsAllowSell)||M()},source:{View_Source_Application:"UN KNOWN",View_Source_Location:"UN KNOWN",View_CurrentTradingMode:"REGULAR"},amountEditMode:null,amountEditOptions:{Amount:"Amount",Units:"Units"},configLoaded:!1,showCryptoInfo:!1,isLowLeverage:!1,isCFD:!1,isCMT:!1,isRestricted:!1};var Q=function(){return y.get("bl.factories.compliance.tradingFlowsService")};o.model.leverageFees={get buyWeekend(){return l.calculateLeverageFee(o.model,"NonLeveragedBuyEndOfWeekFee","LeveragedBuyEndOfWeekFee")},get buyOverNight(){return l.calculateLeverageFee(o.model,this.nonLeveragedBuyFeeKey,"LeveragedBuyOverNightFee")},get nonLeveragedBuyFeeKey(){var e=o.model&&o.model.instrument,t=o.model&&o.model.leverages&&o.model.leverages.selectedLeverage,s=!l.isLowLeverage(e,!0,t);return e&&e.IsCrypto&&s?"NonLeveragedBuyCFDOverNightFee":"NonLeveragedBuyOverNightFee"},get sellWeekend(){return l.calculateLeverageFee(o.model,"NonLeveragedSellEndOfWeekFee","LeveragedSellEndOfWeekFee")},get sellOverNight(){return l.calculateLeverageFee(o.model,"NonLeveragedSellOverNightFee","LeveragedSellOverNightFee")},get weekend(){return Math.abs(o.model.isBuy?this.buyWeekend:this.sellWeekend)},get overNight(){return Math.abs(o.model.isBuy?this.buyOverNight:this.sellOverNight)},get isRefund(){return(o.model.isBuy?this.buyWeekend:this.sellWeekend)<0}},o.model.loading=!0,o.isOpenPositionMode=function(){return o.model?!o.model.position:!0},o.syncDollarViews=function(e){o.isOpenPositionMode()&&((!G||e)&&(o.model.stopLoss.dollarView=o.model.stopLoss.dollar),(!Z||e)&&(o.model.takeProfit.dollarView=o.model.takeProfit.dollar))},o.syncAmountInput=function(e,t){(o.isOpenPositionMode()||t)&&(!o.model.amount.isFocus||e)&&(o.model.amount.amountView=o.model.amount.amount,o.model.amount.unitsView=o.model.amount.units)},o.isEditByUnit=function(){var e=!1;return o.model.amountEditMode?o.model.amountEditMode===o.model.amountEditOptions.Amount?e=!1:o.model.amountEditMode===o.model.amountEditOptions.Units&&(e=!0):e=o.model.amount.inUnitsMode,e},o.recalculateAmountAndUnits=function(e){var t=o.isEditByUnit(),s=o.model;l.recalculateAmountAndUnits(s,t,e),l.updateAmountPercent(s),l.updateExposure(s),l.checkStopLossLimit(o.model),l.checkTakeProfitLimit(o.model)},o.syncStopLossTakeProfitAmount=function(){var e=o.model,t=e.instrument.isNoneLeveragedOnly;e.isBuy&&(t||e.takeProfit.isNoTakeProfitSet)?(e.takeProfit.amount=0,e.takeProfit.dollar=0):e.isBuy||!t&&!e.takeProfit.isNoTakeProfitSet?l.rateToAmount(e,e.takeProfit,!1):o.model.marketMode===o.model.marketModeOptions.isMarket?e.takeProfit.dollar=l.getMaxAmount(o.model,!1):(e.takeProfit.amount=l.getMaxRate(e,!1),l.rateToAmount(e,e.takeProfit,!1)),e.isBuy&&(t||e.stopLoss.isNoStopLossSet)?o.model.marketMode===o.model.marketModeOptions.isMarket?e.stopLoss.dollar=l.getMaxAmount(o.model,!0):(e.stopLoss.amount=l.getMaxRate(e,!0),l.rateToAmount(e,e.stopLoss,!0)):l.rateToAmount(e,e.stopLoss,!0)},o.getOnlyPendingOrEntryAllowedOrder=function(e){var t={isAllowedOrder:!1,orderType:""};return e.AllowEntryOrders&&!e.AllowPendingOrders?(t.isAllowedOrder=!0,t.orderType=o.model.orderOptions.entry):e.AllowPendingOrders&&!e.AllowEntryOrders&&(t.isAllowedOrder=!0,t.orderType=o.model.orderOptions.pending),t},o.listenToClickOutside=function(e,t){function s(r){if(i)return void(i=!1);var n=document.querySelectorAll(e||".listener-element-to-prevent"),a=Array.from(n).some(function(e){return e.contains(r.target)});return a?void 0:(o.$applyAsync(t()),void window.removeEventListener("click",s))}var i=!0;window.addEventListener("click",s)},V(),o.disableExecutionButton=V,o.clearErrors=x,o.clearAllErrors=I,o.modelHasErrors=j,o.setLeverage=S,o._setLeverage=b,o.switchTradeType=A,o.switchType=B,o.switchTradeMode=E,o.init=h,o.setPostionStatus=U,o.$watch(function(){if(!o.model.instrument||!o.model.instrument.rate)return void 0;if(o.isOpenPositionMode()){var e=l.isDiscountedRate(o.model.instrument,o.model.isBuy,o.model.leverages.selectedLeverage),t=l.getRateOrDiscountedRate(!1,o.model.instrument,o.model.isBuy,o.model.leverages.selectedLeverage),s=l.getRateOrDiscountedRate(!0,o.model.instrument,o.model.isBuy,o.model.leverages.selectedLeverage),i=o.model.instrument.getUnitMargin(o.model.isBuy,e)+""+o.model.instrument.MaxPositionUnits;return t+""+s+i}var t=l.getRateOrDiscountedRate(!1,o.model.instrument,o.model.isBuy,o.model.position.Leverage),s=l.getRateOrDiscountedRate(!0,o.model.instrument,o.model.isBuy,o.model.position.Leverage);return t+""+s},function(e,t){if(e!==t){o.clearErrors("stopLoss"),o.clearErrors("takeProfit");var s;if(s=o.isOpenPositionMode()?l.getRateOrDiscountedRate(o.model.isBuy,o.model.instrument,o.model.isBuy,o.model.leverages.selectedLeverage):l.getRateOrDiscountedRate(!o.model.isBuy,o.model.instrument,o.model.isBuy,o.model.position.Leverage),o.model.orderModeCurrentRate=s,o.model.marketMode===o.model.marketModeOptions.order){var i=_?o.model.viewRate:d.calculateRate(s,2*(o.model.isBuy?1:-1),o.model.instrument.Precision);F(i)}else _||F(s,o.model.instrument.rate.PriceRateID)}});o.$on("ui-tab-clicked.OpenPositionTabs",function(e,t,s){o.model.showInfo=!1,o.model.openTab=s.index});o.orderRateChange=function(e,s){t.session.user&&t.session.user.portfolio&&(o.clearErrors("orderRate"),o.clearErrors("amount"),_=!0,s="+"===e?l.changeOrderRate(o.model,o.model.viewRate,1):"-"===e?l.changeOrderRate(o.model,o.model.viewRate,-1):isNaN(s)?o.model.orderModeCurrentRate:l.changeOrderRate(o.model,s,0),F(s))},o.orderRateFocus=function(){_=!0},o.orderRateBlur=function(e){_=e,o.disableExecutionButton()},o.stopLossRateChange=function(e,s,i,r){t.session.user&&t.session.user.portfolio&&(r||(o.model.stopLoss.isNoStopLoss=!1),G=!1,K=!0,z=!0,N(e,i,s,!0),r||(o.model.isStopLossInputDirty=!0))},o.stopLossMoneyChange=function(e,s,i,r){t.session.user&&t.session.user.portfolio&&(r||(o.model.stopLoss.isNoStopLoss=!1),G=!1,K=!0,z=!1,!e&&o.isOpenPositionMode()&&(o.model.stopLoss.dollar=s),C(e,!0,i),r||(o.model.isStopLossInputDirty=!0))},o.stopLossFocus=function(){G=!0,K=!0,o.model.isStopLossInputDirty=!0},o.stopLossBlur=function(e){G=!1,K=e,e&&x("stopLoss"),o.disableExecutionButton()},o.takeProfitRateChange=function(e,s,i,r){t.session.user&&t.session.user.portfolio&&(r||(o.model.takeProfit.isNoTakeProfitSet=!1),Z=!1,q=!0,H=!0,N(e,i,s,!1),r||(o.model.isTakeProfitInputDirty=!0))},o.takeProfitMoneyChange=function(e,s,i,r){t.session.user&&t.session.user.portfolio&&(r||(o.model.takeProfit.isNoTakeProfitSet=!1),Z=!1,q=!0,H=!1,!e&&o.isOpenPositionMode()&&(o.model.takeProfit.dollar=s),C(e,!1,i),r||(o.model.takeProfit.isNoTakeProfitSet=!1))},o.takeProfitFocus=function(){Z=!0,q=!0,o.model.isTakeProfitInputDirty=!0},o.takeProfitBlur=function(e){Z=!1,q=e,e&&x("takeProfit"),o.disableExecutionButton()},o.$on("trading:executionCalculator:error",function(e,t){o.$evalAsync(function(){var e={};e[t.message]=!0,e.data=t.data,o.model.errors[t.property]=e})}),o.showDepositDemoMode=function(e,t){o.closeThisDialog(),v.open({template:r.name,data:{actionType:e,amount:t}})},o.setStopLossAndTakeProfitAsChanged=function(e,o,t,s){e?(K=!0,z=!0):o&&(K=!0,z=!1),t?(q=!0,H=!0):s&&(q=!0,H=!1)},o.setOrderRateAsChanged=function(e){_=e},o.saveTradeSnapShot=function(){var e={instrumentId:o.model.instrument.InstrumentID,isBuy:o.model.isBuy,isExpressCheckout:o.model.isExpressCheckout,leverages:{selectedLeverage:o.model.leverages.selectedLeverage},amount:{amount:o.model.amount.amount,inUnitsMode:o.model.amount.inUnitsMode,units:o.model.amount.units},takeProfit:{dollar:o.model.takeProfit.dollar,isNoTakeProfitSet:o.model.takeProfit.isNoTakeProfitSet},stopLoss:{dollar:o.model.stopLoss.dollar,isTSLEnabled:!!o.model.stopLoss.TSL.isEnabled,isNoStopLossSet:o.model.stopLoss.isNoStopLossSet},amountEditMode:o.model.amountEditMode};return o.model.marketMode==o.model.marketModeOptions.order&&(e.marketMode=o.model.marketMode,e.orderModeCurrentRate=o.model.orderModeCurrentRate,e.viewRate=o.model.viewRate),e},o.setNoStopLoss=function(e){var t=o.model;if(t.stopLoss.isNoStopLossSet=void 0!==e?!!e:!t.stopLoss.isNoStopLossSet,t.stopLoss.isNoStopLossSet?(t.stopLoss.TSL.isEnabled=!1,t.stopLoss.TSL.isFeatureEnabled=!1):(t.stopLoss.TSL.isEnabled=t.position?t.position.IsTslEnabled:t.instrument.DefaultTrailingStopLoss,t.stopLoss.TSL.isFeatureEnabled=t.instrument.AllowTrailingStopLoss),t.position)if(t.stopLoss.inDollarMode){var s=l.getMaxAmount(t,!0);t.stopLoss.dollar=s,o.stopLossMoneyChange(void 0,s,t.stopLoss.dollar,!0)}else{var i=l.getMaxRate(t,!0);o.stopLossRateChange(void 0,i,t.stopLoss.amount,!0)}else if(t)if(t.stopLoss.isNoStopLossSet)if(t.stopLoss.inDollarMode){var s=l.getMaxAmount(t,!0);o.stopLossMoneyChange(void 0,s,t.stopLoss.dollar,!0)}else{var i=l.getMaxRate(t,!0);o.stopLossRateChange(void 0,i,t.stopLoss.amount,!0)}else K=!1,o.validate()},o.setNoTakeProfit=function(e){var t=o.model;if(t.takeProfit.isNoTakeProfitSet=void 0!==e?!!e:!t.takeProfit.isNoTakeProfitSet,t.position)if(t.takeProfit.isNoTakeProfitSet&&t.isBuy)t.takeProfit.amount=0,t.takeProfit.dollar=0;else if(t.takeProfit.inDollarMode){var s=l.getMaxAmount(t,!1);t.takeProfit.dollar=s,o.takeProfitMoneyChange(void 0,s,t.takeProfit.dollar,!0)}else{var i=l.getMaxRate(t,!1);o.takeProfitRateChange(void 0,i,t.takeProfit.amount,!0)}else if(t.takeProfit.isNoTakeProfitSet)if(t.isBuy)t.takeProfit.amount=0,t.takeProfit.dollar=0,o.syncDollarViews();else if(t.takeProfit.inDollarMode){var s=l.getMaxAmount(t,!1);o.takeProfitMoneyChange(void 0,s,t.takeProfit.dollar,!0)}else{var i=l.getMaxRate(t,!1);o.takeProfitRateChange(void 0,i,t.takeProfit.amount,!0)}else q=!1,o.validate()},o.validate=function(){var e=l.getRateOrDiscountedRate(o.model.isBuy,o.model.instrument,o.model.isBuy,o.model.leverages.selectedLeverage);if(o.model.marketMode===o.model.marketModeOptions.order){var t=_?o.model.viewRate:d.calculateRate(e,2*(o.model.isBuy?1:-1),o.model.instrument.Precision);F(t)}else F(e,o.model.instrument.rate.PriceRateID)},o.isEndlessStopLoss=function(){return l.isEndlessStopLoss(o.model)},o.isEndlessTakeProfit=function(){return l.isEndlessTakeProfit(o.model)},o.isNoStopLoss=function(){return l.isNoStopLoss(o.model)},o.isNoTakeProfit=function(){return l.isNoTakeProfit(o.model)},o.recalculateAmountAndUnitsClosePosition=function(e){var t=o.isEditByUnit(),s=o.model;l.recalculateAmountAndUnitsClosePosition(s,t,e)},o.isTherePartialClose=function(){var e=o.model;return l.isTherePartialClose(e)}}return function(e,r){return o(e,["infrastruct.services",t,s,i]).controller(r,["$scope","$rootScope","$filter","$location","bl.factories.trading.instruments.instrumentsFactory","bl.factories.trading.portfolio.portfolioFactory","bl.factories.trading.execution.executionCalculator","bl.factories.trading.execution.tradingCalculator","bl.factories.trading.instruments.rates.ratesFactory","$q","$interpolate","$timeout","infrastruct.services.config","infrastruct.ui.uiIfBreakpoint","uiDialog","infrastruct.services.localization.localizeFactory","bl.factories.payments.kycProvider","$analytics","$injector","bl.factories.trading.mixpanelEventsService",n])}});define(rA[500][0],["angular","underscore",rA[346][0],rA[283][0],rA[430][0],rA[190][0],rA[188][0],rA[191][0],rA[337][0],rA[342][0],rA[341][0],rA[384][0],rA[380][0],rA[340][0],rA[383][0],rA[297][0],rA[345][0],rA[487][0],rA[378][0],rA[476][0],rA[425][0],rA[377][0],rA[426][0],rA[458][0],rA[477][0],rA[379][0],rA[429][0],rA[338][0],rA[343][0]],function(r,s,e,t,i,c,a,n,u){"use strict";var v=s.toArray(arguments),f=9,o=s.pluck(v.slice(f,v.length),"name"),l=r.module("infrastruct.services",o);return l.factory("infrastruct.services.charts.chartsProvider",a),l.factory("infrastruct.services.guid",n),l.factory("infrastruct.services.loader",c),l.factory("infrastruct.services.locationParams",t),l.service("infrastruct.services.viewKeeper",e),l.service("qs",i),l.service("infrastruct.services.authCheckService",u),l});define(rA[346][0],["angular"],function(t){function e(t,e,i,s,o){this.$route=t,this.$rootScope=e,this.$location=i,this.config=s,this.$timeout=o,this._lastRoute,this._lastPath,this._newPath,this._routeTimeout,this._lastEventData}return e.$inject=["$route","$rootScope","$location","infrastruct.services.config","$timeout"],e.prototype={init:function(e){t.isDefined(this.config.query.isViewKeeperDisabled)&&this.config.query.isViewKeeperDisabled||(this.originKeepRoute=this._keepRoute(),this._lastRoute=this.$route.current,this._lastPath=this.$location.path(),e.$on("$locationChangeSuccess",this._eventHandler.bind(this)))},_eventHandler:function(){var e,i;this._routeTimeout&&this.$timeout.cancel(this._routeTimeout),this._newPath=this.$location.path(),e=this._keepRoute(),e&&e===this.originKeepRoute?(i=t.copy(this.$route.current),this._lastEventData={nextRoute:i},this._copyRouteData(),this._routeTimeout=this.$timeout(function(){this.$rootScope.$broadcast("viewKeeperChangeSuccess",[this._newPath,i],[this._lastPath,this._lastRoute]),this._lastPath=this._newPath}.bind(this),100)):this._lastEventData=null},getLastEventData:function(){return this._lastEventData},_keepRoute:function(){var e=this.$route.current.$$route,i=!1;return e&&e.keepUrl&&(i=t.isFunction(e.keepUrl)?e.keepUrl(this._lastRoute,this.$route.current):e.keepUrl),i},_copyRouteData:function(){this.$route.current&&(this.$route.current.locals&&(this._lastRoute.locals=this.$route.current.locals),this._lastRoute.$$route&&this.$route.current.$$route&&(this._lastRoute.$$route.chartBaseUrl=this.$route.current.$$route.chartBaseUrl),this._lastRoute.params=this.$route.current.params,this._lastRoute.pathParams=this.$route.current.pathParams),this.$route.current=this._lastRoute}},e});define(rA[283][0],["underscore"],function(r){function n(n){return{search:function(t){var e={};if(!t)return r.each(n.search(),function(r,n){e[n.toString().toLowerCase()]=r}),e;e=n.search();var o=r.find(e,function(r,n){return t.toString().toLowerCase()===n.toLowerCase()});try{o=JSON.parse(o)}catch(a){}return o},toQueryParams:function(n){if(!n)return n;var t="";return r.each(n,function(r,n){t+=n+"="+r+"&"}),t&&(t=t.substring(0,t.length-1)),t}}}return n.$inject=["$location"],n});define(rA[190][0],[],function(){function n(n){return{get isLoading(){return n.isLoading},show:function(){n.show()},hide:function(){n.hide()},applyShow:function(){n.show()},applyHide:function(){n.hide()}}}return n.$inject=["LoaderService"],n});define(rA[188][0],[],function(){function i(){return{getSize:function(i,t){if(!i)return null;t=t||i.getContext("2d");var e,a,n=window.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,h=n/r;return n!==r?(e=i.width/h,a=i.height/h):(e=i.width,a=i.height),{width:e,height:a,ratio:h,originalWidth:i.width,originalHeight:i.height}},resizeCanvas:function(i,t,e,a){if(i&&(t&&(e=i.parentNode.clientWidth,a=i.parentNode.clientHeight),0!==e||0!==a)){{var n=document.createElement("canvas"),r=n.getContext("2d");i.getContext("2d")}n.width=e,n.height=a,r.clearRect(0,0,n.width,n.height);var h=this.getSize(n,r);n.width=h.originalWidth*h.ratio,n.height=h.originalHeight*h.ratio,r.drawImage(i,0,0,n.width,n.height),r.scale(h.ratio,h.ratio),i.width=n.width,i.height=n.height,i.style.width=h.originalWidth+"px",i.style.height=h.originalHeight+"px";var l=angular.element(i).data("infrastruct.services.charts.data");return this.sparkLines(i,l.data,l.min,l.max,h.originalWidth,h.originalHeight),i}},sparkLines:function(i,t,e,a,n,r){if(null!=t&&window.HTMLCanvasElement){n=i.width=n||i.parentNode.clientWidth,r=i.height=r||i.parentNode.clientHeight;var h,l=i.getContext("2d"),o=t.length,g=n/o,d=0,c=3.5,s=this.getSize(i,l);s&&(i.width=s.originalWidth*s.ratio,i.height=s.originalHeight*s.ratio,i.style.width=s.originalWidth+"px",i.style.height=s.originalHeight+"px",l.scale(s.ratio,s.ratio)),l.beginPath(),l.lineWidth=c,l.strokeStyle="#2c9dd7",l.fillStyle="#E9F5FB",e||(e=Math.min.apply(null,t)),a||(a=Math.max.apply(null,t));var u,w=d;for(h=0;o>h;h++)0===h?w=d:1===h?w+=2*g:w=d+g,d=w,u=this.normalizeHeightValue(t[h],r,e,a),l.lineTo(w,u);return l.stroke(),l.lineTo(w,r),l.lineTo(0,r),l.fill(),angular.element(i).data("infrastruct.services.charts.data",{data:t,min:e,max:a}),l}},normalizeHeightValue:function(i,t,e,a){if(e==a)return 45;var n=(i-e)/(a-e)*-1*t+t;return n+=.05*t,n>t&&(n=t),n}}}return i});define(rA[337][0],["angular"],function(){function t(t,e,i,o,s,n,r,a,h){this.$location=t,this.$route=e,this.$log=i,this.$rootScope=o,this.$injector=s,this.$q=n,this.session=r,this.loaderFactory=a,this.config=h}return t.$inject=["$location","$route","$log","$rootScope","$injector","$q","bl.factories.session.sessionFactory","infrastruct.services.loader","infrastruct.services.config"],t.prototype={_saveUrl:function(){var t=this.$location.path();t&&"/login"!==t&&"/s-login"!==t&&(this.config.query.next=encodeURI(this.$location.url()))},authCheck:function(t,e){var i=e.authRoles;if(window.parent&&-1!==window.location.search.indexOf("captcha")){var o=window.parent.document.getElementById("cf-challenge");o&&o.parentNode.removeChild(o)}this.session.restored?i&&!this.session.isAuthorized(i)&&(t.preventDefault(),t.preventedByAuthorization=!0,this.loaderFactory.show(),this.session.isLoggedIn?this.$log.error("we got into auth:notAuthorized and we not have it yet"):(this._saveUrl(),this.$rootScope.$evalAsync(function(){var t=this.$location.search();this.$location.url("/login").search(t)}.bind(this)),this.$rootScope.$broadcast("auth:notAuthenticated")),this.loaderFactory.hide()):(t.preventDefault(),this.loaderFactory.show(),this._saveUrl(),this.session.restore()["finally"](function(){if(!this._runned){this._runned=!0;var t=decodeURI(this.config.query.next);t&&"undefined"!==t&&(this.$location.url(t),delete this.config.query.next),this.loaderFactory.hide(),this.$route.reload()}}.bind(this)))}},t});define(rA[342][0],["angular"],function(t){function r(r,e,n,i){function u(t){return!!t&&(-1===t.status||503===t.status)}function s(r,e){return t.isNumber(r)?r:e}function c(){return i.dynamics.enableMaxRetries}function a(){return i.dynamics.maxRetriesDefaultDelay||500}function o(t,r){return t*Math.pow(2,r)+Math.round(Math.random()*t)}function f(t){return r(function(r){n(r,t)})}var h=3;return{responseError:function(t){var n=t.config||{},i=u(t),m=Math.min(s(n.maxRetries,0),h),p=s(n.retryDelay,a()),l=s(n.retriesNumber,0);return c()&&i&&m&&m>l?(n.retriesNumber=++l,f(o(p,l)).then(function(){var r=e.get("$http");return r(t.config)})):r.reject(t)}}}var e=t.module("infrastruct.utils.httpRetries",[]);return e.factory("infrastruct.utils.httpRetries",r),e.config(["$httpProvider",function(t){t.interceptors.push("infrastruct.utils.httpRetries")}]),r.$inject=["$q","$injector","$timeout","infrastruct.services.config"],e});define(rA[341][0],["angular"],function(t){function r(t,r){return{responseError:function(c){var a=c.config||{},e=a.fallback,n=!!e&&e.enabled;if(n){var l=r.get("$http"),i=/^(https?:\/\/.*)?(\/?s?api)((\/[\w]+)+)(\?.*)?/;return e.url?a.url=e.url:a.url.match(i)&&(a.url=a.url.replace(i,"https://etoro-cdn.etorostatic.com/web-client/fallback$3/default.json")),a.fallback=!1,l(c.config)}return t.reject(c)}}}var c=t.module("infrastruct.utils.httpFallback",[]);return c.factory("infrastruct.utils.httpFallback",r),c.config(["$httpProvider",function(t){t.interceptors.push("infrastruct.utils.httpFallback")}]),r.$inject=["$q","$injector","$timeout","infrastruct.services.config"],c});define(rA[384][0],["angular",rA[487][0]],function(r,e){"use strict";var t=r.module("infrastruct.services.securityIframeLoader",[e.name]);return t.factory("infrastruct.services.securityIframeLoader",["$q","infrastruct.services.config","$injector",function(r,e,t){function i(){var r=t.get("infrastruct.services.secureIframeService");r.loadIframe()}return{responseError:function(t){return e.dynamics.securityIframeLoaderActive&&t.status>509&&t.status<519?i().then(function(){var e=t.config||{};return e.maxRetries||(e.maxRetries=1),r.reject(t)})["catch"](function(){return r.reject(t)}):r.reject(t)},pageView:function(){var r=setTimeout(function(){i(),clearTimeout(r)},e.dynamics.securityIframeLoaderTimeout)}}}]),t.config(["$httpProvider",function(r){r.interceptors.push("infrastruct.services.securityIframeLoader")}]),t.run(["infrastruct.services.securityIframeLoader","infrastruct.services.config",function(r,e){e.dynamics.securityIframeLoaderActive&&r.pageView()}]),t});define(rA[380][0],["angular",rA[175][0]],function(t,a){function r(r,e){return{response:function(t){var r=t.config,s=r.jsonBackupKey;return s?t.status>=200&&t.status<=300?(setTimeout(function(){var r={data:a.pack(t.data),algo:"hpack",status:t.status,cachedDay:new Date};e.setItem("httpbackup_"+s,r)},4),t):void 0:t},responseError:function(s){var u=s.config||{},c=t.isNumber(u.maxRetries)?u.maxRetries:0,n=t.isNumber(u.retriesNumber)?u.retriesNumber:0;if(!u.jsonBackupKey||(0===s.status||-1===s.status||503===s.status)&&c&&c>n)return r.reject(s);var i=e.getItem("httpbackup_"+u.jsonBackupKey);return i?(s.data=a.unpack(i.data),u.originalStatus=s.status,s.status=250,r.resolve(s)):r.reject(s)}}}var e=t.module("infrastruct.utils.httpBackup",[]);return e.factory("infrastruct.utils.httpBackup",r),e.config(["$httpProvider",function(t){t.interceptors.push("infrastruct.utils.httpBackup")}]),r.$inject=["$q","infrastruct.services.localStorage"],e});!function(e){e(rA[175][0],[],function(){var e=-1,r=-2,n=-3,t=-4,i=-5,o=function(o,s){s=s||{};var l=s.verbose||!1;l&&console.log("Normalize the JSON Object"),o="string"==typeof o?this.JSON.parse(o):o,l&&console.log("Creating a empty dictionary");var f={strings:[],integers:[],floats:[]};l&&console.log("Creating the AST");{var g=function d(o){l&&console.log("Calling recursiveAstBuilder with "+this.JSON.stringify(o));var s=typeof o;if(null===o)return{type:"null",index:n};if("undefined"==typeof o)return{type:"undefined",index:i};if(o instanceof Array){var g=["@"];for(var p in o)o.hasOwnProperty(p)&&g.push(d(o[p]));return g}if("object"===s){var g=["$"];for(var h in o)o.hasOwnProperty(h)&&(g.push(d(h)),g.push(d(o[h])));return g}if(""===o)return{type:"empty",index:t};if("string"===s){var v=c.call(f.strings,o);return-1==v&&(f.strings.push(a(o)),v=f.strings.length-1),{type:"strings",index:v}}if("number"===s&&o%1===0){var v=c.call(f.integers,o);return-1==v&&(f.integers.push(u(o)),v=f.integers.length-1),{type:"integers",index:v}}if("number"===s){var v=c.call(f.floats,o);return-1==v&&(f.floats.push(o),v=f.floats.length-1),{type:"floats",index:v}}if("boolean"===s)return{type:"boolean",index:o?e:r};throw new Error("Unexpected argument of type "+typeof o)}(o),p=f.strings.length,h=f.integers.length;f.floats.length}l&&console.log("Parsing the dictionary");var v=f.strings.join("|");return v+="^"+f.integers.join("|"),v+="^"+f.floats.join("|"),l&&console.log("Parsing the structure"),v+="^"+function y(e){if(l&&console.log("Calling a recursiveParser with "+this.JSON.stringify(e)),e instanceof Array){var r=e.shift();for(var o in e)e.hasOwnProperty(o)&&(r+=y(e[o])+"|");return("|"===r[r.length-1]?r.slice(0,-1):r)+"]"}var s=e.type,a=e.index;if("strings"===s)return u(a);if("integers"===s)return u(p+a);if("floats"===s)return u(p+h+a);if("boolean"===s)return e.index;if("null"===s)return n;if("undefined"===s)return i;if("empty"===s)return t;throw new TypeError("The item is alien!")}(g),l&&console.log("Ending parser"),s.debug?{dictionary:f,ast:g,packed:v}:v},s=function(o,s){s=s||{};var a=o.split("^");s.verbose&&console.log("Building dictionary");var u=[],c=a[0];if(""!==c){c=c.split("|"),s.verbose&&console.log("Parse the strings dictionary");for(var g=0,p=c.length;p>g;g++)u.push(l(c[g]))}if(c=a[1],""!==c){c=c.split("|"),s.verbose&&console.log("Parse the integers dictionary");for(var g=0,p=c.length;p>g;g++)u.push(f(c[g]))}if(c=a[2],""!==c){c=c.split("|"),s.verbose&&console.log("Parse the floats dictionary");for(var g=0,p=c.length;p>g;g++)u.push(parseFloat(c[g]))}c=null,s.verbose&&console.log("Tokenizing the structure");for(var h="",v=[],d=a[3].length,g=0;d>g;g++){var y=a[3].charAt(g);"|"===y||"$"===y||"@"===y||"]"===y?(h&&(v.push(f(h)),h=""),"|"!==y&&v.push(y)):h+=y}var b=v.length,k=0;return s.verbose&&console.log("Starting recursive parser"),function w(){var o=v[k++];if(s.verbose&&console.log("Reading collection type "+("$"===o?"object":"Array")),"@"===o){for(var a=[];b>k;k++){var l=v[k];if(s.verbose&&console.log("Read "+l+" symbol"),"]"===l)return a;if("@"===l||"$"===l)a.push(w());else switch(l){case e:a.push(!0);break;case r:a.push(!1);break;case n:a.push(null);break;case i:a.push(void 0);break;case t:a.push("");break;default:a.push(u[l])}}return s.verbose&&console.log("Parsed "+this.JSON.stringify(a)),a}if("$"===o){for(var a={};b>k;k++){var f=v[k];if("]"===f)return a;f=f===t?"":u[f];var l=v[++k];if("@"===l||"$"===l)a[f]=w();else switch(l){case e:a[f]=!0;break;case r:a[f]=!1;break;case n:a[f]=null;break;case i:a[f]=void 0;break;case t:a[f]="";break;default:a[f]=u[l]}}return s.verbose&&console.log("Parsed "+this.JSON.stringify(a)),a}throw new TypeError("Bad token "+o+" isn't a type")}()},a=function(e){return"string"!=typeof e?e:e.replace(/[\+ \|\^\%]/g,function(e){return{" ":"+","+":"%2B","|":"%7C","^":"%5E","%":"%25"}[e]})},l=function(e){return"string"!=typeof e?e:e.replace(/\+|%2B|%7C|%5E|%25/g,function(e){return{"+":" ","%2B":"+","%7C":"|","%5E":"^","%25":"%"}[e]})},u=function(e){return Number.prototype.toString.call(e,36).toUpperCase()},f=function(e){return parseInt(e,36)},c=Array.prototype.indexOf||function(e,r){for(var n=r||0,t=this.length;t>n;n++)if(this[n]===e)return n;return-1};return{JSON:JSON,pack:o,unpack:s}})}("undefined"!=typeof define&&define.amd?define:function(e,r){var n=r();if("undefined"!=typeof exports)for(var t in n)exports[t]=n[t];else window.jsonpack=n});define(rA[340][0],["angular"],function(r){function t(r,t,e,n,o){return{responseError:function(t){if(i){if(-1===t.status&&"ReToroIOS"===n.statics.ApplicationIdentifier&&!t.config.proxyRetry&&window.WebviewProxy&&Date.now()-t.config._timing.start<1e4){t.config.proxyRetry=!0,t.config.url=window.WebviewProxy.convertProxyUrl(t.config.url),console.log("retrying with proxy",t.config.url);var c=o.get("$http");return c(t.config)}if(t&&403===t.status)if(n.dynamics.isWrapper)r.nativeHref("/challenge/");else{var a=document.querySelector("#cf-challenge");a||o.get("bl.factories.challenge.service").loadIframe()}}return e.reject(t)}}}var e=r.module("infrastruct.utils.httpCloudFlare",[]),i=!1;return e.factory("infrastruct.utils.httpCloudFlare",t),e.config(["$httpProvider",function(r){r.interceptors.push("infrastruct.utils.httpCloudFlare")}]),t.$inject=["$location","$window","$q","infrastruct.services.config","$injector"],e});define(rA[383][0],["angular","underscore"],function(e,t){"use strict";function r(e,r){return'<form method="post" action="'+e+'">'+t.collect(r,function(e,t){return e=e?e:"",'<input type="hidden" name="'+t+'" value="'+e.replace(/\"/g,"&quot;")+'" />'}).join("")+"</form><script>document.forms[0].submit()</script>"}function i(t,i,n){return function(c,o,s,u){var a,d=window.open("",t());return s=s||{},d?(a=d.document,a.title=c,u?u.then(function(t){e.extend(s,t),a.write(r(o,s))})["catch"](function(){d.close()}):a.write(r(o,s)),{error:!1,window:d}):(n.get("bl.factories.notifications.infraNotificationsService").appPostRedirectFailed(),i.$emit("app:postRedirect:failed"),{error:!0,window:null})}}var n=e.module("infrastruct.services.postRedirect",[]);return i.$inject=["infrastruct.services.guid","$rootScope","$injector"],n.service("infrastruct.services.postRedirect",i),n});define(rA[297][0],["moduleDefiner","underscore"],function(r,e){"use strict";function t(){function r(r,e){if(-1!==e.indexOf("||")){var t=e.replace(/ /g,"").split("||");return t[t[0]in r?0:1]}return e}function t(t,i){var n=i.split(".");if(n.length<=1)return t[r(t,i)];var s=t,c=!1;return e.each(n,function(e){e=r(t,e),e in s&&(s=s[e],c=!0)}),c?s:null}function i(r){return e.isDate(r)?1e4*r+621355968e9:r}return{sort:function(r,n,s){r&&e.isArray(r)&&r.sort(function(r,c){var u=t(r,n),o=t(c,n);return e.isUndefined(u)||e.isNull(u)?1:e.isUndefined(o)||e.isNull(o)?-1:(e.isString(u)?u=u.toLowerCase():e.isDate(u)&&(u=i(u)),e.isString(o)?o=o.toLowerCase():e.isDate(o)&&(o=i(o)),e.isObject(o)&&!e.isObject(u)?s?1:-1:e.isObject(u)&&!e.isObject(o)?s?-1:1:e.isObject(u)&&e.isObject(o)?0:o>u?s?1:-1:u>o?s?-1:1:0)})}}}var i=r("infrastruct.services.sorter",[]);return i.factory("infrastruct.services.sorterFactory",[t]),i});define(rA[378][0],["angular",rA[281][0]],function(e,r){"use strict";var s=e.module("infrastruct.services.experiments",[]);return s.service("infrastruct.services.experiments",r),s.run(["infrastruct.services.experiments",function(){}]),s});define(rA[281][0],[rA[189][0]],function(e){function i(e,i,t,s){this.googleTagManagerService=t,this.$q=e,this.$log=i,this.config=s,this._init()}return i.$inject=["$q","$log","infrastruct.services.analytics.services.googleTagManager","infrastruct.services.config"],i.prototype={getExperimentById:function(e){return this.experiments[e]?this.$q.resolve(this.experiments[e]):(this.experimentsPromise[e]||(this.experimentsPromise[e]=this._createPromiseWithTimeout(e)),this.experimentsPromise[e].promise["catch"](function(){this.$log.logJSON("info","log",{Message:"Experiment Timeout",Categories:["Experiments"],Properties:{"Experiment ID":e}}),delete this.experimentsPromise[e]}.bind(this)),this.experimentsPromise[e].promise)},_init:function(){this.experiments={},this.experimentsPromise={},this.config.dynamics.isWrapper||this._getAllExperiments()},_getAllExperiments:function(){this.googleTagManagerService.insertToDataLayer("event","optimize.callback",{callback:this._setExperimentVariant.bind(this)})},_setExperimentVariant:function(i,t){var s=this.experiments[t];s||(s=this.experiments[t]=new e),s.variant=i,this.experimentsPromise[t]&&(this.experimentsPromise[t].resolve(s),delete this.experimentsPromise[t]),this.$log.logJSON("info","log",{Message:"Experiment Participant",Categories:["Experiments"],Properties:{"Experiment ID":t,Variant:i}})},_createPromiseWithTimeout:function(){var e=this.$q.defer(),i=setTimeout(function(){e.reject()}.bind(this),5e3);return e.promise["finally"](function(){clearTimeout(i)}),e}},i});define(rA[189][0],[],function(){function t(){}return t.prototype={set variant(t){this._variant=t},get variant(){return this._variant}},t});define(rA[425][0],["angular",rA[476][0],rA[440][0]],function(t,e,i){"use strict";var n=t.module("infrastruct.services.analytics.providers.ga",[e.name]);return n.config(["$analyticsProvider","infrastruct.services.configProvider",function(e,n){var a=n.getConfig(),r=/deposit|registration/gi;a.dynamics.isGoogleAnalyticsActive&&(e.settings.trackRelativePath=!0,e.settings.ga={additionalAccountNames:void 0},e.registerSetUserId(function(t){window.ga&&ga("set","&uid",t)}),e.registerPageTrack(function(i){window._gaq&&_gaq.push(["_trackPageview",i]),window.ga&&(ga("send","pageview",i),t.forEach(e.settings.ga.additionalAccountNames,function(t){ga(t+".send","pageview",i)}))}),e.registerEventTrack(function(n,a){if(a&&a.category){if(a.value){var s=parseInt(a.value,10);a.value=isNaN(s)?0:s}if(window._gaq)_gaq.push(["_trackEvent",a.category,n,a.label,a.value,a.noninteraction]);else if(window.ga){for(var o={eventCategory:a.category||null,eventAction:n||null,eventLabel:a.label||null,eventValue:a.value||null,nonInteraction:a.noninteraction||null},c=1;20>=c;c++)a["dimension"+c.toString()]&&(o["dimension"+c.toString()]=a["dimension"+c.toString()]),a["metric"+c.toString()]&&(o["metric"+c.toString()]=a["metric"+c.toString()]);if(ga("send","event",o),n.match(r))try{i.logJSON("warn","log",{message:"GA pixel fired",action:n})}catch(g){}t.forEach(e.settings.ga.additionalAccountNames,function(t){ga(t+".send","event",o)})}}else if(n.match(r))try{i.logJSON("warn","log",{message:"GA pixel wasn't fired due to missing category parameter",action:n})}catch(g){}}))}]),n.run(["infrastruct.services.config",function(t){t.dynamics.isGoogleAnalyticsActive&&(!function(t,e){t.GoogleAnalyticsObject=e,t[e]=t[e]||function(){(t[e].q=t[e].q||[]).push(arguments)},t[e].l=1*new Date}(window,"ga"),ga("create",t.statics.googleAnalyticsId,"auto"),setTimeout(function(){require(["https://www.google-analytics.com/analytics.js"])},6e3))}]),n});define(rA[377][0],["angular",rA[476][0]],function(e,i){"use strict";var a=e.module("infrastruct.services.analytics.providers.intercom",[i.name]);return a.config(["$analyticsProvider",function(e){var i=["CopyFunds - Page View","Deposit - Page View","Login - Success","Market - Page View","Markets - Page View","Post - Page View","News Feed - Page View","People - Page View","People Result - Page View","Portfolio Breakdown - Page View","Portfolio Cards - Page View","Portfolio Orders - Page View","Portfolio History - Page View","Portfolio Overview - Page View","Public Portfolio Breakdown - Page View","Public Portfolio History - Page View","Public Portfolio Overview - Page View","Reset Password - Enter New Password - Page View","User - Page View","User Stats - Page View","Withdraw Page View","Open Trade - Success","Copy Trader - Success","Deposit - Success","Notification - Open","KYC - attitudeToRisk","KYC - completeProfile","KYC - evDetails","KYC - EvWait","KYC - fatca","KYC - financialStatus","KYC - firstCopy","KYC - IsraelDisclaimer","KYC - liquidAssets","KYC - mainIncomeSource","KYC - marketsEx","KYC - netAnnualIncome","KYC - open kyc modal","KYC - Overall failed - Review details","KYC - Overall Suitability Fail - Page View","KYC - Passed Suitability - Continue Deposit","KYC - Passed Suitability - Review Profile","KYC - phoneVerification","KYC - phoneVerification - failure","KYC - phoneVerification - rejected","KYC - phoneVerification - send SMS","KYC - phoneVerification - success","KYC - planMoneyInvestment","KYC - process deposit","KYC - profileDetails","KYC - profileUpdated","KYC - purposeOfTrading","KYC - riskDisclosure","KYC - suitabilityAssFailedGeneral","KYC - suitabilityAssObjHigh","KYC - suitabilityAssObjLow","KYC - suitabilityAssPassed","KYC - suitabilityAssXpHigh","KYC - suitabilityAssXpLow","KYC - thanksVerifying","KYC - tnc","KYC - tradingEx","KYC - tradingKnowledge","KYC - tradingStrategy","KYC - uploadDocId","KYC - uploadDocId - idCard","KYC - uploadDocId - passport","KYC - uploadDocReq","KYC - uploadDocUtility","KYC - welcome","KYC - welcomeMandatoryVerification","KYC - wizardLoading","Feed - Comment","Feed - Like","Feed - Post","Feed - Share","Feed - Clicked Share Network","Market - Research - Page View","Inner Markets Discovery - Results - Page View","Markets - Search - Filter","Procharts - Launch Success","Verification Level 1 - Change","Verification Level 2 - Change","Verification Level 3 - Change","Registration - Success","Watchlist - Page View","Main Discovery - Page view","Crypto - Page view","Stocks - Page view","Home - Start Carousel - New User","Home - Start Carousel - User Exist"];e.registerEventTrack(function(e,a){i.indexOf(e)>=0&&(window.cordova?!!intercom&&intercom.logEvent&&intercom.logEvent(e,a):window.Intercom&&window.Intercom("trackEvent",e,a))})}]),a});define(rA[426][0],["angular",rA[476][0],"underscore"],function(e,t,n){"use strict";var i=e.module("infrastruct.services.analytics.providers.mixpanel",[t.name]),r=function(){};return i.config(["$analyticsProvider","infrastruct.services.configProvider",function(e,t){var i=t.getConfig(),o=[];i.calculated.isMixpanelActive&&angulartics.waitForVendorApi("mixpanel",1e3,"__loaded",function(t){function s(e){var t={};return n.each(e,function(i,r){t[r]=n.result(e,r)}),t}var a={Portfolio:null,Username:"Visitor",Application:i.statics.ApplicationIdentifier};e.registerCopySuperProperties(function(e){return n.extend(e,a)}),e.registerSetGlobalEventProperties(function(e){return n.extend(a,e)}),e.registerSetUserId(function(e){t.identify(e)}),e.registerSetAlias(function(e){t.alias(e)}),e.registerSetSuperPropertiesOnce(function(e){t.register_once(e)}),e.registerSetSuperProperties(function(e){t.register(e)}),e.registerSetUserPropertiesOnce(function(e){t.people.set_once(e)}),e.registerSetUserProperties(function(e){t.people.set(e)}),e.registerReset(function(){t.reset()}),e.registerChargeTrack(function(e,n){t.people.track_charge(e,n)}),e.registerEventTrack(function(e,i){if(!(o.indexOf(e)>=0)){var c=s(a);n.extend(c,i),t.track(e,c),r.apply(r,arguments)}})})}]),i.run(["$window","$document","infrastruct.services.config",function(e,t,n){n.calculated.isMixpanelActive&&(r=function(e,t){n.browser.isVisualDebug&&console.log("Mixpanel: ",e,t)},function(e,t){if(!t.__SV){var n,i,r,o;window.mixpanel=t,t._i=[],t.init=function(e,n,i){function s(e,t){var n=t.split(".");2==n.length&&(e=e[n[0]],t=n[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}var a=t;for("undefined"!=typeof i?a=t[i]=[]:i="mixpanel",a.people=a.people||[],a.toString=function(e){var t="mixpanel";return"mixpanel"!==i&&(t+="."+i),e||(t+=" (stub)"),t},a.people.toString=function(){return a.toString(1)+".people (stub)"},r="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" "),o=0;o<r.length;o++)s(a,r[o]);t._i.push([e,n,i])},t.__SV=1.2,n=e.createElement("script"),n.type="text/javascript",n.async=!0,n.src=("https:"===e.location.protocol?"https:":"http:")+"//cdn.mxpnl.com/libs/mixpanel-2.2.min.js",i=e.getElementsByTagName("script")[0],i.parentNode.insertBefore(n,i)}}(document,window.mixpanel||[]),window.mixpanel.init(n.statics.mixpanelToken))}]),i});define(rA[458][0],["underscore","angular",rA[476][0],rA[440][0]],function(e,t,r,a){"use strict";function i(e){this.config=e,this._init(),this._cleanup()}var n=t.module("infrastruct.services.analytics.providers.googleTagManager",[r.name]);return n.service("infrastruct.services.analytics.services.googleTagManager",i),n.config(["$analyticsProvider","infrastruct.services.configProvider","infrastruct.services.experimentsProvider",function(r,i){function n(t){var r={};return e.each(t,function(a,i){r[i]=e.result(t,i)}),r}function o(e){return e.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(e,t){return 0===+e?"":0===t?e.toLowerCase():e.toUpperCase()})}function s(t){var r={};return e.map(t,function(e,t){var a=o(t);r[a]=e}),r}var c=i.getConfig(),l={},u=["Registration - Form Loaded","Registration - Success","Deposit - Attempt","Deposit - Success","Verification Level 3 - Change","Verification Level 2 - Change","Verification Level 1 - Change","Open Trade - Error","Open Trade - Attempt","Close Trade - Error","Close Trade - Attempt","Copy Trader - Error","Copy Trader - Attempt","Mobile App - Install","Login - Success","Guidance - Step","Onboarding - Load Success","Onboarding - Click - Login","Onboarding - Click - Get Started","Complete Your Profile - Click","Set Price Alert","Watchlist - Item Added","Watchlist - Item Removed","Feed - Post","Feed - Save Post","eToro money - registration success"],g={Portfolio:null,Username:"Visitor",Application:c.statics.ApplicationIdentifier},d=/deposit|registration/gi,f=null;c.dynamics.isGoogleTagManagerActive&&(r.settings.trackRelativePath=!0,r.registerSetUserInfo(function(t){e.extend(l,t)}),r.registerSetGlobalEventProperties(function(t){return e.extend(g,t)}),r.registerPageTrack(function(e,t){var r=t&&t.url()||"";if(r!==f){f=r;var a={event:"GTM page to GA",pageURL:r,fullURL:c.calculated.baseUrl+r,language:c.dynamics.languageCode,appIicationIdentifier:c.statics.ApplicationIdentifier,applicationVersion:c.statics.ApplicationVersion,userSessionGuid:c.dynamics.userSession};a.userParams=n(l),a.userParams.portfolio="function"==typeof g.Portfolio?g.Portfolio():"not available",a.userParams.isVisitor="function"==typeof g.Username?"Visitor"===g.Username()?"Yes":"No":"Yes",a.userParams.userCountry="function"==typeof g.userCountry?g.userCountry():"not available",g.deviceId&&(a.userParams.deviceId=g.deviceId),setTimeout(function(){window.requestAnimationFrame(function(){window.dataLayer&&window.dataLayer.push(a)})},1e3)}}),r.registerEventTrack(function(r,i,o,c){var l={};if(u.indexOf(r)>=0){if(!i||!r||!i.category&&!o||!i.label&&!c){if(r.match(d))try{a.logJSON("warn","log",{message:"GTM pixel wasn't fired due to missing params",action:r,category:o,label:c})}catch(f){}return}var p=t.copy(i);if(p.value){var v=parseInt(p.value,10);p.value=isNaN(v)?0:v}if(window.dataLayer){l={event:"GTM event to GA",GAEventCategory:p.category||o||null,GAEventAction:r||null,GAEventLabel:p.label||c||null,nonInteraction:p.noninteraction||null},delete p.category,delete p.label,delete p.value,delete p.noninteraction;var m=n(g);e.extend(m,p),m=s(m),e.extend(l,m);try{window.dataLayer.push(l),r.match(d)&&a.logJSON("info","log",{message:"GTM pixel fired",action:r,category:o,label:c})}catch(f){}}else try{a.logJSON("warn","log",{message:"GTM pixel fire failed due to missing SDK",dataLayer:window.dataLayer,label:c})}catch(f){}}}),r.registerEcommerceEventTrack(function(e){if(e&&window.dataLayer){var t={portfolio:"function"==typeof g.Portfolio?g.Portfolio():{},isVisitor:"No",userCountry:g.userCountry&&g.userCountry()};e.userParams=t,dataLayer.push(e)}}))}]),n.run(["infrastruct.services.analytics.services.googleTagManager",function(){}]),i.$inject=["infrastruct.services.config"],i.prototype={insertToDataLayer:function(){dataLayer.push(arguments)},_init:function(){if(this.config.dynamics.isGoogleTagManagerActive){var e=this.config.dynamics.isWrapper?"GTM-MDZQ644":"GTM-N7SQ5DP";!function(e,t,r,a,i){e[a]=e[a]||[],e[a].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var n=t.getElementsByTagName(r)[0],o=t.createElement(r),s="dataLayer"!=a?"&l="+a:"";o.async=!0,o.src="https://www.googletagmanager.com/gtm.js?id="+i+s,n.parentNode.insertBefore(o,n)}(window,document,"script","dataLayer",e)}},_cleanup:function(){var t=1;setInterval(function(){var r=document.querySelectorAll("iframe[src*='etoro-gtm-memory-cleanup']");r.length>t&&(r=e.initial(r,t),r.forEach(function(e){e.remove()}))},6e4)}},n});define(rA[379][0],["angular",rA[487][0]],function(r,e){function s(r){return{request:function(e){return e.params=e.params||{},e.resourceVersionId&&!e.params.cv?r.dynamics.whenReady().then(function(){var s=r.dynamics.resourcesVersion;return s&&s[e.resourceVersionId+"_enabled"]!==!1&&(e.params.cv=s[e.resourceVersionId]),e}):e}}}var n=r.module("infrastruct.services.httpResourceVersion",[e.name]);return n.factory("infrastruct.services.httpResourceVersion",s),n.config(["$httpProvider",function(r){r.interceptors.push("infrastruct.services.httpResourceVersion")}]),s.$inject=["infrastruct.services.config"],n});define(rA[429][0],["angular",rA[477][0],rA[487][0]],function(n,i,t){"use strict";function e(n,i,t,e,a){this.$q=n,this.$injector=i,this.$location=t,this.config=e,this.localizeFactory=a,this.defaultUrl=this.config.dynamics.urls.maintenanceUrl+"/technical.html?culture="+this.localizeFactory.language,this.config.dynamics.whenReady().then(function(){this.defaultUrl=this.config.dynamics.urls.maintenanceUrl+"/technical.html?culture="+this.localizeFactory.language}.bind(this))}var a=n.module("infrastruct.services.maintenanceNavigation",["infrastruct.services.config",i.name,t.name]);return e.$inject=["$q","$injector","$location","infrastruct.services.config","infrastruct.services.localization.localizeFactory"],e.prototype={isUnderMaintenance:void 0,get maintenanceRedirectUrl(){return this.config.dynamics.urls.maintenanceUrl+"/"+this.config.calculated.languageCode+"/?maintenance_reason=unknown&target_redirect="+encodeURIComponent(window.location.origin+this.$location.path())},navigate:function(n){this.$location.nativeHref(n||this.defaultUrl),setTimeout(function(){location.hash="#/login"},500)},maintenanceCheck:function(){var n=this.$injector.get("$http");return this.$q(function(i,t){return"undefined"!=typeof this.isUnderMaintenance?void(this.isUnderMaintenance?t(this.maintenanceRedirectUrl):i()):n({url:this.config.dynamics.urls.maintenanceUrl+"/maintenance.json",method:"GET",addHeaders:!1}).then(function(n){this.isUnderMaintenance=!1;var e=n.data.pagesConfig;return e&&e.client&&e.client.plannedClient&&(this.isUnderMaintenance=e.client.plannedClient[0]),this.isUnderMaintenance?void t(this.maintenanceRedirectUrl):void i()}.bind(this))["catch"](i)}.bind(this))},resetMaintenanceCheck:function(){this.isUnderMaintenance=void 0}},a.service("infrastruct.services.maintenanceNavigation",e),a});define(rA[338][0],["angular"],function(e){function t(t,n){function i(e,t){var n=t.activationRegex;return n?a(n)?e.url.match(new RegExp(n,"i")):!1:!0}function r(t){s={name:"api",enabled:!0,suspensionTime:6e4,activationRegex:null},o||(t&&e.isNumber(t.suspensionTime)&&(s.suspensionTime=t.suspensionTime),t&&a(t.activationRegex)&&(s.activationRegex=t.activationRegex),o=setTimeout(function(){s=null,o=null},s.suspensionTime))}function u(){return s||n.dynamics.httpCircuitBreaker||{name:"default",enabled:!1,activationRegex:null}}function a(e){try{return!!new RegExp(e,"i")}catch(t){return!1}}var c=530,s=null,o=null;return window.apiActivate=r,{request:function(e){var n=u();return n.enabled&&i(e,n)?t.reject({data:{error:{failureReason:"Maintenance"}},circuitBreakerConfig:n,status:c,config:e,cause:"rejected by "+n.name+" circuit breaker"}):e||t.when(e)},responseError:function(e){return e&&e.status===c&&!e.circuitBreakerConfig&&r(e.data),t.reject(e)}}}var n=e.module("infrastruct.utils.httpCircuitBreaker",[]);return n.factory("infrastruct.utils.httpCircuitBreaker",t),n.config(["$httpProvider",function(e){e.interceptors.push("infrastruct.utils.httpCircuitBreaker")}]),t.$inject=["$q","infrastruct.services.config"],n});define(rA[343][0],["angular"],function(t){"use strict";function e(t,e){this.$injector=t,this.isReady=e(function(e){var n=setInterval(function(){try{var r=t.get("bl.factories.login.loginFactory");if(!r)throw new Error;clearInterval(n),e()}catch(i){}},100)})}var n=t.module("infra.services.newAngularReady",[]);return e.$inject=["$injector","$q"],e.prototype.getDowngradedInjectable=function(t){var e=this.$injector;return this.isReady.then(function(){return e.get(t)})},n});define(rA[67][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/widgets/demoNeedToDeposit/demoNeedToDeposit.view.html","text":"<div class=\"w-sm\" data-etoro-locale-ns=\"demoNeedToDeposit\">    <div class=\"w-confirmation-modal-title\">        {{_title_}}    </div>    <a class=\"w-share-header-nav-button-x sprite\" ng-click=\"closeThisDialog()\" automation-id=\"close-dialog-btn\"></a>    <div class=\"w-sm-main\">        <div class=\"i-popup-image demo-image\">        </div>        <div automation-id=\"virtual-deposit-dialog-description\" class=\"i-popup-contant-info demo-text\">            <div ng-if=\"uiDialogData.actionType === 'openTrade'\">                <span ng-bind-html=\":: $root.t.dynamic('demoNeedToDeposit', 'depositForOpenTrade', this)\"></span>            </div>            <div ng-if=\"uiDialogData.actionType === 'openOrder'\">                <span ng-bind-html=\":: $root.t.dynamic('demoNeedToDeposit', 'depositForOpenOrder', this)\"></span>            </div>            <div ng-if=\"uiDialogData.actionType === 'copyMirror'\">                <span ng-if=\"::uiDialogData.mirror.SubType !== 'fund'\" ng-bind-html=\":: $root.t.dynamic('demoNeedToDeposit', 'depositForOpenCopy', this)\"></span>                <span ng-if=\"::uiDialogData.mirror.SubType === 'fund'\" ng-bind-html=\":: $root.t.dynamic('demoNeedToDeposit', 'depositForOpenFund', this)\"></span>            </div>            <div ng-if=\"uiDialogData.actionType === 'addFunds'\">                <span ng-bind-html=\":: $root.t.dynamic('demoNeedToDeposit', 'depositForAddFunds', this)\"></span>            </div>            <div automation-id=\"virtual-deposit-dialog-link-contact\" class=\"border-top\">                {{_html(info)_}}            </div>        </div>    </div>    <div class=\"w-sm-footer\">        <a automation-id=\"virtual-deposit-dialog-btn-ok-and-close\" class=\"w-sm-footer-button e-btn-big dark\" ng-click=\"closeThisDialog();\">{{_OK_}}</a>    </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[406][0],["underscore","moduleDefiner",rA[475][0],rA[486][0],rA[445][0]],function(e,o,t,i){"use strict";function s(e,o,t,i,s,a,n,l,d,r,m,u,p,c){function f(o){void 0!==e.uiDialogData.tab&&null!==e.uiDialogData.tab&&s(function(){e.$broadcast("ui-tab-set",e.uiDialogData.tab)},50),e.model.amountToTakeGive=0,e.showValidationRedeemError=!1,e.model.position=o,e.setPostionStatus(!0),e.model.isBuy=o.IsBuy,e.model.instrument=o.Instrument,e.model.leverages=t.setLeverageListForUpdatePosition(e.model.instrument,o.Leverage),e.model.risk.amount=e.model.leverages.selectedLeverage,e.model.amount.amount=o.Amount,e.model.viewRate=o.CurrentRate,e.model.stopLoss.TSL.isEnabled=o.IsTslEnabled,e.redeemStatus={},e.model.regulationId=A.regulationId,e.model.initDate=e.model.position.OpenDateTime,t.updateUnits(e.model),t.updateAmountPercent(e.model),e.model.stopLoss.amount=e.model.position.StopLossRate,e.model.stopLoss.isNoStopLossSet=e.isNoStopLoss(),t.checkStopLossLimit(e.model),t.rateToAmount(e.model,e.model.stopLoss,!0),e.model.takeProfit.amount=e.model.position.TakeProfitRate||0,e.model.takeProfit.isNoTakeProfitSet=e.isNoTakeProfit(),t.checkTakeProfitLimit(e.model),e.model.takeProfit.isNoTakeProfitSet&&e.model.isBuy?e.model.takeProfit.dollar=0:t.rateToAmount(e.model,e.model.takeProfit,!1),D=parseToFloat(e.model.stopLoss.amount),E=parseToFloat(e.model.takeProfit.amount),h=e.model.stopLoss.TSL.isEnabled,e.model.stopLoss.TSL.isFeatureEnabled=e.model.instrument.AllowTrailingStopLoss&&!e.model.stopLoss.isNoStopLossSet,e.model.mixpanelDefaultstopLoss=e.model.stopLoss.isNoStopLossSet?null:e.model.stopLoss.dollar,e.model.mixpanelDefaultTakeProfit=e.model.takeProfit.isNoTakeProfitSet?null:e.model.takeProfit.dollar,e.model.mixpanelDefaultTSL=e.model.stopLoss.TSL.isEnabled,e.model.ActiveTab=c.getActiveTab(),c.sendEditTradeEvent(e.model),e.$watch(function(){return e.model.position?e.model.position.IsTslEnabled:void 0},function(o,t){void 0!==o&&o!==t&&(h=e.model.stopLoss.TSL.isEnabled=o)});var i=e.$watch(function(){return e.model.position?e.model.position.StopLossRate:void 0},function(o){e.model.isStopLossInputDirty?i&&i():o&&o!==e.model.stopLoss.amount&&e.stopLossRateChange(null,o,e.model.stopLoss.amount,!0)}),n=e.$watch(function(){return e.model.position?e.model.position.TakeProfitRate:void 0},function(o){e.model.isTakeProfitInputDirty?n&&n():o&&o!==e.model.takeProfit.amount&&e.takeProfitRateChange(null,o,e.model.takeProfit.amount,!0)});e.model.leverages.selectedLeverage>1?(R.enableStopLossEditing=e.model.instrument.AllowEditStopLossLeveraged,R.enableTakeProfitEditing=e.model.instrument.AllowEditTakeProfitLeveraged):(R.enableStopLossEditing=e.model.instrument.AllowEditStopLoss,R.enableTakeProfitEditing=e.model.instrument.AllowEditTakeProfit),R.isNoneLeveragedOnly=e.model.instrument.isNoneLeveragedOnly,e.redeemStatus=a.validateRedeem(e.model.position),e.model.pdtStatus=0,e.model.instrument.isUsTrade&&p.get("bl.factories.trading.services.PdtService").getPdtStatus(e.model.instrument.InstrumentID,1,A.portfolio).then(function(o){e.model.pdtStatus=o.pdtStatus})}function T(){if(!e.model.isTradeActionDisabled){e.model.actionDisabled=!0;var o=null,t=null,i=null;(parseToFloat(e.model.stopLoss.amount)!==D||e.model.amountToGiveOrTake&&e.model.position.IsTslEnabled)&&(o=parseToFloat(e.model.stopLoss.amount)),parseToFloat(e.model.takeProfit.amount)!==E&&(t=parseToFloat(e.model.takeProfit.amount)),e.model.stopLoss.TSL.isEnabled!==h&&(i=e.model.stopLoss.TSL.isEnabled),(null!=o||null!=t||null!=i)&&e.model.position.update(o,t,i,e.model.source),e.closeThisDialog(),e.model.ActiveTab=c.getActiveTab(),c.sendEditTradeEvent(e.model,"Update")}}function g(){e.model.isTradeActionDisabled||(e.model.actionDisabled=!0,e.closeThisDialog(),l.closePosition(e.model.position,e.model.source,!1),e.model.ActiveTab=c.getActiveTab(),c.sendEditTradeEvent(e.model,"Close"))}function v(){e.model.ActiveTab=c.getActiveTab(),c.sendEditTradeEvent(e.model,"Exit"),e.closeThisDialog()}function L(){var o=e.model.position,t=r.userAgent,i=!0;r.dynamics&&r.dynamics.portfolio&&(i=!!r.dynamics.portfolio.isNeedToCheckAndroidForRedeem);var s=!i||t&&t.os&&t.os.name&&"android"===t.os.name.toLowerCase();if(s){n.eventTrack("Redeem Trade - Attempt",{Instrument:o.Instrument.SymbolFull,units:o.Units,VerificationLevel:A.verificationLevel,RegulationId:e.model.regulationId});var l=a.redeemPosition(e.model.position);l?l.then(function(o){if(o)switch(o.error){case"WireDepositsValidation":e.showValidationRedeemError=!0,e.wireRedeemAmount=o.amount||0;break;case"NotAutoVerifiedPhone":e.redeemStatus.isEnabled=!1,e.redeemStatus.errorReason="phone"}}):e.closeThisDialog()}else P()}function P(){var e=r.userAgent,o=e&&e.os?e.os.name:"";m.logJSON("warn","log",angular.extend({Categories:["RedeemPosition"],Message:"Redeem Position is not supported on this os",OS_Detected:o})),d.open({plain:!0,template:'<redeem-limit on-close="closeThisDialog()"></redeem-limit>'})}function b(){e.showValidationRedeemError=!1}function S(){e.closeThisDialog(),a.openCancelRedeemPositionPopup(e.model.position)}function k(e){"a"===e.target.tagName.toLowerCase()&&e.preventDefault();var o={deepLink:"phoneverification"};i.loadVolunteerModal(o)}var D,E,h,A=o.session.user,R=this;e.uiDialogData&&e.init(e.uiDialogData.position.Instrument,e.uiDialogData.position.IsBuy,e.uiDialogData.source).then(function(){f(e.uiDialogData.position)}),e.$on("stopLoss:change",function(){var o=t.calculateMoneyToTakeOrGiveBack(e.model);Math.abs(o)<.01&&(o=0),e.model.amountToGiveOrTake=o,e.model.amountToGiveOrTakeAbs=Math.abs(o)}),e.goToPhoneVerification=k,e.closePosition=g,e.updatePosition=T,e.redeemPosition=L,e.cancelRedeem=S,e.closeTooltipError=b,e.closePopup=v}return function(e,a){return o(e.name,["infrastruct.services",t,i]).inheritController(a,"apps.trader.portfolio.executePositionCtrl",["$scope","$rootScope","bl.factories.trading.execution.executionCalculator","bl.factories.payments.kycProvider","$timeout","integrations.wallet.redeemCrytoService","$analytics","apps.trader.portfolio.portfolioActionsEvents","uiDialog","infrastruct.services.config","$log","$location","$injector","bl.factories.trading.mixpanelEventsService",s])}});define(rA[361][0],["underscore","moduleDefiner",rA[475][0],rA[486][0]],function(o,e){"use strict";function t(o,e,t,i,n,s,l,r,a){function u(){r.sendCloseTradeEvent(o.model,o.checkboxModel,"Exit"),this.closeThisDialog()}function m(){if(!o.model.closeBtnDisabled){if(o.model.actionDisabled=!0,o.model.position.Instrument.isUsTrade&&!o.model.isUsConfirmMode)return o.model.confirmationData={profit:o.model.position.Profit,gain:o.model.position.Gain,timestamp:Date.now()},r.sendCloseTradeEvent(o.model,o.checkboxModel,"Sell"),o.model.isUsConfirmMode=!0,void(o.model.actionDisabled=!1);o.model&&o.model.position&&(t.log("ClosePositionCtrl click on closePosition button,  PositionID = "+o.model.position.PositionID+", request_id= "+c),o.model.position.Instrument.IsActive?o.checkboxModel.value1?o.model.position.partialClose(o.model.amount.units,o.model.source,o.model.viewRateContext):(o.model.source.inUnitsMode=o.model.amount.inUnitsMode,o.model.position.close(o.model.source)):o.checkboxModel.value1?o.model.position.closeExitMarketOrder(o.model.source,o.model.amount.units):o.model.position.closeExitMarketOrder(o.model.source)),o.closeThisDialog();var e=this.model.position.Instrument.isUsTrade&&this.isUsConfirmMode?"Submit":"Close Trade";r.sendCloseTradeEvent(o.model,o.checkboxModel,e)}}function d(){var e=o.model.instrument;e&&s.track("Close Trade",{action:"Close",label:"Presented",id:e.InstrumentID,name:e.DisplayName,dimension71:e.instrumentType&&o.model.instrument.instrumentType.key||"",amount:o.model.position.Amount})}Object.defineProperty(o.model,"closeBtnDisabled",{get:function(){return!this.instrument||this.actionDisabled||3===this.pdtStatus}}),Object.defineProperty(o.model,"closeBtnKey",{get:function(){return o.model.isUsUser?this.isUsConfirmMode?"confirmButton":"sell":"closePositionButton"}}),Object.defineProperty(o.model,"amountFocusedOnMobile",{get:function(){return a.isMobile&&o.model.amount.isFocus}}),Object.defineProperty(o.model,"isUsUser",{get:function(){return e.session.isUsUser()}});var c=i();o.uiDialogData&&o.init(o.uiDialogData.position.Instrument,o.uiDialogData.position.IsBuy,o.uiDialogData.source).then(function(){o.model.instrument=o.uiDialogData.position.Instrument,o.model.position=o.uiDialogData.position,o.model.risk.amount=o.model.position.Leverage,o._setDefaultValues(),o.syncAmountInput(!1,!0),o.checkboxModel={value1:!1},o.isMirrorPosition=!!o.model.position.MirrorID&&o.model.position.MirrorID>0,o.isTherePartialCloseAllowed=o.isTherePartialClose()&&o.model.instrument.AllowPartialClosePosition&&!o.isMirrorPosition&&o.model.hasConnection;var t=n.getRateOrDiscountedRateForClosePosition(!o.model.position.IsBuy,o.model.instrument,o.model.position.IsDiscounted);if(o.model.viewRate=t,o.model.viewRateContext.clientViewRate=t,o.model.viewRateContext.clientViewRateID=o.model.instrument.rate.PriceRateID,o.model.viewRateContext.clientRateForCalc=t,o.model.viewRateContext.clientRateForCalcID=o.model.instrument.rate.PriceRateID,o.model.pdtStatus=0,o.model.instrument.isUsTrade){var i=e.session.user.portfolio;l.get("bl.factories.trading.services.PdtService").getPdtStatus(o.model.instrument.InstrumentID,1,i).then(function(e){o.model.pdtStatus=e.pdtStatus})}o.model.isUsConfirmMode=!1,o.model.confirmationData={profit:"",gain:"",timestamp:""},o.showFeesTooltip=!1,r.sendCloseTradeEvent(o.model,o.checkboxModel),d()}),o.closePosition=m,o.closePopup=u,o._setDefaultValues=function(){o.model.amount.amount=o.model.position.Equity/2,o.model.amount.units=o.model.position.Units/2,o.model.instrument.isUsTrade&&(o.model.amount.inUnitsMode=!0,o.model.amount.units=Math.floor(o.model.amount.units),0===o.model.amount.units&&(o.model.amount.units=1)),o.onInputChange(null)},o.switchAmountMode=function(){o.model.amount.inUnitsMode=!o.model.amount.inUnitsMode},o.unitsChange=function(t,i){e.session.user&&e.session.user.portfolio&&(o.model.amount.isFocus=!1,t?o.clearAllErrors():o.model.amount.units=i,o.onInputChange(t))},o.amountChange=function(t,i){e.session.user&&e.session.user.portfolio&&(o.model.amount.isFocus=!1,t?o.clearAllErrors():o.model.amount.amount=i,o.onInputChange(t))},o.onInputChange=function(e){o.model.viewRateContext.clientRateForCalc=n.getRateOrDiscountedRateForClosePosition(!o.model.position.IsBuy,o.model.instrument,o.model.position.IsDiscounted),o.model.viewRateContext.clientRateForCalcID=o.model.instrument.rate.PriceRateID,o.recalculateAmountAndUnitsClosePosition(e),o.syncAmountInput(!1,!0)},o.unitsBlur=function(e){o.model.amount.isFocus=!1,e&&o.clearAllErrors()},o.amountBlur=function(e){o.model.amount.isFocus=!1,e&&o.clearAllErrors()},o.amountFocus=function(){o.model.amount.isFocus=!0},o.amountDeFocus=function(){o.model.amount.isFocus=!1},o.unitsFocus=function(){o.model.amount.isFocus=!0},o.unitsDeFocus=function(){o.model.amount.isFocus=!1},o.closeFeesTooltip=function(){o.model.showFeesTooltip=!1,o.$applyAsync()}}return function(o,i){return e(o,["infrastruct.services"]).inheritController(i,"apps.trader.portfolio.executePositionCtrl",["$scope","$rootScope","$log","infrastruct.services.guid","bl.factories.trading.execution.executionCalculator","infrastruct.services.ecommerceTrackingService","$injector","bl.factories.trading.mixpanelEventsService","infrastruct.ui.uiIfBreakpoint",t])}});define(rA[483][0],["underscore","angular",rA[475][0],rA[486][0],rA[63][0],rA[64][0],rA[360][0]],function(o,t,i,e,s,r,n){"use strict";function l(o,t,i,e,s,r){this.portfolioActionsEvents=o,this.portfolioActionsEvents.mixInto(this),this.$rootScope=e,this.$log=r,n.call(this,t,i,e),this.$location=s}return l.$inject=["apps.trader.portfolio.portfolioActionsEvents","infrastruct.services.localStorage","infrastruct.services.sorterFactory","$rootScope","$location","$log"],l.prototype={$onInit:function(){this.appFullSource=this.appSource+"-"+this.viewStateMode},executeDefault:function(o,t){if(!o.isExecutionBlocked()){var i=o.getGroup();i&&"mirrorGroup"===i.Type&&i.PendingForClosure||(o.isPendingClose||o.isPartialPendingClose?this.cancelClosePosition(o,!0,t):this.updatePosition(o,void 0,this.appFullSource))}},closeOperation:function(o){o.isPendingClose||o.isClosedRequested?!o.isPendingClose||o.isClosedRequested||o.isExecutionBlocked()||this.cancelClosePosition(o,!1,!1):this.closePosition(o,this.appFullSource,!1)},cancelClosePosition:function(o,t,i){if(t)this.closeOrder(o,void 0,void 0,this.appFullSource,i);else{var e=this.portfolioActionsEvents.buildSourceObj(this.appFullSource,this.$location.path());o.cancelCloseExitMarketOrder(e)}},get sortItems(){return this.positions}},l.inheritsFrom(n),{controller:l,bindings:{viewStateMode:"@",positions:"<",model:"<",appSource:"<",isInvestingMode:"<",upsellData:"<",isCloseAllEnabled:"<"},templateUrl:["$attrs",function(o){return"MANUALTRADES"===o.viewStateMode?r.name:s.name}]}});define(rA[63][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/overview/list/list.view.html","text":"<div ng-if=\"!$ctrl.isInvestingMode\" class=\"portfolio-overview\" data-etoro-locale-ns=\"portfolioOpenTrades\" overview-time-log view-name=\"list\">    <ui-table ui-table-id=\"portfolioOverview\" ui-table-namespace=\"portfolioOpenTrades\"        default-fields=\"units, avgOpen, investedAmount,netProfit, pnl, equity, sell, buy\"        default-mobile-fields=\"investedAmount, netProfit, pnl, equity\"         new-mobile-fields=\"units, avgOpen, current, equity\"         class=\"portfolio-overview-table button-count-1\"        data-etoro-automation-id=\"portfolio-overview-table\">        <ui-table-head class=\"ui-table-head et-layout-sub-sticky-header\" data-etoro-automation-id=\"portfolio-overview-table-header\">            <b class=\"ui-table-static-cell sortable\" ng-click=\"$ctrl.sort('GroupName')\"                ng-class=\"$ctrl.sortSelectedClassName('GroupName')\"                data-etoro-automation-id=\"portfolio-overview-table-header-market-name\">                {{_market_}} ({{$ctrl.positions.length}})                <span class=\"sort-icon sprite\">                </span>            </b>            <ui-table-head-slot>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-invested\" class=\"sortable\"                    name=\"investedAmount\" ng-click=\"$ctrl.sort('TotalFundsInvested || TotalInvestedAmount')\"                    ng-class=\"$ctrl.sortSelectedClassName('TotalFundsInvested || TotalInvestedAmount')\">                    {{_investedAmount_}}<span class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-net-profit-dollar\"                    class=\"sortable\" name=\"netProfit\" ng-click=\"$ctrl.sort('TotalProfitAndClosedPL || TotalProfit')\"                    ng-class=\"$ctrl.sortSelectedClassName('TotalProfitAndClosedPL || TotalProfit')\">                    {{_netProfit_}}<span class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-units\" name=\"units\"                    class=\"sortable\" ng-click=\"$ctrl.sort('NetUnitsSort')\"                    ng-class=\"$ctrl.sortSelectedClassName('NetUnitsSort')\">{{_units_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-gain\" class=\"sortable\"                    name=\"pnl\" ng-click=\"$ctrl.sort('TotalGain')\" ng-class=\"$ctrl.sortSelectedClassName('TotalGain')\">                    {{_pnl_}}<span class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-equity\" class=\"sortable\"                    name=\"equity\" ng-click=\"$ctrl.sort('Equity')\" ng-class=\"$ctrl.sortSelectedClassName('Equity')\">                    {{_equity_}}<span class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-average-open-rate\"                    class=\"sortable\" name=\"avgOpen\" ng-click=\"$ctrl.sort('AverageOpenRateSort')\"                    ng-class=\"$ctrl.sortSelectedClassName('AverageOpenRateSort')\">{{_avgOpen_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-stop-loss-amount\"                    class=\"sortable\" name=\"cslAmount\" ng-click=\"$ctrl.sort('StopLossAmount')\"                    ng-class=\"$ctrl.sortSelectedClassName('StopLossAmount')\">{{_cslAmount_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-stop-loss-Percentage\"                    class=\"sortable\" name=\"cslPercent\" ng-click=\"$ctrl.sort('StopLossPercentage')\"                    ng-class=\"$ctrl.sortSelectedClassName('StopLossPercentage')\">{{_cslPercent_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-sell\" class=\"sortable\"                    name=\"sell\" ng-click=\"$ctrl.sort('Instrument.rate.Bid')\"                    ng-class=\"$ctrl.sortSelectedClassName('Instrument.rate.Bid')\">{{_bid_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-buy\" class=\"sortable\"                    name=\"buy\" ng-click=\"$ctrl.sort('Instrument.rate.Ask')\"                    ng-class=\"$ctrl.sortSelectedClassName('Instrument.rate.Ask')\">{{_ask_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-net-invested\" class=\"sortable\"                    name=\"netInvested\" ng-click=\"$ctrl.sort('TotalInvestedAmount')\"                    ng-class=\"$ctrl.sortSelectedClassName('TotalInvestedAmount')\">{{_netInvested_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-fees\" class=\"sortable\"                    name=\"fees\" ng-click=\"$ctrl.sort('TotalFees')\" ng-class=\"$ctrl.sortSelectedClassName('TotalFees')\">                    {{_fees_}}<span class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-avg-leverage\" class=\"sortable\"                    name=\"leverage\" ng-click=\"$ctrl.sort('LeverageAvgSort')\"                    ng-class=\"$ctrl.sortSelectedClassName('LeverageAvgSort')\">{{_leverage_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-last-price\" class=\"sortable\"                    name=\"current\" ng-click=\"$ctrl.sort('Instrument.rate.lastPrice')\"                    ng-class=\"$ctrl.sortSelectedClassName('Instrument.rate.lastPrice')\">{{_current_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>            </ui-table-head-slot>        </ui-table-head>        <ui-table-body ui-swipe=\"\" data-etoro-automation-id=\"portfolio-overview-table-body\" class=\"old-angular-scrollable-el\">            <div class=\"ui-table-row-container\" ui-swipe-actions=\".ui-table-row\" ui-swipe-swiperight-action=\"\"                ui-swipe-swipeleft-action=\"!!item.user ? item.user.stopCopy('Portfolio Overview - Swipe Action') : $ctrl.model.closeAll(item, 'Portfolio Overview - Swipe Action')\"                ui-swipe-menu-left=\".ui-table-actions-left\" ui-swipe-menu-right=\".ui-table-actions-right\"                ui-swipe-is-disabled=\"{{ item.MirrorID > 0 && item.PendingForClosure }}\"                data-etoro-automation-id=\"portfolio-overview-row-{{ :: item.GroupName}}\"                ng-repeat=\"item in $ctrl.positions\">                <div class=\"ui-table-actions-left\" ng-if=\":: !!item.Instrument\" data-etoro-locale-ns=\"swipeActions\">                    <div class=\"swipe-action-button\">                        <trade-button instrument=\":: item.Instrument\" label-localize=\"dropDownActions.openTradeButton\"                            app-source=\"Swipe\" to-check-mode=\"true\">                        </trade-button>                    </div>                    <div class=\"swipe-action-button\" ng-click=\"item.Instrument.openPriceAlert('Portfolio')\">                        <span class=\"swipe-icon-container\">                            <span class=\"swipe-icon swipe-price-alert-icon\"></span>                            {{ :: $root.t.dynamic('swipeActions', 'priceAlert') }}                        </span>                    </div>                    <a class=\"swipe-action-button\" ng-href=\"{{:: item.Instrument.Url}}/chart/full\">                        <span class=\"swipe-icon-container\">                            <span class=\"swipe-icon swipe-chart-icon\"></span>                            {{ :: $root.t.dynamic('swipeActions', 'chart') }}                        </span>                    </a>                </div>                <div class=\"ui-table-actions-left\" ng-if=\":: item.MirrorID > 0\" data-etoro-locale-ns=\"swipeActions\">                    <div class=\"swipe-action-button\" ng-click=\"item.user.copy('Portfolio Overview - Swipe Action')\"                        ng-if=\"item.SubType !== 'fund'\">                        <span class=\"swipe-icon-container\">                            <span class=\"swipe-icon swipe-addfunds-icon\"></span>                            {{ :: $root.t.dynamic('swipeActions', 'addFunds') }}                        </span>                    </div>                    <a class=\"swipe-action-button\" ng-href=\"{{:: item.user.Url}}/chart/full\">                        <span class=\"swipe-icon-container\">                            <span class=\"swipe-icon swipe-chart-icon\"></span>                            {{ :: $root.t.dynamic('swipeActions', 'chart') }}                        </span>                    </a>                    <div class=\"swipe-action-button\"                        ng-click=\"item.user.setCopyStopLoss('Portfolio Overview - Swipe Action')\">                        <span class=\"swipe-icon-container\">                            <span class=\"swipe-icon swipe-csl-icon\"></span>                            {{ :: $root.t.dynamic('swipeActions', 'setCopySL') }}                        </span>                    </div>                </div>                <div class=\"ui-table-actions-right swipe-action-button one-action one-action-red\"                    ng-if=\":: !!item.Instrument && item.Instrument.AllowClosePosition\" data-etoro-locale-ns=\"swipeActions\">                    <div class=\"swipe-action-button\"                        ng-click=\"$ctrl.model.closeAll(item, 'Portfolio Overview - Swipe Action')\">                        <span class=\"swipe-icon-container\">                            <span class=\"swipe-icon swipe-close-icon\"></span>                            {{ :: $root.t.dynamic('swipeActions', 'closeTrades') }}                        </span>                    </div>                </div>                <div class=\"ui-table-actions-right swipe-action-button one-action one-action-red\"                    ng-if=\":: item.MirrorID > 0\" data-etoro-locale-ns=\"swipeActions\">                    <div class=\"swipe-action-button\" ng-click=\"item.user.stopCopy('Portfolio Overview - Swipe Action')\">                        <span class=\"swipe-icon-container\">                            <span class=\"swipe-icon swipe-close-icon\"></span>                            {{ :: $root.t.dynamic('swipeActions', item.SubType === 'fund' ? \"closeFund\" : \"closeMirror\") }}                        </span>                    </div>                </div>                <a class=\"ui-table-row\"                    ng-class=\"{'sell' : item.NetUnits < 0 && !item.MirrorID, 'buy' : item.NetUnits > 0 && !item.MirrorID,                     'mirror-pending-close' : item.PendingForClosure, 'mirror-pending-open': item.isMirrorPendingOpen }\"                    ng-href=\"{{:: item.Url}}\">                    <div class=\"ui-table-static-cell\"                        data-etoro-automation-id=\"portfolio-overview-table-cell-container-action\">                        <div class=\"table-avatar-ph\" ng-class=\"{'pause': item.IsPaused}\">                            <span class=\"{{:: 'popular-' + item.user.piLevel }}\" ng-if=\":: item.user && item.user.isPi\"                                data-etoro-automation-id=\"portfolio-overview-table-body-cell-market-pi-star\">                                <et-pi-level-star [pi-level]=\"item.user.piLevel\"></et-pi-level-star>                            </span>                            <img class=\"avatar\" ng-src=\"{{::item.Avatar}}\" alt=\"{{:: item.GroupName}}\"                                data-etoro-automation-id=\"portfolio-overview-table-body-cell-market-avatar{{!!item.IsPaused ? '-pause' : '' }}\">                            <span class=\"pause-ava\" ng-if=\"item.IsPaused\"></span>                            <span class=\"bell\" ng-if=\"item.Instrument.hasPriceAlert\"                                title=\"{{ $root.t.dynamic('priceAlert', 'priceAlertAtRate', {instrument: item.Instrument} ) }}\"                                data-etoro-automation-id=\"portfolio-overview-table-body-cell-market-bell\">                            </span>                        </div>                        <div class=\"table-static-cell-info\">                            <div class=\"table-first-name\"                                data-etoro-automation-id=\"portfolio-overview-table-body-cell-market-name\">{{::                                item.GroupName}}                            </div>                            <p data-etoro-automation-id=\"portfolio-overview-table-body-cell-market-mirror-display-name\"                                ng-if=\":: item.user && item.user.allowDisplayFullName\" ng-hide=\"item.PendingForClosure || item.isMirrorPendingOpen\"                                class=\"table-last-name\">{{:: item.user.DisplayName}}</p>                            <span                                data-etoro-automation-id=\"portfolio-overview-table-body-cell-market-mirror-pending-label\"                                class=\"label-pending\" ng-if=\"item.user && item.PendingForClosure\">                                {{_pendingClose_}}                            </span>                            <span data-etoro-automation-id=\"portfolio-overview-table-body-cell-market-mirror-pending-open-label\"                                class=\"label-pending\" ng-if=\"item.isMirrorPendingOpen\">                                {{_pending_}}                            </span>                            <p ng-if=\":: item.IsStock\" class=\"table-last-name\"                                data-etoro-automation-id=\"portfolio-overview-table-body-cell-market-last-name\">{{::                                item.Instrument.DisplayName}}</p>                        </div>                    </div>                    <ui-table-body-slot>                        <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-cell-container-invested\">                            <span data-etoro-automation-id=\"portfolio-overview-table-body-cell-invested-value\">                                {{item.MirrorID > 0 ? item.TotalFundsInvested : item.TotalInvestedAmount | currencyparser:2 }}                            </span>                        </ui-table-cell>                        <ui-table-cell                            data-etoro-automation-id=\"portfolio-overview-table-cell-container-container-profit\"                            ng-class=\"{negative: item.TotalGain < 0, positive: item.TotalGain > 0 }\">                            <span class=\"i-ptc-rate-value\"                                data-etoro-automation-id=\"portfolio-overview-table-body-cell-profit\">{{item.MirrorID > 0 ? item.TotalProfitAndClosedPL : item.TotalProfit | currencyparser:2:true}}</span>                        </ui-table-cell>                        <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-cell-container-units\">                            <div class=\"unit-slot\" ng-if=\":: !!item.Instrument\">                                <span                                    data-etoro-automation-id=\"portfolio-overview-table-body-cell-units-value\">{{ item.NetUnits | math:'abs' | unitsOpenClose: item.Instrument : 2 | lowerThanMinimum: undefined : item.Instrument }}</span>                                <b data-etoro-automation-id=\"portfolio-overview-table-body-cell-units-summary\"                                    class=\"unit-value\"> {{_if(item.NetUnits > 0, '_Buying_', '_Selling_')_}}</b>                            </div>                        </ui-table-cell>                        <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-cell-container-gain\"                            ng-class=\"{negative: item.TotalGain < 0, positive: item.TotalGain > 0, 'negative warning': item.TotalGain <= -100}\">                            <span class=\"i-ptc-rate-value\"                                data-etoro-automation-id=\"portfolio-overview-table-body-cell-gain\">                                {{item.TotalGain | percentageparser | tradingconventions}}                            </span>                        </ui-table-cell>                        <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-cell-container-equity\">                            <span class=\"i-ptc-rate-value\"                                data-etoro-automation-id=\"portfolio-overview-table-body-cell-equity\">                                {{item.Equity | currencyparser:2}}                            </span>                        </ui-table-cell>                        <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-cell-container-open-rate\">                            <span data-etoro-automation-id=\"portfolio-overview-table-body-cell-avg-open-rate\"                                ng-if=\":: !!item.Instrument\">                                {{ item.AverageOpenRate === 0 ? 'N/A' : (item.AverageOpenRate | unitsOpenClose: item.Instrument)}}                            </span>                        </ui-table-cell>                        <ui-table-cell                            data-etoro-automation-id=\"portfolio-overview-table-cell-container-mirror-csl-dollar\">                            <span data-etoro-automation-id=\"portfolio-overview-table-body-cell-mirror-csl-dollar\"                                ng-if=\":: item.MirrorID > 0\">                                {{ item.StopLossAmount | currencyparser:2 }}                            </span>                        </ui-table-cell>                        <ui-table-cell                            data-etoro-automation-id=\"portfolio-overview-table-cell-container-mirror-csl-percentage\">                            <span data-etoro-automation-id=\"portfolio-overview-table-body-cell-mirror-csl-percentage\"                                ng-if=\":: item.MirrorID > 0\">                                {{ item.StopLossPercentage | percentageparser }}                            </span>                        </ui-table-cell>                        <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-cell-container-button-sell\">                            <div ng-if=\":: !!item.Instrument\" class=\"etoro-sell-button\" data-ui-buysell-buttons=\"\"                                data-instrument=\"item.Instrument\"                                data-etoro-automation-id=\"portfolio-overview-table-body-cell-button-sell\"                                data-type=\"sell\" data-app-source=\"apps-trader-portfolio-overview-list-list.view\">                            </div>                        </ui-table-cell>                        <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-cell-container-button-buy\">                            <div ng-if=\":: !!item.Instrument\" class=\"etoro-buy-button\" data-ui-buysell-buttons=\"\"                                data-instrument=\"item.Instrument\" data-type=\"buy\"                                data-etoro-automation-id=\"portfolio-overview-table-body-cell-button-buy\"                                data-app-source=\"apps-trader-portfolio-overview-list-list.view\">                            </div>                        </ui-table-cell>                        <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-cell-container-total-amount\">                            <span data-etoro-automation-id=\"portfolio-overview-table-body-cell-total-amount\">                                {{item.TotalInvestedAmount | currencyparser:2 }}                            </span>                        </ui-table-cell>                        <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-cell-container-fees\">                            <span data-etoro-automation-id=\"portfolio-overview-table-body-cell-fees\">                                {{ item.TotalFees | fees  | currencyparser:2:true }}                            </span>                        </ui-table-cell>                        <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-cell-container-leverage\">                            <span data-etoro-automation-id=\"portfolio-overview-table-body-cell-leverage\">                                {{item.MirrorID > 0 ? '' : 'X' + (item.LeverageAvg | tofixed:2 | number | math:'abs')}}                            </span>                        </ui-table-cell>                        <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-cell-container-last-price\">                            <span class=\"current-num-outline\" ng-if=\"!(item.MirrorID > 0)\"                                data-etoro-automation-id=\"portfolio-overview-table-body-cell-last-price\"                                ng-click=\"$ctrl.openPosition(item.Instrument, true, $event, true,null, null, null, false,$ctrl.appFullSource)\">                                {{item.MirrorID > 0 ? '' : (item.Instrument.lastPrice() | formatRate: item.Instrument)}}                            </span>                        </ui-table-cell>                    </ui-table-body-slot>                    <ui-table-button-cell>                        <div data-dropdown-actions=\"\" data-item=\":: item\" ng-if=\"!item.isFundPendingClose\"                            data-etoro-automation-id=\"portfolio-overview-table-body-cell-cogeWhell\"                            app-source=\"apps-trader-portfolio-overview-list-list.view\"></div>                    </ui-table-button-cell>                </a>            </div>            <div data-etoro-automation-id=\"portfolio-overview-orders-summary-container\" class=\"ui-table-row pending\"                ng-if=\"$ctrl.model.hasOrders\">                <div class=\"ui-table-static-cell\">                    <div data-etoro-automation-id=\"portfolio-overview-orders-summary-pending-label\"                        class=\"table-first-name\">                        {{_pendingOrders_}}                    </div>                </div>                <div class=\"ui-table-body-slot\">                    <ui-table-cell>                        <div data-etoro-automation-id=\"portfolio-overview-orders-summary-amount-value\"                            class=\"rate-value mobile-align-left\">                            {{ $ctrl.model.ordersAmount | currencyparser:2 }}                        </div>                        <div data-etoro-automation-id=\"portfolio-overview-orders-summary-amount-label\"                            class=\"rate-subvalue\">                            {{_amount_}}                        </div>                    </ui-table-cell>                </div>                <a data-etoro-automation-id=\"portfolio-overview-orders-summary-view-orders-button\"                    class=\"button-standard total-button\" ng-href=\"/portfolio/orders\">                    {{_viewOrders_}}                </a>            </div>            <portfolio-upsell-banner upsell-data=\"$ctrl.upsellData\"                ng-style=\"{'display':$ctrl.upsellData.shouldShowPortfolioUpsellBanner?'block':'none'}\">            </portfolio-upsell-banner>        </ui-table-body>    </ui-table></div><div ng-if=\" $ctrl.isInvestingMode\" class=\"portfolio-overview\" data-etoro-locale-ns=\"portfolioOpenTrades\" overview-time-log view-name=\"list\">    <ui-table ui-table-id=\"portfolioOverviewInvestingMode\" ui-table-namespace=\"portfolioOpenTrades\"        default-fields=\"price, units, avgOpen,netProfit, pnl, equity, sell, buy\"        default-mobile-fields=\"investedAmount, netProfit, pnl, equity\" class=\"portfolio-overview-table button-count-1\"        data-etoro-automation-id=\"portfolio-overview-table\">        <ui-table-head class=\"ui-table-head et-layout-sub-sticky-header\" data-etoro-automation-id=\"portfolio-overview-table-header\">            <b class=\"ui-table-static-cell sortable\" ng-click=\"$ctrl.sort('GroupName')\"                ng-class=\"$ctrl.sortSelectedClassName('GroupName')\"                data-etoro-automation-id=\"portfolio-overview-table-header-market-name\">                {{_market_}} ({{$ctrl.positions.length}})                <span class=\"sort-icon sprite\">                </span>            </b>            <ui-table-head-slot>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-invested\" class=\"sortable\"                    name=\"investedAmount\" ng-click=\"$ctrl.sort('TotalFundsInvested || TotalInvestedAmount')\"                    ng-class=\"$ctrl.sortSelectedClassName('TotalFundsInvested || TotalInvestedAmount')\">                    {{_investedAmount_}}<span class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-net-profit-dollar\"                    class=\"sortable\" name=\"netProfit\" ng-click=\"$ctrl.sort('TotalProfitAndClosedPL || TotalProfit')\"                    ng-class=\"$ctrl.sortSelectedClassName('TotalProfitAndClosedPL || TotalProfit')\">                    {{_netProfit_}}<span class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-units\" name=\"units\"                    class=\"sortable\" ng-click=\"$ctrl.sort('NetUnitsSort')\"                    ng-class=\"$ctrl.sortSelectedClassName('NetUnitsSort')\">{{_units_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-gain\" class=\"sortable\"                    name=\"pnl\" ng-click=\"$ctrl.sort('TotalGain')\" ng-class=\"$ctrl.sortSelectedClassName('TotalGain')\">                    {{_pnl_}}<span class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-equity\" class=\"sortable\"                    name=\"equity\" ng-click=\"$ctrl.sort('Equity')\" ng-class=\"$ctrl.sortSelectedClassName('Equity')\">                    {{_equity_}}<span class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-average-open-rate\"                    class=\"sortable\" name=\"avgOpen\" ng-click=\"$ctrl.sort('AverageOpenRateSort')\"                    ng-class=\"$ctrl.sortSelectedClassName('AverageOpenRateSort')\">{{_avgOpen_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-stop-loss-amount\"                    class=\"sortable\" name=\"cslAmount\" ng-click=\"$ctrl.sort('StopLossAmount')\"                    ng-class=\"$ctrl.sortSelectedClassName('StopLossAmount')\">{{_cslAmount_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-stop-loss-Percentage\"                    class=\"sortable\" name=\"cslPercent\" ng-click=\"$ctrl.sort('StopLossPercentage')\"                    ng-class=\"$ctrl.sortSelectedClassName('StopLossPercentage')\">{{_cslPercent_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-sell\" class=\"sortable\"                    name=\"sell\" ng-click=\"$ctrl.sort('Instrument.rate.Bid')\"                    ng-class=\"$ctrl.sortSelectedClassName('Instrument.rate.Bid')\">{{_bid_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-buy\" class=\"sortable\"                    name=\"buy\" ng-click=\"$ctrl.sort('Instrument.rate.Ask')\"                    ng-class=\"$ctrl.sortSelectedClassName('Instrument.rate.Ask')\">{{_ask_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-net-invested\" class=\"sortable\"                    name=\"netInvested\" ng-click=\"$ctrl.sort('TotalInvestedAmount')\"                    ng-class=\"$ctrl.sortSelectedClassName('TotalInvestedAmount')\">{{_netInvested_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-fees\" class=\"sortable\"                    name=\"fees\" ng-click=\"$ctrl.sort('TotalFees')\" ng-class=\"$ctrl.sortSelectedClassName('TotalFees')\">                    {{_fees_}}<span class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-avg-leverage\" class=\"sortable\"                    name=\"leverage\" ng-click=\"$ctrl.sort('LeverageAvgSort')\"                    ng-class=\"$ctrl.sortSelectedClassName('LeverageAvgSort')\">{{_leverage_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-header-last-price\" class=\"sortable\"                    name=\"price\" ng-click=\"$ctrl.sort('item.Instrument.rate.Change.dailyBidPercent')\"                    ng-class=\"$ctrl.sortSelectedClassName('item.Instrument.rate.Change.dailyBidPercent')\">                    {{_price_}}<span class=\"sort-arrow sprite\"></span></ui-table-cell>            </ui-table-head-slot>        </ui-table-head>        <ui-table-body ui-swipe=\"\" data-etoro-automation-id=\"portfolio-overview-table-body\" class=\"old-angular-scrollable-el\">            <div class=\"ui-table-row-container\" ui-swipe-actions=\".ui-table-row\" ui-swipe-swiperight-action=\"\"                ui-swipe-swipeleft-action=\"!!item.user ? item.user.stopCopy('Portfolio Overview - Swipe Action') : $ctrl.model.closeAll(item, 'Portfolio Overview - Swipe Action')\"                ui-swipe-menu-left=\".ui-table-actions-left\" ui-swipe-menu-right=\".ui-table-actions-right\"                ui-swipe-is-disabled=\"{{ item.MirrorID > 0 && item.PendingForClosure }}\"                data-etoro-automation-id=\"portfolio-overview-row-{{ :: item.GroupName}}\"                ng-repeat=\"item in $ctrl.positions\">                <div class=\"ui-table-actions-left\" ng-if=\":: !!item.Instrument\" data-etoro-locale-ns=\"swipeActions\">                    <div class=\"swipe-action-button\">                        <trade-button instrument=\":: item.Instrument\" label-localize=\"dropDownActions.openTradeButton\"                            app-source=\"Swipe\" to-check-mode=\"true\">                        </trade-button>                    </div>                    <div class=\"swipe-action-button\" ng-click=\"item.Instrument.openPriceAlert('Portfolio')\">                        <span class=\"swipe-icon-container\">                            <span class=\"swipe-icon swipe-price-alert-icon\"></span>                            {{ :: $root.t.dynamic('swipeActions', 'priceAlert') }}                        </span>                    </div>                    <a class=\"swipe-action-button\" ng-href=\"{{:: item.Instrument.Url}}/chart/full\">                        <span class=\"swipe-icon-container\">                            <span class=\"swipe-icon swipe-chart-icon\"></span>                            {{ :: $root.t.dynamic('swipeActions', 'chart') }}                        </span>                    </a>                </div>                <div class=\"ui-table-actions-left\" ng-if=\":: item.MirrorID > 0\" data-etoro-locale-ns=\"swipeActions\">                    <div class=\"swipe-action-button\" ng-click=\"item.user.copy('Portfolio Overview - Swipe Action')\"                        ng-if=\"item.SubType !== 'fund'\">                        <span class=\"swipe-icon-container\">                            <span class=\"swipe-icon swipe-addfunds-icon\"></span>                            {{ :: $root.t.dynamic('swipeActions', 'addFunds') }}                        </span>                    </div>                    <a class=\"swipe-action-button\" ng-href=\"{{:: item.user.Url}}/chart/full\">                        <span class=\"swipe-icon-container\">                            <span class=\"swipe-icon swipe-chart-icon\"></span>                            {{ :: $root.t.dynamic('swipeActions', 'chart') }}                        </span>                    </a>                    <div class=\"swipe-action-button\"                        ng-click=\"item.user.setCopyStopLoss('Portfolio Overview - Swipe Action')\">                        <span class=\"swipe-icon-container\">                            <span class=\"swipe-icon swipe-csl-icon\"></span>                            {{ :: $root.t.dynamic('swipeActions', 'setCopySL') }}                        </span>                    </div>                </div>                <div class=\"ui-table-actions-right swipe-action-button one-action one-action-red\"                    ng-if=\":: !!item.Instrument && item.Instrument.AllowClosePosition\" data-etoro-locale-ns=\"swipeActions\">                    <div class=\"swipe-action-button\"                        ng-click=\"$ctrl.model.closeAll(item, 'Portfolio Overview - Swipe Action')\">                        <span class=\"swipe-icon-container\">                            <span class=\"swipe-icon swipe-close-icon\"></span>                            {{ :: $root.t.dynamic('swipeActions', 'closeTrades') }}                        </span>                    </div>                </div>                <div class=\"ui-table-actions-right swipe-action-button one-action one-action-red\"                    ng-if=\":: item.MirrorID > 0\" data-etoro-locale-ns=\"swipeActions\">                    <div class=\"swipe-action-button\" ng-click=\"item.user.stopCopy('Portfolio Overview - Swipe Action')\">                        <span class=\"swipe-icon-container\">                            <span class=\"swipe-icon swipe-close-icon\"></span>                            {{ :: $root.t.dynamic('swipeActions', item.SubType === 'fund' ? \"closeFund\" : \"closeMirror\") }}                        </span>                    </div>                </div>                <a class=\"ui-table-row\"                    ng-class=\"{'sell' : item.NetUnits < 0 && !item.MirrorID, 'buy' : item.NetUnits > 0 && !item.MirrorID,                     'mirror-pending-close' : item.PendingForClosure, 'mirror-pending-open': item.isMirrorPendingOpen }\"                    ng-href=\"{{:: item.Url}}\">                    <div class=\"ui-table-static-cell\"                        data-etoro-automation-id=\"portfolio-overview-table-cell-container-action\">                        <div class=\"table-avatar-ph\" ng-class=\"{'pause': item.IsPaused}\">                            <span class=\"{{:: 'popular-' + item.user.piLevel }}\" ng-if=\":: item.user && item.user.isPi\"                                data-etoro-automation-id=\"portfolio-overview-table-body-cell-market-pi-star\">                                <et-pi-level-star [pi-level]=\"item.user.piLevel\"></et-pi-level-star>                            </span>                            <img class=\"avatar\" ng-src=\"{{::item.Avatar}}\" alt=\"{{:: item.GroupName}}\"                                data-etoro-automation-id=\"portfolio-overview-table-body-cell-market-avatar{{!!item.IsPaused ? '-pause' : '' }}\">                            <span class=\"pause-ava\" ng-if=\"item.IsPaused\"></span>                            <span class=\"bell\" ng-if=\"item.Instrument.hasPriceAlert\"                                title=\"{{ $root.t.dynamic('priceAlert', 'priceAlertAtRate', {instrument: item.Instrument} ) }}\"                                data-etoro-automation-id=\"portfolio-overview-table-body-cell-market-bell\">                            </span>                        </div>                        <div class=\"table-static-cell-info\">                            <div class=\"table-first-name\"                                data-etoro-automation-id=\"portfolio-overview-table-body-cell-market-name\">{{::                                item.GroupName}}                            </div>                            <p data-etoro-automation-id=\"portfolio-overview-table-body-cell-market-mirror-display-name\"                                ng-if=\":: item.user && item.user.allowDisplayFullName\" ng-hide=\"item.PendingForClosure || item.isMirrorPendingOpen\"                                class=\"table-last-name\">{{:: item.user.DisplayName}}</p>                            <span data-etoro-automation-id=\"portfolio-overview-table-body-cell-market-mirror-pending-label\"                                class=\"label-pending\" ng-if=\"item.user && item.PendingForClosure\">                                {{_pendingClose_}}                            </span>                            <span data-etoro-automation-id=\"portfolio-overview-table-body-cell-market-mirror-pending-open-label\"                                class=\"label-pending\" ng-if=\"item.isMirrorPendingOpen\">                                {{_pending_}}                            </span>                            <p ng-if=\":: item.IsStock\" class=\"table-last-name\"                                data-etoro-automation-id=\"portfolio-overview-table-body-cell-market-last-name\">                                {{:: item.Instrument.DisplayName}}                            </p>                        </div>                    </div>                    <ui-table-body-slot>                        <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-cell-container-invested\">                            <span data-etoro-automation-id=\"portfolio-overview-table-body-cell-invested-value\">                                {{item.MirrorID > 0 ? item.TotalFundsInvested : item.TotalInvestedAmount | currencyparser:2 }}                            </span>                        </ui-table-cell>                        <ui-table-cell                            data-etoro-automation-id=\"portfolio-overview-table-cell-container-container-profit\"                            ng-class=\"{negative: item.TotalGain < 0, positive: item.TotalGain > 0 }\">                            <span class=\"i-ptc-rate-value\"                                data-etoro-automation-id=\"portfolio-overview-table-body-cell-profit\">{{item.MirrorID > 0 ? item.TotalProfitAndClosedPL : item.TotalProfit | currencyparser:2:true}}</span>                        </ui-table-cell>                        <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-cell-container-units\">                            <div class=\"unit-slot\" ng-if=\":: !!item.Instrument\">                                <span                                    data-etoro-automation-id=\"portfolio-overview-table-body-cell-units-value\">{{ item.NetUnits | math:'abs' | unitsOpenClose: item.Instrument : 2 | lowerThanMinimum: undefined : item.Instrument }}</span>                                <b data-etoro-automation-id=\"portfolio-overview-table-body-cell-units-summary\"                                    class=\"unit-value\"> {{_if(item.NetUnits > 0, '_Buying_', '_Selling_')_}}</b>                            </div>                        </ui-table-cell>                        <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-cell-container-gain\"                            ng-class=\"{negative: item.TotalGain < 0, positive: item.TotalGain > 0, 'negative warning': item.TotalGain <= -100}\">                            <span class=\"i-ptc-rate-value\"                                data-etoro-automation-id=\"portfolio-overview-table-body-cell-gain\">                                {{item.TotalGain | percentageparser | tradingconventions}}                            </span>                        </ui-table-cell>                        <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-cell-container-equity\">                            <span class=\"i-ptc-rate-value\"                                data-etoro-automation-id=\"portfolio-overview-table-body-cell-equity\">                                {{item.Equity | currencyparser:2}}                            </span>                        </ui-table-cell>                        <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-cell-container-open-rate\">                            <span data-etoro-automation-id=\"portfolio-overview-table-body-cell-avg-open-rate\"                                ng-if=\":: !!item.Instrument\">                                {{ item.AverageOpenRate === 0 ? 'N/A' : (item.AverageOpenRate | unitsOpenClose: item.Instrument)}}                            </span>                        </ui-table-cell>                        <ui-table-cell                            data-etoro-automation-id=\"portfolio-overview-table-cell-container-mirror-csl-dollar\">                            <span data-etoro-automation-id=\"portfolio-overview-table-body-cell-mirror-csl-dollar\"                                ng-if=\":: item.MirrorID > 0\">                                {{ item.StopLossAmount | currencyparser:2 }}                            </span>                        </ui-table-cell>                        <ui-table-cell                            data-etoro-automation-id=\"portfolio-overview-table-cell-container-mirror-csl-percentage\">                            <span data-etoro-automation-id=\"portfolio-overview-table-body-cell-mirror-csl-percentage\"                                ng-if=\":: item.MirrorID > 0\">                                {{ item.StopLossPercentage | percentageparser }}                            </span>                        </ui-table-cell>                        <ui-table-cell                            data-etoro-automation-id=\"portfolio-overview-table-cell-container-button-sell-investing-mode\">                            <div ng-if=\":: !!item.Instrument && item.Instrument.AllowClosePosition\" ng-click=\"$ctrl.model.closeAll(item, $ctrl.appFullSource)\"                                class=\"button-standard button-red head-action-button portfolio-overview-list-view-investing-mode\">                                <div>{{ :: $root.t.dynamic('portfolioOpenTradesInvestMode', 'sell') }}</div>                            </div>                        </ui-table-cell>                        <ui-table-cell                            data-etoro-automation-id=\"portfolio-overview-table-cell-container-button-buy-investing-mode\">                            <trade-button ng-if=\":: !!item.Instrument\" instrument=\":: item.Instrument\"                                btn-class=\"button-standard button-blue head-action-button portfolio-overview-list-view-investing-mode \"                                app-source=\"apps-trader-portfolio-overview-list-list.view\" support-restriction=\"false\"                                to-check-mode=\"true\">                            </trade-button>                        </ui-table-cell>                        <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-cell-container-total-amount\">                            <span data-etoro-automation-id=\"portfolio-overview-table-body-cell-total-amount\">                                {{item.TotalInvestedAmount | currencyparser:2 }}                            </span>                        </ui-table-cell>                        <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-cell-container-fees\">                            <span data-etoro-automation-id=\"portfolio-overview-table-body-cell-fees\">                                {{ item.TotalFees | fees  | currencyparser:2:true }}                            </span>                        </ui-table-cell>                        <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-cell-container-leverage\">                            <span data-etoro-automation-id=\"portfolio-overview-table-body-cell-leverage\">                                {{item.MirrorID > 0 ? '' : 'X' + (item.LeverageAvg | tofixed:2 | number | math:'abs')}}                            </span>                        </ui-table-cell>                        <ui-table-cell data-etoro-automation-id=\"portfolio-overview-table-cell-container-price\"                            class=\"price\">                            <price ng-if=\":: !!item.Instrument\" instrument=\":: item.Instrument\">                            </price>                            <!--<span data-etoro-automation-id=\"portfolio-overview-table-body-cell-price\"-->                            <!--class=\"head-info-stats-value\">-->                            <!--{{ item.Instrument.rate.lastPrice | tofixed:item.Instrument.Precision}}-->                            <!--</span>-->                            <!--<span automation-id=\"portfolio-overview-table-cell-rate-change-amount-investing-mode\" ng-class=\"{positive: item.Instrument.rate.Change.bidNumber('Daily') >= 0, negative : item.Instrument.rate.Change.bidNumber('Daily') < 0}\" ng-if=\":: !!item.Instrument\" class=\"gain-num-protsent\">-->                            <!--<i automation-id=\"watchlist-item-grid-instrument-rate-change-arrow\" class=\"sprite\"></i>-->                            <!--{{item.Instrument.rate.Change.bidNumber('Daily')  | tofixed:item.Instrument.Precision}}-->                            <!--({{item.Instrument.rate.Change.bidPercent('Daily') | percentageparser}})</span>-->                        </ui-table-cell>                    </ui-table-body-slot>                    <ui-table-button-cell>                        <div data-dropdown-actions=\"\" data-item=\":: item\" ng-if=\"!item.isFundPendingClose\"                            data-etoro-automation-id=\"portfolio-overview-table-body-cell-cogeWhell\"                            app-source=\"apps-trader-portfolio-overview-list-list.view\"></div>                    </ui-table-button-cell>                </a>            </div>            <div data-etoro-automation-id=\"portfolio-overview-orders-summary-container\" class=\"ui-table-row pending\"                ng-if=\"$ctrl.model.hasOrders\">                <div class=\"ui-table-static-cell\">                    <div data-etoro-automation-id=\"portfolio-overview-orders-summary-pending-label\"                        class=\"table-first-name\">                        {{_pendingOrders_}}                    </div>                </div>                <div class=\"ui-table-body-slot\">                    <ui-table-cell>                        <div data-etoro-automation-id=\"portfolio-overview-orders-summary-amount-value\"                            class=\"rate-value mobile-align-left\">                            {{ $ctrl.model.ordersAmount | currencyparser:2 }}                        </div>                        <div data-etoro-automation-id=\"portfolio-overview-orders-summary-amount-label\"                            class=\"rate-subvalue\">                            {{_amount_}}                        </div>                    </ui-table-cell>                </div>                <a data-etoro-automation-id=\"portfolio-overview-orders-summary-view-orders-button\"                    class=\"button-standard total-button\" ng-href=\"/portfolio/orders\">                    {{_viewOrders_}}                </a>            </div>            <portfolio-upsell-banner                ng-style=\"{'display':$ctrl.upsellData.shouldShowPortfolioUpsellBanner?'block':'none'}\"                upsell-data=\"$ctrl.upsellData\">            </portfolio-upsell-banner>        </ui-table-body>    </ui-table></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[64][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/overview/list/manualTrades.view.html","text":"<div overview-time-log view-name=\"manual-trades\" class=\"manual-trades-wrapper\">    <ui-table class=\"button-count-4 manual-trades\" data-etoro-locale-ns=\"portfolioManualTrades\" ui-table-id=\"portfolioManualTrades\" ui-table-namespace=\"portfolioManualTrades\"              default-fields=\"investedAmount, units, openRate, currentRate, sl, tp, netProfit, pnl\"              default-mobile-fields=\"units, openRate, currentRate, equity\"              data-etoro-automation-id=\"portfolio-manual-trades-table\">        <ui-table-head data-etoro-automation-id=\"portfolio-manual-trades-table-headers-container\" class=\"et-layout-sub-sticky-header\">            <b class=\"ui-table-static-cell sortable\" ng-click=\"$ctrl.sort('OpenDateTime')\"               ng-class=\"$ctrl.sortSelectedClassName('OpenDateTime')\"               data-etoro-automation-id=\"portfolio-manual-trades-table-header-cell-trades\">                {{_trades_}} ({{$ctrl.positions.length}})                <span class=\"i-ptc-sort-icon sprite\"></span>            </b>            <ui-table-head-slot>                <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-header-cell-invested\" name=\"investedAmount\" class=\"sortable\" ng-click=\"$ctrl.sort('Amount')\" ng-class=\"$ctrl.sortSelectedClassName('Amount')\">{{_investedAmount_}}<span class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-header-cell-units\" name=\"units\" class=\"sortable\" ng-click=\"$ctrl.sort('Units')\" ng-class=\"$ctrl.sortSelectedClassName('Units')\">{{_units_}}<span class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-header-cell-open-rate\" name=\"openRate\" class=\"sortable\" ng-click=\"$ctrl.sort('OpenRate')\" ng-class=\"$ctrl.sortSelectedClassName('OpenRate')\">{{_openRate_}}<span class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-header-cell-pip-change\"  name=\"pipChange\" class=\"sortable\" ng-click=\"$ctrl.sort('Change')\" ng-class=\"$ctrl.sortSelectedClassName('Change')\"><span class=\"e-ptc-icon change sprite\"></span><span class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-header-cell-stop-loss-rate\" name=\"sl\" class=\"sortable\" ng-click=\"$ctrl.sort('StopLossRate')\" ng-class=\"$ctrl.sortSelectedClassName('StopLossRate')\">{{_sl_}}<span class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-header-cell-take-profit-rate\" name=\"tp\" class=\"sortable\" ng-click=\"$ctrl.sort('TakeProfitRate')\" ng-class=\"$ctrl.sortSelectedClassName('TakeProfitRate')\">{{_tp_}}<span class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-header-cell-net-profit-amount\" name=\"netProfit\" class=\"sortable\" ng-click=\"$ctrl.sort('Profit')\" ng-class=\"$ctrl.sortSelectedClassName('Profit')\">{{_netProfit_}}<span class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-header-cell-gain\" name=\"pnl\" class=\"sortable\" ng-click=\"$ctrl.sort('Gain')\" ng-class=\"$ctrl.sortSelectedClassName('Gain')\">{{_pnl_}}<span class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-header-cell-last-price\" name=\"currentRate\" class=\"sortable\" ng-click=\"$ctrl.sort('Instrument.rate.lastPrice')\" ng-class=\"$ctrl.sortSelectedClassName('Instrument.rate.lastPrice')\">{{_currentRate_}}<span class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-header-cell-leverage\" name=\"leverage\" class=\"sortable\" ng-click=\"$ctrl.sort('Leverage')\" ng-class=\"$ctrl.sortSelectedClassName('Leverage')\">{{_leverage_}}<span class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-header-cell-equity\" name=\"equity\" class=\"sortable\" ng-click=\"$ctrl.sort('Equity')\" ng-class=\"$ctrl.sortSelectedClassName('Equity')\">{{_equity_}}<span class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-header-cell-fees\" name=\"fees\" class=\"sortable\" ng-click=\"$ctrl.sort('TotalFees')\" ng-class=\"$ctrl.sortSelectedClassName('TotalFees')\">{{_fees_}}<span class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-header-cell-stop-loss-amount\" name=\"slAmount\" class=\"sortable\" ng-click=\"$ctrl.sort('StopLossAmount')\" ng-class=\"$ctrl.sortSelectedClassName('StopLossAmount')\">{{_slAmount_}}<span class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-header-cell-take-profit-amount\" name=\"tpAmount\" class=\"sortable\" ng-click=\"$ctrl.sort('TakeProfitAmount')\" ng-class=\"$ctrl.sortSelectedClassName('TakeProfitAmount')\">{{_tpAmount_}}<span class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-header-cell-stop-loss-percent\" name=\"slPercent\" class=\"sortable\" ng-click=\"$ctrl.sort('StopLossPercent')\" ng-class=\"$ctrl.sortSelectedClassName('StopLossPercent')\">{{_slPercent_}}<span class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-header-cell-take-profit-percent\" name=\"tpPercent\" class=\"sortable\" ng-click=\"$ctrl.sort('TakeProfitPercent')\" ng-class=\"$ctrl.sortSelectedClassName('TakeProfitPercent')\">{{_tpPercent_}}<span class=\"sort-arrow sprite\"></span></ui-table-cell>            </ui-table-head-slot>        </ui-table-head>        <ui-table-body                 data-etoro-automation-id=\"portfolio-manual-trades-table-body-container\"                data-react-to-scroll-container                data-active-class-name=\"minimize\" ui-swipe=\"\" ng-class=\"{'old-angular-scrollable-el':true}\">                <div class=\"ui-table-row-container\"                 data-etoro-automation-id=\"portfolio-manual-trades-row\"                 ui-swipe-actions=\".ui-table-row\"                 ui-swipe-swiperight-action=\"\"                 ui-swipe-swipeleft-action=\"$ctrl.closeOperation(position, $ctrl.appFullSource);\"                 ui-swipe-menu-left=\".ui-table-actions-left\"                 ui-swipe-menu-right=\".ui-table-actions-right\"                 ui-swipe-is-disabled=\"{{ position.isPendingClose }}\"                 ng-repeat=\"position in $ctrl.positions\">                    <div class=\"ui-table-actions-left\"  data-etoro-locale-ns=\"swipeActions\" ng-if=\"!position.Instrument.isUsTrade\">                    <div class=\"swipe-action-button\" ng-click=\"$ctrl.updatePosition(position, 0, $ctrl.appFullSource);\">                       <span class=\"swipe-action-info\">                            <span class=\"swipe-action-title\">{{ :: $root.t.dynamic('swipeActions', 'editSL') }}</span>                            <span class=\"swipe-action-txt\">{{ position.StopLossRate | unitsOpenClose: position.Instrument : 5 : true | nozero:'-----' }}</span>                       </span>                    </div>                    <a class=\"swipe-action-button\" ng-click=\"$ctrl.updatePosition(position, 2, $ctrl.appFullSource);\"  data-etoro-locale-ns=\"swipeActions\">                       <span  class=\"swipe-action-info\">                            <span class=\"swipe-action-title\">{{ :: $root.t.dynamic('swipeActions', 'editTP') }}</span>                            <span class=\"swipe-action-txt\">{{ position.TakeProfitRate | unitsOpenClose: position.Instrument : 5 : true | nozero:'-----' }}</span>                       </span>                    </a>                </div>                <div class=\"ui-table-actions-right swipe-action-button one-action one-action-red\"  data-etoro-locale-ns=\"swipeActions\">                    <div ng-if=\"!position.isPendingClose && !position.isClosedRequested && position.Instrument.AllowClosePosition &&!position.isOrderForClose\" class=\"swipe-action-button\" ng-click=\"$ctrl.closePosition(position, $ctrl.appFullSource);\">                         <span class=\"swipe-icon-container\">                            <span class=\"swipe-icon swipe-close-icon\"></span>                             {{ :: $root.t.dynamic('swipeActions', 'closeTrade') }}                        </span>                    </div>                    <div ng-if=\"position.isPendingClose && !position.isClosedRequested && !position.isExecutionBlocked()\" class=\"swipe-action-button\" ng-click=\"$ctrl.cancelClosePosition(position, false);\">                         <span class=\"swipe-icon-container\">                            <span class=\"swipe-icon swipe-close-icon\"></span>                             {{ :: $root.t.dynamic('swipeActions', 'cancelCloseTrade') }}                        </span>                    </div>                </div>            <div class=\"ui-table-row\" ng-class=\"{'mirror-pending-close' : position.isPendingClose || position.isClosedRequested}\"  data-id=\"{{:: position.PositionID}}\">                <div class=\"ui-table-static-cell\" ng-click=\"$ctrl.executeDefault(position)\"                        data-etoro-automation-id=\"portfolio-manual-trades-table-body-cell-container-action\">                    <div class=\"table-avatar-ph-inner\">                        <img class=\"avatar\" ng-src=\"{{:: position.Instrument.Avatars['default']}}\" alt=\"\"                             data-etoro-automation-id=\"portfolio-manual-trades-table-body-market-image\">                    </div>                    <div class=\"table-static-inner-cell-info\">                        <div class=\"table-first-name inline-label-view\" ng-class=\"{'is-cfd-tag' : !position.IsSettled && !position.isOrderForClose}\">                            <span class=\"e-uppercase\" ng-if=\"position.IsBuy\"                                  data-etoro-automation-id=\"portfolio-manual-trades-table-body-market-buy-label\">                                {{ :: $root.t.dynamic('portfolioManualTrades', 'buy') }}                            </span>                            <span class=\"e-uppercase\" ng-if=\"!position.IsBuy\"                                  data-etoro-automation-id=\"portfolio-manual-trades-table-body-market-sell-label\">                                {{ :: $root.t.dynamic('portfolioManualTrades', 'sell') }}                            </span>                            <span data-etoro-automation-id=\"portfolio-manual-trades-table-body-market-name\">{{:: position.Instrument.Name}}</span>                            <span ng-if=\"position.isOrderForClose\" class=\"sprite order-for-close-clock\"></span>                            <span class=\"portfolio-redeem-pending\" ng-if=\"position.isRedeemPending && !position.isPendingClose\">{{:: $root.t.dynamic('portfolioUpdatePosition', ((model.regulationId===4)||(model.regulationId===10)) ? 'pendingRedeem.typeB' : 'pendingRedeem.typeA' )}}</span>                            <span class=\"portfolio-redeem-pending\" ng-if=\"position.isRedeemPending && position.isPendingClose\">{{:: $root.t.dynamic('portfolioUpdatePosition', ((model.regulationId===4)||(model.regulationId===10)) ? 'pendingRedeem.typeB' : 'pendingRedeem.typeA' )}}</span>                        </div>                        <span data-etoro-automation-id=\"portfolio-manual-trades-table-body-market-pending-close\" class=\"table-label-pending\"                             ng-if=\"((position.isPendingClose && !position.isRedeemPending && !position.isPartialPendingClose) || position.isClosedRequested) && !position.isOrderForClose\">                            {{ :: $root.t.dynamic('portfolioManualTrades', 'pendingClose') }}                        </span>                        <span data-etoro-automation-id=\"portfolio-manual-trades-table-body-market-pending-close\" class=\"table-label-pending\" ng-if=\"(position.isPartialPendingClose && !position.isRedeemPending && !position.isOrderForClose)\">{{ :: $root.t.dynamic('portfolioOpenTradesTable', 'PartialPendingClose') }}</span>                        <span data-etoro-automation-id=\"portfolio-manual-trades-table-body-market-open-date\" class=\"table-last-name\" ng-if=\"!position.isPendingClose && !position.isClosedRequested && !position.isPartialPendingClose && !position.isOrderForClose\">{{:: position.OpenDateTime | formatDate: 'HH:mm' }}</span>                        <p ng-if=\"position.isOrderForClose && !position.isPartialPendingClose\" class=\"table-label-pending pending-sell\"                        data-etoro-automation-id=\"portfolio-overview-table-body-cell-market-last-name\">{{:: $root.t.dynamic('portfolioOpenTrades','PendingSell')}}</p>                        <p ng-if=\"position.isOrderForClose && position.isPartialPendingClose\" class=\"table-label-pending pending-sell\"                        data-etoro-automation-id=\"portfolio-overview-table-body-cell-market-last-name\">{{:: $root.t.dynamic('portfolioOpenTrades','PendingPartialSell')}}</p>                    </div>                </div>                <ui-table-body-slot>                    <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-body-cell-container-invested\">                        <span data-etoro-automation-id=\"portfolio-manual-trades-table-body-invested-value\">                            {{ position.Amount | currencyparser:2 }}                        </span>                    </ui-table-cell>                    <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-body-cell-container-units\">                        <span data-etoro-automation-id=\"portfolio-manual-trades-table-body-units-value\">                            {{ position.Units | unitsOpenClose: position.Instrument : 2 | lowerThanMinimum: undefined : position.Instrument}}                        </span>                    </ui-table-cell>                    <ui-table-cell data-etoro-automation-id = \"portfolio-manual-trades-table-body-cell-container-open-rate\"                                   ng-click=\"$ctrl.executeDefault(position)\">                        <span data-etoro-automation-id=\"portfolio-manual-trades-table-body-open-rate\">                            {{ position.OpenRate | unitsOpenClose: position.Instrument }}                        </span>                    </ui-table-cell>                    <ui-table-cell data-etoro-automation-id = \"portfolio-manual-trades-table-body-cell-container-pip-change\"                                   ng-class=\"{negative: position.Change < 0, positive: position.Change > 0}\">                        <span data-etoro-automation-id=\"portfolio-manual-trades-table-body-pip-change-value\">                            {{!!position.isClosedRequested ? \"\" : position.Change}}                        </span>                    </ui-table-cell>                    <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-body-cell-container-stop-loss-rate\"                            ng-click=\"$ctrl.updatePosition(position, 0, $ctrl.appFullSource);\">                        <span data-etoro-automation-id=\"portfolio-manual-trades-table-body-stop-loss-rate\"                              class=\"num-outline\"                              ng-class=\"{'dashed-border' : position.IsTslEnabled, 'positive-border' : position.IsSlApproachingPositive, 'negative-border' : position.IsSlApproachingNegative}\">                            {{ position.isNoSL ? '-----' : position.StopLossRate | unitsOpenClose: position.Instrument : 5 : true | nozero:'-----' }}                        </span>                    </ui-table-cell>                    <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-body-cell-container-take-profit-rate\"                                   ng-click=\"$ctrl.updatePosition(position, 2, $ctrl.appFullSource);\">                        <span data-etoro-automation-id=\"portfolio-manual-trades-table-body-take-profit-rate\"                              class=\"num-outline\" ng-class=\"{'positive-border' : position.IsTpApproachingPositive, 'negative-border' : position.IsTpApproachingNegative}\">                            {{ position.TakeProfitRate | unitsOpenClose: position.Instrument : 5 : true | nozero:'-----' }}                        </span>                    </ui-table-cell>                    <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-body-cell-container-profit\"                            ng-class=\"{negative: position.Gain < 0, positive: position.Gain > 0}\">                        <span data-etoro-automation-id=\"portfolio-manual-trades-table-body-profit-value\" class=\"i-ptc-rate-value\">                            {{!!position.isClosedRequested ? \"\" :  position.Profit| currencyparser:2:true}}                        </span>                    </ui-table-cell>                    <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-body-cell-container-gain\"                            ng-class=\"{negative: position.Gain < 0, positive: position.Gain > 0}\">                        <span data-etoro-automation-id=\"portfolio-manual-trades-table-body-gain\" class=\"i-ptc-rate-value\">                            {{!!position.isClosedRequested ? \"\" :position.Gain | percentageparser | tradingconventions}}                        </span>                    </ui-table-cell>                    <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-body-cell-container-last-price\"                            ng-class=\"{'negative' :  position.LastRateChange < 0,'positive' : position.LastRateChange > 0}\"                            ng-click=\"$ctrl.openPosition(position.Instrument, position.IsBuy, $event, true, null, null, null, false, $ctrl.appFullSource)\">                        <span class=\"current-num-outline\" ng-if=\"!position.isClosedRequested\" data-etoro-automation-id=\"portfolio-manual-trades-table-body-last-price\">                            {{!!position.isClosedRequested ? \"\" : position.CurrentRate | formatRate: position.Instrument}}                        </span>                    </ui-table-cell>                    <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-body-cell-container-leverage\">                        <span data-etoro-automation-id=\"portfolio-manual-trades-table-body-leverage\">                            X{{position.Leverage}}                        </span>                    </ui-table-cell>                    <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-body-cell-container-equity\">                        <span data-etoro-automation-id=\"portfolio-manual-trades-table-body-equity\">                            {{position.Equity | currencyparser:2}}                        </span>                    </ui-table-cell>                    <ui-table-cell data-etoro-automation-id = \"portfolio-manual-trades-table-body-cell-container-fees\"                                   ng-click=\"$ctrl.executeDefault(position)\">                        <span data-etoro-automation-id=\"portfolio-manual-trades-table-body-fees\">                            {{ position.TotalFees | fees  | currencyparser:2:true}}                        </span>                    </ui-table-cell>                    <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-body-cell-container-stop-loss-amount\"                                    ng-click=\"$ctrl.updatePosition(position, 0, $ctrl.appFullSource);\">                        <span data-etoro-automation-id=\"portfolio-manual-trades-table-body-stop-loss-amount\"                              class=\"num-outline\" ng-class=\"{'dashed-border' : position.IsTslEnabled, 'positive-border' : position.IsSlApproachingPositive, 'negative-border' : position.IsSlApproachingNegative }\">                            {{position.StopLossAmount | currencyparser:2}}                        </span>                    </ui-table-cell>                    <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-body-cell-container-take-profit-amount\"                            ng-click=\"$ctrl.updatePosition(position, 2, $ctrl.appFullSource);\">                        <span data-etoro-automation-id=\"portfolio-manual-trades-table-body-take-profit-amount\"                              class=\"num-outline\" ng-class=\"{ 'positive-border' : position.IsTpApproachingPositive, 'negative-border' : position.IsTpApproachingNegative }\">                            {{position.TakeProfitAmount | currencyparser:2}}                        </span>                    </ui-table-cell>                    <ui-table-cell data-etoro-automation-id=\"portfolio-manual-trades-table-body-cell-container-stop-loss-percent\"                            ng-click=\"$ctrl.updatePosition(position, 0, $ctrl.appFullSource);\">                        <span data-etoro-automation-id=\"portfolio-manual-trades-table-body-stop-loss-percent\"                              class=\"num-outline\" ng-class=\"{'dashed-border' : position.IsTslEnabled, 'positive-border' : position.IsSlApproachingPositive, 'negative-border' : position.IsSlApproachingNegative }\">                            {{position.StopLossPercent | percentageparser}}                        </span>                    </ui-table-cell>                    <ui-table-cell data-etoro-automation-id = \"portfolio-manual-trades-table-body-cell-container-take-profit-percent\"                                   ng-click=\"$ctrl.updatePosition(position, 2, $ctrl.appFullSource);\">                        <span data-etoro-automation-id=\"portfolio-manual-trades-table-body-take-profit-percent\"                              class=\"num-outline\" ng-class=\"{ 'positive-border' : position.IsTpApproachingPositive, 'negative-border' : position.IsTpApproachingNegative }\">                            {{position.TakeProfitPercent | percentageparser}}                        </span>                    </ui-table-cell>                </ui-table-body-slot>                <ui-table-button-cell ng-if=\"!model.group.PendingForClosure && (!position.isRedeemPending || !position.isPendingClose) && !position.isOrderForClose\">                    <div class=\"e-btn light i-ptc-action edit\"                         data-etoro-automation-id=\"portfolio-manual-trades-table-body-coge-wheel\"                         ng-click=\"$ctrl.updatePosition(position, undefined, $ctrl.appFullSource);\" ng-if=\"!position.isRedeemPending && !position.isPendingClose && !position.isPartialPendingClose && !$ctrl.group.MirrorID && !position.isClosedRequested\">                        <span class=\"i-ptc-action-icon sprite\"></span>                    </div>                    <div data-etoro-automation-id=\"portfolio-manual-trades-table-body-close-button\"                         ng-if=\"!position.isRedeemPending && !position.isPendingClose && !position.isPartialPendingClose && !position.isClosedRequested && position.Instrument.AllowClosePosition\" class=\"e-btn light i-ptc-action stop\" ng-click=\"$ctrl.closePosition(position, $ctrl.appFullSource);\">                        <span class=\"i-ptc-action-icon sprite\"></span>                    </div>                    <div data-etoro-automation-id=\"portfolio-manual-trades-table-body-pending-close\"                         ng-if=\"!position.isRedeemPending && (position.isPendingClose || position.isPartialPendingClose) && !position.isClosedRequested && !position.isExecutionBlocked()\" class=\"e-btn light  stop\" ng-click=\"$ctrl.cancelClosePosition(position, false);\">                        {{_cancelCloseButton_}}                    </div>                    <div data-etoro-automation-id=\"portfolio-manual-trades-table-body-pending-close\"                         ng-if=\"position.isRedeemPending && !position.isPendingClose\" class=\"e-btn light  stop\" ng-click=\"$ctrl.cancelRedeem(position);\">                        {{_cancelCloseButton_}}                    </div>                </ui-table-button-cell>            </div>            </div>        </ui-table-body>    </ui-table></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[360][0],["underscore","angular"],function(){"use strict";function t(t,s,o){this.localStorage=t,this.sorterFactory=s,this.sortOptions={column:"MANUALTRADES"===this.viewStateMode?"Gain":"Equity",descending:!0};var i=this.localStorage.getItem("portfolio:viewStateMode:"+this.viewStateMode+":sort");i&&(this.sortOptions.column=i.column,this.sortOptions.descending=i.descending),this.sort(this.sortOptions.column,!1),this._syncEvent=o.$on("portfolio:sync:success",function(){this.sort(this.sortOptions.column,!1)}.bind(this))}return t.prototype={$onDestroy:function(){this._syncEvent&&this._syncEvent()},sort:function(t,s){this.sortItems&&(s="undefined"==typeof s?!0:s,this.sortOptions.column===t?s&&(this.sortOptions.descending=!this.sortOptions.descending):(this.sortOptions.column=t,this.sortOptions.descending=!0),this.localStorage.setItem("portfolio:viewStateMode:"+this.viewStateMode+":sort",this.sortOptions),this.sorterFactory.sort(this.sortItems,t,this.sortOptions.descending))},sortSelectedClassName:function(t){return t==this.sortOptions.column&&(this.sortOptions.descending?"sort down":"sort up")},isSellAllOrder:function(t){return t.PendingClosePositionIDs&&t.PendingClosePositionIDs.length}},t});define(rA[363][0],["underscore","moduleDefiner",rA[475][0],rA[296][0]],function(t,e,n,r){"use strict";function u(e,n,r,a,l,s,f,d,p,v,h,m,g){function y(e){var n=e||this.item;B.panel=t.reject(B.panel,function(t){return t.currentLevelGraph=!1,t.id==n.id}),B.center&&B.panel.push(B.center),w.center=B.center=n}I=p,C=n.t,j=C.dynamic(T,"otherTitle"),d.init(e);var N=s.get(),A=n.session.user,w=e.model,B=e.model={positions:N.groups,portfolio:N,currentLevelGraph:{}},D=r.defer();u.instrumentsTypes=f.getTypesDictionary(),u.instrumentsGroupsFactory=f;var U=o(e).loadAllNodes(),F=i(e).loadAllNodes(),O=c(e);B.panel=[{id:"exposure",graph:F},{id:"allocation",graph:U}],"Real"==n.session.user.portfolio.account.type?v.getByUserName(A.username).then(function(t){g.get("bl.factories.trading.users.usersStatsFacade").getRiskTopContributors(t).then(function(t){B.topRiskContributors=t,t&&t.length?(O.ready=!0,O.loadAllNodes(),B.panel.push({id:"risk",graph:O}),D.resolve()):D.reject()})["catch"](function(){D.reject()})})["catch"](D.reject):D.resolve();var x=l.graph||k,$=t.find(B.panel,function(t){return x==t.id.toLowerCase()});$?y($):D.promise.then(function(){y(t.find(B.panel,function(t){return x==t.id.toLowerCase()}))}),e.$on("viewKeeperChangeSuccess",function(e,n,r){var u=r[1].keepUrl,a=n[1].$$route.keepUrl,o=b(r[0]),i=b(n[0]);u&&u==a&&o!=i&&(e.changedUrl=!0,D.promise["finally"](function(){y(t.find(B.panel,function(t){return t.id.toLowerCase()==i}))}))}),e.selectTree=function(){a.path("/portfolio/chart/"+this.item.id.toLowerCase())},e.legendTemplateRender=function(e){if("exposure"!==B.center.id||!e||!e.nodeData||!e.nodeData.value||t.isObject(e.nodeData.value)&&!t.has(e.nodeData.value,"CalculatedNetUnits"))return"";var n=t.isArray(e.nodeData.value)?t.reduce(e.nodeData.value,function(t,e){return t+e.CalculatedNetUnits},0):e.nodeData.value.CalculatedNetUnits,r=n>0,u=m.dynamic("portfolioCharts",r?"Buying":"Selling");return h('<div class="pie-chart-list-item-amount {{className}}"><span class="sprite"></span><span class="action-label">{{ text }}</span> {{ sumCalculatedNetUnits | math:"abs" | currencyparser:2 }}</div>')({sumCalculatedNetUnits:n,text:u,className:r?"buy":"sell"})}}function a(e,n,r,u,a){var o=this;o.uid=t.uniqueId("ng"),o.valueCallback=r,o.nodeFilterCallback=u,o.name=n,o.id=e,o[D]=t.memoize(function(e){return t.result(o.node,e)}),o.node=o,o.nodeData=a}function o(e){var n=e.model,r=n.positions,u=n.portfolio||{},o=function(t){return t.MirrorID>0},i=function(t){return!t.MirrorID},c=new a("allocation",C.dynamic(T,"allocationTitle"),function(){return v(c.nodes)},function(){var e=new a("mirrors",C.dynamic(T,"mirrorsTitle"),function(){return v(e.nodes)},function(){var n=t.chain(r).filter(o).collect(function(t){return{sum:t[w],value:t}}).sortBy(p).value(),u=y(n,function(t){var n=t.value,r=n.GroupName,u=new a(r,r,function(){return n[w]},void 0,n);return u.onClickAction="other"!=r,u.parent=e,u});return u}),n=new a("markets",C.dynamic(T,"marketsTitle"),function(){return v(n.nodes)},function(){var e=s(n,t.chain(r).filter(i));return e}),l=new a("balance",C.dynamic(T,"balanceTitle"),function(){return u.balance});return t.collect([n,e,l],function(t){return t.parent=c,t})});return c.ready=!0,c}function i(e){var n=e.model,r=n.positions,u=new a("exposure",C.dynamic(T,"exposureTitle"),function(){return v(u.nodes)},function(){var e=t.flatten(t.collect(r,function(t){return t.Positions})),n=f(u,t.chain(e));return t.sortBy(n,function(t){return t[B]}).reverse()});return u.ready=!0,u}function c(e){var n=new a("risk",C.dynamic(T,"riskTitle"),function(){return v(n.nodes)},function(){var r=e.model.topRiskContributors;if(r.length){var u=0,o=t.chain(r).each(function(t){var e=t.riskContributionPct;return u+=e,t}).collect(function(t){var e=t.tradedItem,r=e.SymbolFull,o=new a(r,e.Name,function(){return t.riskContributionPct/u*100},null,{Avatar:e.Avatars?e.Avatars["default"]:""});return o.onClickAction="other"!=r,o.parent=n,o}).value(),i=100-u;if(i>0){var c=new a("other",j,function(){return 0>i?-1*i:i});c.parent=n,o.push(c)}return o}return[]});return n}function l(e,n){return n=n||w,function(r){var o=r.value[0].Instrument.TypeID,i=u.instrumentsTypes[o];r.InstumentType=u.instrumentsGroupsFactory.getTypeById(o),r.Avatar=r.InstumentType.Avatars?r.InstumentType.Avatars["default"]:"";var c=new a(i,C.dynamic("instrumentTypes",i),function(){return v(c.nodes)},function(){var e=t.chain(r.value).collect(function(t){return{sum:t[n],value:t}}).sortBy(p).value();return g(e,function(t){t.Avatar=t[B].Instrument.Avatars?t[B].Instrument.Avatars["default"]:"";var e=t[B].Instrument,n=e.SymbolFull,r=new a(n,e.Name,function(){return t.sum},void 0,t);return r.onClickAction="other"!=n,r.parent=c,r},n)},r);return c.parent=e,c}}function s(e,n){var r=n.groupBy(function(t){return t.Instrument.TypeID}).value(),u=t.chain(r).collect(function(t){var e=v(t,w);return{sum:e,value:t}}).sortBy(p).value();return m(u,l(e))}function f(t,e){var n=e.groupBy(function(t){return t.Instrument.TypeID}),r=n.collect(function(t){var e=d(t);return{sum:Math.abs(h(t)),value:e}}).sortBy(p).value();return m(r,l(t,"CalculatedUnits"),"CalculatedUnits")}function d(e){return t.chain(e).groupBy(function(t){return t.Instrument.InstrumentID}).collect(function(t){return{Instrument:t[0].Instrument,Equity:v(t,w),CalculatedUnits:Math.abs(h(t)),CalculatedNetUnits:h(t),Positions:t}}).value()}function p(t){return-1*t.sum}function v(e,n){return n=n||B,t.reduce(e,function(t,e){return t+e[n]},0)}function h(e){return t.reduce(e,function(t,e){return t+e.Units*(e.IsBuy?1:-1)*e.Instrument.getUnitMargin(e.IsBuy)},0)}function m(e,n,r){if(r=r||w,e.length>A){var u=t.chain(e).rest(A-e.length-1).pluck(r).reduce(function(t,e){return t+e[r]},0).value();return t.collect(t.first(e,A-1).concat({Instrument:{SymbolFull:"other",Name:j},Equity:u}),n)}return t.collect(e,n)}function g(e,n,r){if(r=r||w,e.length>A){var u=t.chain(e).rest(A-e.length-1).pluck(B).reduce(function(t,e){return t+e[r]},0).value();return t.collect(t.first(e,A-1).concat({value:{Instrument:{SymbolFull:"other",Name:j}},sum:u}),n)}return t.collect(e,n)}function y(e,n){if(e.length>A){var r=v(t.chain(e).rest(A-e.length-1).pluck(B).value(),w);return t.collect(t.first(e,A-1).concat([{value:{value:r,Equity:r,GroupName:"Other"},sum:r}]),n)}return t.collect(e,n)}function b(t){var e=t?t.match(N):null;return e?e[1]:k}var C,j,I,N=/^\/portfolio\/chart\/(?:([^\/]+))/,k="exposure",T="portfolioCharts",A=6,w="Equity",B="value",D="cache",U=["#104A69","#F8C958","#9BBE52","#257099","#58A5CE","#9DC8EC"];return a.prototype={get value(){return this[D]("calculatedValue")},get nodes(){return this[D]("filterNodes")},get percentage(){var t=this.parent.value;return t?this[D](B)/t*100:0},get totalPercentage(){var t=this,e=t.lastParent;if(e){var n=e.value;return n?t[D](B)/n*100:0}return t.percentage},get lastParent(){var t=this.getParentBranch();return 1==t.length?!1:t[t.length-1]},get relativePath(){var e=this.getParentBranch();return t.collect(e.reverse(),function(t){return t.id}).join("/")},get color(){var t=this,e=t.parent,n=e?e.nodes.indexOf(t):0;return-1==n?n=0:n,U[n]},get drilldown(){var t=this,e=t.nodes;return e&&e.length?t.id||t.name:!1},get y(){return this.percentage},get data(){return this.nodes},calculatedValue:function(){return t.result(this,"valueCallback")},filterNodes:function(){return t.result(this,"nodeFilterCallback")},clearCache:function(){var t=this,e=t.parent;t[D][D]={},e&&e.clearCache()},getParentBranch:function(){for(var t,e=this,n=[this];!t;)e.parent?(e=e.parent,n.push(e)):t=e;return n},findNode:function(e){return t.find(this.nodes,function(t){return t.id==e})},loadAllNodes:function(){return t.each(this.nodes,function(t){t.value,t.loadAllNodes()}),this}},function(t,a){return e(t,["infrastruct.services",n,r]).controller(a,["$scope","$rootScope","$q","$location","$routeParams","bl.factories.trading.portfolio.portfolioFactory","bl.factories.trading.instruments.instrumentsGroupsFactory","infrastruct.services.viewKeeper","bl.factories.trading.execution.tradingCalculator","bl.factories.trading.users.usersFactory","$interpolate","infrastruct.services.localization.localizeFactory","$injector",u])}});define(rA[448][0],["angular","underscore","moduleDefiner",rA[62][0]],function(e,r,t,i){"use strict";function o(e){function r(r,t){r.selectedPoint=null,r.currentLevelGraph=null,r.t=e.t,t.css("position","relative"),t.find(".click-area").css({position:"absolute",top:0,left:0,right:0,bottom:0,"background-color":"rgba(0,0,0,0)","z-index":10})}return{scope:{item:"=",selectTree:"="},restrict:"A",replace:!0,link:r,templateUrl:i.name}}return function(e,r){return t(e,[]).directive(r,["$rootScope",o])}});define(rA[62][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/overview/chart/smallGraphDirective.view.html","text":"<div>    <div class=\"click-area\" ng-click=\"selectTree()\"></div>    <div ng-if=\"item.graph.ready\" class=\"display-block\" data-allocation-pie data-graph=\"item.graph\" data-current-level-graph=\"item.currentLevelGraph\"></div>    <b class=\"switch-pie-title\">{{t.dynamic('portfolioCharts' ,item.id + 'Title' , this)}}</b></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[446][0],["angular","underscore","moduleDefiner",rA[60][0]],function(e,t,r,n){"use strict";function o(e){function t(t){t.t=e.t,t.drillup=function(){t.item&&(t.item.selectedNode=!1),t.$broadcast("chart:drillup")},t.drilldown=function(){var e=this.group;t.item&&(t.item.selectedNode=!1),e.drilldown?t.$broadcast("chart:drilldown",e,!0):t.$broadcast("chart:goToAction",e)},t.select=function(){t.$broadcast("chart:toggle")},t.selectedNode=!1,t.renderInnerLegend=function(e){return t.onLegendTemplateRender({node:e})}}return{scope:{item:"=",onLegendTemplateRender:"&"},restrict:"A",replace:!0,link:t,templateUrl:n.name}}return function(e,t){return r(e,[]).directive(t,["$rootScope",o])}});define(rA[60][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/overview/chart/detailedGraphDirective.view.html","text":"<div class=\"portfolio-pie\">    <div class=\"big-pie-chart-wrapper\">        <div class=\"big-pie-chart-title\">            <b class=\"big-pie-chart-main\">{{t.dynamic('portfolioCharts' ,item.currentLevelGraph.id + 'Title' , this)}}</b>            <div class=\"big-pie-chart-sub\">{{t.dynamic('portfolioCharts' ,'commonSubtitle', this)}}</div>        </div>        <div class=\"public-portfolio-pie\">            <div ng-if=\"item.selectedNode\" class=\"pie-chart-prosent-info\">                <div class=\"prosent-mein\">{{item.selectedNode.totalPercentage | tofixedNoZero:2}}%</div>                <span class=\"prosent-sub\">{{item.selectedNode.name}}</span>            </div>            <div class=\"pie-chart-ph\" data-drilldown=\"enabled\" data-allocation-pie data-graph=\"item.graph\" data-current-level-graph=\"item.currentLevelGraph\" data-selected-node=\"item.selectedNode\"></div>        </div>    </div>    <div class=\"big-pie-chart-part-list\">        <span ng-if=\"item.currentLevelGraph.parent\" ng-click=\"drillup()\" class=\"pie-chart-list-button\"><span class=\"sprite\"></span>{{item.currentLevelGraph.parent.name}}</span>        <div class=\"pie-chart-list\" ng-repeat=\"group in item.currentLevelGraph.nodes\">            <div class=\"pie-chart-list-item\" ng-click=\"drilldown()\" data-selected-point=\"selectedPoint\" ng-class=\"{pointer : !!group.nodes}\">                <div class=\"avatar-ph\" ng-class=\"{'has-avatar' : !!group.nodeData.Avatar}\">                    <img class=\"avatar\" ng-if=\":: group.nodeData.Avatar\" ng-src=\"{{:: group.nodeData.Avatar}}\" />                </div>                <div class=\"stock-info\">                    <b class=\"pie-chart-list-item-label\">{{group.name}}</b>                    <div ng-bind-html=\":: renderInnerLegend(group)\"></div>                </div>                <b class=\"pie-chart-value\">{{group.totalPercentage | percentageparser}}</b>            </div>        </div>        <a href=\"/portfolio\" class=\"pie-chart-list-button view-all\">{{:: $root.t.dynamic('portfolioCharts' ,'viewAll', this)}}</a>    </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[447][0],["angular","underscore","moduleDefiner",rA[61][0]],function(e,i,t,n){"use strict";function r(e,i){function t(t,n,r){require(["highcharts"],function(d){var a,l=t.graph,p=n[0],s=$.extend(!0,{chart:{renderTo:p},series:[{type:"pie",name:l.name,data:l.data,drilldown:l.drilldown?l.id:void 0}]},u(),t.pieConfig||{});a="enabled"==r.drilldown?o(t,i,e,l,s):new d.Chart(s),t.$watch("graph",function(e,i){e&&(i?i.uid!=e.uid:!1)&&(t.currentLevelGraph=e,t.selectedNode=void 0,a.drilldownLevels=[],c(a),a.series[0].update({name:e.name,data:e.data,drilldown:e.drilldown?e.id:void 0}))})})}return{scope:{pieConfig:"=",graph:"=",currentLevelGraph:"=",selectedNode:"="},restrict:"A",replace:!0,link:t,templateUrl:n.name}}function o(e,t,n,r,o){var u=o.plotOptions.pie;u.animation=!0,u.events.click=function(i){e.$apply(function(){var t=i.point,n=t.node,r=e.selectedNode;e.selectedNode=r&&r.id==n.id?!1:n})},e.$apply(function(){e.currentLevelGraph=r});var p=new Highcharts.Chart(o);l(e,p,r,t);var s=function(t,n){if(n&&t&&(n.parent&&n.parent.uid===t.uid&&(c(p),e.currentLevelGraph=t,p.drillUp()),t.parent&&t.parent.uid===n.uid&&t.drilldown)){e.selectedNode=!1;var r=i.find(p.series[0].data,function(e){return e.uid==t.uid});c(p),e.currentLevelGraph=t,setTimeout(function(){p.addSeriesAsDrilldown(r,{type:"pie",name:t.uid,data:t.data,drilldown:t.drilldown?t.id:void 0})},220)}};return e.$on("chart:drillup",function(){window.history.back()}),e.$on("chart:drilldown",function(i,n,r){r?t.path("/portfolio/chart/"+n.relativePath+"/drilldown"):e.currentLevelGraph=n}),e.$on("chart:goToAction",function(e,i){i.onClickAction&&t.path("/portfolio/"+i.name)}),e.$watch("selectedNode",function(n,r){var o;void 0!==n&&(r&&r.uid==n.uid&&(r=void 0),n?(o=i.find(p.series[0].data,function(e){return e.uid==n.uid}),r&&r.id==n.id?n.drilldown&&(o.select(!1),e.$emit("chart:drilldown",n)):o&&o.select(!0)):r&&(o=i.find(p.series[0].data,function(e){return e.uid==r.uid}),o&&(r.drilldown?(e.$emit("chart:drilldown",r),t.path("/portfolio/chart/"+r.relativePath+"/drilldown"),o.select(!1)):0==n&&(o.select(!1),e.$emit("chart:goToAction",r)))))}),e.$on("viewKeeperChangeSuccess",function(i,t,n){var r=e.graph,o=t[0],l=n[0],c=a(r,d(l)),u=a(r,d(o));i.changedUrl||s(u,c)}),p}function d(e){var i=e.match(p);if(i&&i.length){var t=i[1].split("/");return t.shift(),t}}function a(e,t){var n=e;return i.each(t,function(e){var i=n.findNode(e);i&&(n=i)}),n}function l(e,t,n,r){var o=d(r.path());if(o){var a=n;e.currentLevelGraph=a,e.selectedNode=void 0,i.each(o,function(n){var r=a.findNode(n);if(r){a=r;var o=i.find(t.series[0].data,function(e){return e.uid==a.uid});a.drilldown&&(e.currentLevelGraph=a,t.addSeriesAsDrilldown(o,{type:"pie",name:a.uid,data:a.data,drilldown:a.id}))}}),o.length&&e.$apply(function(){})}}function c(e){i.each(e.series[0].data,function(e){e.selected&&e.select(!1)})}function u(){return{chart:{plotBackgroundColor:null,backgroundColor:null,plotBorderWidth:null,plotShadow:!1,margin:[0,0,0,0],spacing:[0,0,0,0],style:{fontFamily:"inherit",fontSize:"inherit"},events:{}},credits:{enabled:!1},plotOptions:{pie:{innerSize:"60%",allowPointSelect:!1,animation:!1,plotBackgroundColor:null,backgroundColor:null,cursor:"pointer",dataLabels:{enabled:!1},events:{},size:"100%",borderColor:"rgba(0,0,0, 0.1)",borderWidth:0,slicedOffset:8,states:{select:{enabled:!1},hover:{enabled:!1}}}},title:{text:""},tooltip:{enabled:!1},drilldown:{drillUpButton:{theme:{display:"none"}},animation:{duration:200},series:[]}}}var p=/\/portfolio\/chart\/((.)+)\/drilldown/;return function(e,i){return t(e,[]).directive(i,["$timeout","$location",r])}});define(rA[61][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/overview/chart/pieDirective.view.html","text":"<div class=\"pie-chart-ph\"></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[364][0],["moduleDefiner",rA[475][0],rA[78][0],"underscore"],function(t,i,e,o){"use strict";function n(t,i,e){this.portfolio=t,this.pointEquity=i,this.timeFrame=e}function s(t,i,s,a,l){function r(){return{chart:{backgroundColor:"none",margin:[20,0,0,0],spacingTop:20,spacingBottom:0,spacingLeft:0,spacingRight:0,borderWidth:0,style:{fontFamily:"inherit",fontSize:"inherit"}},plotOptions:{area:{animation:!1,states:{hover:{enabled:!1}}},series:{animation:!1,stickyTracking:!0}},legend:{enabled:!1},title:{text:""},credits:{enabled:!1},xAxis:{type:"datetime",title:{enabled:!1},labels:{enabled:!1}},yAxis:{title:{enabled:!1},endOnTick:!1,startOnTick:!1,gridLineColor:"rgba(40, 40, 40, 0.1)",gridLineWidth:1,labels:{enabled:!1}},series:[],tooltip:{backgroundColor:null,borderWidth:0,useHTML:!0,positioner:function(t,i,e){return{x:e.plotX-t/2,y:e.plotY-i}},allowTouchMove:!0,formatter:function(){var t=["<div>"];return this.point&&this.point.cashflow?(t.push('<div class="i-tool-tip">'),o.each(this.point.cashflow,function(i){t.push('<div class="i-tool-tip-slot '+(i.amount>0?"i-tool-tip-deposit":"i-tool-tip-withdrawal")+'">'),t.push('<span class="sprite-cashier"></span>'),t.push('<span class="i-tool-tip-amount">'+s("currencyparser")(i.amount)+"</span>"),t.push('<span class="i-tool-tip-title">'+i.description+"</span>"),t.push("</div>")}),t.push('<span class="i-tool-tip-pick"></span></div>')):(t.push('<div class="i-tool-tip-w">'),t.push('<div class="i-tool-tip-slot">'),t.push('<span class="i-tool-tip-amount">$'+s("number")(this.y)+"</span>"),t.push('<span class="i-tool-tip-amount">'+s("date")(this.x,"dd/MM/yyyy")+"</span>"),t.push("</div>"),t.push('<span class="i-tool-tip-pick"></span>'),t.push("</div>")),t.push("</div>"),t.join("")}}}}var u;return{restrict:"EA",scope:{},link:function(i,e){function s(s){if(u=u||s,!t.session.isLoggedIn)return void e.remove();var a=new Date;a.setMonth(a.getMonth()-1),a.setDate(1),i.$on("$destroy",function(){p&&p.destroy(),p=null}),t.session.user.getEquityDetails(a).then(function(t){var a=$(".w-feed-sidebar-equity-chart",e).get(0),l=r();l.chart.renderTo=a,l.series.length=0;var u=o.map(t.equity,function(t){var i=new Date(t.timestamp);return{x:Date.UTC(i.getFullYear(),i.getMonth(),i.getDate()),y:t.equity}}),d=o.groupBy(t.cashFlows,function(t){var i=new Date(t.timestamp);return Date.UTC(i.getFullYear(),i.getMonth(),i.getDate())}),h=[],f=null,m=null,y=null;o.each(u,function(t){d[t.x]&&h.push(o.extend({cashflow:d[t.x]},t))}),f=o.min(u,function(t){return t.y}),y=o.max(u,function(t){return t.x}),m=o.min(u,function(t){return t.x}),f&&(l.yAxis.min=f.y),m&&(l.xAxis.min=m.x),y&&(l.xAxis.max=y.x),l.series.push({type:"area",fillColor:"#E9F5FB",lineColor:"#2c9dd7",lineWidth:2,marker:{enabled:!1,states:{hover:{enabled:!1}}},data:u}),l.series.push({color:"transparent",marker:{enabled:!0,fillColor:"#ffeccb",lineColor:"rgba(0, 0, 0, 0.2)",lineWidth:1,symbol:"circle"},data:h}),p=new s.Chart(l),u[u.length-1]&&i.model.timeFrames.push(new n(c,u[u.length-1].y,"hour")),u[u.length-7]&&i.model.timeFrames.push(new n(c,u[u.length-7].y,"week"))})}i.$watch("model.portfolio.equity",function(t,e){t&&t!==e&&(i.model.lastEquity=toFixed(t-e,1))});var p,c=a.get();i.model={portfolio:c,timeFrames:[],lastEquity:0},"Demo"!==c.account.type&&(u?s(u):require(["highcharts"],s),i.isExecutionBlocked=function(){return t.session.user&&t.session.user.bsl&&t.session.user.bsl.executionBlocked&&t.session.user.bsl.isBslAvalible?t.session.user.bsl.executionBlocked&&t.session.user.bsl.isBslAvalible:!1},i.bslAlertClick=function(){var i=t.session.user,e=i.portfolio.equity,o=i.bsl,n=o&&o.bonusAmount?e-o.bonusAmount:e,s=o&&o.executionBlocked?!1:!0;l.open({template:'<bsl-notification equity="uiDialogData.equity" real-funds="uiDialogData.realFunds" is-notification-pop-up="uiDialogData.isNotificationPopUp" on-close="closeThisDialog()"></bsl-notification>',data:{realFunds:n,equity:e,isNotificationPopUp:s},plain:!0})})},templateUrl:e.name,replace:!0}}return n.prototype={get equity(){return this.portfolio.equity-this.pointEquity},get change(){return this.equity/this.pointEquity*100}},function(e,o){return t(e,[i]).directive(o,["$rootScope","$location","$filter","bl.factories.trading.portfolio.portfolioFactory","uiDialog",s])}});define(rA[78][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/widgets/myPortfolio/myPortfolio.view.html","text":"<div automation-id=\"feed-sidebar-top-widget-wrapp\" class=\"w-feed-sidebar\" data-etoro-locale-ns=\"myPortfolioWidget\">  <div class=\"w-feed-sidebar-equity\">    <div class=\"w-feed-sidebar-equity-stats\" ng-if=\"!isExecutionBlocked()\">      <div automation-id=\"feed-sidebar-top-widget-equity-value\" class=\"w-feed-sidebar-equity-stats-value\"        ng-class=\"{'negative': model.lastEquity < 0, 'positive': model.lastEquity > 0}\">        <span>$</span>{{ model.portfolio.equity | number:2 }}</div>      <div automation-id=\"feed-sidebar-top-widget-profit-value\" class=\"w-feed-sidebar-equity-stats-change\" ng-class=\"{'negative': model.portfolio.totalProfit < 0, 'positive': model.portfolio.totalProfit > 0}\"><span>$</span>{{ model.portfolio.totalProfit | number:2 }} ({{model.portfolio.totalGain | percentageparser }})</div>    </div>    <div class=\"w-feed-sidebar-bsl\" ng-if=\"isExecutionBlocked()\" ng-click=\"bslAlertClick()\">      <div class=\"w-feed-sidebar-bsl-alert\"><img class=\"w-feed-sidebar-bsl-alert-img\" ng-src=\"https://etoro-production.s3.amazonaws.com/web-client/img/warning-icn.png\" ng-click=\"bslAlertClick()\"></div>      <div class=\"w-feed-sidebar-bsl-data\">        <div class=\"w-feed-sidebar-bsl-title\">{{_accountLiquidatedTitle_}}</div>        <span class=\"w-feed-sidebar-bsl-text\" ng-bind-html=\":: $root.t.dynamic('myPortfolioWidget', 'accountLiquidatedText', this)\"></span>      </div>    </div>    <div class=\"w-feed-sidebar-equity-chart-ph\" ng-show=\"!isExecutionBlocked() && model.portfolio.account.type === 'Real'\">      <div automation-id=\"feed-sidebar-top-widget-high-charts\" class=\"w-feed-sidebar-equity-chart\">        <div class=\"preloader\"></div>      </div>    </div>    <div class=\"history-wiget-equity\">      <div automation-id=\"feed-sidebar-top-widget-wrapp-equity-time-values\" class=\"w-feed-sidebar-equity-{{:: item.timeFrame }}\" ng-class=\"{'negative': item.change < 0, 'positive': item.change > 0}\" ng-repeat=\"item in model.timeFrames\">        <div class=\"feed-sidebar-equity-wrapp\" >          <div automation-id=\"feed-sidebar-top-widget-equity-stats\" class=\"equity-stats\"><!-- {{_equitySubTitle_}} --><div automation-id=\"feed-sidebar-top-widget-equity-stats-day\">{{:: _dynamic(item.timeFrame)_}}</div></div>          <div automation-id=\"feed-sidebar-top-widget-wrapp-equity-values\" class=\"equity-stats-change\"><div><span>$</span>{{ item.equity | number:2 }}</div>({{item.change | percentageparser }})</div>        </div>      </div>    </div>  </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[449][0],["moduleDefiner",rA[497][0],rA[68][0],rA[69][0],rA[70][0],rA[265][0]],function(e,o,t,i,r,n){"use strict";var s=e("apps.trader.portfolio.widgets.dropDownActions",[o]);return s.component("dropDownActionsCmp",n),s.directive("dropdownActions",["$rootScope","apps.trader.portfolio.portfolioActionsEvents","bl.factories.settings.viewMode","infrastruct.services.config",function(e,o,n,s){var a={positionsGroup:i.name,mirrorGroup:r.name};return{restrict:"EA",scope:{appSource:"@",angularAppSource:"=",item:"=",isCustomizedColumnsAction:"<",showMirrorManualViewModeOption:"<"},controllerAs:"dropdownActionsCtrl",controller:["$location","$timeout","$scope",function(t,i,r){function l(){s.dynamics.whenReady().then(function(){var i=p.item.Instrument&&p.item.Instrument.isUsTrade,n=p.item.Instrument&&p.item.Instrument.AllowClosePosition;p.isCloseAllEnabled=n&&(s.dynamics.portfolio.isCloseAllEnabled&&!i||s.dynamics.portfolio.isSellAllEnabled&&i)||"apps-trader-portfolio-overview-list-list.view"===p.appSource||"apps-trader-portfolio-overview-card-cardTrades.view"===p.appSource,p.showSellBtn=n&&p.isInvestingMode&&(p.item.Instrument&&p.item.Instrument.AllowClosePosition&&p.isCloseAllEnabled||"apps-trader-portfolio-detailedView-header-header.view"!==p.appSource),p.showCloseBtn=n&&!p.isInvestingMode&&(p.item.Instrument&&p.item.Instrument.AllowClosePosition&&p.isCloseAllEnabled||"apps-trader-portfolio-detailedView-header-header.view"!==p.appSource),p.isUnrealizedEnabled=s.dynamics.trading.mirrorConfig.isUnrealizedEnabled,p.templateUrl=a[p.item.Type],p.post=function(){e.$emit("feed:post:create",{textValue:"",tradeItem:p.item.TradeItem})},p.closeAll=function(){var e=s.dynamics.portfolio.isCloseAllEnabled,i=s.dynamics.portfolio.isSellAllEnabled,r=p.item.Instrument&&p.item.Instrument.isUsTrade;return e&&!r||i&&r?void o.closeAllTrades(p.item.TradeItem.uniqueId,p.ApplicationSource()):void t.path(p.item.Url)},p.navigateTo=function(e,o){o&&o.preventDefault(),t.path(p.item.TradeItem.Url+(e||""))},p.navigateToItemPortfolio=function(e){var o=p.item.GroupName;o&&(e&&e.preventDefault(),t.path("/portfolio/"+o.toLowerCase()))},p.openTableEdit=function(){e.$broadcast("app:ui:table:openEditDialog")},p.ApplicationSource=function(){return p.appSource&&p.item&&p.item.Type?p.appSource+"-DropDownAction-"+p.item.Type:"DropDownAction"},p.toggleViewMode=function(o){o&&o.stopImmediatePropagation(),p.isMirrorManualViewMode=!p.isMirrorManualViewMode,e.$emit("app:ui:mirror:viewMode",{manualViewMode:p.isMirrorManualViewMode}),r.$emit("app:ui:oldAngular:layoutViewChange")},o.mixInto(p)}.bind(this))}var p=this;p.viewModeService=n,p.isInvestingMode=p.viewModeService.isInvestingMode(),p.isMirrorManualViewMode=!1,p.isUsUser=e.session.isUsUser(),setTimeout(function(){r.$evalAsync(function(){r.$watch(function(){return p.item},function(e,o){e!==o&&e&&l()}),p.item&&l()})},50)}],bindToController:!0,templateUrl:t.name,replace:!0}}]),s});define(rA[68][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/widgets/dropDownActions/dropDownActions.view.html","text":"<div class=\"e-btn light i-ptc-action edit-extended dropdown-menu\" dropdown-menu=\"\">    <span class=\"i-ptc-action-icon sprite\"></span>    <div ng-include=\"dropdownActionsCtrl.templateUrl\"></div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[69][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/widgets/dropDownActions/templates/instruments.view.html","text":"<div class=\"drop-select-box drop-select-box-edit\" drop-select-box=\"\" data-etoro-locale-ns=\"dropDownActions\"        data-etoro-automation-id=\"drop-down-actions-instrument-container\">    <trade-button style=\"padding-left: unset\" instrument=\":: dropdownActionsCtrl.item.Instrument\"                  label-localize=\"dropDownActions.openTradeButton\"                  btn-class=\"drop-down-buy-position-btn drop-select-box-option pointer\"                  data-etoro-automation-id=\"drop-down-actions-option-instrument-open-trade\"                  app-source=\"{{:: dropdownActionsCtrl.ApplicationSource()}}\"                  to-check-mode=\"true\">    </trade-button>    <div ng-if=\"dropdownActionsCtrl.showCloseBtn\" data-etoro-automation-id=\"drop-down-actions-option-instrument-close\"         class=\"drop-select-box-option pointer\" ng-click=\"dropdownActionsCtrl.closeAll()\">        {{_closeAllTradesButton_}}    </div>    <div ng-if=\"dropdownActionsCtrl.showSellBtn\" data-etoro-automation-id=\"drop-down-actions-option-instrument-close\"         class=\"drop-select-box-option pointer\" ng-click=\"dropdownActionsCtrl.closeAll()\">        {{_sellButton_}}    </div>    <div data-etoro-automation-id=\"drop-down-actions-option-instrument-post\" class=\"drop-select-box-option pointer\" ng-click=\"dropdownActionsCtrl.post()\">{{_postButton_}}</div>    <div data-etoro-automation-id=\"drop-down-actions-option-instrument-chart\" class=\"drop-select-box-option pointer\" ng-click=\"dropdownActionsCtrl.navigateTo('/chart/full',$event)\">{{_showChart_}}</div>    <div data-etoro-automation-id=\"drop-down-actions-option-instrument-set-price-alert\" class=\"drop-select-box-option pointer\" ng-click=\"dropdownActionsCtrl.item.Instrument.openPriceAlert('Portfolio')\" ng-if=\"!dropdownActionsCtrl.item.Instrument.hasPriceAlert\">{{_setPriceAlert_}}</div>    <div data-etoro-automation-id=\"drop-down-actions-option-instrument-update-price-alert\" class=\"drop-select-box-option pointer\" ng-click=\"dropdownActionsCtrl.item.Instrument.openPriceAlert('Portfolio')\" ng-if=\"dropdownActionsCtrl.item.Instrument.hasPriceAlert\">{{_updatePriceAlert_}}</div><div data-etoro-automation-id=\"drop-down-actions-option-instrument-customize-columns-dialog\" class=\"drop-select-box-option pointer\" ng-click=\"dropdownActionsCtrl.openTableEdit()\" ng-if=\"dropdownActionsCtrl.isCustomizedColumnsAction\">{{_customize_}}</div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[70][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/widgets/dropDownActions/templates/mirrors.view.html","text":"<div class=\"drop-select-box drop-select-box-edit\" drop-select-box=\"\" data-etoro-locale-ns=\"dropDownActions\" data-etoro-automation-id=\"drop-down-actions-mirror-container\">    <div data-etoro-automation-id=\"drop-down-actions-option-mirror-add-funds\" class=\"drop-select-box-option pointer\"        ng-if=\"!dropdownActionsCtrl.item.PendingForClosure && !dropdownActionsCtrl.item.isMirrorPendingOpen\"        ng-click=\"dropdownActionsCtrl.manageCopyAmount(dropdownActionsCtrl.item, true, undefined, dropdownActionsCtrl.ApplicationSource())\">        {{_if(dropdownActionsCtrl.item.isFund, \"_addFundsAmountButton_\", \"_investMoreButton_\")_}}    </div>    <div data-etoro-automation-id=\"drop-down-actions-option-mirror-remove-funds\" class=\"drop-select-box-option pointer\"        ng-click=\"dropdownActionsCtrl.manageCopyAmount(dropdownActionsCtrl.item, false, undefined, dropdownActionsCtrl.ApplicationSource())\"         ng-if=\"!dropdownActionsCtrl.item.isFund && !dropdownActionsCtrl.item.isMirrorPendingOpen             && !(dropdownActionsCtrl.item.PendingForClosure && !dropdownActionsCtrl.isUnrealizedEnabled)\">        {{_investLessButton_}}    </div>    <div data-etoro-automation-id=\"drop-down-actions-option-mirror-status-{{dropdownActionsCtrl.item.IsPaused ? 'resume': 'pause' }}\"         class=\"drop-select-box-option pointer\" ng-click=\"dropdownActionsCtrl.pauseResumeCopyTrade(dropdownActionsCtrl.item, dropdownActionsCtrl.ApplicationSource())\"         ng-if=\"!dropdownActionsCtrl.item.PendingForClosure && !dropdownActionsCtrl.item.isMirrorPendingOpen\">        <span ng-if=\"::!dropdownActionsCtrl.item.isFund\">            {{ _if(dropdownActionsCtrl.item.IsPaused, '_resumeCopyTradeButton_' , '_pauseCopyTradeButton_')_  }}        </span>        <span ng-if=\"::dropdownActionsCtrl.item.isFund\">            {{ _if(dropdownActionsCtrl.item.IsPaused, '_resumeFundButton_' , '_pauseFundButton_')_  }}        </span>    </div>    <div data-etoro-automation-id=\"drop-down-actions-option-mirror-set-stop-loss\" class=\"drop-select-box-option pointer\"         ng-click=\"dropdownActionsCtrl.manageStopLossAmount(dropdownActionsCtrl.item, dropdownActionsCtrl.ApplicationSource())\"        ng-if=\"!dropdownActionsCtrl.item.PendingForClosure\">        {{_adjustStopLossButton_}}    </div>    <div data-etoro-automation-id=\"drop-down-actions-option-mirror-close\" class=\"drop-select-box-option pointer\"         ng-click=\"dropdownActionsCtrl.closeCopyTrade(dropdownActionsCtrl.item, dropdownActionsCtrl.ApplicationSource())\"        ng-if=\"!dropdownActionsCtrl.item.PendingForClosure\">        {{_if(dropdownActionsCtrl.item.isFund, \"_closeFundTradeButton_\", \"_closeCopyTradeButtonV2_\")_}}    </div>    <div data-etoro-automation-id=\"drop-down-actions-option-mirror-post\" class=\"drop-select-box-option pointer\" ng-click=\"dropdownActionsCtrl.post()\">        {{_postButton_}}    </div>    <div data-etoro-automation-id=\"drop-down-actions-option-mirror-chart\" class=\"drop-select-box-option pointer\"         ng-if=\"!dropdownActionsCtrl.isUsUser || dropdownActionsCtrl.item.isFund\" ng-click=\"dropdownActionsCtrl.navigateTo('/chart', $event)\">        {{_showChart_}}    </div>    <div data-etoro-automation-id=\"drop-down-actions-option-mirror-customize-columns-dialog\" class=\"drop-select-box-option pointer\"         ng-click=\"dropdownActionsCtrl.openTableEdit()\" ng-if=\"dropdownActionsCtrl.isCustomizedColumnsAction\">        {{_customize_}}    </div>    <div data-etoro-automation-id=\"drop-down-actions-option-mirror-advanced-mode\"         ng-if=\"::!dropdownActionsCtrl.item.isFund && dropdownActionsCtrl.showMirrorManualViewModeOption\" class=\"drop-select-box-option pointer one-click-trading\"         ng-click=\"dropdownActionsCtrl.toggleViewMode($event)\" ng-class=\"{'on' : dropdownActionsCtrl.isMirrorManualViewMode}\">         {{_manualTradesView_}}         <span class=\"one-click-switch\" ></span>    </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[265][0],[rA[85][0]],function(o){function n(){}return n.prototype={},{bindings:{appSource:"@",item:"=",isCustomizedColumnsAction:"<",showMirrorManualViewModeOption:"<"},controller:n,templateUrl:o.name}});define(rA[85][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/upgrades/components/dropDownActions/dropDownActions.view.html","text":"<div data-dropdown-actions=\"\" data-item=\"$ctrl.item\" class=\"w-instrument-invested-stats-head-action\"    angular-app-source=\"$ctrl.appSource\"></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[478][0],["moduleDefiner",rA[71][0],rA[72][0],rA[76][0],rA[77][0],rA[74][0],rA[75][0],rA[73][0]],function(e,t,s,o,r,a,i,p){var n=e("apps.trader.portfolio.widgets.executionMessages"),l={amount:s.name,stopLoss:o.name,takeProfit:r.name,mirrorAmount:a.name,mirrorStopLoss:i.name,leverage:p.name};return n.directive("executionMessages",["$rootScope",function(){return{restrict:"EA",scope:{model:"="},link:function(e,t,s){e.templateUrl=l[s.executionMessages]},templateUrl:t.name,replace:!0,transclude:!0}}]),n});define(rA[71][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/widgets/executionMessages/executionMessages.view.html","text":"<div>    <div data-etoro-automation-id=\"execution-info\"         class=\"other-info\" ng-if=\"!model\" ng-transclude=\"\"></div>    <div ng-include=\"templateUrl\"></div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[72][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/widgets/executionMessages/templates/amount.view.html","text":"<div class=\"error\" data-ng-messages=\"model\" data-etoro-locale-ns=\"amountExecutionMessages\">    <div data-ng-message=\"largerThanCurrentCredit\" data-etoro-automation-id=\"error\">{{_largerThanCurrentCredit_}}</div>    <div data-ng-message=\"lowerThanMinPositionAmount\" data-etoro-automation-id=\"error\">{{_lowerThanMinPositionAmount_}}</div>    <div data-ng-message=\"lowerThanAbsoluteMinPositionAmount\" data-etoro-automation-id=\"error\">{{_lowerThanAbsoluteMinPositionAmount_}}</div>    <div data-ng-message=\"lowerThanAbsoluteMinPositionAmountDiscounted\" data-etoro-automation-id=\"error\">{{_lowerThanAbsoluteMinPositionAmountDiscounted_}}</div>    <div data-ng-message=\"currentUnitsLargerThanMaxPositionUnits\" data-etoro-automation-id=\"error\">{{_currentUnitsLargerThanMaxPositionUnits_}}</div>    <div data-ng-message=\"depositRequiredForOpenTrade\" data-etoro-automation-id=\"error\" ng-bind-html=\"$root.t.dynamic('amountExecutionMessages', 'depositRequiredForOpenTrade' , this)\"></div>    <div data-ng-message=\"depositRequiredForOpenOrder\" data-etoro-automation-id=\"error\" ng-bind-html=\"$root.t.dynamic('amountExecutionMessages', 'depositRequiredForOpenOrder' , this)\"></div>    <div data-ng-message=\"depositRequiredForOpenTradeAfterMinError\" data-etoro-automation-id=\"error\">{{_depositRequiredForOpenTradeAfterMinError_}}</div>    <div data-ng-message=\"depositRequiredForOpenTradeAfterAbsoluteMinError\" data-etoro-automation-id=\"error\">{{_depositRequiredForOpenTradeAfterAbsoluteMinError_}}</div>    <div data-ng-message=\"depositRequiredForOpenOrderAfterMinError\" data-etoro-automation-id=\"error\">{{_depositRequiredForOpenOrderAfterMinError_}}</div>    <div data-ng-message=\"depositRequiredForOpenOrderAfterAbsoluteMinError\"data-etoro-automation-id=\"error\">{{_depositRequiredForOpenOrderAfterAbsoluteMinError_}}</div>    <div data-ng-message=\"partialCloseCurrentAmountLowerThanMin\" data-etoro-automation-id=\"error\" ng-bind-html=\"$root.t.dynamic('amountExecutionMessages', 'partialCloseCurrentAmountLowerThanMin' , this)\"></div>    <div data-ng-message=\"partialCloseCurrentAmountLargerThanMax\" data-etoro-automation-id=\"error\" ng-bind-html=\"$root.t.dynamic('amountExecutionMessages', 'partialCloseCurrentAmountLargerThanMax' , this)\"></div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[76][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/widgets/executionMessages/templates/stopLoss.view.html","text":"<div class=\"error\" data-ng-messages=\"model\" data-etoro-locale-ns=\"stopLossExecutionMessages\">    <div data-ng-message=\"stopLossRateCannotBeHigherThanMaxRate\"         data-etoro-automation-id=\"error\"         ng-bind-html=\":: $root.t.dynamic('stopLossExecutionMessages', 'stopLossRateCannotBeHigherThanMaxRate', this)\"></div>    <div data-ng-message=\"stopLossRateCannotBeLowerThanMinRate\"         data-etoro-automation-id=\"error\"         ng-bind-html=\":: $root.t.dynamic('stopLossExecutionMessages', 'stopLossRateCannotBeLowerThanMinRate', this)\"></div>    <div data-ng-message=\"stopLossAmountCannotBeHigherThanMaxAmount\"         data-etoro-automation-id=\"error\"         ng-bind-html=\":: $root.t.dynamic('stopLossExecutionMessages', 'stopLossAmountCannotBeHigherThanMaxAmount', this)\"></div>    <div data-ng-message=\"stopLossAmountCannotBeLowerThanMinAmount\"         data-etoro-automation-id=\"error\"         ng-bind-html=\":: $root.t.dynamic('stopLossExecutionMessages', 'stopLossAmountCannotBeLowerThanMinAmount', this)\"></div>    <div data-ng-message=\"stopLossAmountCannotBeHigherThanAvailableToTrade\"         data-etoro-automation-id=\"error\"         ng-bind-html=\":: $root.t.dynamic('stopLossExecutionMessages', 'stopLossAmountCannotBeHigherThanAvailableToTrade', this)\"></div>    <div data-ng-message=\"stopLossPercentCannotBeLowerThan5Percent\"         data-etoro-automation-id=\"error\"         ng-bind-html=\":: $root.t.dynamic('stopLossExecutionMessages', 'stopLossPercentCannotBeLowerThan5Percent', this)\"></div>    <div data-ng-message=\"stopLossPercentCannotBeHigherThanMaxStopLossPercentage\"         data-etoro-automation-id=\"error\"         ng-bind-html=\":: $root.t.dynamic('stopLossExecutionMessages', 'stopLossPercentCannotBeHigherThanMaxStopLossPercentage', this)\"></div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[77][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/widgets/executionMessages/templates/takeProfit.view.html","text":"<div class=\"error\" data-ng-messages=\"model\" data-etoro-locale-ns=\"takeProfitExecutionMessages\">    <div data-ng-message=\"takeProfitRateCannotBeHigherThanMaxRate\" data-etoro-automation-id=\"error\">{{_takeProfitRateCannotBeHigherThanMaxRate_}}</div>    <div data-ng-message=\"takeProfitRateCannotBeLowerThanMinRate\" data-etoro-automation-id=\"error\">{{_takeProfitRateCannotBeLowerThanMinRate_}}</div>    <div data-ng-message=\"takeProfitAmountCannotBeHigherThanMaxAmount\" data-etoro-automation-id=\"error\">{{_takeProfitAmountCannotBeHigherThanMaxAmount_}}</div>    <div data-ng-message=\"takeProfitAmountCannotBeLowerThanMinAmount\" data-etoro-automation-id=\"error\">{{_takeProfitAmountCannotBeLowerThanMinAmount_}}</div>    <div data-ng-message=\"takeProfitPercentCannotBeLowerThan5Percent\" data-etoro-automation-id=\"error\">{{_takeProfitPercentCannotBeLowerThan5Percent_}}</div>    <div data-ng-message=\"takeProfitPercentCannotBeHigherThanMaxStopLossPercentage\" data-etoro-automation-id=\"error\">{{_takeProfitPercentCannotBeHigherThanMaxStopLossPercentage_}}</div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[74][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/widgets/executionMessages/templates/mirrorAmount.view.html","text":"<div class=\"error\" data-ng-messages=\"model\" data-etoro-locale-ns=\"mirrorAmountExecutionMessages\">    <div data-ng-message=\"currentAmountLowerThanMinAmount\">{{_currentAmountLowerThanMinAmount_}}</div>    <div data-ng-message=\"fund_currentAmountLowerThanMinAmount\">{{_fundCurrentAmountLowerThanMinAmount_}}</div>    <div data-ng-message=\"currentAmountLargerThanMaxAmount\">{{_currentAmountLargerThanMaxAmount_}}</div>    <div data-ng-message=\"fund_currentAmountLargerThanMaxAmount\">{{_fundCurrentAmountLargerThanMaxAmount_}}</div>    <!--to be deleted-->    <div data-ng-message=\"currentAddRemoveAmountLargerThanMaxAmount\">{{_currentAddRemoveAmountLargerThanMaxAmount_}}</div>    <div data-ng-message=\"fund_currentAddRemoveAmountLargerThanMaxAmount\">{{_fundCurrentAddRemoveAmountLargerThanMaxAmount_}}</div>    <div data-ng-message=\"currentAddRemoveAmountLowerThanMinAmount\">{{_currentAddRemoveAmountLowerThanMinAmount_}}</div>    <div data-ng-message=\"fund_currentAddRemoveAmountLowerThanMinAmount\">{{_fundCurrentAddRemoveAmountLowerThanMinAmount_}}</div>    <!--to be deleted-->    <div data-ng-message=\"currentAddAmountLargerThanMaxAmount\">{{_currentAddAmountLargerThanMaxAmount_}}</div>    <div data-ng-message=\"fund_currentAddAmountLargerThanMaxAmount\">{{_currentAddAmountLargerThanMaxAmount_}}</div>    <div data-ng-message=\"currentAddAmountLowerThanMinAmount\">{{_currentAddAmountLowerThanMinAmount_}}</div>    <div data-ng-message=\"fund_currentAddAmountLowerThanMinAmount\">{{_currentAddAmountLowerThanMinAmount_}}</div>    <div data-ng-message=\"currentRemoveAmountLargerThanMaxAmount\">{{_currentRemoveAmountLargerThanMaxAmount_}}</div>    <div data-ng-message=\"fund_currentRemoveAmountLargerThanMaxAmount\">{{_currentRemoveAmountLargerThanMaxAmount_}}</div>    <div data-ng-message=\"currentRemoveAmountLowerThanMinAmount\">{{_currentRemoveAmountLowerThanMinAmount_}}</div>    <div data-ng-message=\"fund_currentRemoveAmountLowerThanMinAmount\">{{_currentRemoveAmountLowerThanMinAmount_}}</div>    <div data-ng-message=\"depositAmountForCopyMirror\">{{_depositAmountForCopyMirror_}}</div>    <div data-ng-message=\"fund_depositAmountForCopyMirror\">{{_fundDepositAmountForCopyMirror_}}</div>    <div data-ng-message=\"depositAmountForAddAmount\">{{_depositAmountForAddAmount_}}</div>    <div data-ng-message=\"fund_depositAmountForAddAmount\">{{_fundDepositAmountForAddAmount_}}</div>    <div data-ng-message=\"currentTradeSizeLowerThanMinimum\">{{_currentTradeSizeLowerThanMinimum_}}</div>    <div data-ng-message=\"fund_currentTradeSizeLowerThanMinimum\">{{_currentTradeSizeLowerThanMinimum_}}</div>    <div data-ng-message=\"currentRemoveAmountLimitDueCSL\">{{_currentRemoveAmountLimitDueCSL_}}</div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[75][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/widgets/executionMessages/templates/mirrorStopLoss.view.html","text":"<div class=\"error\" data-ng-messages=\"model\" data-etoro-locale-ns=\"mirrorStopLossExecutionMessages\">    <div data-ng-message=\"stopLossLargerThanMaxAmount\">{{_stopLossLargerThanMaxAmount_}}</div>    <div data-ng-message=\"fund_stopLossLargerThanMaxAmount\">{{_fundStopLossLargerThanMaxAmount_}}</div>    <div data-ng-message=\"stopLossLowerThanMinAmount\">{{_stopLossLowerThanMinAmount_}}</div>    <div data-ng-message=\"fund_stopLossLowerThanMinAmount\">{{_fundStopLossLowerThanMinAmount_}}</div>    <div data-ng-message=\"stopLossLargerThanMaxPercent\">{{_stopLossLargerThanMaxPercent_}}</div>    <div data-ng-message=\"fund_stopLossLargerThanMaxPercent\">{{_fundStopLossLargerThanMaxPercent_}}</div>    <div data-ng-message=\"stopLossLowerThanMinPercent\">{{_stopLossLowerThanMinPercent_}}</div>    <div data-ng-message=\"fund_stopLossLowerThanMinPercent\">{{_fundStopLossLowerThanMinPercent_}}</div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[73][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/widgets/executionMessages/templates/leverage.view.html","text":"<div class=\"error\" data-ng-messages=\"model\" data-etoro-locale-ns=\"leverageExecutionMessages\">    <div data-ng-message=\"currentUnitsLargerThanMaxPositionUnits\" data-etoro-automation-id=\"error\">{{_currentUnitsLargerThanMaxPositionUnits_}}</div>    <div data-ng-message=\"currentAmountLowerThenMinAmount\" data-etoro-automation-id=\"error\">{{_currentAmountLowerThenMinAmount_}}</div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[292][0],["moduleDefiner",rA[80][0]],function(o,r){"use strict";var t=o("apps.trader.portfolio.widgets.portfolioDropDown",[]);return t.directive("portfolioDropdown",["$rootScope",function(){return{restrict:"EA",scope:{title:"@",isHideOrderTab:"<"},templateUrl:r.name,replace:!0}}]),t});define(rA[80][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/widgets/portfolioDropDown/portfolioDropDown.view.html","text":"<div class=\"title inner-header-nav-button dropdown-menu\" dropdown-menu=\"\" data-etoro-locale-ns=\"portfolioDropDown\">    <div class=\"portfolio-header-dropdown-text\">      <span>{{ title}}</span>      <span class=\"icon-arrow-down\"></span>    </div>    <div class=\"drop-select-box\" drop-select-box=\"\">        <a class=\"drop-select-box-option pointer\" ng-href=\"/portfolio/history\">{{_history_}}</a>        <a class=\"drop-select-box-option pointer\" ng-href=\"/app/portfolio-page\">{{_trades_}}</a>        <a class=\"drop-select-box-option pointer\" ng-if=\"!isHideOrderTab\" ng-href=\"/portfolio/orders\">{{_orders_}}</a>    </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[443][0],["angular","moduleDefiner",rA[389][0],rA[498][0]],function(r,e,t,o){"use strict";var i,a="historyApp";return i=e(a,["ngRoute","ngSanitize",t,o]),i.config(["$routeProvider","ctrlResolverProvider",function(r,e){e.register;r.when("/portfolio/history",{template:"<et-private-history-overview-page></et-private-history-overview-page>",authRoles:["user"],mainNavId:"portfolio",showFooter:!0}),r.when("/portfolio/history/market/:id",{template:'<et-private-history-instrument-breakdown [group]="$resolve.Group"></et-private-history-instrument-breakdown>',sharePages:{showShareButton:!0,urlKey:"MyUserPagePortfolioHistory"},authRoles:["user"],showFooter:!0,resolve:{Group:["bl.factories.history.privateHistoryFacade","$route","$q",function(r,e,t){return t(function(t,o){var i;return e.current&&e.current.params&&e.current.params.id?(i=r.getSavedFilterByDate(),void r.getInstrumentHistoryByName(e.current.params.id,i&&i.from).then(t)["catch"](o)):void o({})})}]}}),r.when("/portfolio/history/people/:id",{sharePages:{showShareButton:!0,urlKey:"MyUserPagePortfolioHistory"},authRoles:["user"],showFooter:!0,template:'<et-private-history-mirror-flat-page [group]="$resolve.Group"></et-private-history-mirror-flat-page>',resolve:{Group:["bl.factories.history.privateHistoryFacade","$route","$q","$location",function(r,e,t){return t(function(t,o){var i;return e.current&&e.current.params&&e.current.params.id?(i=r.getSavedFilterByDate(),void r.getMirrorAggregatedHistoryByMirrorId(e.current.params.id,i&&i.from).then(t)["catch"](o)):void o({})})}]}}),r.when("/portfolio/history/people/:name/:id",{template:'<et-private-history-mirror-breakdown [group]="$resolve.Group"></et-private-history-mirror-breakdown>',sharePages:{showShareButton:!0,urlKey:"MyUserPagePortfolioHistory"},authRoles:["user"],controllerAs:"historyMirrorDetailedViewCtrl",showFooter:!0,resolve:{Group:["bl.factories.history.privateHistoryFacade","$route","$q",function(r,e,t){return t(function(t,o){return e.current&&e.current.params&&e.current.params.id?void r.getMirrorHistoryInfoByMirrorId(e.current.params.id).then(t)["catch"](o):void o({})})}]}}),r.when("/portfolio/history/cashflows",{template:"<et-cash-flows-items></et-cash-flows-items>",mainNavId:"portfolio",authRoles:["user"]}),r.when("/portfolio/history/cashflows/:timeFrame?",{template:'<et-cash-flows-items [default-time-frame]="$resolve.timeFrame"></et-cash-flows-items>',mainNavId:"portfolio",authRoles:["user"],resolve:{timeFrame:["$route","$q",function(r,e){var t=r.current&&r.current.params&&r.current.params.timeFrame;return e.resolve(t)}]}})}]),i});define(rA[498][0],["angular",rA[477][0],rA[163][0],rA[331][0],rA[165][0],rA[167][0],rA[161][0],rA[158][0],rA[166][0],rA[279][0],rA[162][0],rA[330][0],rA[332][0],rA[329][0],rA[164][0],rA[159][0],rA[333][0],rA[160][0]],function(r,t,e,i,f,s,a,n,l,o,u,c,m,d,p,b,h,v){"use strict";var z=r.module("infrastruct.filters",[t.name]);return z.filter("currencyparser",n),z.filter("lowerThanMinimum",d),z.filter("math",o),z.filter("notAvailable",u),z.filter("nozero",e),z.filter("percentageparser",c),z.filter("prittynumber",i),z.filter("tofixed",f),z.filter("unitsOpenClose",s),z.filter("formatRate",a),z.filter("tofixedNoZero",m),z.filter("tradingconventions",l),z.filter("shortNumber",p),z.filter("fees",b),z.filter("zeroesFormater",h),z.filter("formatDate",v),z});define(rA[163][0],[],function(){function n(){return function(n,r){return 0==n?r:n}}return n});define(rA[331][0],["angular"],function(i){function n(n){return function(r,t){var e;return!i.isNumber(r)||isNaN(r)?r:(e=!i.isNumber(t.Precision)||isNaN(t.Precision)?r.toString():t&&t.isAmericanPrecision?n("formatRate")(r,t):toFixedSting(r,t.Precision),e=e.split("."),1==e.length?parseInt(e[0]):e.length>1?parseInt(e[0])+'.<span class="w-mcbp-em">'+e[1]+"</span>":r)}}return n.$inject=["$filter"],n});define(rA[165][0],[],function(){function n(){return function(n,t){return n?toFixedSting(n,t):n}}return n});define(rA[167][0],[],function(){function e(e){var r=5;return function(n,i,t,o){return o=o||!1,0===n?e("number")(n,2):i&&i.isAmericanPrecision?e("zeroesFormater")(n,r):0!==t&&i?o?e("zeroesFormater")(n,t||i.Precision):e("tofixed")(n,t||i.Precision):n}}return e.$inject=["$filter"],e});define(rA[161][0],[],function(){function r(r){return function(n,t){if(!t)return n;var e=1>n?t._Precision:t.AboveDollarPrecision;return r("tofixed")(n,e)}}return r.$inject=["$filter"],r});define(rA[158][0],[],function(){function r(r){var t="$";return function(n,e,i,u,f){var s,a,c,o,b=f||t,l=u===!1?"":b;if(!n&&0!==n||isNaN(n))return n;if(e=e||0,s=n.toString(),-1!==(a=s.indexOf(b))&&(s=s.substr(0,a)+s.substr(a+b.length)),c=s.charAt(0),"-"===c?s=s.substring(1):c="",o=parseToFloat(n),0===o&&(c=""),i&&0!==o){if(o>-.01&&0>o)return">-"+l+"0.01";if(.01>o&&o>0)return"<"+l+"0.01"}return c+l+r("number")(s,e>0?e:0)}}return r.$inject=["$filter"],r});define(rA[166][0],[],function(){function t(){return function(t){var n;return t||0===t?(n=t.toString(),/(\<|\>|\%)/.test(n)?n:(parseToFloat(t)>0&&(n="+"!==n.charAt(0)?"+"+t:t),n)):t}}return t});define(rA[279][0],["underscore"],function(n){function t(){return function(t,r){return!Math[r]||isNaN(t)?t:Math[r].apply(null,[t].concat(n.rest(arguments,2)))}}return t});define(rA[162][0],[],function(){function n(){return function(n){return n||0===n?n:"N/A"}}return n});define(rA[330][0],["angular"],function(r){function e(e){return function(n,t){if(0===n)return"0%";if(!n||isNaN(n))return n;if(t=r.isDefined(t)?t:2,r.isNumber(n)||(n=parseToFloat(n)),Math.abs(n)<.01){if(n>-.01&&0>n)return">-0.01%";if(.01>n&&n>0)return"<0.01%";if(0===n)return"0%"}return n=parseFloat(toFixedSting(n,t)),(0===n?0:e("number")(n,t))+"%"}}return e.$inject=["$filter"],e});define(rA[332][0],["angular"],function(n){function r(){return function(r,t){var i;return!n.isNumber(r)||isNaN(r)?r:(i=toFixedSting(r,t).split("."),2===i.length&&0===Number(i[1])?i[0]:i.join("."))}}return r});define(rA[329][0],["angular"],function(r){function i(){return function(i,n,e){if(null===i||void 0===i||e&&e.isAmericanPrecision)return i;n=r.isDefined(n)?n:.01;var t=i;if(r.isNumber(i)||(t=parseToFloat(i)),isNaN(t))return i;if(Math.abs(i)<.01){if(i>-1*n&&0>i)return">-"+n;if(n>i&&i>0)return"<"+n}return i}}return i});define(rA[164][0],[],function(){function e(e){return function(t,r,n){var u="",a="";return t||0===t?(Math.abs(t)>=1e9?(u="B",t/=1e9):Math.abs(t)>=1e6?(u="M",t/=1e6):Math.abs(t)>=1e3&&(u="K",t/=1e3),n&&t>0&&(a="+"),r=r||0===r?r:2,a+e("number")(t,r)+u):"N/A"}}return e.$inject=["$filter"],e});define(rA[159][0],[],function(){function n(){return function(n){return n?-1*n:n}}return n});define(rA[333][0],["angular"],function(){function t(){return function(t,r,n){if(isNaN(t))return t;(isNaN(n)||0>n)&&(n=2);var e=t,i=t.toString().split(".");return e=i&&(i.length<=1||i[1]&&i[1].length<n)?e.toFixed(n):toFixed(t,r)}}return t});define(rA[160][0],[],function(){function t(t,e){return function(n,r){var i=e.session&&e.session.isUsUser(),s=i?"MM/dd/yyyy":"dd/MM/yyyy";return r&&(s+=" "+r),t("date")(n,s)}}return t.$inject=["$filter","$rootScope"],t});define(rA[263][0],[rA[82][0]],function(t){"use strict";function e(){}return{bindings:{tabTitle:"@",tabIndex:"@",isHideOrderTab:"<"},controller:e,templateUrl:t.name}});define(rA[82][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/tab-switch/tab-switch.view.html","text":"<div ui-if-breakpoint=\"mobile\" data-portfolio-dropdown=\"\" data-title=\"{{ $ctrl.tabTitle }}\" data-is-hide-order-tab=\"$ctrl.isHideOrderTab\"></div><div ui-if-breakpoint=\"!mobile\" class=\"table-tab-menu\" data-etoro-automation-id=\"not-mobile-container\">    <b class=\"table-tab-title\" data-etoro-automation-id=\"title\">{{ $ctrl.tabTitle }}</b>    <a class=\"table-tab-item pointer history-tab icon-history-border-style-thick\" data-etoro-automation-id=\"history\" ng-class=\"{'active':$ctrl.tabIndex == 1}\" ng-href=\"/portfolio/history\"></a>    <a class=\"table-tab-item pointer portfolio-tab icon-portfolio-border-style-thick\" data-etoro-automation-id=\"portfolio\" ng-class=\"{'active':$ctrl.tabIndex == 2}\" ng-href=\"/app/portfolio-page\"></a>    <a class=\"table-tab-item pointer icon-orders-border-style-thick\" data-etoro-automation-id=\"orders\" ng-class=\"{'active':$ctrl.tabIndex == 3}\" ng-href=\"/portfolio/orders\" ng-if=\"!$ctrl.isHideOrderTab\"></a></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[467][0],["angular",rA[310][0],rA[309][0],rA[291][0],rA[47][0]],function(t,e,o,i,n){"use strict";function r(t,e){this.$routeParams=e,this.$route=t}var d=t.module("portfolio.fund",[]);return d.component("fundPositionsGroups",e),d.component("fundPositionsGroupItems",o),d.component("fundDetailedViewChart",i),r.$inject=["$route","$routeParams"],r.prototype={get viewMode(){return this.$routeParams.subItem?"SUBITEM":this.$route.current.$$route.viewMode||"CHART"},setView:function(t){this.onViewSet({viewMode:t})}},d.component("portfolioFund",{templateUrl:n.name,controller:r,bindings:{group:"<",publicPortfolio:"<",onViewSet:"&"}}),d});define(rA[310][0],["underscore",rA[48][0],rA[360][0]],function(e,t,i){"use strict";function o(e,t,o,r){i.call(this,e,t,o),this.viewModeService=r,this.isInvestingMode=this.viewModeService.isInvestingMode()}return o.$inject=["infrastruct.services.localStorage","infrastruct.services.sorterFactory","$rootScope","bl.factories.settings.viewMode"],o.prototype={get sortItems(){return this.group.PositionsGroups},setView:function(e){this.onViewSet({viewMode:e})}},o.inheritsFrom(i),{controller:o,bindings:{group:"<",onViewSet:"&"},templateUrl:t.name}});define(rA[48][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/detailedView/fund/list/list.view.html","text":"    <div ng-if=\"!$ctrl.isInvestingMode\" class=\"ui-table-hat portfolio-open-trades all-view\"     data-react-to-scroll     data-active-class-name=\"minimize\"     data-etoro-locale-ns=\"portfolioOpenTrades\">    <ui-table data-etoro-locale-ns=\"portfolioOpenTrades\" class=\"ui-table-hat\"              ui-table-id=\"portfolioOpenTrades\" ui-table-namespace=\"portfolioOpenTrades\"              default-fields=\"units, investedAmount, avgOpen, netProfit, pnl, equity, sell, buy \"              default-mobile-fields=\"investedAmount, netProfit, pnl, equity\">        <ui-table-head class=\"et-layout-sub-sticky-header\">            <b class=\"ui-table-static-cell sortable\" ng-click=\"$ctrl.sort('GroupName')\"               ng-class=\"$ctrl.sortSelectedClassName('GroupName')\">{{_market_}} ({{$ctrl.group.PositionsGroups.length}})                <span class=\"i-ptc-sort-icon sprite\"></span>            </b>            <ui-table-head-slot>                <ui-table-cell name=\"units\" class=\"sortable\" ng-click=\"$ctrl.sort('NetUnitsSort')\"                               ng-class=\"$ctrl.sortSelectedClassName('NetUnitsSort')\">{{_units_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"investedAmount\" class=\"sortable\"                               ng-click=\"$ctrl.sort('TotalFundsInvested || TotalInvestedAmount')\"                               ng-class=\"$ctrl.sortSelectedClassName('TotalFundsInvested || TotalInvestedAmount')\">                    {{_investedAmount_}}<span class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"avgOpen\" class=\"sortable\" ng-click=\"$ctrl.sort('AverageOpenRateSort')\"                               ng-class=\"$ctrl.sortSelectedClassName('AverageOpenRateSort')\">{{_avgOpen_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell name=\"netProfit\" class=\"sortable\"                               ng-click=\"$ctrl.sort('TotalProfitAndClosedPL || TotalProfit')\"                               ng-class=\"$ctrl.sortSelectedClassName('TotalProfitAndClosedPL || TotalProfit')\">                    {{_netProfit_}}<span class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"pnl\" class=\"sortable\" ng-click=\"$ctrl.sort('TotalGain')\"                               ng-class=\"$ctrl.sortSelectedClassName('TotalGain')\">{{_pnl_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"equity\" class=\"sortable\" ng-click=\"$ctrl.sort('Equity')\"                               ng-class=\"$ctrl.sortSelectedClassName('Equity')\">{{_equity_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"sell\" class=\"sortable\" ng-click=\"$ctrl.sort('Instrument.rate.Bid')\"                               ng-class=\"$ctrl.sortSelectedClassName('Instrument.rate.Bid')\">{{_bid_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell name=\"buy\" class=\"sortable\" ng-click=\"$ctrl.sort('Instrument.rate.Ask')\"                               ng-class=\"$ctrl.sortSelectedClassName('Instrument.rate.Ask')\">{{_ask_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell name=\"leverage\" class=\"sortable\" ng-click=\"$ctrl.sort('Leverage')\"                               ng-class=\"$ctrl.sortSelectedClassName('Leverage')\">{{_leverage_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>            </ui-table-head-slot>        </ui-table-head>        <ui-table-body                class=\"old-angular-scrollable-el\"                data-react-to-scroll-container                data-active-class-name=\"minimize\">            <div class=\"w-portfolio-table-body-separator\">                <span>{{_startedCopyDate_}}</span>                <span>{{ $ctrl.group.StartedCopyDate | formatDate: 'HH:mm' }}</span>            </div>            <a class=\"ui-table-row\"               ng-class=\"{'sell' : item.NetUnits < 0 && !item.MirrorID, 'buy' : item.NetUnits > 0 && !item.MirrorID, 'mirror-pending-close' : item.PendingForClosure }\"               ng-repeat=\"item in $ctrl.group.PositionsGroups\" ng-href=\"{{:: item.Url}}\">                <div class=\"ui-table-static-cell\">                    <div class=\"i-portfolio-table-instrument\">                        <div class=\"i-portfolio-table-instrument\">                            <div class=\"i-portfolio-table-avatar-ph\" ng-class=\"{'pause': item.IsPaused}\">                                    <span class=\"sprite-stats {{:: 'popular-' + item.user.piLevel }}\"                                          ng-if=\":: item.user && item.user.isPi\"></span>                                <img class=\"i-portfolio-table-avatar\" ng-src=\"{{::item.Avatar}}\"                                     alt=\"{{:: item.GroupName}}\">                                <span class=\"pause-ava\" ng-if=\"item.IsPaused\"></span>                            </div>                            <div class=\"i-portfolio-table-name\">                                <div class=\"i-portfolio-table-name-symbol\">{{:: item.GroupName}}</div>                                <p ng-if=\":: item.user && item.user.allowDisplayFullName\"                                   class=\"i-portfolio-table-hat-fullname\">{{:: item.user.DisplayName}}</p>                                <p ng-if=\":: item.IsStock\" class=\"i-portfolio-table-hat-fullname\">                                    {{                                    ::                                    item.Instrument.DisplayName                                    }}                                </p>                            </div>                        </div>                    </div>                </div>                <ui-table-body-slot>                    <ui-table-cell>                        <div class=\"unit-slot\">                            {{                            item.NetUnits | math:'abs' | unitsOpenClose: item.Instrument : 2 | lowerThanMinimum: undefined : item.Instrument                            }}                            <b class=\"unit-value\" ng-if=\"item.Positions && item.Positions.length\">{{_if(item.NetUnits > 0, '_Buying_', '_Selling_')_}}</b>                        </div>                    </ui-table-cell>                    <ui-table-cell>                        <div class=\"cursor-default\">{{ item.Amount | currencyparser:2 }}</div>                    </ui-table-cell>                    <ui-table-cell>                        <span ng-if=\":: !!item.Instrument\">{{ item.AverageOpenRate === 0 ? 'N/A' : (item.AverageOpenRate | unitsOpenClose: item.Instrument)}}</span>                    </ui-table-cell>                    <ui-table-cell ng-class=\"{negative: item.TotalGain < 0, positive: item.TotalGain > 0 }\">                        <span class=\"i-ptc-rate-value\">{{item.MirrorID > 0 ? item.TotalProfitAndClosedPL : item.TotalProfit | currencyparser:2:true}}</span>                    </ui-table-cell>                    <ui-table-cell                            ng-class=\"{negative: item.TotalGain < 0, positive: item.TotalGain > 0, 'negative warning': item.TotalGain <= -100}\">                        <span class=\"i-ptc-rate-value\">{{item.TotalGain | percentageparser | tradingconventions}}</span>                    </ui-table-cell>                    <ui-table-cell class=\"i-portfolio-table-total-title\">                        {{item.Equity | currencyparser:2}}                    </ui-table-cell>                    <ui-table-cell ng-if=\"!!item.Instrument\">                        <div class=\"etoro-sell-button\" data-ui-buysell-buttons=\"\" data-instrument=\"item.Instrument\"                             data-type=\"sell\"                             data-app-source=\"apps-trader-portfolio-detailedView-fund-list-list.view\"></div>                    </ui-table-cell>                    <ui-table-cell ng-if=\"!!item.Instrument\">                        <div class=\"etoro-buy-button\" data-ui-buysell-buttons=\"\" data-instrument=\"item.Instrument\"                             data-type=\"buy\"                             data-app-source=\"apps-trader-portfolio-detailedView-fund-list-list.view\"></div>                    </ui-table-cell>                    <ui-table-cell>X{{item.LeverageAvgSort | tofixed:2 | number | math:'abs'}}</ui-table-cell>                </ui-table-body-slot>                <ui-table-button-cell>                </ui-table-button-cell>            </a>            <div class=\"ui-table-row trade-row\">                <div class=\"ui-table-static-cell\">                    <div class=\"table-first-name e-uppercase cursor-default\">{{_openTradesTotalOpen_}}</div>                </div>                <div class=\"ui-table-body-slot\">                    <div class=\"ui-table-cell  remove-cell-3\"></div>                    <div class=\"ui-table-cell mobile-align-left\">                        <div class=\"rate-value\">{{ $ctrl.group.TotalOpenAmount | currencyparser:2 }}</div>                        <div class=\"rate-subvalue\">{{_investedAmount_}}</div>                    </div>                    <div class=\"ui-table-cell remove-cell-3\"></div>                    <div class=\"ui-table-cell mobile-align-center\"                         ng-class=\"{negative: $ctrl.group.TotalProfit < 0, positive: $ctrl.group.TotalProfit > 0}\">                        <div class=\"rate-value\">{{ $ctrl.group.TotalProfit | currencyparser:2 }}</div>                        <div class=\"rate-subvalue\">{{_netProfit_}}</div>                    </div>                    <div class=\"ui-table-cell mobile-align-center\"                         ng-class=\"{negative: $ctrl.group.TotalOpenGain < 0, positive: $ctrl.group.TotalOpenGain > 0}\">                        <div class=\"rate-value\">{{ $ctrl.group.TotalOpenGain | percentageparser}}</div>                        <div class=\"rate-subvalue\">{{_pnl_}}</div>                    </div>                </div>            </div>            <div class=\"ui-table-row trade-row\">                <div class=\"ui-table-static-cell\">                    <div class=\"table-first-name e-uppercase\">{{_copyHistory_}}</div>                </div>                <div class=\"ui-table-body-slot\">                    <div class=\"ui-table-cell remove-cell-3\"></div>                    <div class=\"ui-table-cell mobile-align-left\">                        <div class=\"rate-value\"                             ng-class=\"{positive: $ctrl.group.TotalFees < 0,negative : $ctrl.group.TotalFees > 0}\">                            {{$ctrl.group.TotalFees | math:'abs' | currencyparser:2:true}}                        </div>                        <div class=\"rate-subvalue\">{{_if($ctrl.group.TotalFees < 0, \"_refunds_\", \"_fees_\")_}}</div>                    </div>                    <div class=\"ui-table-cell remove-cell-3\"></div>                    <div class=\"ui-table-cell mobile-align-center\">                        <div class=\"rate-value\"                             ng-class=\"{negative: $ctrl.group.ClosedPL < 0, positive: $ctrl.group.ClosedPL > 0}\">{{                            $ctrl.group.ClosedPL | currencyparser:2}}                        </div>                        <div class=\"rate-subvalue\">{{_netProfit_}}</div>                    </div>                    <div class=\"ui-table-cell remove-cell-3\"></div>                    <div class=\"ui-table-cell remove-cell-2\"></div>                    <div class=\"ui-table-cell remove-cell-1\"></div>                    <div class=\"ui-table-cell\">                        <a class=\"button-standard table-total-button\" ng-click=\"$ctrl.setView('COPY_HISTORY')\">{{_viewCopyHistory_}}</a>                    </div>                </div>            </div>        </ui-table-body>    </ui-table></div><div ng-if=\"$ctrl.isInvestingMode\" class=\"ui-table-hat portfolio-open-trades all-view\"     data-react-to-scroll     data-active-class-name=\"minimize\"     data-etoro-locale-ns=\"portfolioOpenTrades\">    <ui-table data-etoro-locale-ns=\"portfolioOpenTrades\" class=\"ui-table-hat\"              ui-table-id=\"portfolioOpenTrades\" ui-table-namespace=\"portfolioOpenTrades\"              default-fields=\"units, investedAmount, avgOpen, netProfit, pnl, equity, buy \"              default-mobile-fields=\"investedAmount, netProfit, pnl, equity\">        <ui-table-head class=\"et-layout-sub-sticky-header\">            <b class=\"ui-table-static-cell sortable\" ng-click=\"$ctrl.sort('GroupName')\"               ng-class=\"$ctrl.sortSelectedClassName('GroupName')\">{{_market_}} ({{$ctrl.group.PositionsGroups.length}})                <span class=\"i-ptc-sort-icon sprite\"></span>            </b>            <ui-table-head-slot>                <ui-table-cell name=\"units\" class=\"sortable\" ng-click=\"$ctrl.sort('NetUnitsSort')\"                               ng-class=\"$ctrl.sortSelectedClassName('NetUnitsSort')\">{{_units_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"investedAmount\" class=\"sortable\"                               ng-click=\"$ctrl.sort('TotalFundsInvested || TotalInvestedAmount')\"                               ng-class=\"$ctrl.sortSelectedClassName('TotalFundsInvested || TotalInvestedAmount')\">                    {{_investedAmount_}}<span class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"avgOpen\" class=\"sortable\" ng-click=\"$ctrl.sort('AverageOpenRateSort')\"                               ng-class=\"$ctrl.sortSelectedClassName('AverageOpenRateSort')\">{{_avgOpen_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell name=\"netProfit\" class=\"sortable\"                               ng-click=\"$ctrl.sort('TotalProfitAndClosedPL || TotalProfit')\"                               ng-class=\"$ctrl.sortSelectedClassName('TotalProfitAndClosedPL || TotalProfit')\">                    {{_netProfit_}}<span class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"pnl\" class=\"sortable\" ng-click=\"$ctrl.sort('TotalGain')\"                               ng-class=\"$ctrl.sortSelectedClassName('TotalGain')\">{{_pnl_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"equity\" class=\"sortable\" ng-click=\"$ctrl.sort('Equity')\"                               ng-class=\"$ctrl.sortSelectedClassName('Equity')\">{{_equity_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"buy\" class=\"sortable\" ng-click=\"$ctrl.sort('Instrument.rate.Ask')\"                               ng-class=\"$ctrl.sortSelectedClassName('Instrument.rate.Ask')\">{{_ask_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell name=\"leverage\" class=\"sortable\" ng-click=\"$ctrl.sort('Leverage')\"                               ng-class=\"$ctrl.sortSelectedClassName('Leverage')\">{{_leverage_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>            </ui-table-head-slot>        </ui-table-head>        <ui-table-body                class=\"old-angular-scrollable-el\"                data-react-to-scroll-container                data-active-class-name=\"minimize\">            <div class=\"w-portfolio-table-body-separator\">                <span>{{_startedCopyDate_}}</span>                <span>{{ $ctrl.group.StartedCopyDate | formatDate: 'HH:mm' }}</span>            </div>            <a class=\"ui-table-row\"               ng-class=\"{'sell' : item.NetUnits < 0 && !item.MirrorID, 'buy' : item.NetUnits > 0 && !item.MirrorID, 'mirror-pending-close' : item.PendingForClosure }\"               ng-repeat=\"item in $ctrl.group.PositionsGroups\" ng-href=\"{{:: item.Url}}\">                <div class=\"ui-table-static-cell\">                    <div class=\"i-portfolio-table-instrument\">                        <div class=\"i-portfolio-table-instrument\">                            <div class=\"i-portfolio-table-avatar-ph\" ng-class=\"{'pause': item.IsPaused}\">                                    <span class=\"sprite-stats {{:: 'popular-' + item.user.piLevel }}\"                                          ng-if=\":: item.user && item.user.isPi\"></span>                                <img class=\"i-portfolio-table-avatar\" ng-src=\"{{::item.Avatar}}\"                                     alt=\"{{:: item.GroupName}}\">                                <span class=\"pause-ava\" ng-if=\"item.IsPaused\"></span>                            </div>                            <div class=\"i-portfolio-table-name\">                                <div class=\"i-portfolio-table-name-symbol\">{{:: item.GroupName}}</div>                                <p ng-if=\":: item.user && item.user.allowDisplayFullName\"                                   class=\"i-portfolio-table-hat-fullname\">{{:: item.user.DisplayName}}</p>                                <p ng-if=\":: item.IsStock\" class=\"i-portfolio-table-hat-fullname\">                                    {{                                    ::                                    item.Instrument.DisplayName                                    }}                                </p>                            </div>                        </div>                    </div>                </div>                <ui-table-body-slot>                    <ui-table-cell>                        <div class=\"unit-slot\">                            {{                            item.NetUnits | math:'abs' | unitsOpenClose: item.Instrument : 2 | lowerThanMinimum: undefined : item.Instrument                            }}                            <b class=\"unit-value\" ng-if=\"item.Positions && item.Positions.length\">{{_if(item.NetUnits > 0, '_Buying_', '_Selling_')_}}</b>                        </div>                    </ui-table-cell>                    <ui-table-cell>                        <div class=\"cursor-default\">{{ item.Amount | currencyparser:2 }}</div>                    </ui-table-cell>                    <ui-table-cell>                        <span ng-if=\":: !!item.Instrument\">{{ item.AverageOpenRate === 0 ? 'N/A' : (item.AverageOpenRate | unitsOpenClose: item.Instrument)}}</span>                    </ui-table-cell>                    <ui-table-cell ng-class=\"{negative: item.TotalGain < 0, positive: item.TotalGain > 0 }\">                        <span class=\"i-ptc-rate-value\">{{item.MirrorID > 0 ? item.TotalProfitAndClosedPL : item.TotalProfit | currencyparser:2:true}}</span>                    </ui-table-cell>                    <ui-table-cell                            ng-class=\"{negative: item.TotalGain < 0, positive: item.TotalGain > 0, 'negative warning': item.TotalGain <= -100}\">                        <span class=\"i-ptc-rate-value\">{{item.TotalGain | percentageparser | tradingconventions}}</span>                    </ui-table-cell>                    <ui-table-cell class=\"i-portfolio-table-total-title\">                        {{item.Equity | currencyparser:2}}                    </ui-table-cell>                    <ui-table-cell ng-if=\"!!item.Instrument\">                        <trade-button ng-if=\":: !!item.Instrument\"                                      instrument=\":: item.Instrument\"                                      btn-class=\"button-standard button-blue head-action-button portfolio-overview-list-view-investing-mode \"                                      app-source=\"apps-trader-portfolio-detailedView-fund-list-list.view\"                                      support-restriction=\"false\"                                      to-check-mode=\"true\">                        </trade-button>                    </ui-table-cell>                    <ui-table-cell>X{{item.LeverageAvgSort | tofixed:2 | number | math:'abs'}}</ui-table-cell>                </ui-table-body-slot>                <ui-table-button-cell>                </ui-table-button-cell>            </a>            <div class=\"ui-table-row trade-row\">                <div class=\"ui-table-static-cell\">                    <div class=\"table-first-name e-uppercase cursor-default\">{{_openTradesTotalOpen_}}</div>                </div>                <div class=\"ui-table-body-slot\">                    <div class=\"ui-table-cell  remove-cell-3\"></div>                    <div class=\"ui-table-cell mobile-align-left\">                        <div class=\"rate-value\">{{ $ctrl.group.TotalOpenAmount | currencyparser:2 }}</div>                        <div class=\"rate-subvalue\">{{_investedAmount_}}</div>                    </div>                    <div class=\"ui-table-cell remove-cell-3\"></div>                    <div class=\"ui-table-cell mobile-align-center\"                         ng-class=\"{negative: $ctrl.group.TotalProfit < 0, positive: $ctrl.group.TotalProfit > 0}\">                        <div class=\"rate-value\">{{ $ctrl.group.TotalProfit | currencyparser:2 }}</div>                        <div class=\"rate-subvalue\">{{_netProfit_}}</div>                    </div>                    <div class=\"ui-table-cell mobile-align-center\"                         ng-class=\"{negative: $ctrl.group.TotalOpenGain < 0, positive: $ctrl.group.TotalOpenGain > 0}\">                        <div class=\"rate-value\">{{ $ctrl.group.TotalOpenGain | percentageparser}}</div>                        <div class=\"rate-subvalue\">{{_pnl_}}</div>                    </div>                </div>            </div>            <div class=\"ui-table-row trade-row\">                <div class=\"ui-table-static-cell\">                    <div class=\"table-first-name e-uppercase\">{{_copyHistory_}}</div>                </div>                <div class=\"ui-table-body-slot\">                    <div class=\"ui-table-cell remove-cell-3\"></div>                    <div class=\"ui-table-cell mobile-align-left\">                        <div class=\"rate-value\"                             ng-class=\"{negative: $ctrl.group.TotalFees > 0, positive: $ctrl.group.TotalFees < 0}\">                            {{$ctrl.group.TotalFees | math:'abs' | currencyparser:2:true}}                        </div>                        <div class=\"rate-subvalue\">{{_if($ctrl.group.TotalFees < 0, \"_refunds_\", \"_fees_\")_}}</div>                    </div>                    <div class=\"ui-table-cell remove-cell-3\"></div>                    <div class=\"ui-table-cell mobile-align-center\">                        <div class=\"rate-value\"                             ng-class=\"{negative: $ctrl.group.ClosedPL < 0, positive: $ctrl.group.ClosedPL > 0}\">{{                            $ctrl.group.ClosedPL | currencyparser:2}}                        </div>                        <div class=\"rate-subvalue\">{{_netProfit_}}</div>                    </div>                    <div class=\"ui-table-cell remove-cell-3\"></div>                    <div class=\"ui-table-cell remove-cell-2\"></div>                    <div class=\"ui-table-cell\">                        <a class=\"button-standard table-total-button\" ng-click=\"$ctrl.setView('COPY_HISTORY')\">{{_viewCopyHistory_}}</a>                    </div>                </div>            </div>        </ui-table-body>    </ui-table></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[309][0],["underscore",rA[46][0],rA[360][0]],function(t,e,r){"use strict";function i(t,e,i,o,s,u,n){var a=this;this.viewModeService=n,this.isInvestingMode=this.viewModeService.isInvestingMode();var c=t.subItem;c&&this.group.getSubGroupByName(c)||e.path(this.group.Url),this.subGroupName=c,r.call(this,i,o,u),s.$watch(function(){return this.subGroup?this.subGroup.Orders.length+this.subGroup.Positions.length:0}.bind(this),function(t){0===t&&s.$evalAsync(function(){a.group&&e.path(a.group.Url)})})}return i.$inject=["$routeParams","$location","infrastruct.services.localStorage","infrastruct.services.sorterFactory","$scope","$rootScope","bl.factories.settings.viewMode"],i.prototype={get sortItems(){return this.subGroup?this.subGroup.Positions:null},get subGroup(){return this.group?this.group.getSubGroupByName(this.subGroupName):null},get orders(){return this.subGroup.Orders.filter(function(t){return"ExitOrder"!==t.SubType})}},i.inheritsFrom(r),{bindings:{group:"<"},controller:i,templateUrl:e.name}});define(rA[46][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/detailedView/fund/detailed/detailed-list.view.html","text":"<div class=\"portfolio-open-trades all-view\">    <ui-table class=\"portfolio-open-trades-inner head ui-table-hat\" ui-table-id=\"portfolioOpenTradesTableHead\"              ui-table-namespace=\"portfolioOpenTradesTableHead\"              default-fields=\"amount, unit, open, pipChange, sl, tp, plDollars, plPercentage\"              default-mobile-fields=\"amount, pipChange, plDollars, plPercentage\">        <ui-table-head data-etoro-locale-ns=\"portfolioOpenTradesTableHead\">            <b class=\"ui-table-static-cell sortable\" ng-click=\"$ctrl.sort('OpenDateTime')\"               ng-class=\"$ctrl.sortSelectedClassName('OpenDateTime')\">{{_action_}} ({{$ctrl.subGroup.Positions.length +                $ctrl.orders.length}})                <span class=\"i-ptc-sort-icon sprite\"></span>            </b>            <ui-table-head-slot>                <ui-table-cell name=\"amount\" class=\"sortable\" ng-click=\"$ctrl.sort('Amount')\"                               ng-class=\"$ctrl.sortSelectedClassName('Amount')\">{{_amount_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"unit\" class=\"sortable\" ng-click=\"$ctrl.sort('Units')\"                               ng-class=\"$ctrl.sortSelectedClassName('Units')\">{{_unit_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"open\" class=\"sortable\" ng-click=\"$ctrl.sort('OpenRate')\"                               ng-class=\"$ctrl.sortSelectedClassName('OpenRate')\">{{_open_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"pipChange\" class=\"sortable\" ng-click=\"$ctrl.sort('Change')\"                               ng-class=\"$ctrl.sortSelectedClassName('Change')\"><span                        class=\"e-ptc-icon change sprite\"></span><span class=\"i-ptc-sort-icon sprite\"></span>                </ui-table-cell>                <ui-table-cell name=\"sl\" class=\"sortable\" ng-click=\"$ctrl.sort('StopLossRate')\"                               ng-class=\"$ctrl.sortSelectedClassName('StopLossRate')\">{{_sl_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"tp\" class=\"sortable\" ng-click=\"$ctrl.sort('TakeProfitRate')\"                               ng-class=\"$ctrl.sortSelectedClassName('TakeProfitRate')\">{{_tp_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"plDollars\" class=\"sortable\" ng-click=\"$ctrl.sort('Profit')\"                               ng-class=\"$ctrl.sortSelectedClassName('Profit')\">{{_plDollars_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"plPercentage\" class=\"sortable\" ng-click=\"$ctrl.sort('Gain')\"                               ng-class=\"$ctrl.sortSelectedClassName('Gain')\">{{_plPercentage_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"current\" class=\"sortable\" ng-click=\"$ctrl.sort('CurrentRate')\"                               ng-class=\"$ctrl.sortSelectedClassName('CurrentRate')\">{{_current_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"leverage\" class=\"sortable\" ng-click=\"$ctrl.sort('Leverage')\"                               ng-class=\"$ctrl.sortSelectedClassName('Leverage')\">                    {{_leverage_}}                    <span class=\"i-ptc-sort-icon sprite\">                    </span>                </ui-table-cell>                <ui-table-cell name=\"equity\" class=\"sortable\" ng-click=\"$ctrl.sort('Equity')\"                               ng-class=\"$ctrl.sortSelectedClassName('Equity')\">                    {{_equity_}}                    <span class=\"sort-arrow sprite\">                    </span>                </ui-table-cell>                <ui-table-cell name=\"fees\" class=\"sortable\" ng-click=\"$ctrl.sort('TotalFees')\"                               ng-class=\"$ctrl.sortSelectedClassName('TotalFees')\">                    {{_fees_}}                    <span class=\"sort-arrow sprite\">                    </span>                </ui-table-cell>                <ui-table-cell name=\"slAmount\" class=\"sortable\" ng-click=\"$ctrl.sort('StopLossAmount')\" ng-class=\"$ctrl.sortSelectedClassName('StopLossAmount')\">{{_slAmount_}}<span class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell name=\"tpAmount\" class=\"sortable\" ng-click=\"$ctrl.sort('TakeProfitAmount')\" ng-class=\"$ctrl.sortSelectedClassName('TakeProfitAmount')\">{{_tpAmount_}}<span class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell name=\"slPercent\" class=\"sortable\" ng-click=\"$ctrl.sort('StopLossPercent')\" ng-class=\"$ctrl.sortSelectedClassName('StopLossPercent')\">{{_slPercent_}}<span class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell name=\"tpPercent\" class=\"sortable\" ng-click=\"$ctrl.sort('TakeProfitPercent')\" ng-class=\"$ctrl.sortSelectedClassName('TakeProfitPercent')\">{{_tpPercent_}}<span class=\"sort-arrow sprite\"></span></ui-table-cell>            </ui-table-head-slot>        </ui-table-head>        <ui-table-body            class=\"mobile-ui\"            data-react-to-scroll-container            data-active-class-name=\"minimize\"            data-etoro-locale-ns=\"portfolioOpenTradesTable\">            <div class=\"ui-table-row\" ng-class=\"{'mirror-pending-close' : position.isPendingClose}\"                 ng-repeat=\"position in $ctrl.subGroup.Positions\" data-id=\"{{:: position.PositionID}}\">                <div class=\"ui-table-static-cell\">                    <div class=\"i-portfolio-table-inner-instrument\">                        <div class=\"i-portfolio-table-inner-avatar-ph\">                            <img class=\"avatar\"                                 ng-src=\"{{:: position.Instrument.Avatars['default']}}\" alt=\"\">                        </div>                        <div class=\"i-portfolio-table-inner-name\">                            <div class=\"i-portfolio-table-inner-name-symbol\"                                 ng-class=\":: {'is-cfd-tag' : !position.IsSettled}\">                                <span ng-if=\":: position.IsBuy\">{{_buyButton_}}</span>                                <span ng-if=\":: !position.IsBuy\">{{_sellButton_}}</span>                                {{:: position.Instrument.Name}}                            </div>                            <span class=\"label-pending\">{{_pendingClose_}}</span>                            <span class=\"i-portfolio-table-hat-fullname\" ng-if=\"!position.isPendingClose\">{{:: position.OpenDateTime | formatDate:'HH:mm' }}</span>                        </div>                    </div>                </div>                <ui-table-body-slot>                    <ui-table-cell>{{ position.Amount | currencyparser:2 }}</ui-table-cell>                    <ui-table-cell>{{ position.Units | unitsOpenClose: position.Instrument : 2 | lowerThanMinimum: undefined : position.Instrument}}</ui-table-cell>                    <ui-table-cell>{{ position.OpenRate | unitsOpenClose: position.Instrument }}</ui-table-cell>                    <ui-table-cell class=\"i-ptc-rate-value\" ng-class=\"{negative: position.Change < 0, positive: position.Change > 0}\">                        {{position.Change}}                    </ui-table-cell>                    <ui-table-cell><span class=\"num-outline\"                                         ng-class=\"{'dashed-border' : position.IsTslEnabled, 'positive-border' : position.IsSlApproachingPositive, 'negative-border' : position.IsSlApproachingNegative }\">{{position.isNoSL ? '-----' : (position.StopLossRate | unitsOpenClose: position.Instrument : 5 : true | nozero:'-----') }}</span>                    </ui-table-cell>                    <ui-table-cell><span class=\"num-outline\"                                         ng-class=\"{ 'positive-border' : position.IsTpApproachingPositive, 'negative-border' : position.IsTpApproachingNegative }\">{{position.isNoTP ? '-----' : (position.TakeProfitRate | unitsOpenClose: position.Instrument : 5 : true | nozero:'-----') }}</span>                    </ui-table-cell>                    <ui-table-cell ng-class=\"{negative: position.Gain < 0, positive: position.Gain > 0}\"><span                            class=\"i-ptc-rate-value\">{{position.Profit| currencyparser:2:true}}</span></ui-table-cell>                    <ui-table-cell class=\"i-ptc-rate-value\" ng-class=\"{negative: position.Gain < 0, positive: position.Gain > 0}\">{{position.Gain                        | percentageparser | tradingconventions}}                    </ui-table-cell>                    <ui-table-cell>                        <div class=\"cursor-default\"                             ng-class=\"{'negative' :  position.LastRateChange < 0,'positive' : position.LastRateChange > 0}\">                            <span class=\"current-num-outline\">                                {{position.CurrentRate | formatRate: position.Instrument}}                            </span>                        </div>                    </ui-table-cell>                    <ui-table-cell>X{{:: position.Leverage}}</ui-table-cell>                    <ui-table-cell>{{position.Equity | currencyparser:2}}</ui-table-cell>                    <ui-table-cell>{{position.TotalFees | fees  | currencyparser:2:true}}</ui-table-cell>                    <ui-table-cell><span class=\"num-outline\" ng-class=\"{'dashed-border' : position.IsTslEnabled, 'positive-border' : position.IsSlApproachingPositive, 'negative-border' : position.IsSlApproachingNegative }\">{{position.isNoSL ? '-----':  position.StopLossAmount | currencyparser:2}}</span></ui-table-cell>                    <ui-table-cell><span class=\"num-outline\" ng-class=\"{ 'positive-border' : position.IsTpApproachingPositive, 'negative-border' : position.IsTpApproachingNegative }\">{{position.isNoTP ? '-----': position.TakeProfitAmount | currencyparser:2}}</span></ui-table-cell>                    <ui-table-cell><span class=\"num-outline\" ng-class=\"{'dashed-border' : position.IsTslEnabled, 'positive-border' : position.IsSlApproachingPositive, 'negative-border' : position.IsSlApproachingNegative }\">{{position.isNoSL ? '-----':  position.StopLossPercent | percentageparser}}</span></ui-table-cell>                    <ui-table-cell><span class=\"num-outline\" ng-class=\"{ 'positive-border' : position.IsTpApproachingPositive, 'negative-border' : position.IsTpApproachingNegative }\">{{position.isNoTP ? '-----': position.TakeProfitPercent | percentageparser}}</span></ui-table-cell>                </ui-table-body-slot>            </div>            <div class=\"ui-table-row mirror-pending-close\"                 ng-class=\"{ 'mirror-pending-close': position.isPendingClose||position.isPendingOpen }\"                 ng-repeat=\"order in $ctrl.orders\" data-id=\"{{:: order.PositionID}}\">                <div class=\"ui-table-static-cell\">                    <!--<div class=\"i-portfolio-table-inner-instrument\">-->                        <div class=\"i-portfolio-table-inner-avatar-ph\">                            <img class=\"avatar\" ng-src=\"{{:: order.Instrument.Avatars['default']}}\" alt=\"\">                        </div>                        <div class=\"table-static-cell-info\">                            <div class=\"table-first-name\">                                <span ng-if=\":: order.IsBuy\">{{_buyButton_}}</span>                                <span ng-if=\":: !order.IsBuy\">{{_sellButton_}}</span>                                {{:: order.Instrument.Name}}                            </div>                            <span class=\"label-pending\">{{_entryOpen_}}</span>                        </div>                </div>                <div class=\"ui-table-body-slot\">                    <div class=\"ui-table-cell\">{{ order.Amount | currencyparser:2 }}</div>                </div>            </div>            <div class=\"ui-table-row new-trade\" ng-if=\":: $ctrl.subGroup.Type ==='positionsGroup'\">                <div class=\"table-new-trade-cell-info\">                    <span class=\"i-portfolio-table-marker\"></span>                    <div class=\"i-portfolio-table-inner-avatar-ph\">                        <img class=\"avatar\" ng-src=\"{{:: $ctrl.subGroup.Avatar}}\">                    </div>                    <div ng-if=\"!$ctrl.isInvestingMode\" class=\"i-portfolio-table-inner-name\">                        <div class=\"i-portfolio-table-inner-name-symbol\"><span                                class=\"e-uppercase\">{{_btn_newTrade_}}</span></div>                    </div>                    <div ng-if=\"$ctrl.isInvestingMode\" class=\"i-portfolio-table-inner-name\">                        <div class=\"i-portfolio-table-inner-name-symbol\"><span                                class=\"e-uppercase\">{{ :: $root.t.dynamic('portfolioOpenTradesInvestMode', 'buy',this) }}</span></div>                    </div>                </div>                <div ng-if=\"!$ctrl.isInvestingMode\" class=\"etoro-horizontal etoro-float-clear\">                    <div class=\"etoro-sell-button\" data-ui-buysell-buttons=\"\"                         data-instrument=\"$ctrl.subGroup.Instrument\" data-type=\"sell\"                         data-app-source=\"apps-trader-portfolio-detailedView-fund-detailed-detailed.list.view\"></div>                    <div class=\"etoro-buy-button\" data-ui-buysell-buttons=\"\" data-instrument=\"$ctrl.subGroup.Instrument\"                         data-type=\"buy\"                         data-app-source=\"apps-trader-portfolio-detailedView-fund-detailed-detailed.list.view\"></div>                </div>                <div ng-if=\"$ctrl.isInvestingMode\" class=\"etoro-horizontal etoro-float-clear\">                    <div class=\"etoro-buy-button-invest-mode\">                        <trade-button data-etoro-automation-id=\"open-trades-instrument-summary-buy-button-investing-mode\"                                      instrument=\":: $ctrl.subGroup.Instrument\"                                      btn-class=\"button-standard button-blue head-action-button open-trades-buy-investing-mode\"                                      app-source=\"apps-trader-portfolio-detailedView-fund-detailed-detailed.list.view\"                                      support-restriction=\"false\"                                      to-check-mode=\"true\">                        </trade-button>                    </div>                </div>            </div>            <div class=\"ui-table-row\" ng-if=\":: $ctrl.subGroup.MirrorID > 0\">                <div class=\"ui-table-static-cell\">                    <div class=\"i-portfolio-table-inner-instrument\">                        <div class=\"i-portfolio-table-inner-name\">                            <div class=\"i-portfolio-table-total-title cursor-default\">{{_openTradesTotalOpen_}}</div>                        </div>                    </div>                </div>                <ui-table-body-slot>                    <ui-table-cell>{{ $ctrl.subGroup.TotalOpenAmount | currencyparser:2 }}</ui-table-cell>                    <ui-table-cell></ui-table-cell>                    <ui-table-cell></ui-table-cell>                    <ui-table-cell></ui-table-cell>                    <ui-table-cell></ui-table-cell>                    <ui-table-cell></ui-table-cell>                    <ui-table-cell                            ng-class=\"{negative: $ctrl.subGroup.TotalProfit < 0, positive: $ctrl.subGroup.TotalProfit > 0}\">                        <span class=\"i-ptc-rate-value\">{{ $ctrl.subGroup.TotalProfit | currencyparser:2 }}</span>                    </ui-table-cell>                    <ui-table-cell ng-class=\"{negative: $ctrl.subGroup.TotalOpenGain < 0, positive: $ctrl.subGroup.TotalOpenGain > 0}\">                        <span class=\"i-ptc-rate-value\">{{ $ctrl.subGroup.TotalOpenGain | percentageparser}}</span>                    </ui-table-cell>                    <ui-table-cell></ui-table-cell>                </ui-table-body-slot>            </div>        </ui-table-body>    </ui-table></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[291][0],["underscore",rA[45][0]],function(t,e){"use strict";function i(e,i,r,a,o,s,n,l){if(this.$interpolate=o,this.localizeFactory=s,this.$location=e,this.$injector=l,!this.group)return void this.$location.path("/portfolio");var c=21,h=r.createPublicAllocationGraph(this.portfolio,c).loadAllNodes(),p=r.createPrivateExposureGraph(this.group.PositionsGroups,c).loadAllNodes(),u=r.createPublicRiskGraph(),d=this.graphs={allocation:{id:"allocation",graph:h,isEmpty:!1},exposure:{id:"exposure",graph:p,isEmpty:!1},risk:{id:"risk",graph:null,isEmpty:!1}},g=this.getNodeNameFromUrl(e.path()),f=t.find(d,function(t){return g===t.id.toLowerCase()});this.groupChart=this.group.Url+"/chart/",this.selectedGraph=null,this.graphs.allocation.promise=n.resolve(this.graphs.allocation),this.graphs.exposure.promise=n.resolve(this.graphs.exposure),this.graphs.risk.promise=this._getRisk(u),this.panel=[d.allocation,d.exposure,d.risk],a.init(i),i.$on("viewKeeperChangeSuccess",this._handleViewKeeperChange.bind(this)),f.promise.then(function(t){this.center=t}.bind(this))["catch"](this.goToFallbackGraph.bind(this))}return i.$inject=["$location","$scope","bl.factories.trading.portfolioGraphService","infrastruct.services.viewKeeper","$interpolate","infrastruct.services.localization.localizeFactory","$q","$injector"],i.prototype={get defaultGraph(){return this.panel[0]},get graphRegex(){return/^\/portfolio\/[^\/]+\/(?:chart)\/(?:([^\/]+))/},selectTree:function(t){t&&t.graph&&this.$location.path(this.groupChart+t.id.toLowerCase())},goToFallbackGraph:function(){this.$location.path(this.groupChart+"allocation"),this.$location.replace()},goToPortofolioItem:function(t){var e=this.group.Url;e+=t&&t.onClickAction?"/"+t.name:"/all-items",this.$location.path(e)},getNodeNameFromUrl:function(t){var e=t?t.match(this.graphRegex):null;return e?e[1]:"exposure"},legendTemplateRender:function(e){if("exposure"!==this.center.id||!e||!e.nodeData||!e.nodeData.value||t.isObject(e.nodeData.value)&&!t.has(e.nodeData.value,"CalculatedNetUnits"))return"";var i=t.isArray(e.nodeData.value)?t.reduce(e.nodeData.value,function(t,e){return t+e.CalculatedNetUnits},0):e.nodeData.value.CalculatedNetUnits,r=i>0,a=this.localizeFactory.dynamic("portfolioCharts",r?"Buying":"Selling");return this.$interpolate('<div class="pie-chart-list-item-amount {{className}}"><span class="sprite"></span><span class="action-label">{{ text }}</span> {{ sumCalculatedNetUnits | math:"abs" | currencyparser:2 }}</div>')({sumCalculatedNetUnits:i,text:a,className:r?"buy":"sell"})},_getRisk:function(t){return this.$injector.get("bl.factories.trading.users.usersStatsFacade").getRiskTopContributors(this.portfolio.user).then(function(e){return e&&e.length&&(t.riskContributors=e,t.loadAllNodes(),this.graphs.risk.graph=t),this.graphs.risk}.bind(this))},_handleViewKeeperChange:function(e,i,r){var a=r[1].keepUrl,o=i[1].keepUrl,s=this.getNodeNameFromUrl(r[0]),n=this.getNodeNameFromUrl(i[0]);a&&a===o&&s!==n&&(e.changedUrl=!0,this.center=t.find(this.panel,function(t){return t.id.toLowerCase()===n&&t.graph})||this.defaultGraph)}},{templateUrl:e.name,controller:i,bindings:{group:"<",portfolio:"<publicPortfolio"}}});define(rA[45][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/detailedView/fund/chart/fund-detailed-view-chart.view.html","text":"<div class=\"w-portfolio-allocation-wrapper\" ng-class=\"{'empty': $ctrl.center.id === 'allocation' && $root.session.user.portfolio.equity === 0 }\">    <public-portfolio-detailed-graph ng-if=\"$ctrl.center\" data-item=\"$ctrl.center\"                                     on-click-action=\"$ctrl.goToPortofolioItem(node)\"                                     class=\"display-block\"                                     on-legend-template-render=\"$ctrl.legendTemplateRender(node)\"    ></public-portfolio-detailed-graph>    <div class=\"chart-switch-buttons\">        <div class=\"chart-switch-button pointer\" ng-repeat=\"item in $ctrl.panel\" ng-if=\"!!item && $ctrl.center != item\">            <public-portfolio-small-graph item=\"item\" on-selected-tree=\"$ctrl.selectTree(item)\" class=\"display-block\"></public-portfolio-small-graph>        </div>    </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[47][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/detailedView/fund/fund-list.view.html","text":"<fund-positions-groups group=\"$ctrl.group\" ng-if=\"$ctrl.viewMode === 'LIST'\" on-view-set=\"$ctrl.setView(viewMode)\"></fund-positions-groups><fund-positions-group-items group=\"$ctrl.group\" ng-if=\"$ctrl.viewMode === 'SUBITEM'\"></fund-positions-group-items><fund-detailed-view-chart class=\"old-angular-scrollable-el\"  group=\"$ctrl.group\" public-portfolio=\"$ctrl.publicPortfolio\" ng-if=\"$ctrl.viewMode === 'CHART'\"></fund-detailed-view-chart>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[262][0],[rA[55][0]],function(t){"use strict";function i(t,i,e,n,o){this.uiDialog=e,this.$analytics=i,this.$rootScope=t,this.portfolioActionsEvents=n,this.$injector=o}return i.$inject=["$rootScope","$analytics","uiDialog","apps.trader.portfolio.portfolioActionsEvents","$injector"],i.prototype={close:function(){this.onClose()},notifyMe:function(){this.$analytics.eventTrack("Pending IPO - Notify me",{username:this.user.username,instrumentName:this.instrument.DisplayName}),this.$injector.get("bl.factories.trading.portfolioNotificationsService").instrumentPreviewNotifyMeSuccess({instrument:this.instrument}),this.close()},placeAnOrder:function(){this.portfolioActionsEvents.openPosition(this.instrument,!0,null,!0,null,null,null,!0,"InstrumentsPreview"),this.close()}},{templateUrl:t.name,controller:i,bindings:{instrument:"<",user:"<",onClose:"&"}}});define(rA[55][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/instrumentPreview/instrumentPreview.view.html","text":"<div class=\"w-sm\" data-etoro-locale-ns=\"instrumentPreview\">    <div class=\"w-confirmation-modal-title\">        {{_title_}}    </div>    <a class=\"w-share-header-nav-button-x sprite\" ng-click=\"$ctrl.close()\"></a>    <div class=\"w-sm-main\">        <img class=\"i-popup-image instrument-preview\" ng-src=\"{{:: $ctrl.instrument.Avatars['150x150'] }}\"             alt=\"{{:: $ctrl.instrument.DisplayName}}\"/>        <div class=\"i-popup-contant-info instrument-preview\" ng-bind-html=\":: $root.t.html('instrumentPreview', 'description', this)\">                    </div>    </div>    <div class=\"w-sm-footer\">        <a class=\"w-sm-footer-button secondary-button e-btn-big dark\" ng-click=\"$ctrl.notifyMe()\">{{_notifyMe_}}</a>        <a class=\"w-sm-footer-button e-btn-big dark\" ng-click=\"$ctrl.placeAnOrder()\">{{_placeAnOrder_}}</a>    </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[402][0],["angular",rA[42][0],"underscore"],function(s,i){function t(s,i,t,o,e,n){this.CLOSE_ALL="CLOSE ALL COMPONENT",this.$analytics=s,this.ecommerceTracking=i,this.mixpanelEventsService=n,this.$injector=t,this.pdtStatus=-1,this.$rootScope=e;var r=this;if(r.isUsUser=e.session.isUsUser(),this.positionsGroup.Instrument.isUsTrade){var p=e.session.user.portfolio;this.$injector.get("bl.factories.trading.services.PdtService").getPdtStatus(this.positionsGroup.InstrumentID,this.numOfPositions,p).then(function(s){r.pdtStatus=s.pdtStatus,r.$rootScope.$applyAsync()},function(s){r.$rootScope.session.$log.logJSON("info","error",{Categories:["Trading - Close All"],Message:"Could not get PDT data",ErrorMessage:s})}),this.showFeesTooltip=!1,this.isUsConfirmMode=!1,this.confirmationData={timestamp:Date.now(),profit:"",gain:""}}}return t.$inject=["$analytics","infrastruct.services.ecommerceTrackingService","$injector","$scope","$rootScope","bl.factories.trading.mixpanelEventsService"],t.prototype={$onInit:function(){this.ecommerceTracking.track("Close Trade",{action:"Close",label:"Presented",id:this.positionsGroup.TradeItem.ItemId,name:this.positionsGroup.TradeItem.fullName,amount:this.positionsGroup.Amount,dimension71:this.positionsGroup.TradeItem.instrumentType&&this.positionsGroup.TradeItem.instrumentType.key}),this.mixpanelEventsService.sendCloseAllEvent(this.positionsGroup,null,this.isUsUser)},get closeBtnDisabled(){return 3===this.pdtStatus||this.actionDisabled},get numOfPositions(){return this.positionsGroup&&this.positionsGroup.Positions?this.positionsGroup.Positions.length:0},get sourceText(){return(this.appSource||"UnKnown")+"-"+this.CLOSE_ALL},get pdtLimited(){return 3===this.pdtStatus},get pdtWarned(){return 2===this.pdtStatus},closePopUp:function(){this.onClose()},selectSpecificPosition:function(){this.mixpanelEventsService.sendCloseAllEvent(this.positionsGroup,"Select Specific Positions",this.isUsUser,this.isUsConfirmMode),this.closePopUp()},toggleFeesTooltip:function(){this.showFeesTooltip=!this.showFeesTooltip,this.$rootScope.$applyAsync()},exitPopup:function(){this.mixpanelEventsService.sendCloseAllEvent(this.positionsGroup,"Exit",this.isUsUser,this.isUsConfirmMode),this.closePopUp()},closeAllPositions:function(){if(!this.closeBtnDisabled){if(this.positionsGroup.Instrument.isUsTrade&&!this.isUsConfirmMode)return this.mixpanelEventsService.sendCloseAllEvent(this.positionsGroup,"Sell All",this.isUsUser,this.isUsConfirmMode),this.isUsConfirmMode=!0,void(this.confirmationData={timestamp:Date.now(),profit:this.positionsGroup.TotalProfit,gain:this.positionsGroup.TotalGain});this.actionDisabled=!0,this.positionsGroup.closeAllPositions(this.sourceText);var s=this.positionsGroup.Instrument.isUsTrade&&this.isUsConfirmMode?"Submit":"Close All";this.mixpanelEventsService.sendCloseAllEvent(this.positionsGroup,s,this.isUsUser,this.isUsConfirmMode),this.closePopUp()}}},{controller:t,bindings:{positionsGroup:"<",onClose:"&",appSource:"@",isTradingConnectionAvailable:"<"},templateUrl:i.name}});define(rA[42][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/close-all-positions/close-all-positions.view.html","text":"<div data-etoro-automation-id=\"close-all-positions-window\"     class=\"w-sm close-all-positions-w-sm\" ng-class=\"{ 'confirm-mode': $ctrl.isUsConfirmMode, 'row-trade': !$ctrl.positionsGroup.Instrument.isUsTrade }\"      data-etoro-locale-ns=\"portfolioClosePosition\">    <div data-etoro-automation-id=\"close-all-positions-title\"         class=\"w-confirmation-modal-title\">        {{ _if($ctrl.isUsUser,'_sellAllButton_','_closeAllPositionButton_')_ }}    </div>    <div data-etoro-automation-id=\"close-all-positions-close-button\"         class=\"w-share-header-nav-button-x sprite\" ng-click=\"$ctrl.exitPopup()\"></div>    <div class=\"w-sm-main close-all-positions-main\">        <div class=\"execution-main-head close-all-positions-avatar no-border-bottom no-shadow\">            <div class=\"execution-avatar-ph\">                <img data-etoro-automation-id=\"close-all-positions-avatar\"                     class=\"w-execution-main-head-avatar\" ng-src=\"{{:: $ctrl.positionsGroup.Avatar}}\"                     alt=\"{{:: $ctrl.positionsGroup.GroupName}}\"/>            </div>            <div class=\"user-info stock-sell-buy close-all\">                <div class=\"user-info\">                    <h1 data-etoro-automation-id=\"close-all-positions-instrument-name\"                        class=\"user-nickname\">                        {{:: $ctrl.positionsGroup.GroupName}}                    </h1>                </div>                <div class=\"head-info-stats\">                    <div ng-if=\":: !$ctrl.positionsGroup.Instrument.isPreview\">                        <span data-etoro-automation-id=\"close-all-positions-last-price-value\"                              class=\"execution-main-head-price-value\">                            {{ ($ctrl.positionsGroup.Instrument.isUsTrade                                ? $ctrl.positionsGroup.Instrument.BidRounded()                                : $ctrl.positionsGroup.Instrument.lastPrice()) | formatRate: $ctrl.positionsGroup.Instrument }}                        </span>                        <span data-etoro-automation-id=\"close-all-positions-change-container\"                              class=\"head-info-stats-change\" ng-class=\"{positive: $ctrl.positionsGroup.Instrument.rate.Change.bidNumber('Daily') >= 0, negative : $ctrl.positionsGroup.Instrument.rate.Change.bidNumber('Daily') < 0}\">                            {{$ctrl.positionsGroup.Instrument.rate.Change.bidNumber('Daily') === 0 ? 'N/A' : ($ctrl.positionsGroup.Instrument.rate.Change.bidNumber('Daily') | tofixed:$ctrl.positionsGroup.Instrument.Precision)}} ({{$ctrl.positionsGroup.Instrument.rate.Change.bidNumber('Daily') === 0 ? 'N/A' : ($ctrl.positionsGroup.Instrument.rate.Change.bidPercent('Daily') | percentageparser)}})                        </span>                        <et-nbbo-info ng-if=\"$ctrl.positionsGroup.Instrument.isUsTrade && $ctrl.positionsGroup.Instrument.IsActive\"                             [instrument]=\"$ctrl.positionsGroup.Instrument\"                            tooltip-class=\"close-all-tooltip\">                         </et-nbbo-info>                    </div>                </div>                <div data-etoro-automation-id=\"close-all-positions-disclaimer-container\"                     class=\"close-all-positions-disclaimer\">                    {{:: $root.t.dynamic('market' , 'disclaimer.' + $ctrl.positionsGroup.Instrument.ProviderPriceSource)}}                    {{:: $root.t.dynamic('market' , 'disclaimer.Currency' + $ctrl.positionsGroup.Instrument.SellCurrencyID) + ' | '}}                    <i class=\"clock-icon\"                       ng-class=\"{'clock-open': $ctrl.positionsGroup.Instrument.IsActive, 'clock-close': !$ctrl.positionsGroup.Instrument.IsActive}\"></i>                    <span ng-bind-html=\"$root.t.dynamic('market', 'disclaimer.marketStateV2', $ctrl.positionsGroup.Instrument)\"></span>                </div>            </div>        </div>        <div data-etoro-automation-id=\"sell-all-positions-details-container\"            ng-if=\"$ctrl.positionsGroup.Instrument.isUsTrade\"            ng-class=\"{'sell-all': $ctrl.isUsConfirmMode}\"            class=\"w-sm-amount-info-close clear-after\">            <div data-etoro-automation-id=\"sell-all-positions-details-total-invested-container\"                 class=\"w-sm-amount-info-unit clear-after\">                <div data-etoro-automation-id=\"sell-all-positions-details-total-invested-label\"                    ng-class=\"{'close-all-confirmation-screen': $ctrl.isUsConfirmMode}\"                     class=\"w-sm-amount-info-label close-all-positions-info-label\">                     <!-- \"Invested\" -->                    {{_amountLabel_}}                </div>                <div class=\"w-sm-amount-info-value close-all-positions-info-value\">                    <div data-etoro-automation-id=\"sell-all-positions-details-total-invested-value\">                         {{ $ctrl.positionsGroup.TotalInvestedAmount | tofixedNoZero: 2| currencyparser:2 }}                    </div>                    <div class=\"small-font-size\">                        <span data-etoro-automation-id=\"sell-all-positions-details-units-value\" class=\"default-font-weight\">                            {{ $ctrl.positionsGroup.NetUnits  | math:'abs' | unitsOpenClose: $ctrl.positionsGroup.Instrument : 6 : true | lowerThanMinimum  }}                        </span>                        <span data-etoro-automation-id=\"sell-all-positions-details-units-label\" class=\"default-font-weight\">                            {{_units_}}                        </span>                    </div>                </div>            </div>            <div data-etoro-automation-id=\"sell-all-positions-details-avg-open-container\"                 class=\"w-sm-amount-info-unit clear-after sell-all p-bottom\" ng-if=\"$ctrl.isUsConfirmMode\">                <div data-etoro-automation-id=\"sell-all-positions-details-avg-open-label\"                    ng-class=\"{'close-all-confirmation-screen': $ctrl.isUsConfirmMode}\"                     class=\"w-sm-amount-info-label close-all-positions-info-label\">                     <!-- Buy Price -->                    {{_buyingPrice_}}                </div>                <div ng-if=\"$ctrl.isUsConfirmMode\" class=\"w-sm-amount-info-value close-all-positions-info-value\">                    <span data-etoro-automation-id=\"sell-all-positions-details-avg-value\">                        {{ $ctrl.positionsGroup.AverageOpenRate | formatRate: $ctrl.positionsGroup.Instrument }}                    </span>                </div>            </div>            <div data-etoro-automation-id=\"sell-all-positions-details-total-profit-container\"                 class=\"w-sm-amount-info-unit clear-after\">                <div data-etoro-automation-id=\"sell-all-positions-details-total-profit-label\"                    ng-class=\"{'close-all-confirmation-screen': $ctrl.isUsConfirmMode}\"                     class=\"w-sm-amount-info-label close-all-positions-info-label\">                    <!-- \"Profit / Loss\" -->                    {{_plEstimated_}}                </div>                <div class=\"w-sm-amount-info-value close-all-positions-info-value\"                     ng-class=\"{negative: $ctrl.positionsGroup.TotalProfit < 0, positive: $ctrl.positionsGroup.TotalProfit > 0}\">                     <span data-etoro-automation-id=\"sell-all-positions-details-total-profit-value\"                     class=\"execution-edit-info-item close-all-positions-pnl\">{{ $ctrl.isUsConfirmMode ? $ctrl.confirmationData.profit : $ctrl.positionsGroup.TotalProfit | currencyparser:2 }} </span>                     <span data-etoro-automation-id=\"sell-all-positions-details-total-profit-gain-value\"                           class=\"execution-edit-info-item display-block small-font-size\"                           ng-if=\"$ctrl.isUsConfirmMode\">                         {{ $ctrl.isUsConfirmMode ? $ctrl.confirmationData.gain : $ctrl.positionsGroup.TotalGain | percentageparser:2 }}                     </span>                </div>            </div>            <div data-etoro-automation-id=\"sell-all-positions-details-estimated-value-container\"                 class=\"w-sm-amount-info-unit total clear-after\"                 ng-if=\"$ctrl.isUsConfirmMode\">                <div data-etoro-automation-id=\"sell-all-positions-details-estimated-value-label\"                     class=\"w-sm-amount-info-label close-all-positions-total-label border-top\">                     <!-- \"EST. Value\" -->                    {{_estimatedSellAmount_}}                </div>                <div data-etoro-automation-id=\"sell-all-positions-details-estimated-value-amount-container\"                     class=\"w-sm-amount-info-value close-all-positions-total-value\"                     ng-class=\"{'et-flex-column': $ctrl.isUsConfirmMode}\">                    <span class=\"bold-info item-child sell-all close-all-positions-info-value block\" data-etoro-automation-id=\"sell-all-position-confirm-estimated-value-amount\">                        {{ $ctrl.positionsGroup.Equity | tofixedNoZero:2 | currencyparser:2 }}                    </span>                    <span ng-if=\"$ctrl.isUsConfirmMode\" class=\"item-child confirm-timestamp close-all-positions-info-value\">                        <span data-etoro-automation-id=\"sell-all-position-confirm-estimated-units\" class=\"small-font-size\">                            <span class=\"default-font-weight\">                                {{ $ctrl.positionsGroup.NetUnits  | math:'abs' | unitsOpenClose: $ctrl.positionsGroup.Instrument : 6 : true | lowerThanMinimum  }}                                 {{_units_}}                            </span>                        </span>                    </span>                </div>            </div>            <div ng-if=\"$ctrl.isUsConfirmMode\" class=\"execution-edit-info close-trade total-fees w-sm-amount-info-unit sell-all p-bottom\">                <div class=\"execution-left-side close-trade close-all-total-fees\" ng-class=\"{ 'no-min-height': $ctrl.isUsConfirmMode }\">                    <!-- \"FEES\" -->                    <span class=\"bold-info item-child\" data-etoro-automation-id=\"sell-all-position-confirm-info-fees-label\">{{_totalFees_}}</span>                    <div class=\"total-fees-tooltip-container\">                        <span class=\"total-fees-tooltip-toggle info-sigh sprite\" data-etoro-automation-id=\"sell-all-total-fees-tooltip\" ng-click=\"$ctrl.toggleFeesTooltip()\"></span>                        <div automation-id=\"no-fees-tool-tip-container-sell-all-confirm\"                             ng-if=\"$ctrl.showFeesTooltip\" click-outside=\"$ctrl.toggleFeesTooltip()\"                            class=\"execution-market-off-tool-tip fees-tool-tip display-block\">                            <div class=\"tool-tip-container\">                                <span class=\"no-fees-message\" ng-bind-html=\":: $root.t.dynamic('usFees', 'message', this)\"></span>                                <span class=\"tool-tip-pick fees-pick\"></span>                            </div>                        </div>                     </div>                </div>                <div class=\"execution-right-side close-trade\">                    <span class=\"bold-info item-child\" data-etoro-automation-id=\"sell-all-confirm-info-fees-amount\">                        {{ $ctrl.positionsGroup.TotalFees | math: 'abs' | currencyparser: 2 : true }}                    </span>                </div>            </div>            <div data-etoro-automation-id=\"sell-all-positions-details-total-equity-container\"                 class=\"w-sm-amount-info-unit total clear-after\"                 ng-class=\"{ 'no-border-top no-shadow': $ctrl.isUsConfirmMode}\">                <div data-etoro-automation-id=\"sell-all-positions-details-total-equity-label\"                     class=\"w-sm-amount-info-label close-all-positions-total-label\">                     <!-- \"Market Value\" -->                    {{_copyHistoryTotal_}}                </div>                <div data-etoro-automation-id=\"sell-all-positions-details-total-equity-value\"                     class=\"w-sm-amount-info-value close-all-positions-total-value sell-all\"                     ng-class=\"{'et-flex-column': $ctrl.isUsConfirmMode}\">                    <span class=\"bold-info item-child sell-all close-all-positions-info-value block\" data-etoro-automation-id=\"sell-all-confirm-info-equity-amount\">                        {{ $ctrl.positionsGroup.Equity | tofixedNoZero:2 | currencyparser:2 }}                    </span>                    <span ng-if=\"$ctrl.isUsConfirmMode\" class=\"item-child confirm-timestamp close-all-positions-info-value\">                        <span data-etoro-automation-id=\"sell-all-confirm-timestamp\" class=\"small-font-size\">                            <span class=\"default-font-weight\"> {{ $ctrl.confirmationData.timestamp | formatDate: 'HH:mm:ss' }} </span>                    </span>                </div>            </div>        </div>        <div data-etoro-automation-id=\"close-all-positions-details-container\"            ng-if=\"!$ctrl.positionsGroup.Instrument.isUsTrade\"            class=\"w-sm-amount-info-close clear-after small-font-size\">            <div data-etoro-automation-id=\"close-all-positions-details-total-invested-container\"                 class=\"w-sm-amount-info-unit pad-15 clear-after\">                <div data-etoro-automation-id=\"close-all-positions-details-total-invested-label\"                     class=\"w-sm-amount-info-label close-all-positions-info-label\">                    {{_investedLabel_}}                </div>                <div class=\"w-sm-amount-info-value close-all-positions-info-value\">                    <span data-etoro-automation-id=\"close-all-positions-details-total-invested-units-container\"                          class=\"w-sm-amount-info-value-sup close-all-positions-units\">                        (<span data-etoro-automation-id=\"close-all-positions-details-total-invested-units-value\">                            {{ $ctrl.positionsGroup.NetUnits  | math:'abs' | unitsOpenClose: $ctrl.positionsGroup.Instrument : 2 | lowerThanMinimum  }}                        </span>                        <span data-etoro-automation-id=\"close-all-positions-details-total-invested-units-label\">                            {{_units_}}                        </span>)                    </span>                    <span data-etoro-automation-id=\"close-all-positions-details-total-invested-value\">                         {{ $ctrl.positionsGroup.TotalInvestedAmount | tofixedNoZero: 2| currencyparser:2 }}                    </span>                </div>            </div>            <div data-etoro-automation-id=\"close-all-positions-details-avg-open-container\"                 class=\"w-sm-amount-info-unit pad-15 clear-after\">                <div data-etoro-automation-id=\"close-all-positions-details-avg-open-label\"                     class=\"w-sm-amount-info-label close-all-positions-info-label\">                    {{_avgOpenLabel_}}                </div>                <div data-etoro-automation-id=\"close-all-positions-details-avg-open-value\"                     class=\"w-sm-amount-info-value close-all-positions-info-value\">                    {{ $ctrl.positionsGroup.AverageOpenRate === 0 ? 'N/A' : ($ctrl.positionsGroup.AverageOpenRate | unitsOpenClose: $ctrl.positionsGroup.Instrument)}}                </div>            </div>            <div data-etoro-automation-id=\"close-all-positions-details-total-profit-container\"                 class=\"w-sm-amount-info-unit pad-15 clear-after\">                <div data-etoro-automation-id=\"close-all-positions-details-total-profit-label\"                     class=\"w-sm-amount-info-label close-all-positions-info-label\">                    {{_plLabel_}}                </div>                <div class=\"w-sm-amount-info-value close-all-positions-info-value\"                     ng-class=\"{negative: $ctrl.positionsGroup.TotalProfit < 0, positive: $ctrl.positionsGroup.TotalProfit > 0}\">                    <span data-etoro-automation-id=\"close-all-positions-details-total-profit-gain-value\"                          class=\"execution-edit-info-item\">                        ({{ $ctrl.positionsGroup.TotalGain | percentageparser:2 }})                    </span>                    <span data-etoro-automation-id=\"close-all-positions-details-total-profit-value\"                          class=\"execution-edit-info-item close-all-positions-pnl\">{{ $ctrl.positionsGroup.TotalProfit | currencyparser:2 }} </span>                </div>            </div>            <div data-etoro-automation-id=\"close-all-positions-details-total-equity-container\"                 class=\"w-sm-amount-info-unit pad-15 total clear-after\">                <div data-etoro-automation-id=\"close-all-positions-details-total-equity-label\"                     class=\"w-sm-amount-info-label close-all-positions-total-label\">                    {{_totalValueLabel_}}                </div>                <div data-etoro-automation-id=\"close-all-positions-details-total-equity-value\"                     class=\"w-sm-amount-info-value close-all-positions-total-value\">                    {{ $ctrl.positionsGroup.Equity | tofixedNoZero:2 | currencyparser:2 }}                </div>            </div>        </div>        <div data-etoro-automation-id=\"close-all-positions-selection-conatiner\"             ng-if=\"!$ctrl.isUsConfirmMode\"             class=\"w-sm-disclaimer\">            <div>                <div class=\"execution-push-down-info close-all\" ng-if=\"!$ctrl.isTradingConnectionAvailable\">{{_pushDownInfo_}}</div>            </div>            <div class=\"close-all-positions-disclaimer-note\" ng-if=\"!$ctrl.positionsGroup.Instrument.IsActive\">                <div data-etoro-automation-id=\"close-all-positions-market-close-label\"                     class=\"footer-spread-info\">                    {{ _atMarketPositionCloseNote_}}                </div>            </div>          </div>        <div ng-if=\"!$ctrl.isUsConfirmMode\" class=\"close-all-positions-button-wrapper execution-screen sell-all\" ng-class=\"{'pdt-alert' : $ctrl.pdtStatus > 1}\">            <button data-etoro-automation-id=\"close-all-positions-closs-all-button\"                    class=\"w-sm-footer-button button-standard close-all-positions-button e-btn-big red pointer \"                    ng-disabled=\"$ctrl.closeBtnDisabled\"                    ng-click=\"$ctrl.closeAllPositions()\">{{ _if($ctrl.isUsUser,'_sellAllButton_','_closeAllPositionButton_')_ }}            </button>        </div>        <div ng-if=\"$ctrl.isUsConfirmMode\" class=\"close-all-positions-button-wrapper confirmation-screen sell-all\">            <button data-etoro-automation-id=\"close-position-close-button\" class=\"w-sm-footer-button e-btn-big red pointer close-position-btn-us close-all-positions\"                ng-click=\"$ctrl.closeAllPositions()\">                {{ _confirmButton_}}            </button>        </div>        <a data-etoro-automation-id=\"close-all-positions-manual-close-link\"           class=\"footer-spread-info close-all-positions-note\" ng-click=\"$ctrl.selectSpecificPosition()\"           ng-href=\"{{::  $ctrl.positionsGroup.Url}}\"           ng-if=\"!$ctrl.pdtLimited && !$ctrl.isUsConfirmMode\">           {{ _selectSpecificPositions_ }}        </a>        <div data-etoro-automation-id=\"close-all-positions-conatiner\" class=\"footer-spread-info off-market-disclaimer close-all-positions-off-market-disclaimer\"           ng-if=\"!$ctrl.positionsGroup.Instrument.IsActive && !$ctrl.positionsGroup.Instrument.AllowExitOrder\">            <span data-etoro-automation-id=\"off-market-disclaimer\" ng-bind-html=\"$root.t.dynamic('portfolioClosePosition', 'offMarketDisclaimer')\"></span>        </div>        <div           data-etoro-automation-id=\"close-all-positions-pdt-warning\"           ng-if=\"!$ctrl.isUsConfirmMode && ($ctrl.pdtWarned || $ctrl.pdtLimited)\"          class=\"pdt-warning sell-all\">          <span             ng-if=\"$ctrl.pdtWarned\"             ng-bind-html=\"$root.t.dynamic('portfolioClosePosition', '3rdRoundMessageV1' , this)\"            class=\"pdt-warning-text\"></span>          <span             ng-if=\"$ctrl.pdtLimited\"             ng-bind-html=\"$root.t.dynamic('portfolioClosePosition', 'AllCannotBeClosedV1' , this)\"            class=\"pdt-warning-text\"></span>        </div>        <div ng-if=\"$ctrl.positionsGroup.Instrument.isUsTrade\" class=\"execution-footer us-disclaimer-container footer-spread-info mobile-ui\" ng-class=\"{'sell-all' : $ctrl.isUsConfirmMode }\">            <span class=\"us-disclaimer\">{{ _if($ctrl.isUsConfirmMode,'_usConfirmDisclaimer_','_usDisclaimer_')_ }}</span>        </div>    </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[365][0],["angular",rA[81][0]],function(e,i){return{templateUrl:i.name,bindings:{onClose:"&"}}});define(rA[81][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/widgets/redeemLimit/redeem-limit.view.html","text":"<div class=\"w-sm\" data-etoro-locale-ns=\"redeemLimit\">    <div class=\"w-confirmation-modal-title\">        {{_title_}}    </div>    <a class=\"w-share-header-nav-button-x sprite\" ng-click=\"$ctrl.onClose()\"></a>    <div class=\"w-sm-main\">        <span class=\"redeem-description\">            {{_description_}}        </span>    </div>    <div class=\"w-sm-footer\">        <a class=\"w-sm-footer-button e-btn-big dark\" ng-click=\"$ctrl.onClose()\">{{_confirm_}}</a>    </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[444][0],["angular",rA[312][0],rA[311][0],rA[52][0]],function(r,o,t,e){"use strict";function i(r,o){this.$routeParams=o,this.$route=r}var n=r.module("portfolio.mirror",[]);return n.component("mirrorPositionsGroups",o),n.component("mirrorPositionsGroupItems",t),i.$inject=["$route","$routeParams"],i.prototype={get viewMode(){return this.$routeParams.subItem?"SUBITEM":this.$route.current.$$route.viewMode||"LIST"},setView:function(r){this.onViewSet({viewMode:r})}},n.component("portfolioMirror",{templateUrl:e.name,controller:i,bindings:{group:"<",onViewSet:"&"}}),n});define(rA[312][0],["underscore",rA[51][0],rA[360][0]],function(e,t,i){"use strict";function r(e,t,r,o){i.call(this,e,t,r),this.viewModeService=o,this.isInvestingMode=this.viewModeService.isInvestingMode()}return r.$inject=["infrastruct.services.localStorage","infrastruct.services.sorterFactory","$rootScope","bl.factories.settings.viewMode"],r.prototype={get sortItems(){return this.group.PositionsGroups},setView:function(e){this.onViewSet({viewMode:e})}},r.inheritsFrom(i),{controller:r,bindings:{group:"<",onViewSet:"&"},templateUrl:t.name}});define(rA[51][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/detailedView/mirror/list/list.view.html","text":"<div ng-if=\"!$ctrl.isInvestingMode\" class=\"ui-table-hat portfolio-open-trades all-view\"     data-react-to-scroll     data-active-class-name=\"minimize\"     data-etoro-locale-ns=\"portfolioOpenTrades\">    <ui-table data-etoro-locale-ns=\"portfolioOpenTrades\" class=\"ui-table-hat\"              ui-table-id=\"portfolioOpenTrades\" ui-table-namespace=\"portfolioOpenTrades\"              default-fields=\"units, investedAmount, avgOpen, netProfit, pnl, equity, sell, buy \"              default-mobile-fields=\"investedAmount, netProfit, pnl, equity\">        <ui-table-head class=\"et-layout-sub-sticky-header\">            <b class=\"ui-table-static-cell sortable\" ng-click=\"$ctrl.sort('GroupName')\"               ng-class=\"$ctrl.sortSelectedClassName('GroupName')\">{{_market_}} ({{$ctrl.group.PositionsGroups.length}})                <span class=\"i-ptc-sort-icon sprite\"></span>            </b>            <ui-table-head-slot>                <ui-table-cell name=\"units\" class=\"sortable\" ng-click=\"$ctrl.sort('NetUnitsSort')\"                               ng-class=\"$ctrl.sortSelectedClassName('NetUnitsSort')\">{{_units_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"investedAmount\" class=\"sortable\"                               ng-click=\"$ctrl.sort('TotalFundsInvested || TotalInvestedAmount')\"                               ng-class=\"$ctrl.sortSelectedClassName('TotalFundsInvested || TotalInvestedAmount')\">                    {{_investedAmount_}}<span class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"avgOpen\" class=\"sortable\" ng-click=\"$ctrl.sort('AverageOpenRateSort')\"                               ng-class=\"$ctrl.sortSelectedClassName('AverageOpenRateSort')\">{{_avgOpen_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell name=\"netProfit\" class=\"sortable\"                               ng-click=\"$ctrl.sort('TotalProfitAndClosedPL || TotalProfit')\"                               ng-class=\"$ctrl.sortSelectedClassName('TotalProfitAndClosedPL || TotalProfit')\">                    {{_netProfit_}}<span class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"pnl\" class=\"sortable\" ng-click=\"$ctrl.sort('TotalGain')\"                               ng-class=\"$ctrl.sortSelectedClassName('TotalGain')\">{{_pnl_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"equity\" class=\"sortable\" ng-click=\"$ctrl.sort('Equity')\"                               ng-class=\"$ctrl.sortSelectedClassName('Equity')\">{{_equity_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"sell\" class=\"sortable\" ng-click=\"$ctrl.sort('Instrument.rate.Bid')\"                               ng-class=\"$ctrl.sortSelectedClassName('Instrument.rate.Bid')\">{{_bid_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell name=\"buy\" class=\"sortable\" ng-click=\"$ctrl.sort('Instrument.rate.Ask')\"                               ng-class=\"$ctrl.sortSelectedClassName('Instrument.rate.Ask')\">{{_ask_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell name=\"leverage\" class=\"sortable\" ng-click=\"$ctrl.sort('Leverage')\"                               ng-class=\"$ctrl.sortSelectedClassName('Leverage')\">{{_leverage_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>            </ui-table-head-slot>        </ui-table-head>        <ui-table-body                data-react-to-scroll-container                data-active-class-name=\"minimize\"                class=\"mirror-aggr-view-mode old-angular-scrollable-el scrollable-table-body\">            <div class=\"w-portfolio-table-body-separator\">                <span>{{ $root.t.dynamic('portfolioOpenTradesTable' , 'startedCopyDate') }}</span>                <span>{{ $ctrl.group.StartedCopyDate | formatDate: 'HH:mm' }}</span>            </div>            <a class=\"ui-table-row\"               ng-class=\"{'sell' : item.NetUnits < 0 && !item.MirrorID, 'buy' : item.NetUnits > 0 && !item.MirrorID, 'mirror-pending-close' : item.PendingForClosure }\"               ng-repeat=\"item in $ctrl.group.PositionsGroups\" ng-href=\"{{:: item.Url}}\">                <div class=\"ui-table-static-cell\">                    <div class=\"i-portfolio-table-instrument\">                        <div class=\"i-portfolio-table-instrument\">                            <div class=\"i-portfolio-table-avatar-ph\" ng-class=\"{'pause': item.IsPaused}\">                                    <span class=\"sprite-stats {{:: 'popular-' + item.user.piLevel }}\"                                          ng-if=\":: item.user && item.user.isPi\"></span>                                <img class=\"i-portfolio-table-avatar\" ng-src=\"{{::item.Avatar}}\"                                     alt=\"{{:: item.GroupName}}\">                                <span class=\"pause-ava\" ng-if=\"item.IsPaused\"></span>                            </div>                            <div class=\"i-portfolio-table-name\">                                <div class=\"i-portfolio-table-name-symbol\" automation-id=\"portfolio-table-mirror-name-symbol\">{{:: item.GroupName}}</div>                                <p ng-if=\":: item.user && item.user.allowDisplayFullName\"                                   class=\"i-portfolio-table-hat-fullname\">{{:: item.user.DisplayName}}</p>                                <p ng-if=\":: item.IsStock\" class=\"i-portfolio-table-hat-fullname\">                                    {{                                    ::                                    item.Instrument.DisplayName                                    }}                                </p>                            </div>                        </div>                    </div>                </div>                <ui-table-body-slot>                    <ui-table-cell>                        <div class=\"unit-slot\" automation-id=\"portfolio-table-mirror-units\">                            {{                            item.NetUnits | math:'abs' | unitsOpenClose: item.Instrument : 2 | lowerThanMinimum: undefined : item.Instrument                            }}                            <b class=\"unit-value\" ng-if=\"item.Positions && item.Positions.length\">{{_if(item.NetUnits > 0, '_Buying_', '_Selling_')_}}</b>                        </div>                    </ui-table-cell>                    <ui-table-cell>                        <div class=\"cursor-default\" automation-id=\"portfolio-table-mirror-invested\">{{ item.Amount | currencyparser:2 }}</div>                    </ui-table-cell>                    <ui-table-cell>                        <span ng-if=\":: !!item.Instrument\" automation-id=\"portfolio-table-mirror-avg-open\">{{ item.AverageOpenRate === 0 ? 'N/A' : (item.AverageOpenRate | unitsOpenClose: item.Instrument)}}</span>                    </ui-table-cell>                    <ui-table-cell ng-class=\"{negative: item.TotalGain < 0, positive: item.TotalGain > 0 }\">                        <span class=\"i-ptc-rate-value\" automation-id=\"portfolio-table-mirror-pnl-amount\">{{item.MirrorID > 0 ? item.TotalProfitAndClosedPL : item.TotalProfit | currencyparser:2:true}}</span>                    </ui-table-cell>                    <ui-table-cell                            ng-class=\"{negative: item.TotalGain < 0, positive: item.TotalGain > 0, 'negative warning': item.TotalGain <= -100}\">                        <span class=\"i-ptc-rate-value\" automation-id=\"portfolio-table-mirror-pnl-percent\">{{item.TotalGain | percentageparser | tradingconventions}}</span>                    </ui-table-cell>                    <ui-table-cell class=\"i-portfolio-table-total-title\" automation-id=\"portfolio-table-mirror-value\">                        {{item.Equity | currencyparser:2}}                    </ui-table-cell>                    <ui-table-cell ng-if=\"!!item.Instrument\">                        <div class=\"etoro-sell-button\" data-ui-buysell-buttons=\"\" data-instrument=\"item.Instrument\"                             data-type=\"sell\"                             data-app-source=\"apps-trader-portfolio-detailedView-fund-list-list.view\"></div>                    </ui-table-cell>                    <ui-table-cell ng-if=\"!!item.Instrument\">                        <div class=\"etoro-buy-button\" data-ui-buysell-buttons=\"\" data-instrument=\"item.Instrument\"                             data-type=\"buy\"                             data-app-source=\"apps-trader-portfolio-detailedView-fund-list-list.view\"></div>                    </ui-table-cell>                    <ui-table-cell>X{{item.LeverageAvgSort | tofixed:2 | number | math:'abs'}}</ui-table-cell>                </ui-table-body-slot>                <ui-table-button-cell>                </ui-table-button-cell>            </a>            <div class=\"ui-table-row trade-row\">                <div class=\"ui-table-static-cell\">                    <div class=\"table-first-name e-uppercase cursor-default\">{{_openTradesTotalOpen_}}</div>                </div>                <div class=\"ui-table-body-slot\">                    <div class=\"ui-table-cell  remove-cell-3\"></div>                    <div class=\"ui-table-cell mobile-align-left\">                        <div class=\"rate-value\">{{ $ctrl.group.TotalOpenAmount | currencyparser:2 }}</div>                        <div class=\"rate-subvalue\">{{_investedAmount_}}</div>                    </div>                    <div class=\"ui-table-cell remove-cell-3\"></div>                    <div class=\"ui-table-cell mobile-align-center\"                         ng-class=\"{negative: $ctrl.group.TotalProfit < 0, positive: $ctrl.group.TotalProfit > 0}\">                        <div class=\"rate-value\">{{ $ctrl.group.TotalProfit | currencyparser:2 }}</div>                        <div class=\"rate-subvalue\">{{_netProfit_}}</div>                    </div>                    <div class=\"ui-table-cell mobile-align-center\"                         ng-class=\"{negative: $ctrl.group.TotalOpenGain < 0, positive: $ctrl.group.TotalOpenGain > 0}\">                        <div class=\"rate-value\">{{ $ctrl.group.TotalOpenGain | percentageparser}}</div>                        <div class=\"rate-subvalue\">{{_pnl_}}</div>                    </div>                </div>            </div>            <div class=\"ui-table-row trade-row\">                <div class=\"ui-table-static-cell\">                    <div class=\"table-first-name e-uppercase\">{{_copyHistory_}}</div>                </div>                <div class=\"ui-table-body-slot\">                    <div class=\"ui-table-cell remove-cell-3\"></div>                    <div class=\"ui-table-cell mobile-align-left\">                        <div class=\"rate-value\"                             ng-class=\"{negative: $ctrl.group.TotalFees > 0, positive: $ctrl.group.TotalFees < 0}\">                            {{$ctrl.group.TotalFees | math:'abs' | currencyparser:2:true}}                        </div>                        <div class=\"rate-subvalue\">{{_if($ctrl.group.TotalFees < 0, \"_refunds_\", \"_fees_\")_}}</div>                    </div>                    <div class=\"ui-table-cell remove-cell-3\"></div>                    <div class=\"ui-table-cell mobile-align-center\">                        <div class=\"rate-value\"                             ng-class=\"{negative: $ctrl.group.ClosedPL < 0, positive: $ctrl.group.ClosedPL > 0}\">{{                            $ctrl.group.ClosedPL | currencyparser:2}}                        </div>                        <div class=\"rate-subvalue\">{{_netProfit_}}</div>                    </div>                    <div class=\"ui-table-cell remove-cell-3\"></div>                    <div class=\"ui-table-cell remove-cell-2\"></div>                    <div class=\"ui-table-cell remove-cell-1\"></div>                    <div class=\"ui-table-cell\">                        <a class=\"button-standard table-total-button\" ng-click=\"$ctrl.setView('COPY_HISTORY')\">{{_viewCopyHistory_}}</a>                    </div>                </div>            </div>        </ui-table-body>    </ui-table></div><div ng-if=\"$ctrl.isInvestingMode\" class=\"ui-table-hat portfolio-open-trades all-view\"     data-react-to-scroll     data-active-class-name=\"minimize\"     data-etoro-locale-ns=\"portfolioOpenTrades\">    <ui-table data-etoro-locale-ns=\"portfolioOpenTrades\" class=\"ui-table-hat\"              ui-table-id=\"portfolioOpenTrades\" ui-table-namespace=\"portfolioOpenTrades\"              default-fields=\"units, investedAmount, avgOpen, netProfit, pnl, equity, buy \"              default-mobile-fields=\"investedAmount, netProfit, pnl, equity\">        <ui-table-head class=\"et-layout-sub-sticky-header\">            <b class=\"ui-table-static-cell sortable\" ng-click=\"$ctrl.sort('GroupName')\"               ng-class=\"$ctrl.sortSelectedClassName('GroupName')\">{{_market_}} ({{$ctrl.group.PositionsGroups.length}})                <span class=\"i-ptc-sort-icon sprite\"></span>            </b>            <ui-table-head-slot>                <ui-table-cell name=\"units\" class=\"sortable\" ng-click=\"$ctrl.sort('NetUnitsSort')\"                               ng-class=\"$ctrl.sortSelectedClassName('NetUnitsSort')\">{{_units_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"investedAmount\" class=\"sortable\"                               ng-click=\"$ctrl.sort('TotalFundsInvested || TotalInvestedAmount')\"                               ng-class=\"$ctrl.sortSelectedClassName('TotalFundsInvested || TotalInvestedAmount')\">                    {{_investedAmount_}}<span class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"avgOpen\" class=\"sortable\" ng-click=\"$ctrl.sort('AverageOpenRateSort')\"                               ng-class=\"$ctrl.sortSelectedClassName('AverageOpenRateSort')\">{{_avgOpen_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell name=\"netProfit\" class=\"sortable\"                               ng-click=\"$ctrl.sort('TotalProfitAndClosedPL || TotalProfit')\"                               ng-class=\"$ctrl.sortSelectedClassName('TotalProfitAndClosedPL || TotalProfit')\">                    {{_netProfit_}}<span class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"pnl\" class=\"sortable\" ng-click=\"$ctrl.sort('TotalGain')\"                               ng-class=\"$ctrl.sortSelectedClassName('TotalGain')\">{{_pnl_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"equity\" class=\"sortable\" ng-click=\"$ctrl.sort('Equity')\"                               ng-class=\"$ctrl.sortSelectedClassName('Equity')\">{{_equity_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>                <ui-table-cell name=\"buy\" class=\"sortable\" ng-click=\"$ctrl.sort('Instrument.rate.Ask')\"                               ng-class=\"$ctrl.sortSelectedClassName('Instrument.rate.Ask')\">{{_ask_}}<span                        class=\"sort-arrow sprite\"></span></ui-table-cell>                <ui-table-cell name=\"leverage\" class=\"sortable\" ng-click=\"$ctrl.sort('Leverage')\"                               ng-class=\"$ctrl.sortSelectedClassName('Leverage')\">{{_leverage_}}<span                        class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>            </ui-table-head-slot>        </ui-table-head>        <ui-table-body                data-react-to-scroll-container                data-active-class-name=\"minimize\"                class=\"mirror-aggr-view-mode old-angular-scrollable-el scrollable-table-body\">                   <div class=\"w-portfolio-table-body-separator\">                <span>{{ $root.t.dynamic('portfolioOpenTradesTable' , 'startedCopyDate') }}</span>                <span>{{ $ctrl.group.StartedCopyDate | formatDate: 'HH:mm' }}</span>            </div>            <a class=\"ui-table-row\"               ng-class=\"{'sell' : item.NetUnits < 0 && !item.MirrorID, 'buy' : item.NetUnits > 0 && !item.MirrorID, 'mirror-pending-close' : item.PendingForClosure }\"               ng-repeat=\"item in $ctrl.group.PositionsGroups\" ng-href=\"{{:: item.Url}}\">                <div class=\"ui-table-static-cell\">                    <div class=\"i-portfolio-table-instrument\">                        <div class=\"i-portfolio-table-instrument\">                            <div class=\"i-portfolio-table-avatar-ph\" ng-class=\"{'pause': item.IsPaused}\">                                    <span class=\"sprite-stats {{:: 'popular-' + item.user.piLevel }}\"                                          ng-if=\":: item.user && item.user.isPi\"></span>                                <img class=\"i-portfolio-table-avatar\" ng-src=\"{{::item.Avatar}}\"                                     alt=\"{{:: item.GroupName}}\">                                <span class=\"pause-ava\" ng-if=\"item.IsPaused\"></span>                            </div>                            <div class=\"i-portfolio-table-name\">                                <div class=\"i-portfolio-table-name-symbol\">{{:: item.GroupName}}</div>                                <p ng-if=\":: item.user && item.user.allowDisplayFullName\"                                   class=\"i-portfolio-table-hat-fullname\">{{:: item.user.DisplayName}}</p>                                <p ng-if=\":: item.IsStock\" class=\"i-portfolio-table-hat-fullname\">                                    {{                                    ::                                    item.Instrument.DisplayName                                    }}                                </p>                            </div>                        </div>                    </div>                </div>                <ui-table-body-slot>                    <ui-table-cell>                        <div class=\"unit-slot\">                            {{ item.NetUnits | math:'abs' | unitsOpenClose: item.Instrument : 2 | lowerThanMinimum: undefined : item.Instrument }}                            <b class=\"unit-value\" ng-if=\"item.Positions && item.Positions.length\">{{_if(item.NetUnits > 0, '_Buying_', '_Selling_')_}}</b>                        </div>                    </ui-table-cell>                    <ui-table-cell>                        <div class=\"cursor-default\">{{ item.Amount | currencyparser:2 }}</div>                    </ui-table-cell>                    <ui-table-cell>                        <span ng-if=\":: !!item.Instrument\">{{ item.AverageOpenRate === 0 ? 'N/A' : (item.AverageOpenRate | unitsOpenClose: item.Instrument)}}</span>                    </ui-table-cell>                    <ui-table-cell ng-class=\"{negative: item.TotalGain < 0, positive: item.TotalGain > 0 }\">                        <span class=\"i-ptc-rate-value\">{{item.MirrorID > 0 ? item.TotalProfitAndClosedPL : item.TotalProfit | currencyparser:2:true}}</span>                    </ui-table-cell>                    <ui-table-cell                            ng-class=\"{negative: item.TotalGain < 0, positive: item.TotalGain > 0, 'negative warning': item.TotalGain <= -100}\">                        <span class=\"i-ptc-rate-value\">{{item.TotalGain | percentageparser | tradingconventions}}</span>                    </ui-table-cell>                    <ui-table-cell class=\"i-portfolio-table-total-title\">                        {{item.Equity | currencyparser:2}}                    </ui-table-cell>                    <ui-table-cell ng-if=\"!!item.Instrument\">                        <trade-button ng-if=\":: !!item.Instrument\"                                      instrument=\":: item.Instrument\"                                      btn-class=\"button-standard button-blue head-action-button portfolio-overview-list-view-investing-mode \"                                      app-source=\"apps-trader-portfolio-detailedView-fund-list-list.view\"                                      support-restriction=\"false\"                                      to-check-mode=\"true\">                        </trade-button>                    </ui-table-cell>                    <ui-table-cell>X{{item.LeverageAvgSort | tofixed:2 | number | math:'abs'}}</ui-table-cell>                </ui-table-body-slot>                <ui-table-button-cell>                </ui-table-button-cell>            </a>            <div class=\"ui-table-row trade-row\">                <div class=\"ui-table-static-cell\">                    <div class=\"table-first-name e-uppercase cursor-default\">{{_openTradesTotalOpen_}}</div>                </div>                <div class=\"ui-table-body-slot\">                    <div class=\"ui-table-cell  remove-cell-3\"></div>                    <div class=\"ui-table-cell mobile-align-left\">                        <div class=\"rate-value\">{{ $ctrl.group.TotalOpenAmount | currencyparser:2 }}</div>                        <div class=\"rate-subvalue\">{{_investedAmount_}}</div>                    </div>                    <div class=\"ui-table-cell remove-cell-3\"></div>                    <div class=\"ui-table-cell mobile-align-center\"                         ng-class=\"{negative: $ctrl.group.TotalProfit < 0, positive: $ctrl.group.TotalProfit > 0}\">                        <div class=\"rate-value\">{{ $ctrl.group.TotalProfit | currencyparser:2 }}</div>                        <div class=\"rate-subvalue\">{{_netProfit_}}</div>                    </div>                    <div class=\"ui-table-cell mobile-align-center\"                         ng-class=\"{negative: $ctrl.group.TotalOpenGain < 0, positive: $ctrl.group.TotalOpenGain > 0}\">                        <div class=\"rate-value\">{{ $ctrl.group.TotalOpenGain | percentageparser}}</div>                        <div class=\"rate-subvalue\">{{_pnl_}}</div>                    </div>                </div>            </div>            <div class=\"ui-table-row trade-row\">                <div class=\"ui-table-static-cell\">                    <div class=\"table-first-name e-uppercase\">{{_copyHistory_}}</div>                </div>                <div class=\"ui-table-body-slot\">                    <div class=\"ui-table-cell remove-cell-3\"></div>                    <div class=\"ui-table-cell mobile-align-left\">                        <div class=\"rate-value\"                             ng-class=\"{negative: $ctrl.group.TotalFees > 0, positive: $ctrl.group.TotalFees < 0}\">                            {{$ctrl.group.TotalFees | math:'abs' | currencyparser:2:true}}                        </div>                        <div class=\"rate-subvalue\">{{_if($ctrl.group.TotalFees < 0, \"_refunds_\", \"_fees_\")_}}</div>                    </div>                    <div class=\"ui-table-cell remove-cell-3\"></div>                    <div class=\"ui-table-cell mobile-align-center\">                        <div class=\"rate-value\"                             ng-class=\"{negative: $ctrl.group.ClosedPL < 0, positive: $ctrl.group.ClosedPL > 0}\">{{                            $ctrl.group.ClosedPL | currencyparser:2}}                        </div>                        <div class=\"rate-subvalue\">{{_netProfit_}}</div>                    </div>                    <div class=\"ui-table-cell remove-cell-3\"></div>                    <div class=\"ui-table-cell remove-cell-2\"></div>                    <div class=\"ui-table-cell\">                        <a class=\"button-standard table-total-button\" ng-click=\"$ctrl.setView('COPY_HISTORY')\">{{_viewCopyHistory_}}</a>                    </div>                </div>            </div>        </ui-table-body>    </ui-table></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[311][0],["underscore",rA[50][0],rA[360][0]],function(t,o,e){"use strict";function i(t,o,i,r,s,n,u,p){var c=this;this.$scope=s,this.$location=o,s.appSource="apps-trader-portfolio-mirror-detailed-detailed-list.view",this.viewModeService=u,this.isInvestingMode=this.viewModeService.isInvestingMode(),this.subGroupName=t.subItem,e.call(this,i,r,n),s.cancelClosePosition=function(t,o,e){o?s.closeOrder(t,void 0,void 0,s.appSource,e):t.cancelCloseExitMarketOrder(s.appSource)},s.executeDefault=function(t,o){t.isExecutionBlocked()||!t||c.group.MirrorID&&c.group.PendingForClosure||t.isClosedRequested||(t.isPendingClose||t.isPartialPendingClose?s.cancelClosePosition(t,!0,o):c.group.MirrorID?t.Instrument&&t.Instrument.AllowClosePosition&&s.closePosition(t,s.appSource,o):s.updatePosition(t,void 0,s.appSource))},p.mixInto(s)}return i.$inject=["$routeParams","$location","infrastruct.services.localStorage","infrastruct.services.sorterFactory","$scope","$rootScope","bl.factories.settings.viewMode","apps.trader.portfolio.portfolioActionsEvents"],i.prototype={get sortItems(){return this.subGroup?this.subGroup.Positions:null},get subGroup(){return this.group?this.group.getSubGroupByName(this.subGroupName):null},get orders(){return this.subGroup.Orders.filter(function(t){return"ExitOrder"!==t.SubType})}},i.prototype.$onInit=function(){return this.subGroup?void(this.subGroupWatcher=this.$scope.$watch(function(){return this.subGroup?this.subGroup.Orders.length+this.subGroup.Positions.length:0}.bind(this),function(t){0===t&&this.$scope.$evalAsync(function(){var t=this.group.PositionsGroups.length;if(this.group){var o=this.group.Url,e="/portfolio";this.$location.path(t>0?o:e)}}.bind(this))}.bind(this))):void this.$location.path("/portfolio")},i.prototype.$onDestroy=function(){this.subGroupWatcher&&this.subGroupWatcher()},i.inheritsFrom(e),{bindings:{group:"<"},controller:i,templateUrl:o.name}});define(rA[50][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/detailedView/mirror/detailed/detailed-list.view.html","text":"<ui-table class=\"ui-table-hat button-count-2\"          ui-table-id=\"portfolioDetailedView\" ui-table-namespace=\"portfolioOpenTradesTableHead\"          default-fields=\"amount, unit, open, current, sl, tp, plDollars, plPercentage\"          default-mobile-fields=\"amount, current, plDollars, plPercentage\"          data-etoro-automation-id=\"open-trades-table\">    <ui-table-head data-etoro-locale-ns=\"portfolioOpenTradesTableHead\" class=\"ui-table-head\"                   data-etoro-automation-id=\"open-trades-table-headers-container\">        <b data-etoro-automation-id=\"open-trades-table-header-action\"           class=\"ui-table-static-cell sortable\" ng-click=\"$ctrl.sort('OpenDateTime')\"           ng-class=\"$ctrl.sortSelectedClassName('OpenDateTime')\">{{_action_}} ({{$ctrl.subGroup.Positions.length +            $ctrl.orders.length}})            <span class=\"i-ptc-sort-icon sprite\"></span>        </b>        <ui-table-head-slot>            <ui-table-cell data-etoro-automation-id=\"open-trades-table-header-amount\" name=\"amount\" class=\"sortable\"                           ng-click=\"$ctrl.sort('Amount')\" ng-class=\"$ctrl.sortSelectedClassName('Amount')\">{{_amount_}}<span                    class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>            <ui-table-cell data-etoro-automation-id=\"open-trades-table-header-units\" name=\"unit\" class=\"sortable\"                           ng-click=\"$ctrl.sort('Units')\" ng-class=\"$ctrl.sortSelectedClassName('Units')\">{{_unit_}}<span                    class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>            <ui-table-cell data-etoro-automation-id=\"open-trades-table-header-open-rate\" name=\"open\" class=\"sortable\"                           ng-click=\"$ctrl.sort('OpenRate')\" ng-class=\"$ctrl.sortSelectedClassName('OpenRate')\">{{_open_}}<span                    class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>            <ui-table-cell data-etoro-automation-id=\"open-trades-table-header-pip-change\" name=\"pipChange\"                           class=\"sortable\" ng-click=\"$ctrl.sort('Change')\" ng-class=\"$ctrl.sortSelectedClassName('Change')\"><span                    class=\"e-ptc-icon change sprite\"></span><span class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>            <ui-table-cell data-etoro-automation-id=\"open-trades-table-header-stop-loss-rate\" name=\"sl\" class=\"sortable\"                           ng-click=\"$ctrl.sort('StopLossRate')\" ng-class=\"$ctrl.sortSelectedClassName('StopLossRate')\">                {{_sl_}}<span class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>            <ui-table-cell data-etoro-automation-id=\"open-trades-table-header-take-profit-rate\" name=\"tp\"                           class=\"sortable\" ng-click=\"$ctrl.sort('TakeProfitRate')\"                           ng-class=\"$ctrl.sortSelectedClassName('TakeProfitRate')\">{{_tp_}}<span                    class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>            <ui-table-cell data-etoro-automation-id=\"open-trades-table-header-profit-dollar\" name=\"plDollars\"                           class=\"sortable\" ng-click=\"$ctrl.sort('Profit')\" ng-class=\"$ctrl.sortSelectedClassName('Profit')\">                {{_plDollars_}}<span class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>            <ui-table-cell data-etoro-automation-id=\"open-trades-table-header-gain\" name=\"plPercentage\" class=\"sortable\"                           ng-click=\"$ctrl.sort('Gain')\" ng-class=\"$ctrl.sortSelectedClassName('Gain')\">{{_plPercentage_}}<span                    class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>            <ui-table-cell data-etoro-automation-id=\"open-trades-table-header-last-rate\" name=\"current\" class=\"sortable\"                           ng-click=\"$ctrl.sort('CurrentRate')\" ng-class=\"$ctrl.sortSelectedClassName('CurrentRate')\">                {{_current_}}<span class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>            <ui-table-cell data-etoro-automation-id=\"open-trades-table-header-leverage\" name=\"leverage\" class=\"sortable\"                           ng-click=\"$ctrl.sort('Leverage')\" ng-class=\"$ctrl.sortSelectedClassName('Leverage')\">{{_leverage_}}<span                    class=\"i-ptc-sort-icon sprite\"></span></ui-table-cell>            <ui-table-cell data-etoro-automation-id=\"open-trades-table-header-equity\" name=\"equity\" class=\"sortable\"                           ng-click=\"$ctrl.sort('Equity')\" ng-class=\"$ctrl.sortSelectedClassName('Equity')\">{{_equity_}}<span                    class=\"sort-arrow sprite\"></span></ui-table-cell>            <ui-table-cell data-etoro-automation-id=\"open-trades-table-header-fees\" name=\"fees\" class=\"sortable\"                           ng-click=\"$ctrl.sort('TotalFees')\" ng-class=\"$ctrl.sortSelectedClassName('TotalFees')\">{{_fees_}}<span                    class=\"sort-arrow sprite\"></span></ui-table-cell>            <ui-table-cell data-etoro-automation-id=\"open-trades-table-header-stop-loss-amount\" name=\"slAmount\"                           class=\"sortable\" ng-click=\"$ctrl.sort('StopLossAmount')\"                           ng-class=\"$ctrl.sortSelectedClassName('StopLossAmount')\">{{_slAmount_}}<span                    class=\"sort-arrow sprite\"></span></ui-table-cell>            <ui-table-cell data-etoro-automation-id=\"open-trades-table-header-take-profit-amount\" name=\"tpAmount\"                           class=\"sortable\" ng-click=\"$ctrl.sort('TakeProfitAmount')\"                           ng-class=\"$ctrl.sortSelectedClassName('TakeProfitAmount')\">{{_tpAmount_}}<span                    class=\"sort-arrow sprite\"></span></ui-table-cell>            <ui-table-cell data-etoro-automation-id=\"open-trades-table-header-stop-loss-percent\" name=\"slPercent\"                           class=\"sortable\" ng-click=\"$ctrl.sort('StopLossPercent')\"                           ng-class=\"$ctrl.sortSelectedClassName('StopLossPercent')\">{{_slPercent_}}<span                    class=\"sort-arrow sprite\"></span></ui-table-cell>            <ui-table-cell data-etoro-automation-id=\"open-trades-table-header-take-profit-percent\" name=\"tpPercent\"                           class=\"sortable\" ng-click=\"$ctrl.sort('TakeProfitPercent')\"                           ng-class=\"$ctrl.sortSelectedClassName('TakeProfitPercent')\">{{_tpPercent_}}<span                    class=\"sort-arrow sprite\"></span></ui-table-cell>        </ui-table-head-slot>    </ui-table-head>    <ui-table-body            data-etoro-automation-id=\"open-trades-table-body-container\"            class=\"mobile-ui old-angular-scrollable-el\"            data-etoro-locale-ns=\"portfolioOpenTradesTable\"            data-react-to-scroll-container            data-active-class-name=\"minimize\"            ui-swipe=\"\">        <div data-etoro-automation-id=\"open-trades-table-row-{{:: position.Instrument.Name}}\"             class=\"ui-table-row-container\"             ui-swipe-actions=\".ui-table-row\"             ui-swipe-menu-left=\".ui-table-actions-left\"             ui-swipe-menu-right=\".ui-table-actions-right\"             ui-swipe-is-disabled=\"{{ position.isPendingClose }}\"             ui-swipe-swipeleft-action=\"!position.isPendingClose && !position.isClosedRequested ? closePosition(position, 'Portfolio Overview - Swipe Action', false) : null\"             ng-repeat=\"position in $ctrl.subGroup.Positions track by position.PositionID\">            <div class=\"ui-table-actions-right swipe-action-button one-action one-action-red\"                 data-etoro-locale-ns=\"swipeActions\">                <div class=\"swipe-action-button\" ng-if=\"!position.isPendingClose && !position.isClosedRequested\"                     ng-click=\"closePosition(position, appSource);\">                    <span class=\"swipe-icon-container\">                        <span class=\"swipe-icon swipe-close-icon\"></span>                        {{ :: $root.t.dynamic('swipeActions', 'closeTrade') }}                    </span>                </div>                <div class=\"swipe-action-button\"                     ng-if=\"position.isPendingClose && !position.isClosedRequested && !position.isExecutionBlocked()\"                     ng-click=\"cancelClosePosition(position, false);\">                   <span class=\"swipe-icon-container\">                        <span class=\"swipe-icon swipe-close-icon\"></span>                        {{_cancelCloseTrade_}}                    </span>                </div>            </div>            <div class=\"ui-table-row\"                 ng-class=\"{'mirror-pending-close' : position.isPendingClose || position.isClosedRequested}\"                 data-id=\"{{:: position.PositionID}}\">                <div data-etoro-automation-id=\"portfolio-open-trades-table-body-cell-container-action\"                     class=\"ui-table-static-cell\" ng-click=\"executeDefault(position)\">                    <div class=\"table-avatar-ph-inner\">                        <img data-etoro-automation-id=\"open-trades-table-body-cell-action-avatar\"                             class=\"avatar\" ng-src=\"{{:: position.Instrument.Avatars['default']}}\" alt=\"\">                    </div>                    <div class=\"table-static-inner-cell-info\">                        <div data-etoro-automation-id=\"open-trades-table-body-cell-action-text-container\"                             class=\"table-first-name\" ng-class=\"::{'is-cfd-tag' : !position.IsSettled}\">                            <span data-etoro-automation-id=\"open-trades-table-body-cell-action-buy\" class=\"e-uppercase\"                                  ng-if=\":: position.IsBuy\">{{_buyButton_}}</span>                            <span data-etoro-automation-id=\"open-trades-table-body-cell-action-sell\" class=\"e-uppercase\"                                  ng-if=\":: !position.IsBuy\">{{_sellButton_}}</span>                            <span data-etoro-automation-id=\"open-trades-table-body-cell-action-market-name\">{{:: position.Instrument.Name}}</span>                            <span class=\"portfolio-redeem-pending\"                                  ng-if=\"position.isRedeemPending && !position.isPendingClose\">{{:: $root.t.dynamic('portfolioUpdatePosition',((model.regulationId===4)||(model.regulationId===10)) ? 'pendingRedeem.typeB' : 'pendingRedeem.typeA')}}</span>                            <span class=\"portfolio-redeem-pending\"                                  ng-if=\"position.isRedeemPending && position.isPendingClose\">{{:: $root.t.dynamic('portfolioUpdatePosition', ((model.regulationId===4)||(model.regulationId===10)) ? 'pendingRedeem.typeB' : 'pendingRedeem.typeA' )}}</span>                        </div>                        <span data-etoro-automation-id=\"open-trades-table-body-cell-action-pending\"                              class=\"table-label-pending\"                              ng-if=\"(position.isPendingClose && !position.isRedeemPending && !position.isPartialPendingClose) || position.isClosedRequested\">{{_pendingClose_}}</span>                        <span data-etoro-automation-id=\"open-trades-table-body-cell-action-pending\"                              class=\"table-label-pending\"                              ng-if=\"(position.isPartialPendingClose && !position.isRedeemPending)\">{{_PartialPendingClose_}}</span>                        <span data-etoro-automation-id=\"open-trades-table-body-cell-action-open-date\"                              class=\"table-last-name\" ng-if=\"!position.isPendingClose && !position.isClosedRequested && !position.isPartialPendingClose\">                        {{:: position.OpenDateTime | formatDate:'HH:mm' }}                    </span>                    </div>                </div>                <ui-table-body-slot>                    <ui-table-cell data-etoro-automation-id=\"portfolio-open-trades-table-body-cell-container-amount\"                                   ng-click=\"executeDefault(position, true)\">                    <span data-etoro-automation-id=\"open-trades-table-body-cell-amount\">                        {{ position.Amount | currencyparser:2 }}                    </span>                    </ui-table-cell>                    <ui-table-cell data-etoro-automation-id=\"portfolio-open-trades-table-body-cell-container-units\"                                   ng-click=\"executeDefault(position, true)\">                    <span data-etoro-automation-id=\"open-trades-table-body-cell-units\">                        {{ position.Units | unitsOpenClose: position.Instrument : 2 | lowerThanMinimum: undefined : position.Instrument}}                    </span>                    </ui-table-cell>                    <ui-table-cell data-etoro-automation-id=\"portfolio-open-trades-table-body-cell-container-open-rate\"                                   ng-click=\"executeDefault(position, true)\">                    <span data-etoro-automation-id=\"open-trades-table-body-cell-open-rate\">                        {{ position.OpenRate | unitsOpenClose: position.Instrument }}                    </span>                    </ui-table-cell>                    <ui-table-cell data-etoro-automation-id=\"portfolio-open-trades-table-body-cell-container-pip-change\"                                   ng-class=\"{negative: position.Change < 0, positive: position.Change > 0}\">                    <span data-etoro-automation-id=\"open-trades-table-body-cell-pip-change\">                        {{!!position.isClosedRequested ? \"\" :position.Change}}                    </span>                    </ui-table-cell>                    <ui-table-cell                            data-etoro-automation-id=\"portfolio-open-trades-table-body-cell-container-stop-loss-rate\"                            ng-click=\"updatePosition(position, 0, appSource);\">                    <span data-etoro-automation-id=\"open-trades-table-body-cell-stop-loss-rate\"                          class=\"num-outline\"                          ng-class=\"{                          'dashed-border' : position.IsTslEnabled,                          'positive-border' : position.IsSlApproachingPositive,                          'negative-border' : position.IsSlApproachingNegative ,                          'no-sl-tp': position.isNoSL                          }\">                        {{position.isNoSL ? '-----': (position.StopLossRate | unitsOpenClose: position.Instrument : 5 : true | nozero:'-----') }}                    </span>                    </ui-table-cell>                    <ui-table-cell                            data-etoro-automation-id=\"portfolio-open-trades-table-body-cell-container-take-profit-rate\"                            ng-click=\"updatePosition(position, 2, appSource);\">                    <span data-etoro-automation-id=\"open-trades-table-body-cell-take-profit-rate\"                          class=\"num-outline\"                          ng-class=\"{                          'positive-border' : position.IsTpApproachingPositive,                          'negative-border' : position.IsTpApproachingNegative,                          'no-sl-tp': position.isNoTP                          }\">                        {{position.isNoTP ? '-----': (position.TakeProfitRate | unitsOpenClose: position.Instrument : 5 : true | nozero:'-----') }}                    </span>                    </ui-table-cell>                    <ui-table-cell                            data-etoro-automation-id=\"portfolio-open-trades-table-body-cell-container-profit-dollar\"                            ng-click=\"executeDefault(position, true)\"                            ng-class=\"{negative: position.Gain < 0, positive: position.Gain > 0}\">                    <span data-etoro-automation-id=\"open-trades-table-body-cell-profit-dollar\" class=\"i-ptc-rate-value\">                        {{!!position.isClosedRequested ? \"\" : position.Profit| currencyparser:2:true}}                    </span>                    </ui-table-cell>                    <ui-table-cell data-etoro-automation-id=\"portfolio-open-trades-table-body-cell-container-gain\"                                   ng-click=\"executeDefault(position, true)\"                                   ng-class=\"{negative: position.Gain < 0, positive: position.Gain > 0}\">                    <span data-etoro-automation-id=\"open-trades-table-body-cell-gain\" class=\"i-ptc-rate-value\">                        {{!!position.isClosedRequested ? \"\" : position.Gain | percentageparser | tradingconventions}}                    </span>                    </ui-table-cell>                    <ui-table-cell data-etoro-automation-id=\"portfolio-open-trades-table-body-cell-container-last-rate\"                                   ng-class=\"{'negative' :  position.LastRateChange < 0,'positive' : position.LastRateChange > 0}\">                    <span data-etoro-automation-id=\"open-trades-table-body-cell-last-rate\"                          class=\"current-num-outline\" ng-if=\"!position.isClosedRequested\"                          ng-click=\"openPosition(position.Instrument, position.IsBuy, $event, true, null, null, null, false, appSource)\">                        {{!!position.isClosedRequested ? \"\" : position.CurrentRate | formatRate: position.Instrument}}                    </span>                    </ui-table-cell>                    <ui-table-cell data-etoro-automation-id=\"portfolio-open-trades-table-body-cell-container-leverage\"                                   ng-click=\"executeDefault(position, true)\">                    <span data-etoro-automation-id=\"open-trades-table-body-cell-leverage\">                        X{{:: position.Leverage}}                    </span>                    </ui-table-cell>                    <ui-table-cell data-etoro-automation-id=\"portfolio-open-trades-table-body-cell-container-equity\">                    <span data-etoro-automation-id=\"open-trades-table-body-cell-equity\">                        {{position.Equity | currencyparser:2}}                    </span>                    </ui-table-cell>                    <ui-table-cell data-etoro-automation-id=\"portfolio-open-trades-table-body-cell-container-fees\"                                   ng-click=\"executeDefault(position, true)\">                    <span data-etoro-automation-id=\"open-trades-table-body-cell-fees\">                        {{ position.TotalFees | fees  | currencyparser:2:true}}                    </span>                    </ui-table-cell>                    <ui-table-cell                            data-etoro-automation-id=\"portfolio-open-trades-table-body-cell-container-stop-loss-amount\"                            ng-click=\"updatePosition(position, 0,appSource);\">                    <span data-etoro-automation-id=\"open-trades-table-body-cell-stop-loss-amount\"                          class=\"num-outline\"                          ng-class=\"{                          'dashed-border' : position.IsTslEnabled,                          'positive-border' : position.IsSlApproachingPositive,                          'negative-border' : position.IsSlApproachingNegative,                          'no-sl-tp': position.isNoSL                          }\">                        {{position.isNoSL ? '-----':  position.StopLossAmount | currencyparser:2}}                    </span>                    </ui-table-cell>                    <ui-table-cell                            data-etoro-automation-id=\"portfolio-open-trades-table-body-cell-container-take-profit-amount\"                            ng-click=\"updatePosition(position, 2,appSource);\">                    <span data-etoro-automation-id=\"open-trades-table-body-cell-take-profit-amount\"                          class=\"num-outline\"                          ng-class=\"{                          'positive-border' : position.IsTpApproachingPositive,                          'negative-border' : position.IsTpApproachingNegative,                          'no-sl-tp': position.isNoTP                          }\">                        {{position.isNoTP ? '-----':  position.TakeProfitAmount | currencyparser:2}}                    </span>                    </ui-table-cell>                    <ui-table-cell                            data-etoro-automation-id=\"portfolio-open-trades-table-body-cell-container-stop-loss-percent\"                            ng-click=\"updatePosition(position, 0,appSource);\">                    <span data-etoro-automation-id=\"open-trades-table-body-cell-stop-loss-percent\"                          class=\"num-outline\"                          ng-class=\"{                          'dashed-border' : position.IsTslEnabled,                          'positive-border' : position.IsSlApproachingPositive,                          'negative-border' : position.IsSlApproachingNegative,                          'no-sl-tp': position.isNoSL                          }\">                        {{position.isNoSL ? '-----':  position.StopLossPercent | percentageparser}}                    </span>                    </ui-table-cell>                    <ui-table-cell                            data-etoro-automation-id=\"portfolio-open-trades-table-body-cell-container-profit-percent\"                            ng-click=\"updatePosition(position, 2,appSource);\">                    <span data-etoro-automation-id=\"open-trades-table-body-cell-take-profit-percent\"                          class=\"num-outline\"                          ng-class=\"{                          'positive-border' : position.IsTpApproachingPositive,                          'negative-border' : position.IsTpApproachingNegative,                          'no-sl-tp': position.isNoTP                          }\">                        {{position.isNoTP ? '-----':  position.TakeProfitPercent | percentageparser}}                    </span>                    </ui-table-cell>                </ui-table-body-slot>                <ui-table-button-cell                        data-etoro-automation-id=\"open-trades-table-body-cell-user-actions-container\"                        ng-if=\"!$ctrl.group.PendingForClosure && (!position.isRedeemPending || !position.isPendingClose)\"                        class=\"cancel-close-ui-table-button-cell\">                    <div data-etoro-automation-id=\"open-trades-table-body-cell-user-actions-close-button\"                         ng-if=\"!position.isRedeemPending && !position.isPendingClose && !position.isPartialPendingClose && !position.isClosedRequested && position.Instrument.AllowClosePosition\"                         class=\"e-btn light i-ptc-action stop\" ng-click=\"closePosition(position, appSource);\">                        <span class=\"i-ptc-action-icon sprite\"></span>                    </div>                    <div data-etoro-automation-id=\"open-trades-table-body-cell-user-actions-pending\"                         ng-if=\"!position.isRedeemPending && (position.isPendingClose || position.isPartialPendingClose) && !position.isClosedRequested && !position.isExecutionBlocked()\"                         class=\"e-btn light  stop cancel-close-btn\" ng-click=\"cancelClosePosition(position, false);\">                        {{_cancelCloseButton_}}                    </div>                    <div data-etoro-automation-id=\"portfolio-manual-trades-table-body-pending-close\"                         ng-if=\"position.isRedeemPending && !position.isPendingClose\" class=\"e-btn light  stop cancel-close-btn\"                         ng-click=\"cancelRedeem(position);\">                        {{_cancelCloseButton_}}                    </div>                </ui-table-button-cell>            </div>        </div>        <div data-etoro-automation-id=\"open-trades-table-row-order-{{:: order.Instrument.Name}}\"             class=\"ui-table-row-container\"             ui-swipe-actions=\".ui-table-row\"             ui-swipe-menu-right=\".ui-table-actions-right\"             ui-swipe-swipeleft-action=\"closeOrder(order, undefined, undefined, appSource)\"             ng-repeat=\"order in $ctrl.orders\">            <div class=\"ui-table-row\"                 ng-class=\"{ 'mirror-pending-close': order.isEntryOrder }\" data-id=\"{{:: order.PositionID}}\">                <div class=\"ui-table-static-cell\" ng-click=\"closeOrder(order, undefined, undefined, appSource)\">                    <div class=\"table-avatar-ph-inner\">                        <img class=\"avatar\" ng-src=\"{{:: order.Instrument.Avatars['default']}}\" al alt=\"\">                    </div>                    <div class=\"table-static-inner-cell-info\">                        <div class=\"table-first-name\">                            <span ng-if=\":: order.IsBuy\">{{_buyButton_}}</span>                            <span ng-if=\":: !order.IsBuy\">{{_sellButton_}}</span>                            {{:: order.Instrument.Name}}                        </div>                        <div class=\"table-label-pending\">{{_entryOpen_}}</div>                    </div>                </div>                <ui-table-button-cell ng-if=\"!$ctrl.subGroup.PendingForClosure\">                    <a class=\"e-btn light i-ptc-action stop\"                       ng-click=\"closeOrder(order, undefined, undefined, appSource)\">                        <span class=\"i-ptc-action-icon sprite\"></span>                    </a>                </ui-table-button-cell>            </div>        </div>        <div data-etoro-automation-id=\"open-trades-instrument-summary-container\"             class=\"ui-table-row new-trade\" >            <div  ng-if=\"!$ctrl.isInvestingMode\" class=\"table-new-trade-cell-info\">                <div data-etoro-automation-id=\"open-trades-instrument-summary-new-trade-label\"                     class=\"table-first-name e-uppercase\">                    {{_btn_newTrade_}}                </div>            </div>            <div  ng-if=\"$ctrl.isInvestingMode\" class=\"table-new-trade-cell-info\">                <div data-etoro-automation-id=\"open-trades-instrument-summary-new-trade-label\"                     class=\"table-first-name e-uppercase\">                    {{ :: $root.t.dynamic('portfolioOpenTradesInvestMode', 'buy',this) }}                </div>            </div>            <div ng-if=\"!$ctrl.isInvestingMode\" class=\"etoro-horizontal etoro-float-clear\">                <div data-etoro-automation-id=\"open-trades-instrument-summary-sell-button\"                     class=\"etoro-sell-button\" data-ui-buysell-buttons=\"\" data-instrument=\"$ctrl.subGroup.Instrument\" data-type=\"sell\" data-app-source = \"apps-trader-portfolio-detailedView-openTrades-openTrades.view\"></div>                <div data-etoro-automation-id=\"open-trades-instrument-summary-buy-button\"                     class=\"etoro-buy-button\" data-ui-buysell-buttons=\"\" data-instrument=\"$ctrl.subGroup.Instrument\" data-type=\"buy\" data-app-source = \"apps-trader-portfolio-detailedView-openTrades-openTrades.view\"></div>            </div>            <div ng-if=\"$ctrl.isInvestingMode\" class=\"etoro-horizontal etoro-float-clear\">                <trade-button data-etoro-automation-id=\"open-trades-instrument-summary-buy-button-investing-mode\"                              instrument=\":: $ctrl.subGroup.Instrument\"                              btn-class=\"button-standard button-blue head-action-button open-trades-buy-investing-mode right\"                              app-source=\"apps-trader-portfolio-overview-list-list.view\"                              support-restriction=\"false\"                              to-check-mode=\"true\">                </trade-button>            </div>        </div>    </ui-table-body></ui-table>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[52][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/trader/portfolio/detailedView/mirror/mirror.view.html","text":"<mirror-positions-groups group=\"$ctrl.group\" ng-if=\"$ctrl.viewMode === 'LIST'\" on-view-set=\"$ctrl.setView(viewMode)\"></mirror-positions-groups><mirror-positions-group-items group=\"$ctrl.group\" ng-if=\"$ctrl.viewMode === 'SUBITEM'\"></mirror-positions-group-items>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[442][0],["angular","underscore","moduleDefiner",rA[308][0]],function(e,r,p,l){var t=p("priceAlertsApp",[]);return l(t,"apps.priceAlerts.openPriceAlertCtrl"),t});define(rA[308][0],["underscore","moduleDefiner",rA[445][0]],function(e,t){"use strict";function n(e,t,n,o,i,r){function a(t,o,i){o=o||{},e.model.instrument=t,e.model.actionString=i||"Portfolio";var r=e.model.instrument.lastPrice();c(r);var a=n.getPriceAlert(t.InstrumentID);e.model.inEditMode=!!a;var m={moneyAmount:e.model.inEditMode?a.TargetPrice:null};l(m)}function l(t){if(g.amount.inRateMode=t.inRateMode||!0,t&&t.moneyAmount)u(g,e.model.viewRate,null,t.moneyAmount,!0);else{var n=e.model.stopLossModel.defaultPriceAlert;u(g,e.model.viewRate,null,n-100,!1)}}function c(t){isNaN(t)||(e.model.viewRate=t,e.model.actionDisabled=g.amount.moneyAmount===e.model.viewRate||g.amount.moneyAmount===g.range.min,P||d(g.amount.inRateMode,null,null))}function m(){g.amount.inRateMode=!g.amount.inRateMode}function u(t,n,o,i,r){var a=r?t.amount.moneyAmount:t.amount.percentAmount,l={min:r?t.range.min:t.range.minPercent},c=r?.005*n:.5,m=0;"+"===o?m=c:"-"===o&&(m=-1*c),null!==i&&void 0!==i?a=r?i:i+100:a+=m,a<l.min&&(a=l.min);var u=1>a?e.model.instrument._Precision:e.model.instrument.AboveDollarPrecision;r?(t.amount.percentAmount=toFixed(a/n*100,1),t.amount.moneyAmount=toFixed(a,u)):(t.amount.percentAmount=toFixed(a,1),t.amount.moneyAmount=toFixed(n*(a/100),u)),t.amount.percentDisplayAmount=t.amount.percentAmount-100}function s(){e.closeThisDialog(),r.sendOpenPriceAlert(e.model,"Exit")}function d(t,n,o){e.$evalAsync(function(){u(g,e.model.viewRate,n,o,t),e.model.actionDisabled=g.amount.moneyAmount===e.model.viewRate||g.amount.moneyAmount===g.range.min})}function A(){n.createAlert(e.model.instrument.InstrumentID,e.model.viewRate,g.amount.moneyAmount).then(function(){i.get("bl.factories.watchlist.watchlistNotificationsService").TradeItemPriceAlertSetSuccess()})["catch"](function(){i.get("bl.factories.watchlist.watchlistNotificationsService").TradeItemPriceAlertFailed()}),v.eventTrack("Set Price Alert",{Symbol:e.model.instrument.SymbolFull,TargetRate:g.amount.moneyAmount,Source:e.model.actionString,category:"Trade",label:"Set Price Alert"}),e.model.isLoading=!0,r.sendOpenPriceAlert(e.model,"Create Alert"),e.closeThisDialog()}function f(){n.updateAlert(e.model.instrument.InstrumentID,e.model.viewRate,g.amount.moneyAmount).then(function(){i.get("bl.factories.watchlist.watchlistNotificationsService").TradeItemPriceAlertUpdateSuccess()})["catch"](function(){i.get("bl.factories.watchlist.watchlistNotificationsService").TradeItemPriceAlertFailed()}),e.model.isLoading=!0,r.sendOpenPriceAlert(e.model,"Update"),e.closeThisDialog()}function p(){n.deleteAlert(e.model.instrument.InstrumentID).then(function(){i.get("bl.factories.watchlist.watchlistNotificationsService").TradeItemPriceAlertRemoveSuccess()})["catch"](function(){i.get("bl.factories.watchlist.watchlistNotificationsService").TradeItemPriceAlertFailed()}),e.model.isLoading=!0,r.sendOpenPriceAlert(e.model,"Remove"),e.closeThisDialog()}e.model.stopLossModel={amount:{percentAmount:100.5,percentDisplayAmount:.5,moneyAmount:0,inRateMode:!0},range:{min:0,minPercent:0},defaultPriceAlert:100.5};var g=e.model.stopLossModel,v=t,P=!1;e.uiDialogData&&e.init(e.uiDialogData.instrument,!1).then(function(){a(e.uiDialogData.instrument,e.uiDialogData.model,e.uiDialogData.actionString)}),e.$watch(function(){return e.model.instrument&&e.model.instrument.rate?e.model.instrument.rate.Bid+""+e.model.instrument.rate.Ask:void 0},function(t,n){if(t!==n){var o=e.model.instrument.lastPrice();c(o)}}),e.stopLossPercentChange=function(e,t){d(!1,e,t)},e.stopLossMoneyChange=function(e,t){d(!0,e,t)},e.stopLossBlur=function(){P=!1},e.stopLossFocus=function(){P=!0},e.switchMode=m,e.openPriceAlert=A,e.updatePriceAlert=f,e.removePriceAlert=p,e.closePopup=s}return function(e,o){return t(e,[]).inheritController(o,"apps.trader.portfolio.executePositionCtrl",["$scope","$analytics","bl.factories.priceAlerts.priceAlertFactory","$rootScope","$injector","bl.factories.trading.mixpanelEventsService",n])}});define(rA[396][0],["angular",rA[471][0],rA[495][0]],function(n,e,i){"use strict";var o=n.module("loginApp",[e.name,i.name]);return o});define(rA[441][0],["angular","moduleDefiner",rA[259][0],rA[358][0]],function(e,o,s,r){"use strict";var t=o("apps.discovery.people",["ngRoute","ngSanitize"]);return t.config(["$routeProvider",function(e){e.when("/discover/people",{template:'<et-discovery-people-home ng-if="!$resolve.isUserFromUs"></et-discovery-people-home><et-discovery-people-home-us ng-if="$resolve.isUserFromUs"></et-discovery-people-home-us>',maintenanceId:"rankings",sectionId:"discoverPeople",mainNavId:"discoverPeople",sharePages:{showShareButton:!0,urlKey:"PeopleDiscoveryPage"},resolve:{isEnable:["$q","$rootScope","infrastruct.services.config","infrastruct.services.localStorage",function(e,o,s,r){return e(function(e,t){s.dynamics.whenReady().then(function(){o.session.isUsUser()||e(),(o.session.isUsUser()&&s.dynamics.menu.isUSDiscoveryPeopleAvailable||r.getItem("usDiscoverPeopleForceOn"))&&e(),t()})})}],isUserFromUs:["$rootScope",function(e){return e.session.isUsUser()}],countries:["bl.factories.countries.countriesFactory",function(e){return e.init()}],instruments:["bl.factories.trading.instruments.instrumentsGroupsFactory",function(e){return e.init()}]},metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/discover/people/index.view.html"}}).when("/discover/people/results",{template:"<et-discovery-people-results></et-discovery-people-results>",reloadOnSearch:!1,maintenanceId:"rankings",sectionId:"discoverPeople",mainNavId:"discoverPeople",sharePages:{showShareButton:!0,urlKey:"PeopleDiscoverySearchPage"},resolve:{countries:["bl.factories.countries.countriesFactory",function(e){return e.init()}],instruments:["bl.factories.trading.instruments.instrumentsGroupsFactory",function(e){return e.init()}]},metaTags:{noFollow:!0,templateUrl:"/etoro/apps/components/metaTags/templates/discover/people/results.view.html"}})}]),t.component("discoveryCopytraderPopup",s),t.directive("swipeDirection",r),t});define(rA[259][0],[rA[32][0]],function(t){function n(t,n,e){this.$timeout=t,this.$q=n,this.$analytics=e,this.imgSrc="https://etoro-cdn.etorostatic.com/web-client/img/discover/people/popup/",this.steps=["balance","trade","profit"],this.currentStep=0,this.isSwitching=!1,this.SWITCHDELAY=300,this.swipeDirection=""}return n.$inject=["$timeout","$q","$analytics"],n.prototype={$onInit:function(){this.onOpen()},next:function(t){var n=this;this.currentStep<this.steps.length-1?this._switchContent().then(function(){n.currentStep++,n._sendStepMixpanelEvent()}):t||this.close()},prev:function(){var t=this;this.currentStep>0&&this._switchContent().then(function(){t.currentStep--,t._sendStepMixpanelEvent()})},goToStep:function(t){this._switchContent().then(function(){this.currentStep=t,this._sendStepMixpanelEvent()}.bind(this))},close:function(){this.onClose()},onSwipeAction:function(t){t&&(this.swipeDirection=t,"left"===t?this.next(!0):this.prev())},_switchContent:function(){var t=this;return this.$q(function(n){t.isSwitching=!0,t.$timeout(function(){t.isSwitching=!1,t.swipeDirection="",n()},t.SWITCHDELAY)})},_sendStepMixpanelEvent:function(){}},{bindings:{onClose:"&",onOpen:"&"},controller:n,templateUrl:t.name}});define(rA[32][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/discovery/people/homeUS/copyTraderPopup/copytrader-popup.view.html","text":"<div class=\"w-sm copy-trader-popup-wrap\" data-etoro-locale-ns=\"discoveryHomeCopyTraderPopup\">    <div class=\"w-sm-main\" automation-id=\"discovery-home-copy-trader-popup-wrapper\">        <div class=\"inner\">            <a automation-id=\"discovery-home-copy-trader-popup-close-button\" class=\"close-button\" ng-click=\"$ctrl.close()\"></a>            <div class=\"popup-title\">                <p automation-id=\"discovery-home-copy-trader-popup-title\">{{_title_}}</p>            </div>            <div class=\"popup-main-content\"                 swipe-direction=\"\" data-on-swipe=\"$ctrl.onSwipeAction(direction)\"                ng-class=\"{ 'switching-content':$ctrl.isSwitching,                             'left': $ctrl.swipeDirection ==='left',                            'right': $ctrl.swipeDirection ==='right' }\">                <div class=\"flex-left\">                    <div class=\"discovery-home-copy-trader-description\" automation-id=\"discovery-home-copy-trader-popup-description\">                        <p ng-if=\"$ctrl.steps[$ctrl.currentStep] === 'balance'\">{{_balanceDescription_}}</p>                        <p ng-if=\"$ctrl.steps[$ctrl.currentStep] === 'trade'\">{{_tradeDescription_}}</p>                        <p ng-if=\"$ctrl.steps[$ctrl.currentStep] === 'profit'\">{{_profitDescription_}}</p>                    </div>                </div>                <div class=\"flex-right main-popup-img\" ng-class=\"$ctrl.steps[$ctrl.currentStep]\"></div>            </div>            <div class=\"dialog-content-action\">                <a automation-id=\"discovery-home-copy-trader-popup-action-button\" class=\"popup-button-green\"                        ng-click=\"$ctrl.next()\">{{_if($ctrl.steps[$ctrl.currentStep] === 'profit','gotIt','continue')_}}</a>            </div>            <div class=\"discovery-home-copy-trader-diclaimer\">                    {{_disclaimer_}}            </div>            <div class=\"steps {{$ctrl.steps[$ctrl.currentStep]}}\"                    automation-id=\"discovery-home-copy-trader-popup-image\">                    <div ng-click=\"$ctrl.goToStep(0)\" class=\"dot\" ng-class=\"{'current': $ctrl.steps[$ctrl.currentStep] === 'balance'}\"></div>                    <div ng-click=\"$ctrl.goToStep(1)\" class=\"dot\" ng-class=\"{'current': $ctrl.steps[$ctrl.currentStep] === 'trade'}\"></div>                    <div ng-click=\"$ctrl.goToStep(2)\" class=\"dot\" ng-class=\"{'current': $ctrl.steps[$ctrl.currentStep] === 'profit'}\"></div>                </div>        </div>    </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[358][0],["underscore","angular"],function(t){function e(){function e(t){var e=this;e.$rootScope=t,e.swipedir,e.startX,e.startY,e.distX,e.distY,e.dist,e.threshold=70,e.restraint=150,e.allowedTime=500,e.elapsedTime,e.startTime}function i(e,i,s,n){var r=i[0],o=t.bind(n.touchStartEvent,n),h=t.bind(n.touchEndEvent,n),d=t.bind(n.touchMoveEvent,n);r.addEventListener("touchstart",o,!1),r.addEventListener("touchend",h,!1),r.addEventListener("touchmove",d,!1),e.$on("$destroy",function(){r.removeEventListener("touchstart",o),r.removeEventListener("touchend",h),r.removeEventListener("touchmove",d)})}return e.$inject=["$rootScope"],e.prototype={touchStartEvent:function(t){var e=t.changedTouches[0];this.swipedir,this.dist=0,this.startX=e.pageX,this.startY=e.pageY,this.startTime=(new Date).getTime(),t.preventDefault()},touchEndEvent:function(e){var i=e.changedTouches[0];if(this.distX=i.pageX-this.startX,this.distY=i.pageY-this.startY,this.elapsedTime=(new Date).getTime()-this.startTime,!(0==this.distX||this.elapsedTime>this.allowedTime)){if(Math.abs(this.distX)>=this.threshold&&Math.abs(this.distY)<=this.restraint?this.swipedir=this.distX<0?"left":"right":Math.abs(this.distY)>=this.threshold&&Math.abs(this.distX)<=this.restraint&&(this.swipedir=this.distY<0?"up":"down"),this.swipedir){var s=t.throttle(function(){this.$rootScope.$apply(function(){this.onSwipe({direction:this.swipedir})}.bind(this))}.bind(this),400);s()}this.swipedir=void 0,e.preventDefault()}},touchMoveEvent:function(t){t.preventDefault()}},{restrict:"A",bindToController:{onSwipe:"&"},controller:e,link:i}}return e});define(rA[304][0],["angular"],function(e){"use strict";var s=e.module("discoverFundsApp",["ngRoute"]);return s.config(["$routeProvider",function(e){e.when("/discover/funds",{redirectTo:"/discover/smartportfolios"}).when("/discover/smartportfolios",{template:"<et-discover-funds></et-discover-funds>",maintenanceId:"rankings",sectionId:"discoverFunds",mainNavId:"discoverCopyPortfolio",sharePages:{showShareButton:!0,urlKey:"FundsDiscoveryPage"},resolve:{isUserFromUs:["$rootScope","$location",function(e,s){e.session.isUsUser()&&s.path("/watchlists")}]},metaTags:{templateUrl:"/etoro/apps/components/metaTags/templates/discover/funds/index.view.html"}}).when("/discover/smartportfolios/results",{template:"<et-discovery-funds-results></et-discovery-funds-results>",reloadOnSearch:!1,maintenanceId:"rankings",sectionId:"discoverFunds",mainNavId:"discoverCopyPortfolio",sharePages:{showShareButton:!0,urlKey:"FundsDiscoverySearchPage"},resolve:{countries:["bl.factories.countries.countriesFactory",function(e){return e.init()}],instruments:["bl.factories.trading.instruments.instrumentsGroupsFactory",function(e){return e.init()}]},metaTags:{noFollow:!0,templateUrl:"/etoro/apps/components/metaTags/templates/discover/people/results.view.html"}})}]),s});define(rA[397][0],["angular","underscore",rA[487][0]],function(e){"use strict";function t(){return[function(){return Promise.resolve(!0)}]}function s(e){return{depositResult:["$injector",function(t){var s=t.get("depositPostbackProcessor");return s.depositPostback({fundingTypeId:e})}],isNewAngular:t()}}function o(){return{depositResult:["$injector",function(e){var t,s=e.get("$location").$$search;s.skrillResponse&&(t=8),s.RapidTransferResponse&&(t=30);var o=e.get("depositPostbackProcessor");return o.depositPostback({fundingTypeId:t})}],isNewAngular:t()}}function n(){return'<div class="main-content main-content-deposit-result"><et-deposit-result [deposit-result]="$resolve.depositResult"></et-deposit-result></div>'}var r=e.module("depositApp",["ngRoute"]);return r.controller("apps.payments.withdraw.depositPresenter",["$location","infrastruct.services.config","bl.factories.payments.deposit.depositLoader",function(e,t,s){var o=e.search(),n=Number(o.fundingTypeId),r=Number(o.amount)||null;delete o.fundingTypeId,delete t.query.fundingTypeId,delete o.amount,delete t.query.amount,e.path("/portfolio").search(t.query||o),n?s.loadFundYourAccount({amount:r,fundingTypeId:n,currencyId:null,skipPendingCashouts:!0}):s.loadFundYourAccount()}]),r.config(["$routeProvider",function(e){e.when("/deposit",{maintenanceId:"deposit",controller:"apps.payments.withdraw.depositPresenter",template:"",authRoles:["user"]}).when("/deposit/full",{maintenanceId:"deposit",template:"<div></div>",authRoles:["user"],reloadOnSearch:!1,reloadOnUrl:!1,resolve:{depositInfo:["$q","$rootScope","$location","bl.factories.payments.deposit.depositLoader","bl.factories.payments.kycProvider","infrastruct.services.config",function(e,t,s,o,n,r){return r.dynamics.deposit.redirectDepositFullToPopup?void s.path("/deposit"):t.session.user.isUserVerified?n.beforeDepositAbTest().then(function(){return o.loadPrerequisites()})["catch"](function(){return s.path("/"),e.reject()}):(s.path("/"),n.loadVolunteerModal())}]}}).when("/deposit/result",{maintenanceId:"deposit",template:'<div class="main-content main-content-deposit-result"><et-deposit-result [deposit-result]="$resolve.depositResult" ng-if="$resolve.depositResult"></et-deposit-result></div>',authRoles:["user"],resolve:{depositInfo:["bl.factories.payments.deposit.depositInfo",function(e){return e.get()}],depositResult:["ng.depositResultService",function(e){return e.depositResult$.getValue()}],isNewAngular:[function(){return!0}]}}).when("/deposit/paypalResponse",{maintenanceId:"deposit",template:n(),authRoles:["user"],resolve:s(3)}).when("/deposit/sofortResponse/:action/:transId?",{maintenanceId:"deposit",template:n(),authRoles:["user"],resolve:s(11)}).when("/deposit/response/:paymentMethodId/:transId?",{maintenanceId:"deposit",template:'<div class="main-content main-content-deposit-result"><et-deposit-result [deposit-result]="$resolve.depositResult"></et-deposit-result></div>',authRoles:["user"],resolve:{depositResult:["$injector","$log",function(e,t){function s(){return"cancel"===o.current.params.status?{messageGroupKey:"Z",state:"fail"}:null}t.logJSON("info","log",{Categories:["Deposit"],Message:"Deposit - Generic Postback Route",fundingTypeId:n,transId:r});var o=e.get("$route"),n=o.current.params.paymentMethodId,r=o.current.params.transId,i=e.get("depositPostbackProcessor");return i.depositPostback({fundingTypeId:n,depositResultOverrides:s()})}]}}).when("/deposit/onlinebanking",{maintenanceId:"deposit",template:n(),authRoles:["user"],resolve:s(28)}).when("/deposit/skrillResponse",{maintenanceId:"deposit",template:n(),authRoles:["user"],resolve:o()}).when("/deposit/asicTestRequired",{template:"<et-asic-test-required></et-asic-test-required>",authRoles:["user"],resolve:{depositInfo:["bl.factories.payments.deposit.depositInfo",function(e){return e.get(!0)}]}}).when("/deposit/asicTestBlocked/:daysCount?/:attemptsCount?",{template:'<et-asic-test-blocked [days-count]="$resolve.daysCount" [attempts-count]="$resolve.attemptsCount"></et-asic-test-blocked>',authRoles:["user"],resolve:{daysCount:["$q","$route",function(e,t){var s=t.current&&t.current.params&&t.current.params.daysCount;return isNaN(s)?e.reject():e.resolve(s)}],attemptsCount:["$q","$route",function(e,t){var s=t.current&&t.current.params&&t.current.params.attemptsCount;return isNaN(s)?e.reject():e.resolve(s)}]}}).when("/deposit/depositBlocked",{template:"<et-deposit-blocked></et-deposit-blocked>",authRoles:["user"]}).when("/deposit/whitelabelBlocked",{template:"<et-whitelabel-blocked></et-whitelabel-blocked>",authRoles:["user"]}).when("/deposit/plaid-redirect-success",{resolve:{openDepositWithPlaidRelaunch:["payments.plaidDepositService","$location","$log",function(e,t,s){var o=t.search().json_payload;s.logJSON("info","log",{Categories:["Deposit"],Message:"Deposit - Plaid - User back from redirect success route",jsonPayload:o}),e.saveLinkedAccountRawDataFromRedirect(o);var n=e.getDepositAmountBeforeRedirect();t.path("/deposit").search({fundingTypeId:29,amount:n})}]}}).when("/deposit/plaid-redirect-failure",{resolve:{openDepositWithPlaidRelaunch:["payments.plaidDepositService","$location","$log",function(e,t,s){var o=t.search().json_payload;s.logJSON("info","log",{Categories:["Deposit"],Message:"Deposit - Plaid - User back from cancel or fail at plaid route",jsonPayload:o}),e.linkCancelAnalytics();var n=e.getDepositAmountBeforeRedirect();t.path("/deposit").search({fundingTypeId:29,amount:n})}]}}).when("/deposit/plaid-re-launch",{resolve:{openDepositWithPlaidRelaunch:["payments.plaidDepositService","$location","$log","payments.plaidService","bl.factories.payments.withdraw.withdrawLoader",function(e,t,s,o,n){return s.logJSON("info","log",{Categories:["Deposit"],Message:"Plaid - Plaid re launch",lastOpenHost:o.lastOpenHost}),"deposit"===o.lastOpenHost?(e.reLaunchDepositAndPlaidWidgetAfterOAuthRedirect(),new Promise):"withdraw"===o.lastOpenHost?(n.plaidRelaunchV2(),new Promise):void 0}]}}).when("/deposit/transfer/response/:paymentMethodId/:transId?",{maintenanceId:"deposit",template:'<div class="main-content main-content-deposit-result"><et-deposit-result [deposit-result]="$resolve.depositResult"></et-deposit-result></div>',authRoles:["user"],resolve:{depositResult:["$injector","$log",function(e,t){t.logJSON("info","log",{Categories:["Deposit"],Message:"Transfer - Generic Postback Route",fundingTypeId:o,transId:n});var s=e.get("$route"),o=s.current.params.paymentMethodId,n=s.current.params.transId,r=e.get("transferPostbackProcessor");return r.transferPostback({fundingTypeId:o,transactionId:n})}]}})}]),r});define(rA[307][0],["angular"],function(e){"use strict";var a=e.module("withdrawApp",[]);return a.controller("apps.payments.withdraw.withdrawPresenter",["$location","bl.factories.payments.withdraw.withdrawLoader",function(e,a){e.path("/"),a.load()}]),a.config(["$routeProvider",function(e){e.when("/withdraw",{maintenanceId:"withdraw",controller:"apps.payments.withdraw.withdrawPresenter",template:"",authRoles:["user"]}).when("/withdraw/plaid-redirect-success",{resolve:{relaunchWithdrawAfterPlaidRedirect:["bl.factories.payments.withdraw.withdrawLoader",function(e){e.plaidRelaunchSuccess()}]}}).when("/withdraw/plaid-redirect-failure",{resolve:{relaunchWithdrawAfterPlaidRedirect:["bl.factories.payments.withdraw.withdrawLoader",function(e){e.plaidRelaunchFail()}]}})}]),a});define(rA[306][0],["angular"],function(e){"use strict";var r=e.module("etoroMoneyApp",[]);return r.config(["$routeProvider",function(e){e.when("/payments/create-etoro-card",{template:"<div></div>",authRoles:["user"],resolve:{referrer:["$route","$location","payments.etoroMoneyCreateCardLoader",function(e,r,t){return r.path("/watchlists"),t.openCreateEtoroCard(),e.current.params.referrer}]}}).when("/payments/create-money-account",{template:"<div></div>",authRoles:["user"],resolve:{referrer:["$route","$location","$http","infrastruct.services.config",function(e,r,t,a){function n(){var e="xxxxtxxx-xxxx-4xxx-yxxx-xxxxxxtxxxxx";return e.replace(/t/g,function(){return((new Date).getTime()%16).toString(16)}).replace(/[xy]/g,function(e){var r=16*Math.random()|0,t="x"===e?r:3&r|8;return t.toString(16)})}return e.current&&e.current.params&&"1"===e.current.params.isEtoroMoneyAccount?t.get(a.dynamics.urls.walletUrl+"/api/money/v1/money/fiat/eligibility",{params:{correlationId:n()}}).then(function(e){switch(e.data.eligibilityStatus){case"Eligible":r.path("/dashboard/club");break;case"IbanEligible":r.path("/payments/create-money-account-iban");break;default:window.location.href="https://go2.etoro.com/etoro-money-availibility"}})["catch"](function(){r.path("/home")}):r.path("/payments/create-money-account-iban"),e.current.params.referrer}]}}).when("/payments/create-money-account-iban",{template:"<div></div>",authRoles:["user"],resolve:{referrer:["$route","$location","payments.etoroMoneyViaWireTransferLoader","bl.factories.payments.deposit.depositLoader",function(e,r,t,a){return r.path("/watchlists"),t.openCreateEtoroIban("Deeplink").then(function(e){e.isEtoroMoneyCreated&&a.loadFundYourAccount({fundingTypeId:33,currencyId:null,shouldNotUseValuesFromLastSession:!0})}),e.current.params.referrer}]}}).when("/payments/money-account-details",{template:"<div></div>",authRoles:["user"],resolve:{referrer:["$route","$location","payments.etoroMoneyViaWireTransferLoader",function(e,r,t){return r.path("/watchlists"),t.openCreatedDetailsIban(),e.current.params.referrer}]}})}]),r});define(rA[466][0],["angular","underscore",rA[500][0],rA[479][0],rA[23][0]],function(e,t,o,a,s){"use strict";var c=e.module("apps.components.metaTags",[o.name,a.name]);return c.run(["$rootScope","$compile",function(e,t){t(document.head)(e.$new())}]),c.factory("apps.components.metaTags.metaTags",["$q","$injector","$route",function(t,o){var a=[];return{resolveTemplate:function(a){var c=a&&a.$$route&&a.$$route.metaTags,n={tmplMapObj:{templateUrl:s.name}};return t(function(t){function s(o){var s=e.copy(c);s.templateUrl=s.templateUrl?e.isFunction(s.templateUrl)?s.templateUrl(a):s.templateUrl:n.tmplMapObj.templateUrl,t({tmplMapObj:s,scope:o})}return c?c.resolve?void o.invoke(c.resolve).then(function(e){s(e)})["catch"](function(){t(n)}):s():t(n)})},getTemplatesMap:function(){return a}}}]),c.directive("metaTags",["$q","$route","$rootScope","apps.components.metaTags.metaTags","$location","infrastruct.services.localization.localizeFactory","infrastruct.services.localeRoutingFactory",function(o,a,s,c,n,l,r){function p(t,o,a,s,r,p){var i=this;this.NOT_SHORTABLE_LOCALES_META_TAGS=["zh-tw","zh-cn","nb-no","cs-cz","da-dk","pt-pt","en-us","vi-vn"],this.alternateLocalesMap={zh:"zh-Hans","zh-tw":"zh-Hant","nb-no":"no","cs-cz":"cs","pt-pt":"pt","da-dk":"da","vi-vn":"vi"},this.seoElements=null,this.childScope=null,this.$scope=t,this.$rootScope=o,this.$templateRequest=a,this.$element=s,this.$compile=r,this.$location=n,this.localizeFactory=l,this.config=p,e.forEach(["$routeChangeSuccess","viewKeeperChangeSuccess"],function(o){t.$on(o,function(t,o){i.clear(),c.resolveTemplate(e.isArray(o)?o[1]:o).then(function(t){t&&t.tmplMapObj&&i.render(t,e.isArray(o)?o[1]:o)})})})}return p.prototype={render:function(o,a){var s=this;this.$templateRequest(o.tmplMapObj.templateUrl).then(function(c){function n(e){var o;return t.unique(e.map(function(e){return o=-1!==s.NOT_SHORTABLE_LOCALES_META_TAGS.indexOf(e)?e:e.split("-")[0]}))}s.clear(),s.seoElements=[],s.seoElements.push(document.createComment(" START META ")),$(c).each(function(e,t){s.seoElements.push(t)}),s.seoElements.push(document.createComment(" END META ")),o.scope=o.scope?e.copy(o.scope):{},o.scope.locale=s.localizeFactory.language,o.scope.shortLocale=s.localizeFactory.languageCode,o.scope.appUrl||(o.scope.appUrl=r.getBaseUrl(!0)),o.scope.appUrlWithoutLocale=r.getBaseUrl(!1),o.scope.getAlternateURL=function(e){var t="https://www.etoro.com",o="https://www.etoro.com.cn";return"zh-cn"===e?o:"zh"===e&&s.config.calculated.baseUrl===o?o:"en"===e||"en-us"===e?t:t+"/"+e},o.scope.getLocale=function(e){return s.alternateLocalesMap[e]?s.alternateLocalesMap[e]:e},o.scope.pathParams=a&&a.pathParams,o.scope.localeData={defaultLocale:l.defaultLanguageLeftPart};var p=t.difference(l.metaTagsLocales,s.config.dynamics.nonSelectableLocales);o.scope.localeData.supportedLocales=n(p),o.scope.baseCanonicalUrl=o.scope.appUrl.replace("/"+o.scope.localeData.defaultLocale,""),o.tmplMapObj.noFollow&&(o.scope.noFollow=9===o.scope.accountType&&"stats"===o.scope.pathParams.activeTab?!1:e.isFunction(o.tmplMapObj.noFollow)?o.tmplMapObj.noFollow(o.scope):o.tmplMapObj.noFollow),o.tmplMapObj.referrer&&(o.scope.referrer=e.isFunction(o.tmplMapObj.referrer)?o.tmplMapObj.referrer(o.scope):o.tmplMapObj.referrer),o.scope.shouldShowAlternateLang=!o.scope.noFollow&&""===location.search,o.tmplMapObj.localeCustomKeys&&(o.scope.localeCustomKeys||(o.scope.localeCustomKeys={}),t.each(o.tmplMapObj.localeCustomKeys,function(t,a){o.scope.localeCustomKeys[a]=e.isFunction(t)?t(o.scope):t})),s.childScope=s.$rootScope.$new(),s.childScope.data=o.scope,s.$compile(s.seoElements)(s.childScope,function(e){s.seoElements=e}),s.$element.prepend(s.seoElements)})},clear:function(){if(this.seoElements){var o,a;t.each(this.$element[0].childNodes,function(e,t){e===this.seoElements[0]?o=t:e===this.seoElements[this.seoElements.length-1]&&(a=t)},this);for(var s=o;a>=s;)e.element(this.$element[0].childNodes[o]).remove(),s++;this.seoElements=null}this.childScope&&(this.childScope.$destroy(),this.childScope=null)}},{controller:["$scope","$rootScope","$templateRequest","$element","$compile","infrastruct.services.config",p]}}]),c});define(rA[23][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/components/metaTags/templates/metaTagsDefaults.view.html","text":"<title ng-bind=\":: $root.t.dynamic('metaTags', 'default.title', data)\"></title><meta name=\"robots\" content=\"noindex\" ng-if=\":: data.noFollow\"><meta name=\"referrer\" content=\"{{:: data.referrer}}\" ng-if=\":: data.referrer\">"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[400][0],["angular",rA[261][0],rA[451][0]],function(n,e,p){"use strict";var i=n.module("signUpApp",[p.name]);return i.component("signUpBox",e),i});define(rA[261][0],["./sign-up-box.view.html"],function(i){"use strict";function t(i,t,e,o,n,s,r,c,a,h,l){this.$location=i,this.$rootScope=t,this.$injector=e,this.$localStorage=n,this.loaderFactory=s,this.funnelId=o.statics.funnelId,this.funnelFromId=o.statics.funnelFromId,this.affiliateId=o.statics.affiliateId,this.appsFlyerUserId=o.calculated.appsFlyerUserId,this.config=o,this.isInternalApp,this.copyTraderFunnelService=r,this.funnelLoaderService=c,this.homepageService=a,this.genericAbTestService=h,this.$window=l}return t.$inject=["$location","$rootScope","$injector","infrastruct.services.config","infrastruct.services.localStorage","infrastruct.services.loader","bl.factories.session.copyTraderFunnelService","bl.factories.session.funnelLoaderService","bl.factories.settings.homepage","genericAbTestService","$window"],t.prototype={$onInit:function(){this.isInternalApp=this.checkIfInternalApp(),this.isButtonsBelowAbEnabled=this.config.dynamics.onboarding.isButtonsBelowAbEnabled,this.isButtonsBelowAbEnabled&&!this._isEmbed()&&this.$window&&this.$window.innerWidth<=768?(this.loaderFactory.show(),this.genericAbTestService.getExperiment("registration_form_sso_below","Onboarding").then(function(i){this.btnBelowVariant=i.variationId,this.loaderFactory.hide(),this.$rootScope.$applyAsync()}.bind(this))["catch"](function(){this.btnBelowVariant="off",this.loaderFactory.hide(),this.$rootScope.$applyAsync()}.bind(this))):this.btnBelowVariant="off"},checkIfInternalApp:function(){return this.$rootScope.session&&this.$rootScope.session.appInfoData&&this.$rootScope.session.appInfoData.isInternal},tryToLogin:function(i,t){return 207===i.status?void this.$location.url("/login?username="+t):void this.$rootScope.session.signupLogin(i.data.LoginData).then(function(){this.$rootScope.$emit("registration:success",this.$rootScope.session.user),this.$rootScope.$emit("registration:success:login:dlg"),this.onRegistrationSuccess()===!1||this.isLoginDlg||this.copyTraderFunnelService.getEnabledParams().then(function(i){i.isEnabledRedirectTo||this._funnelRedirection()}.bind(this))}.bind(this))["catch"](function(){this.$location.url("/login?username="+t)}.bind(this))},tryToSocialLogin:function(i,t){var e=this.$injector.get("bl.factories.login.loginFactory");this.loaderFactory.show(),e.loginWithSocialProvider(i).then(function(i){this.$rootScope.session.signupSocialLogin(i).then(function(){this.$rootScope.$emit("registration:success",this.$rootScope.session.user),this.$rootScope.$emit("registration:success:login:dlg"),this.onRegistrationSuccess()===!1||this.isLoginDlg||this.copyTraderFunnelService.getEnabledParams().then(function(i){i.isEnabledRedirectTo||this._funnelRedirection()}.bind(this))}.bind(this))["catch"](function(){this.$location.url("'username=' + username")}.bind(this))}.bind(this))["catch"](function(i){e.loginErrors.socialConnectErrorFromSignUpPage=i,this.onLogin(),this.$rootScope.$applyAsync(function(){this.$location.url("'username=' + username")}.bind(this))}.bind(this)),this.$localStorage.setItem("lastUsername",t)},_funnelRedirection:function(){try{this._redirectToFunnelHomePage()}catch(i){this.$location.path("/home")}},_redirectToFunnelHomePage:function(){var i=this.$location.search();i&&i.preventRedirect||this.config.query.preventRedirect||(this.$location.path("/home"),this.$rootScope.$evalAsync())},_isEmbed:function(){try{return/embed/.test(window.location.href)}catch(i){}},onLoginClick:function(){this.onLogin()===!1||this.isLoginDlg||this.$location.url("/login"),this.$rootScope.$evalAsync()}},{bindings:{onRegistrationSuccess:"&",onLogin:"&",tradeItem:"<",isLoginDlg:"<"},templateUrl:i.name,controller:t}});define(rA[38][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/sign-up/sign-up-box.view.html","text":"<div ng-if=\"!$ctrl.isButtonsBelowAbEnabled || $ctrl.btnBelowVariant\" class=\"sign-up-box-container-inner\">    <et-sign-up [funnel-id]=\"$ctrl.funnelId\" [funnel-from-id]=\"$ctrl.funnelFromId\"        [apps-flyer-user-id]=\"$ctrl.appsFlyerUserId\" [affiliate-id]=\"$ctrl.affiliateId\" [trade-item]=\"$ctrl.tradeItem\"        [is-internal-app]=\"$ctrl.isInternalApp\"        [btn-below-variant]=\"$ctrl.btnBelowVariant\"        (on-social-connect-success)=\"$ctrl.tryToSocialLogin($event.response, $event.username)\"        (on-login-click)=\"$ctrl.onLoginClick()\" (on-success)=\"$ctrl.tryToLogin($event.response, $event.username)\">        <et-sign-up-language ng-if=\"$ctrl.isInternalApp\">            <div class=\"lang-picker-bottom\">                <et-language-picker class=\"mobile-signup-lang-picker\" automation-id-prefix=\"'signup-dialog'\">                </et-language-picker>            </div>        </et-sign-up-language>    </et-sign-up></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[465][0],["angular",rA[486][0],rA[105][0],rA[257][0],rA[289][0]],function(o,n,t,a,p){var c=o.module("apps.components.layout",[n.name]);return c.component("uiLayout",t),c.component("bslNotification",a),c.component("proChartsDropdown",p),c});define(rA[105][0],[],function(){"use strict";function t(){}return t.$inject=[],{controller:t,controllerAs:"layoutCtrl",template:'<ng-view ng-if="true"></ng-view>'}});define(rA[257][0],[rA[0][0]],function(o){"use strict";function s(o,s,e,i){this.user=o.session.user,this.$location=s,this.$rootScope=o,this.depositLoader=e,this.kycProvider=i}return s.$inject=["$rootScope","$location","bl.factories.payments.deposit.depositLoader","bl.factories.payments.kycProvider"],s.prototype={isExecutionBlocked:function(){return this.$rootScope.session.user&&this.$rootScope.session.user.bsl&&this.$rootScope.session.user.bsl.executionBlocked&&this.$rootScope.session.user.bsl.isBslAvalible?this.$rootScope.session.user.bsl.executionBlocked&&this.$rootScope.session.user.bsl.isBslAvalible:!1},close:function(){this.onClose()},deposit:function(){this.close(),this.$rootScope.session.user.isUserVerified?this.depositLoader.loadFundYourAccount():this.kycProvider.loadDepositModal()}},{bindings:{onClose:"&",equity:"<",realFunds:"<",isNotificationPopUp:"<"},templateUrl:o.name,controller:s}});define(rA[0][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/components/layout/account-balance/bsl-notification/bsl-notification.view.html","text":"<div class=\"w-sm\" data-etoro-locale-ns=\"bslInformation\">    <div class=\"w-confirmation-modal-title\">        {{_if($ctrl.isNotificationPopUp, \"_notificationPopUpHeader_\" ,\"liquidationPopUpHeader\")_}}</div>    <a class=\"w-share-header-nav-button-x sprite\" ng-click=\"$ctrl.close()\"></a>    <div class=\"w-sm-main\">        <div class=\"i-popup-image demo-image bsl\">        </div>        <div class=\"i-popup-contant-info demo-text bsl\" ng-if=\"!$ctrl.isExecutionBlocked()\" ng-bind-html=\":: $root.t.html('bslInformation', 'notificationPopUpText', this)\">        </div>        <div class=\"i-popup-contant-info demo-text bsl\" ng-if=\"$ctrl.isExecutionBlocked()\" ng-bind-html=\":: $root.t.html('bslInformation', 'liquidationPopUpText', this)\">        </div>    </div>    <div class=\"w-sm-footer\">        <a class=\"w-sm-footer-button e-btn-big dark\" ng-click=\"$ctrl.deposit()\"> {{_if($ctrl.isNotificationPopUp, \"notificationPopUpButton\" ,\"liquidationPopUpButton\")_}}</a>    </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[289][0],["underscore",rA[34][0]],function(e,t){function s(e,t,s,o,a){this.$rootScope=e,this.$injector=a,this.$scope=t,this.localStorage=s,this.localizeFactory=o,this.isVisible=!1,this.useOneSymbol=!1,this.savedWorkspaces=[],this.selectedLayoutId=1,this.layouts=[],this._maxLayouts=5,t.$watch(function(){return this.useOneSymbol}.bind(this),this._handelOneSymbolForAllChartsMode.bind(this)),this.unBindMenuUpdateListener=e.$on("app:procharts:menu:update",this._handleWorkspacesUpdate.bind(this))}return s.$inject=["$rootScope","$scope","infrastruct.services.localStorage","infrastruct.services.localization.localizeFactory","$injector"],s.prototype={toggle:function(){this.isVisible=!this.isVisible},close:function(){this.isVisible=!1,this.$scope.$applyAsync()},selectLayout:function(e){this.$rootScope.$broadcast("chartiq:layout:load",{template:e,oneSymbolForAllCharts:this.useOneSymbol})},selectWorkspace:function(e){this.$rootScope.$broadcast("chartiq:workspace:select",{workspace:e})},saveWorkspace:function(){return this.toggle(),e.filter(this.savedWorkspaces,function(e){return"recent"!==e.type}).length>=this._maxLayouts?void this.$injector.get("bl.factories.notifications.infraNotificationsService").chartiqWorkspaceAddFailed():void this.$rootScope.$broadcast("chartiq:workspace:save")},removeWorkspace:function(e,t){t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.$rootScope.$broadcast("chartiq:workspace:remove",{workspace:e})},$onDestroy:function(){this.unBindMenuUpdateListener&&this.unBindMenuUpdateListener()},_handelOneSymbolForAllChartsMode:function(e,t){e!==t&&this.$rootScope.$broadcast("chartiq:oneSymbolForAllCharts:change",{oneSymbolForAllCharts:this.useOneSymbol})},_handleWorkspacesUpdate:function(e,t){t=t||{},this.savedWorkspaces.length=0,t.workspaces&&t.workspaces.length&&this.savedWorkspaces.push.apply(this.savedWorkspaces,t.workspaces),t.templateId&&(this.selectedTemplateId=t.templateId);for(var s=0;s<this.savedWorkspaces.length;s++)this.savedWorkspaces[s].selected&&"recent"!==this.savedWorkspaces[s].type&&(this.selectedLayoutId=this.savedWorkspaces[s].templateId),this.savedWorkspaces[s].timestamp=new Date(this.savedWorkspaces[s].timestamp||this.savedWorkspaces[s]._lu),"recent"===this.savedWorkspaces[s].type&&(this.savedWorkspaces[s].label=this.localizeFactory.getResource("proCharts.workspaceRecent"));this.layouts=t.templates,this.useOneSymbol=!!t.oneSymbolForAll},getResource:function(e){return this.localizeFactory.getResource("proCharts."+e)}},{templateUrl:t.name,controller:s}});define(rA[34][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/procharts/dropdown/dropdown.view.html","text":"<div class=\"i-head-button porchart-icons head-notification\" ng-class=\"{open : $ctrl.isVisible}\" ng-click=\"$ctrl.toggle()\">    <div class=\"w-head-notification-container prochart-container\">        <div class=\"pro-chart-head-title\">{{:: $ctrl.getResource('displayLayout') }}</div>        <div class=\"w-head-notifications-ph bg-white pointer\">            <div class=\"layouts-wrapper\">                <div ng-repeat=\"layout in $ctrl.layouts\" ng-click=\"$ctrl.selectLayout(layout)\" class=\"porchart-icons prochart-item-image template-{{ layout }}\" ng-class=\"{selected: layout === $ctrl.selectedTemplateId}\"></div>            </div>            <div class=\"prochart-cheackbox\">                <div class=\"e-cb\">                    <input class=\"e-cb-input ng-pristine ng-untouched ng-valid ng-not-empty\" type=\"checkbox\" id=\"CB\" name=\"check\" ng-model=\"$ctrl.useOneSymbol\">                    <label class=\"e-cb-label\" for=\"CB\">{{:: $ctrl.getResource('oneSymbolForAllCharts') }}</label>                </div>            </div>            <div class=\"saved-prochart-layout-wrapper\">                <div class=\"pro-chart-head-title\">{{:: $ctrl.getResource('savedWorkspaces') }}</div>                <div class=\"saved-prochart-layout\" ng-repeat=\"workspace in $ctrl.savedWorkspaces track by $index\" ng-click=\"$ctrl.selectWorkspace(workspace)\" ng-class=\"{selected: workspace.selected}\">                    <div class=\"porchart-icons saved-layout layout-{{ workspace.templateId }}\"></div>                    <div class=\"saved-info\">                        <b class=\"name\">{{ workspace.label }}</b>                        <span class=\"date\" ng-if=\"workspace.type !== 'recent'\">{{ workspace.timestamp | formatDate: 'HH:mm'}}</span>                        <a class=\"social-sprite close\" ng-if=\"workspace.type !== 'recent'\" ng-click=\"$ctrl.removeWorkspace(workspace, $event)\"></a>                    </div>                </div>                <button ng-click=\"$ctrl.saveWorkspace()\" class=\"prochart-button\">{{:: $ctrl.getResource('saveWorkspace') }}</button>            </div>        </div>    </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[469][0],["moduleDefiner",rA[476][0],rA[486][0],rA[479][0],rA[410][0],rA[409][0],rA[411][0]],function(e,r,a,t,s,c,f){"use strict";var i=e("bl.factories.feed",[a,t,r]);return s(i,"bl.factories.feed.share.shareTextFactory"),c(i,"bl.factories.feed.share.shareChartFactory"),f(i,"bl.factories.feed.share.shareWechatFactory"),i});define(rA[410][0],["angular","underscore","moduleDefiner"],function(t,e,r){function n(t){function e(t,e){var r=e,n=t;return t.length>r&&(n=t.substr(0,r)," "!==n.charAt(n.length-1)&&" "!==t.charAt(n.length)&&(n=n.substr(0,n.lastIndexOf(" ")))),n=n.replace(/\n/g," ")}function r(t){-1!=t.indexOf(".")&&(t=t.substr(0,t.indexOf(".")));var e=10,r=t.split(" ");return r.length>e&&(t=r.slice(0,e).join(" ")),t=t.replace(/\n/g," ")}return{getFormats:function(t,n){return{limitCharsFormat:e(t,n),limitFirstSentenceFormat:r(t)}},getLimit:function(e,r){var n=t(e)({limitCharsFormat:""}),i=n.length+r.length,a=1,u=140-i-a;return u}}}return function(t,e){return r(t).factory(e,["$interpolate",n])}});define(rA[409][0],["angular","underscore","moduleDefiner"],function(e,r,t){function n(e,t){function n(e){var n,a,u,o,s="",i=e.length,c=0;return r.each(e,function(e){var r=e&&e.type;"instrument"==r?(n=e.instrumentId,a=t.getById(n),u=a.SymbolFull||"",s+="$"+u.toLowerCase()):"user"==r&&(o=e.username,s+="@"+o),s+=i-1>c?", ":"",c++}),s}function a(r,n,a,u){var o,s,i,c,m,l;return o=t.getById(r),s=o.SymbolFull||"",i=n?"CompareChart":"InstrumentChart",m="$"+s.toLowerCase()+(""!=a?", ":"")+a,l=n?{comparedItems:{taggedTxt:m}}:{instrument:o},l.url=u,c=e.t.dynamic("uiSocialShare","eToro"+i+"TextV2",l),{data:l,imageUrl:u,type:i,txt:c}}function u(r,t,n,a){var u,o,s,i;return u=t?"CompareChart":"UserChart",o="@"+r+(""!=n?", ":"")+n,i=t?{comparedItems:{taggedTxt:o}}:{user:{username:r}},i.url=a,s=e.t.dynamic("uiSocialShare","eToro"+u+"TextV2",i),{data:i,imageUrl:a,type:u,txt:s}}return{handleShareMessage:function(r){if(e.session.assertIsAuthorized()&&r){var t,o,s;if(o=r.comparedTo&&r.comparedTo.length>0,o&&(t=n(r.comparedTo)),r.subject){if(s=r.subject.type,"instrument"==s)return a(r.subject.instrumentId,o,t,r.imageUrl);if("user"==s)return u(r.subject.username,o,t,r.imageUrl)}return null}}}}return function(e,r){return t(e).factory(r,["$rootScope","bl.factories.trading.instruments.instrumentsFactory",n])}});define(rA[411][0],["angular","underscore","moduleDefiner"],function(e,n,t){function c(){function e(e,n,t){Wechat.share({message:{title:e,description:n,media:{type:Wechat.Type.WEBPAGE,webpageUrl:t}},scene:Wechat.Scene.SESSION},function(){},function(){})}function n(e,n,t,c){Wechat.share({message:{title:e,description:n,thumb:c,media:{type:Wechat.Type.WEBPAGE,webpageUrl:t}},scene:Wechat.Scene.SESSION},function(){},function(){})}function t(){Wechat.isInstalled(function(e){alert("Wechat installed: "+(e?"Yes":"No"))},function(e){alert("Failed: "+e)})}return{share:function(n,t,c){e(n,t,c)},shareWithImage:function(e,t,c,a){n(e,t,c,a)},isWechatInstalled:function(){t()}}}return function(e,n){return t(e).factory(n,[c])}});define(rA[494][0],["angular",rA[393][0],rA[392][0],rA[395][0],rA[357][0],rA[476][0],rA[477][0],rA[497][0],rA[394][0],rA[266][0],rA[264][0]],function(t,n,o,e,p,s,a,r,c,u,i){"use strict";var l=t.module("apps.components.trading",[s.name,a.name,r.name]);return l.component("tradeButton",e),l.component("copyButton",n),l.component("restrictTrading",p),l.directive("uiBuysellButtons",[o]),l.component("openTradeUpsellPopup",c),l.component("tradeButtons",u),l.component("buySellButtons",i),l});define(rA[393][0],["angular",rA[28][0],"underscore"],function(t,s){"use strict";function i(t,s){this.$rootScope=t,this.portfolioActionsEventsModule=s,this.restrictedClass=""}return i.$inject=["$rootScope","apps.trader.portfolio.portfolioActionsEvents"],i.prototype={$onInit:function(){this.isFund=this.user&&"fund"===this.user.SubType,this.isDisabledBtn=!1,this.sub=this.$rootScope.$on("privateInstruments:reload",this._initRestriction.bind(this)),this._initRestriction()},$onDestroy:function(){this.sub&&this.sub()},_initRestriction:function(){this.$rootScope.session.isLoggedIn&&(this.restrictedClass=this.btnClass,this.user.isInPortfolio||(this.restrictedClass=this.btnClassRestricted||this.btnClass))},get buttonTextKey(){return this.isRestricted&&this.btnText&&!this.user.isInPortfolio?this.btnText:this.user&&this.user.isInPortfolio?this.user.isPendingForClosure?"pendingClose":this.user.isInAlignment?"inAlignment":this.user.isPendingOpen?"pending":"investMore":(this.isDisabledBtn=!1,this.isFund?"invest":"copy")},get isDisabled(){return this.isPending||this.isExecutionBlocked},get isPending(){return this.isDisabledBtn||!!this.user&&this.user.isInPortfolio&&(this.user.isPendingForClosure||this.user.isPendingOpen||this.user.isInAlignment)},get isExecutionBlocked(){return this.$rootScope.session.user&&this.$rootScope.session.user.bsl&&this.$rootScope.session.user.bsl.executionBlocked&&this.$rootScope.session.user.bsl.isBslAvalible?this.$rootScope.session.user.bsl.executionBlocked&&this.$rootScope.session.user.bsl.isBslAvalible:!1},onRestrictionClick:function(){this.portfolioActionsEventsModule.showRestrictionPopup(this.isFund?"fund":"copy",(this.appSource||"")+"-trade-button")}},{bindings:{user:"<",btnClass:"@",appSource:"@",btnClassRestricted:"@",btnText:"@",isRestricted:"@"},controller:i,templateUrl:s.name}});define(rA[28][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/components/trading/copy-button/copy-button.view.html","text":"<button automation-id=\"copy-button-execution\"        ng-if=\"!$ctrl.isRestricted\"        ng-class=\"$ctrl.btnClass\"        ng-disabled=\"$ctrl.isDisabled\"        ng-click=\"$ctrl.user.copy($ctrl.appSource)\">    {{ $root.t.dynamic('copyButton', $ctrl.buttonTextKey) }}</button><button automation-id=\"copy-button-retriction-view\"        ng-if=\"$ctrl.isRestricted\"        ng-class=\"$ctrl.restrictedClass\"        ng-disabled=\"$ctrl.isDisabled\"        ng-click=\"$ctrl.user.copy($ctrl.appSource)\"        ng-bind-html=\":: $root.t.html('copyButton',$ctrl.buttonTextKey, this)\"></button>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[392][0],["angular","underscore",rA[27][0]],function(t,e,s){"use strict";function i(e,s,i,n,o){var r=["buy","sell"];return this.$rootScope=e,this.oneClickTradingFactory=n,t.isDefined(s.type)&&-1!==r.indexOf(s.type.toLowerCase())?(this.type=s.type.toLowerCase(),this.isBuy="buy"===this.type,this.fullName=o.getLocale("tradingButtons."+this.type+"Full"),void(this.shortName=o.getLocale("tradingButtons."+this.type+"Short"))):void i.error("buySellButtons type is not defined")}function n(){return{scope:!0,bindToController:{instrument:"=",appSource:"@",prettify:"<"},controllerAs:"buySellButtonsCtrl",controller:["$rootScope","$attrs","$log","bl.factories.trading.oneClickTrading","infrastruct.services.localization.localizeFactory",i],templateUrl:s.name}}return i.prototype={isExecutionBlocked:function(){return this.$rootScope.session.user&&this.$rootScope.session.user.bsl&&this.$rootScope.session.user.bsl.executionBlocked&&this.$rootScope.session.user.bsl.isBslAvalible?this.$rootScope.session.user.bsl.executionBlocked&&this.$rootScope.session.user.bsl.isBslAvalible:!1},action:function(e){if(e&&(t.isFunction(e.stopImmediatePropagation)&&e.stopImmediatePropagation(),t.isFunction(e.preventDefault)&&e.preventDefault()),!this.isDisabled){var s="";this.appSource&&(s=this.appSource+"-buySellButtons-"+this.type),this.instrument[this.type](!1,s)}},get rate(){return this.instrument&&this.instrument.rate?this.isBuy?this.instrument.AskRounded():this.instrument.BidRounded():0},get isDisabled(){return!this.rate||this.isBuy&&!this.instrument.IsAllowBuy||!this.isBuy&&!this.instrument.IsAllowSell||this.instrument.isPreview||this.isExecutionBlocked()},get lastRateChange(){return this.instrument&&this.instrument.rate?this.instrument.rate[this.isBuy?"lastAskChange":"lastBidChange"]:0},get isOneClickTradingMode(){return this.instrument?this.oneClickTradingFactory.isEnabled()&&!!this.oneClickTradingFactory.getInstrumentSettings(this.instrument.InstrumentID):void 0}},n});define(rA[27][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/components/trading/buy-sell-buttons/buy-sell-buttons.view.html","text":"<div class=\"etoro-trade-button\" data-etoro-locale-ns=\"tradingButtons\" instrument-rate=\"::buySellButtonsCtrl.instrument\" ng-click=\"buySellButtonsCtrl.action($event)\" ng-class=\"{            'disabled': buySellButtonsCtrl.isDisabled,            'positive':  buySellButtonsCtrl.lastRateChange > 0,            'negative': buySellButtonsCtrl.lastRateChange < 0,            'etoro-one-click' : buySellButtonsCtrl.isOneClickTradingMode }\"            automation-id=\"buy-sell-button-container-{{buySellButtonsCtrl.type}}\">    <div class=\"etoro-price-name etoro-top-price-name\">{{:: buySellButtonsCtrl.fullName}}</div>    <div class=\"etoro-price-name etoro-left-price-name\">{{:: buySellButtonsCtrl.shortName}}</div>    <div         class=\"etoro-price-value\">        <span automation-id=\"buy-sell-button-rate-value\"              ng-if=\":: buySellButtonsCtrl.prettify\" ng-bind-html=\"buySellButtonsCtrl.rate | prittynumber: buySellButtonsCtrl.instrument\">        </span>        <span automation-id=\"buy-sell-button-rate-value\"              ng-if=\":: !buySellButtonsCtrl.prettify\">{{ buySellButtonsCtrl.rate | formatRate: buySellButtonsCtrl.instrument}}        </span>    </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[395][0],["angular",rA[31][0],"underscore"],function(t,e){function i(t,e,i,s,n,o,r){this.$rootScope=t,this.$analytics=e,this.localizeFactory=i,this.portfolioActionsEventsModule=s,this.$interpolate=n,this.viewModeService=o,this["class"]="",this.instrumentsGroupsFactory=r,this.isRestrictedCategory=!1,this.restrictionMessage=""}return i.$inject=["$rootScope","$analytics","infrastruct.services.localization.localizeFactory","apps.trader.portfolio.portfolioActionsEvents","$interpolate","bl.factories.settings.viewMode","bl.factories.trading.instruments.instrumentsGroupsFactory"],i.prototype={get instrumentType(){if(!this.instrument||!this.instrument.instrumentType||!this.instrument.instrumentType.InstrumentTypeDescription)return"";var t="instrumentTypes."+this.instrument.instrumentType.InstrumentTypeDescription,e=this.localizeFactory.getResource(t,!1,!0);return e?e:""},get isRestricted(){return!!this.supportRestriction&&this.instrument&&this.instrument.RestrictedManualOpen},get restrictMessage(){return this.isRestricted&&(this.restrictionMessage=this.isRestrictedCategory?this.$interpolate(this.localizeFactory.getResource("restrictTrading.restrictTradeButtonByCategory",!1,!0))({instrumentType:this.instrumentType}):this.$interpolate(this.localizeFactory.getResource("restrictTrading.restrictTradeButtonByInstrument",!1,!0))({instrumentSymbol:this.instrument.SymbolFull})),this.restrictionMessage},$onInit:function(){var t=this.instrumentsGroupsFactory.getTypeById(this.instrument.TypeID);t&&(this.isRestrictedCategory=t.IsRestricted),this.loadLabels()},loadLabels:function(){var e;if(this["class"]=this.btnClass?this.btnClass:this.angularBtnClass,this.toCheckMode&&this.viewModeService.isInvestingMode()){var i=" button-green";t.isString(this.labelLocalize)&&"dropDownActions.openTradeButton"===this.labelLocalize?(e="dropDownActions.buyTradeButton",this.label=this.$interpolate(this.localizeFactory.getResource(e,!1,!0))({instrument:this.instrument})):t.isString(this.labelLocalize)&&"dropDownActions.openTradeButton"===this.labelLocalize?(e="dropDownActions.buyTradeButton",this.label=this.$interpolate(this.localizeFactory.getResource(e,!1,!0))({instrument:this.instrument})):(e="market.viewModeBuy",this.label=this.localizeFactory.getResource(e,!1,!0)),this["class"]+=i}else e=t.isString(this.labelLocalize)?this.labelLocalize:"market.invest",this.label=this.localizeFactory.getResource(e,!1,!0)},onRestrictionClick:function(){this.instrument&&this.portfolioActionsEventsModule.showRestrictionPopup("instrument",(this.appSource||"")+"-trade-button")},onClick:function(e){this.disablePropagation&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.instrument&&!this.isDisabled&&(this.instrument.IsAllowBuy&&this.instrument.buy(!0,(this.appSource||"")+"-trade-button"),this.onClickAnalytics&&t.isString(this.onClickAnalytics.name)&&this.$analytics.eventTrack(this.onClickAnalytics.name,this.onClickAnalytics.properties||{},this.onClickAnalytics.category||"",this.onClickAnalytics.label||""),this.onClickEvent&&this.onClickEvent())},get isDisabled(){return!this.instrument||!this.instrument.IsAllowBuy||this.isExecutionBlocked},get isExecutionBlocked(){return this.$rootScope.session.user&&this.$rootScope.session.user.bsl&&this.$rootScope.session.user.bsl.executionBlocked&&this.$rootScope.session.user.bsl.isBslAvalible?this.$rootScope.session.user.bsl.executionBlocked&&this.$rootScope.session.user.bsl.isBslAvalible:!1}},{controller:i,bindings:{instrument:"<",btnClass:"@",angularBtnClass:"<",disablePropagation:"<",onClickAnalytics:"<",labelLocalize:"@",appSource:"@",supportRestriction:"<",toCheckMode:"<",onClickEvent:"&?"},templateUrl:e.name}});define(rA[31][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/components/trading/trade-button/trade-button.view.html","text":"<div automation-id=\"trade-button\"        ng-if=\"!$ctrl.isRestricted\"        ng-disabled=\"$ctrl.isDisabled\"        ng-class=\"$ctrl.class\"        class=\"trade-button\"        instrument-rate=\"$ctrl.instrument\"        ng-click=\"$ctrl.onClick($event)\"        ng-bind-html=\"$ctrl.label\"></div><div automation-id=\"trade-button-restrict\"     class=\"restrict-trading\"     ng-if=\"$ctrl.isRestricted\"     ng-click=\"$ctrl.onRestrictionClick($event)\"     ng-bind-html=\"$ctrl.restrictMessage\"></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[357][0],["angular",rA[30][0]],function(t,n){function e(){}return e.$inject=[],e.prototype={closePopUp:function(){this.onClose()}},{controller:e,bindings:{onClose:"&",appSource:"@",type:"<",symbol:"<"},templateUrl:n.name}});define(rA[30][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/components/trading/restrict-trading/restrict-trading.view.html","text":"<div class=\"restrict-trading-popup\" data-etoro-locale-ns=\"restrictTrading\">    <div class=\"w-confirmation-modal-title restrict-trading-popup-title\"></div>    <a class=\"w-share-header-nav-button-x sprite restrict-trading\" ng-click=\"$ctrl.closePopUp()\"></a>    <div class=\"restrict-trading-popup-body\">        <div class=\"restrict-trading-popup-image\" ng-if=\"$ctrl.type !== 'detachFailureRestriction'\"></div>        <div ng-if=\":: $ctrl.type==='instrument'\" class=\"restrict-trading-popup-message\">            {{_html(restrictionReason)_}}        </div>        <div ng-if=\":: $ctrl.type==='entryAndPendingOrder'\"             ng-bind-html=\":: $root.t.dynamic('restrictTrading', 'entryAndPendingOrderRestrictionReason', this)\"            class=\"restrict-trading-popup-message\">        </div>        <div ng-if=\":: $ctrl.type==='copy'\" class=\"restrict-trading-popup-message\">            {{_html(copyRestrictionReason)_}}        </div>        <div ng-if=\":: $ctrl.type==='fund'\" class=\"restrict-trading-popup-message\">            {{_html(fundRestrictionReason)_}}        </div>        <div ng-if=\":: $ctrl.type==='exitOrder'\"             ng-bind-html=\":: $root.t.dynamic('restrictTrading', 'exitOrderRestrictionReason', this)\"            class=\"restrict-trading-popup-message\">        </div>        <div ng-if=\":: $ctrl.type==='pendingOrder'\"             ng-bind-html=\":: $root.t.dynamic('restrictTrading', 'pendingOrder', this)\"            class=\"restrict-trading-popup-message\">        </div>        <div ng-if=\"$ctrl.type === 'detachFailureRestriction'\" class=\"detach-failure\">            {{ _html(detachFailureRestriction)_ }}        </div>    </div>    <div class=\"restrict-trading-popup-dammy-column\"></div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[394][0],["angular",rA[29][0],"underscore"],function(t,e,s){function n(t,e,s,n,i){this.instrumentsFactory=t,this.instrumentsGroupsFactory=e,this.$analytics=s,this.localizeFactory=n,this.$location=i,this.instrumentsTypeUrlMapKeys={1:"/discover/markets/currencies",2:"/discover/markets/commodities",4:"/discover/markets/indices",5:"/discover/markets/stocks",6:"/discover/markets/etf",10:"/discover/markets/cryptocurrencies/coins"},this._init()}return n.$inject=["bl.factories.trading.instruments.instrumentsFactory","bl.factories.trading.instruments.instrumentsGroupsFactory","$analytics","infrastruct.services.localization.localizeFactory","$location"],n.prototype={_init:function(){if(this.upsellData&&this.upsellData.instrumentTypeId&&this.upsellData.viewMoreInstrumentTypeId&&this.upsellData.typeOfPopup){var t=this.instrumentsGroupsFactory.getTypeById(this.upsellData.viewMoreInstrumentTypeId).textKey||"";this.$analytics.eventTrack("Open Trade Upsell - Show Popup",{PopupType:"A"===this.upsellData.typeOfPopup?"MoreAssets":"MoreTypes",SuggestedType:t});var e="markets.instrumentType."+this.upsellData.instrumentTypeId;this.instrumentTypeName=this.localizeFactory.getResource(e,!1,!0),this._loadInstruments()}},_loadInstruments:function(){this.upsellData&&this.upsellData.instrumentsIds&&this.upsellData.instrumentsIds.length>0&&(this.tradeItems=s.map(this.upsellData.instrumentsIds,function(t){return this.instrumentsFactory.getById(t)},this))},closePopUp:function(){this.onClose()},onLinkClick:function(){this.$analytics.eventTrack("Open Trade Upsell - Discovery - Click"),this.closePopUp()},onTradeClick:function(t){t&&this.$analytics.eventTrack("Open Trade Upsell - Buy - Click",{"Instrument Type":this.instrumentsGroupsFactory.getTypeById(t.InstrumentTypeID).textKey||"","Instrument Name":t.Name})},onChartClick:function(t){t&&(this.$location.path(t.Url),this.closePopUp())}},{controller:n,bindings:{onClose:"&",upsellData:"<"},templateUrl:e.name}});define(rA[29][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/components/trading/open-trade-upsell-popup/open-trade-upsell-popup.view.html","text":"<div class=\"open-trade-upsell-popup\" data-etoro-locale-ns=\"openTradeUpsellPopup\">    <a class=\"w-share-header-nav-button-x sprite restrict-trading open-trade-upsell-popup-close-btn\" ng-click=\"$ctrl.closePopUp()\"></a>    <div class=\"open-trade-upsell-popup-body\">        <div class=\"open-trade-upsell-popup-title\">            {{_if($ctrl.upsellData.typeOfPopup==='A', \"_firstTradeTitle_\", \"_nextTradeTitle_\")_}}        </div>        <div class=\"open-trade-upsell-popup-message\">            {{_if($ctrl.upsellData.typeOfPopup==='A', \"_firstTradeText_\", \"_nextTradeText_\")_}}        </div>        <div class=\"widget-item pointer open-trade-upsell-list\"             ng-repeat=\"item in ::$ctrl.tradeItems\">            <div class=\"open-trade-upsell-popup-small-cell\">                <a class=\"card-avatar-ph\" ng-click=\"$ctrl.closePopUp()\" ng-href=\"{{::item.Url}}\">                    <img class=\"avatar\" ng-src=\"{{:: item.Avatars.default }}\" alt=\"{{:: item.DisplayName}}\"/>                </a>                <a class=\"user-info\" ng-click=\"$ctrl.closePopUp()\" ng-href=\"{{::item.Url}}\">                    <div class=\"user-nickname\">{{::                        item.Name}}                    </div>                    <div class=\"user-fullname\" ui-if-breakpoint=\"!mobile\">{{:: item.fullName}}</div>                </a>            </div>            <div class=\"open-trade-upsell-popup-small-cell\" ui-if-breakpoint=\"!mobile\" ng-click=\"$ctrl.onChartClick(item)\">                <div class=\"market-card-chart-ph upsell-popup\"                     ng-if=\"!item.isPreview\">                    <span class=\"new-tab-chart sprite\"></span>                    <div data-instrument-sparklines=\"\" data-instrument-id=\"{{::item.ItemId}}\"                         data-resolution-id=\"{{'day'}}\"></div>                </div>            </div>            <div class=\"open-trade-upsell-popup-big-cell\">                <div ng-if=\"item.Type==='instrument'\"                     class=\"etoro-widget-button etoro-horizontal etoro-float-clear investing-mode open-trade-upsell-popup-mode\">                    <div class=\"priceCell\">                        <price instrument=\":: item\"                               stop-animation=\"true\"></price>                    </div>                    <div class=\"btnCell\" ng-click=\"$ctrl.onTradeClick(item)\">                        <trade-button instrument=\":: item\"                                      btn-class=\"button-standard button-blue head-action-button history-portfolio-overview-list-view-investing-mode \"                                      app-source=\"home-widgetsBox-watchList-watchList.view\"                                      support-restriction=\"false\"                                      to-check-mode=\"true\"                                      on-click-event=\"$ctrl.closePopUp()\">                        </trade-button>                    </div>                </div>            </div>        </div>        <div class=\"open-trade-upsell-popup-links\">            <a class=\"e-link\" ng-click=\"$ctrl.onLinkClick()\" ng-href={{::$ctrl.instrumentsTypeUrlMapKeys[$ctrl.upsellData.viewMoreInstrumentTypeId]}}>                {{:: $root.t.dynamic('openTradeUpsellPopup' , 'viewMore' +  $ctrl.upsellData.viewMoreInstrumentTypeId)}}            </a>            {{_or_}}            <a class=\"e-link\" ng-click=\"$ctrl.onLinkClick()\" ng-href=\"/discover/markets\">{{_viewAllMarkets_}}</a>        </div>        <div class=\"open-trade-upsell-popup-disclaimer\">{{_disclaimer_}}</div>    </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[266][0],[rA[86][0]],function(e){function t(e){this.viewModeService=e,this.isInvestingMode=this.viewModeService.isInvestingMode()}return t.$inject=["bl.factories.settings.viewMode"],t.prototype={},{bindings:{instrument:"<",btnClass:"<",disablePropagation:"<",onClickAnalytics:"<",labelLocalize:"<",appSource:"<",supportRestriction:"<",toCheckMode:"<",onClickEvent:"&?"},controller:t,templateUrl:e.name}});define(rA[86][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/upgrades/components/trade-buttons.view.html","text":"<div ng-if=\"!$ctrl.isInvestingMode\" class=\"etoro-widget-button etoro-horizontal etoro-float-clear\">    <div class=\"etoro-sell-button\" data-ui-buysell-buttons=\"\" data-instrument=\"$ctrl.instrument\" data-type=\"sell\" data-app-source=\"$ctrl.appSource\"></div>    <div class=\"etoro-buy-button\" data-ui-buysell-buttons=\"\" data-instrument=\"$ctrl.instrument\" data-type=\"buy\" data-app-source=\"$ctrl.appSource\"></div></div><div ng-if=\"$ctrl.isInvestingMode\" class=\"etoro-widget-button etoro-horizontal etoro-float-clear investing-mode\">    <div class=\"priceCell\">        <price instrument=\":: $ctrl.instrument\"></price>    </div>    <div class=\"btnCell\">        <trade-button instrument=\":: $ctrl.instrument\"                      angular-btn-class=\"$ctrl.btnClass\"                      app-source=\"$ctrl.appSource\"                      support-restriction=\"$ctrl.supportRestriction\"                      to-check-mode=\"$ctrl.toCheckMode\">        </trade-button>    </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[264][0],[rA[84][0]],function(t){function n(){}return n.$inject=[],n.prototype={},{bindings:{instrument:"<",appSource:"<",prettify:"<"},controller:n,templateUrl:t.name}});define(rA[84][0] , [rA[428][0]],function(f){var o={"name":"/etoro/apps/upgrades/components/buySellButtons/buy-sell-buttons.view.html","text":"<div class=\"etoro-sell-button\" data-ui-buysell-buttons=\"\" prettify=\"$ctrl.prettify\" data-instrument=\"$ctrl.instrument\" data-type=\"sell\" data-app-source=\"$ctrl.appSource\"></div><div class=\"etoro-buy-button\" data-ui-buysell-buttons=\"\" prettify=\"$ctrl.prettify\" data-instrument=\"$ctrl.instrument\" data-type=\"buy\" data-app-source=\"$ctrl.appSource\"></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[354][0],["angular"],function(n){"use strict";var e=n.module("integrations.guide",[]);return e.run(["$rootScope","infrastruct.services.config","$analytics","integrations.guide",function(e,i,t,a){function o(n){setTimeout(function(){a.activateTopic(n)},1500),e.$on("$routeChangeSuccess",function(){if(window.inline_manual_player)var n=setTimeout(function(){window.inline_manual_player.manualReinit(),clearTimeout(n)},1500)})}function c(){i.setDynamicKeys({isInlinemanualActive:!1}),window.inline_manual_player&&inline_manual_player.destroy()}var u,l,r;i.dynamics.isInlinemanualActive&&(u=e.$on("app:ready",function(){var t=i.query.publictopic;!e.session.isLoggedIn&&n.isString(t)&&o(t),u()}),l=e.$on("login:success",function(){var e=i.query.guidetopic;n.isString(e)&&o(e),l()}),r=e.$on("emailVerification:on:uiChange",function(){c(),r()}))}]),e.service("integrations.guide",["$window","$location","$rootScope","$analytics","infrastruct.services.config","infrastruct.ui.uiIfBreakpoint","infrastruct.services.localization.localizeFactory",function(n,e,i,t,a,o,c){function u(){var n,e=window.inline_manual_player;!l&&e&&(l=!0,e.etoroCallbacks={skipElementHidden:function(n,e,i,t){var a=t.element,o=t.op,c=parseInt(t.step);$(a).is(":visible")&&"visible"==o?n.goToStep(c):!$(a).is(":hidden")&&0!=$(a).length||"hidden"!=o||n.goToStep(c)}},e.setCallbacks({onStepShow:function(e,t,a){var o=t+"_"+a;n!=o&&(n=o),e.topics[t].steps.length-1===a&&i.$broadcast("app:guide:complete",{topic:t,step:a})},onStepDeactivate:function(n,e,i){t.eventTrack("Guidance - Step",{category:"Guidance",label:"Step - "+i,Topic:e,Step:i,Id:e+"_"+i})}}))}var l=!1,r=requirejs.config({context:"etoro",paths:{inlinemanual:"https://inlinemanual.com/embed/player.91ba2f50a37aabc9e63b0e5a0b31416f"}}),s=!1;return{get enabled(){return s&&a.dynamics.isInlinemanualActive},get isDevice(){return o.isDevice},get isMobile(){return o.isMobile},showPanel:function(){this.enabled&&r(["inlinemanual"],function(){var n;!l&&u(),n=window.inline_manual_player,n&&(n.setLanguage(c.languageCode),n.showPanel())})},activateTopic:function(n){var e=c.languageCode||"en";this.enabled&&r(["inlinemanual"],function(){var i;!l&&u(),i=window.inline_manual_player,i&&(i.setLanguage(e.split("-")[0]),i.activateTopic(n))})}}}]),e});define(rA[355][0],["angular"],function(){"use strict";function e(e,t,i,o,s,n){this.$rootScope=e,this.config=t,this.$location=i,this.localizeFactory=o,this.uiDialog=s,this.$timeout=n,this.INTERCOM_ROUTES_WHITE_LIST=/^\/(feed|people|discover|markets|sign-up|home)(.)*/i,this.INTERCOM_ROUTES_BLACK_LIST=/^\/(people\/(.)+\/portfolio\/(.)+|markets\/(.)+\/chart|deposit\/(.)+)/i,this.INTERCOM_TOUR_ROUTES=["/home"],this.shouldOpen=!1,this.shouldCloseForCordova=!1,this.opened=!1,this.requestsTimeout=5e3,this.isCordovaApp,this.intercomRequire,this.isDepositorUser,this.openTimeout=4e3,this.intercomUserToken="",t.dynamics.whenReady().then(function(){t.dynamics.isIntercomActive&&this.enableIntercom()}.bind(this))}var t=angular.module("integrations.intercom",[]);return t.service("integrations.intercom.service",e),t.run(["integrations.intercom.service",function(){}]),e.$inject=["$rootScope","infrastruct.services.config","$location","infrastruct.services.localization.localizeFactory","uiDialog","$timeout"],e.prototype={enableIntercom:function(){this.isCordovaApp=!!window.cordova,this.intercomRequire||(this.intercomRequire=requirejs.config({context:"etoro",paths:{Intercom:"https://widget.intercom.io/widget/x8o64ufr"}}));var e=function(){e.c(arguments)};e.q=[],e.c=function(t){e.q.push(t)},window.Intercom=e,this.addListeners()},openIntercom:function(){this.opened||this.isCordovaApp||this.intercomRequire(["Intercom"],function(){var e=this.$rootScope.session.user;e&&Intercom("boot",this.getIntercomSettingsForWeb(e))}.bind(this))},closeIntercom:function(){this.isCordovaApp||this.intercomRequire(["Intercom"],function(){Intercom("shutdown")})},openByRouteWithDelay:function(){this.$timeout(function(){this.openByRoute()}.bind(this),this.openTimeout)},openByRoute:function(){if(this.shouldOpen&&!this.isDialogOpened())if(this.isCordovaApp){var e=this.$rootScope.session.user;e?(intercom.setUserHash(this.intercomUserToken),intercom.registerIdentifiedUser({userId:e.gcid}),intercom.updateUser(this.getIntercomSettingsForMobile(e))):intercom.registerUnidentifiedUser()}else{var t=this.$location.path();!t||"/"==t||this.INTERCOM_ROUTES_WHITE_LIST.test(t)&&!this.INTERCOM_ROUTES_BLACK_LIST.test(t)?this.openIntercom():this.closeIntercom()}else this.isCordovaApp&&intercom&&(this.shouldCloseForCordova&&(intercom.reset(),this.shouldCloseForCordova=!1),intercom.registerUnidentifiedUser())},overrideLanguage:function(){var e=this.$rootScope.session.user;e&&(this.isCordovaApp?intercom.updateUser(this.getIntercomSettingsForMobile(e)):Intercom("boot",this.getIntercomSettingsForWeb(e)))},addListeners:function(){this.$rootScope.$on("localize:setLanguage",this.overrideLanguage.bind(this)),this.$rootScope.$on("login:success",this.loginSuccessHandler.bind(this)),this.$rootScope.$on("logout:success",this.logoutSuccessHandler.bind(this)),this.$rootScope.$on("user:info:depositor",this.updateIsDepositor.bind(this)),this.$rootScope.$on("uiDialog.opened",this.closeIntercom.bind(this)),this.$rootScope.$on("uiDialog.closed",this.openByRoute.bind(this)),this.$rootScope.$on("$routeChangeSuccess",this.openByRouteWithDelay.bind(this)),this.$rootScope.$on("viewKeeperChangeSuccess",this.openByRoute.bind(this)),this.$rootScope.$on("intercom:open",this.openByRoute.bind(this)),this.$rootScope.$on("open:startTour",this.startTour.bind(this))},getIntercomSettingsForWeb:function(e){var t={app_id:"x8o64ufr",application:this.config.statics.ApplicationIdentifier,name:e.username,user_id:e.gcid,user_hash:this.intercomUserToken,language_override:this.localizeFactory.languageCode,avatar:{type:"avatar",image_url:e.Avatars["default"]},country_by_kyc:e.country.name,first_name:e.firstName,last_name:e.lastName,full_name:e.fullName,user_name:e.username,club_tier:e.playerLevelId,verification_level:e.verificationLevel,regulation_id:e.regulationId,pi_level:e.piLevel};return void 0!=this.isDepositorUser&&(t.depositor=this.isDepositorUser),t},getIntercomSettingsForMobile:function(e){var t={name:e.username,email:e.email,language_override:this.localizeFactory.languageCode,avatar:{type:"avatar",image_url:e.Avatars["default"]},custom_attributes:{country_by_kyc:e.country.name,first_name:e.firstName,last_name:e.lastName,full_name:e.fullName,user_name:e.username,club_tier:e.playerLevelId,verification_level:e.verificationLevel,regulation_id:e.regulationId,pi_level:e.piLevel}};return void 0!=this.isDepositorUser&&(t.custom_attributes.depositor=this.isDepositorUser),t},loginSuccessHandler:function(){this.shouldOpen=!0,this.intercomUserToken=this.config.statics.intercomConfig.userToken,setTimeout(this.getIsDepositor.bind(this),this.requestsTimeout)},logoutSuccessHandler:function(){this.shouldOpen=!1,this.shouldCloseForCordova=!0,this.isDepositorUser=void 0,this.isCordovaApp&&intercom&&intercom.logout(),this.config.statics.intercomConfig.userToken=""},getIsDepositor:function(){var e=this.$rootScope.session.user;e&&e.getIsDepositor().then(function(e){this.isDepositorUser=e}.bind(this))},updateIsDepositor:function(){this.isDepositorUser=!0},startTour:function(e,t){this.isCordovaApp||this.intercomRequire(["Intercom"],function(){t&&Intercom("startTour",t)}.bind(this))},isDialogOpened:function(){var e=$(".dialog-container");return e.length>0||this.uiDialog.isDialogOpen?!0:!1}},t});define(rA[282][0],["moduleDefiner"],function(e){function t(e,t){return t=t&&t.replace(/(&)?client_request_id=[a-z0-9-]{36}/,"").replace(/\?$/,""),s?"u-"+t+"m-"+e:""}function n(e){return s&&i&&i[e]}function r(){s=!1,delete window.acceleratorDict,i=null}function o(e){return function(r,o,a,u,c,l){function d(){h.startTime&&(b="accelerated-request-timing-ms : "+((new Date).getTime()-h.startTime.getTime())+"\n")}function f(){var e=w.statusText||"",t="response"in w?w.response:w.responseText,n=1223===w.status?204:w.status;0===n&&(n=t?200:0),g(u,n,t,w.getAllResponseHeaders(),e)}function m(){w&&w.abort()}function p(){i&&delete i[T]}function g(e,t,n,r,o){d(),D&&clearTimeout(D),p(),e(t,n,r+b,o)}var T=t(r,o),v=n(T);if(s&&v){var h=v.config,b="";if(h.simulated&&(h.body||h.statusCode))return g(u,h.statusCode,h.body,h.headers||"",h.status||"OK");var w=v.xhr,y=function(){p(),g(u,-1,null,null,"")},D=setTimeout(m,l||8e3);w.onload=f,w.onabort=w.onerror=y;var $=v.stubs[0];"onload"==$?f():0==v.config.allowRetry&&"onerror"==$||"onabort"==$?y():$&&e.apply(this,arguments)}else e.apply(this,arguments)}}var a=e("infrastruct.utils.httpHandler"),i=window.acceleratorDict,s=!0;return setTimeout(r,6e4),a.config(["$provide",function(e){e.decorator("$httpBackend",["$delegate",o])}]),a});define(rA[457][0],["angular",rA[498][0],rA[500][0],rA[424][0]],function(r,t,e,s){"use strict";return r.module("infrastruct",[t.name,e.name,s.name])});define(rA[499][0],["moduleDefiner","underscore",rA[351][0],rA[348][0],rA[459][0],rA[386][0],rA[434][0],rA[461][0],rA[299][0],rA[300][0],rA[286][0],rA[463][0],rA[460][0],rA[388][0],rA[349][0],rA[489][0],rA[347][0],rA[433][0],rA[350][0],rA[385][0],rA[462][0],rA[298][0],rA[436][0],rA[488][0],rA[285][0]],function(i,t){"use strict";return i("infrastruct.ui",t.rest(arguments,2))});define(rA[459][0],["moduleDefiner","angular","underscore",rA[351][0]],function(e,t,n,o){"use strict";var i=e("infrastruct.ui.dropDownMenu",[o]);return i.directive("dropdownMenu",["$document","$rootScope",function(e,o){function i(e,t){this.ddlId=n.uniqueId("ddl_"),this.isOpen=!1,this.$element=t,this.$scope=e,this.listeners={open:[],close:[]},this.$element.on("click",n.bind(this.open,this)),e.$on("dragStart",n.bind(this.close,this))}function s(e){var n=document.querySelectorAll(".dropdown-menu");e&&l>0&&(e.defaultPrevented=!1),t.forEach(n,function(e){var t=r(e).controller("dropdownMenu");t&&t.close()})}var r=t.element,l=0;return i.prototype={open:function(e){var o=e&&e.target;return o&&(o.href||(e.preventDefault(),e.stopPropagation&&e.stopPropagation()),this.isOpen&&"INPUT"===o.nodeName)?void(e.stopPropagation&&e.stopPropagation()):this.isOpen||this.$element.attr("disabled")?void s():(s(),this.$scope.$evalAsync(n.bind(function(){this.$element.addClass("open"),this.isOpen=!0,l++},this)),$("html").one("click.dropdownMenu",n.bind(this.close,this)),void n.each(this.listeners.open,function(e){t.isFunction(e)&&e.call(this)},this))},close:function(){this.isOpen&&l--,this.isOpen=!1,this.$element.removeClass("open"),n.each(this.listeners.close,function(e){t.isFunction(e)&&e.call(this)},this)},on:function(e,t){this.listeners[e]&&this.listeners[e].push(t)}},o.$on("$routeChangeStart",s),{restrict:"A",controllerAs:"ddlCtrl",controller:["$scope","$element",i]}}]),i.directive("dropSelectBox",["$window","uiDialog","$compile",function(e,n){var o=740;return{require:"^dropdownMenu",restrict:"A",compile:function(i){var s=i.html();return function(i,r,l,c){var a;s||(s=r.html()),c.on("open",function(){var r=t.element(e);r.width()<o&&(a||(a=n.open({scope:i,plain:!0,template:'<div class="w-share-modal mobile-dropdown"><a class="w-share-header-nav-button sprite" ng-click="ddlCtrl.close();closeThisDialog();"></a><div mobile-automation-id="btn-cogwheel-wrapp-dialog" class="mobile-dropdown-info-wrapper">'+s+"</div></div>"})))}),c.on("close",function(){a&&a.close(),a=null})}}}}]),i});define(rA[386][0],["angular","moduleDefiner"],function(n,e){"use strict";var i=e("infrastruct.ui.infiniteScroll");return i.value("THROTTLE_MILLISECONDS",800),i.directive("uiInfiniteScroll",["$rootScope","$window","$interval","THROTTLE_MILLISECONDS",function(e,i,t,l){return{scope:{uiInfiniteScroll:"&",uiInfiniteScrollUp:"&",uiInfiniteScrollContainer:"=",uiInfiniteScrollDistance:"=",uiInfiniteScrollDisabled:"=",uiInfiniteScrollUseDocumentBottom:"="},link:function(o,u,r){var c,f,a,d,s,m,S,I,p,v,$,D,g,h,w,T,E,C,b,L;return E=n.element(i),g=null,h=null,f=null,a=null,v=!0,T=!1,p=function(n){return n=n[0]||n,isNaN(n.offsetHeight)?n.document.documentElement.clientHeight:n.offsetHeight},$=function(n){return n[0].getBoundingClientRect&&!n.css("none")?n[0].getBoundingClientRect().top+D(n):void 0},D=function(n){return n=n[0]||n,isNaN(window.pageYOffset)?n.document.documentElement.scrollTop:n.ownerDocument.defaultView.pageYOffset},b=function(){var n,i,t,l,r;return a===E?(n=p(a)+D(a[0].document.documentElement),t=$(u)+p(u)):(n=p(a),i=0,void 0!==$(a)&&(i=$(a)),t=$(u)-i+p(u)),T&&(t=p((u[0].ownerDocument||u[0].document).documentElement)),l=t-n,r=l<=p(a)*g+1,r?(f=!0,h?o.$$phase||e.$$phase?o.uiInfiniteScroll():o.$apply(o.uiInfiniteScroll):void 0):f=!1},L=function(){return(o.$$phase||e.$$phase)&&o.uiInfiniteScrollUp?o.uiInfiniteScrollUp({distance:$(u)}):o.$apply(function(){o.uiInfiniteScrollUp({distance:$(u)})})},I=function(){var n=$(u);n>C?L():b(),C=n},w=function(n,e){var i,l,o;return o=null,l=0,i=function(){var e;return l=(new Date).getTime(),t.cancel(o),o=null,n.call(),e=null},function(){var u,r;return u=(new Date).getTime(),r=e-(u-l),0>=r?(clearTimeout(o),t.cancel(o),o=null,l=u,n.call()):o?void 0:o=t(i,r,1)}},null!=l&&(I=w(I,l)),o.$on("$destroy",function(){return a.unbind("scroll",I)}),m=function(n){return g=parseFloat(n)||0},o.$watch("uiInfiniteScrollDistance",m),m(o.uiInfiniteScrollDistance),s=function(n){return h=!n,h&&f?(f=!1,I()):void 0},o.$watch("uiInfiniteScrollDisabled",s),s(o.uiInfiniteScrollDisabled),S=function(n){return T=n},o.$watch("uiInfiniteScrollUseDocumentBottom",S),S(o.uiInfiniteScrollUseDocumentBottom),c=function(n){return null!=a&&a.unbind("scroll",I),a=n,null!=n?a.bind("scroll",I):void 0},c(E),d=function(e){if(null!=e&&0!==e.length){if(e instanceof HTMLElement?e=n.element(e):"function"==typeof e.append?e=n.element(e[e.length-1]):"string"==typeof e&&(e=n.element(document.querySelector(e))),null!=e)return c(e);throw new Exception("invalid infinite-scroll-container attribute.")}},d(o.uiInfiniteScrollContainer||[]),null!=r.uiInfiniteScrollParent&&c(n.element(u.parent())),null!=r.uiInfiniteScrollImmediateCheck&&(v=o.$eval(r.uiInfiniteScrollImmediateCheck)),t(function(){return v?I():void 0},0,1)}}}]),i});define(rA[434][0],["moduleDefiner","angular",rA[351][0]],function(t,i,n){"use strict";var a=t("infrastruct.ui.navigation",[n]);return a.directive("uiNavigation",["$location","$parse","$window","$rootScope","$timeout",function(t,n,a,r,e){function o(t,i,n){var a=n;if(a.match(i+"(?=\\?|$)"))return t;for(var r=i.split("/"),e=0;e<r.length;e++){if(a===r.join("/"))return t;r.pop()}return null}function u(u,c,s){function f(){a.innerWidth<=1024&&r.$broadcast("layout:menu:close")}var v,l=n(s.uiNavigation)(u,{}),d="a",h="active";l&&(d=l.navLinks||d,h=l.activeClass||h),v=c.find(d);var m=function(){var n=t.path();v.each(function(){var t=$(this).attr("href");if(v=c.find(d),t){var a=t,r=o(this,n,a);if(r)return v.removeClass(h),void $(r).addClass(h);var e=i.element(this).data("parent");e&&(r=o(this,n,e),r&&(v.removeClass(h),$(r).addClass(h)))}})};e(function(){m()},1e3),u.$on("$routeChangeSuccess",function(){v.removeClass(h),m()}),v.on("click",f)}return{resctrict:"AC",link:u}}]),a});define(rA[461][0],["moduleDefiner","underscore","angular",rA[351][0]],function(n,e,t,i){"use strict";var r=n("infrastruct.ui.onOverflow",[i]);return r.directive("uiOnOverflow",["$window","$rootScope",function(n,e){function i(n){return n&&0!==n.length?n[0].scrollHeight>n[0].clientHeight||n[0].scrollWidth>n[0].clientWidth:!1}return{restrict:"CA",scope:{uiOnOverflow:"&",uiOnOverflowWatch:"="},link:function(r,o){var u=_.uniqueId("of"),c=_.debounce(function(){r.$$phase||e.$$phase?r.uiOnOverflow()(i(o)):r.$apply(function(){r.uiOnOverflow()(i(o))})},500);t.element(n).on("resize."+u,function(){c()}),r.$watch(function(){return r.uiOnOverflowWatch},function(){c()}),r.$on("$destroy",function(){t.element(n).off("resize."+u)}),c()}}}]),r});define(rA[299][0],["moduleDefiner","jquery-sortable"],function(e){"use strict";var t=e("infrastruct.ui.sortable");return t.value("uiSortableConfig",{}),t.directive("uiSortable",["uiSortableConfig","$timeout","$log",function(e,t,n){return{require:"?ngModel",link:function(o,i,r,l){function a(e,t){return t&&"function"==typeof t?function(n,o){e(n,o),t(n,o)}:e}function s(e,t){var n=e.sortable("option","helper");return"clone"===n||"function"==typeof n&&t.item.sortable.isCustomHelperUsed()}var u,c={},d={receive:null,remove:null,start:null,stop:null,update:null},m={helper:null};return angular.extend(c,e,o.$eval(r.uiSortableOptions)),angular.element.fn&&angular.element.fn.jquery?(l?(o.$watch(r.ngModel+".length",function(){t(function(){i.data("ui-sortable")&&i.sortable("refresh")})}),d.start=function(e,t){t.item.sortable={index:t.item.index(),cancel:function(){t.item.sortable._isCanceled=!0},isCanceled:function(){return t.item.sortable._isCanceled},isCustomHelperUsed:function(){return!!t.item.sortable._isCustomHelperUsed},_isCanceled:!1,_isCustomHelperUsed:t.item.sortable._isCustomHelperUsed}},d.activate=function(){u=i.contents();var e=i.sortable("option","placeholder");if(e&&e.element&&"function"==typeof e.element){var t=e.element();t=angular.element(t);var n=i.find('[class="'+t.attr("class")+'"]');u=u.not(n)}},d.update=function(e,t){t.item.sortable.received||(t.item.sortable.dropindex=t.item.index(),t.item.sortable.droptarget=t.item.parent(),i.sortable("cancel")),s(i,t)&&!t.item.sortable.received&&(u=u.not(u.last())),u.appendTo(i),t.item.sortable.received&&!t.item.sortable.isCanceled()&&o.$apply(function(){l.$modelValue.splice(t.item.sortable.dropindex,0,t.item.sortable.moved)})},d.stop=function(e,t){!t.item.sortable.received&&"dropindex"in t.item.sortable&&!t.item.sortable.isCanceled()?o.$apply(function(){l.$modelValue.splice(t.item.sortable.dropindex,0,l.$modelValue.splice(t.item.sortable.index,1)[0])}):"dropindex"in t.item.sortable&&!t.item.sortable.isCanceled()||s(i,t)||u.appendTo(i)},d.receive=function(e,t){t.item.sortable.received=!0},d.remove=function(e,t){"dropindex"in t.item.sortable||(i.sortable("cancel"),t.item.sortable.cancel()),t.item.sortable.isCanceled()||o.$apply(function(){t.item.sortable.moved=l.$modelValue.splice(t.item.sortable.index,1)[0]})},m.helper=function(e){return e&&"function"==typeof e?function(t,n){var o=e(t,n);return n.sortable._isCustomHelperUsed=n!==o,o}:e},o.$watch(r.uiSortable,function(e){i.data("ui-sortable")&&angular.forEach(e,function(e,t){d[t]?("stop"===t&&(e=a(e,function(){o.$apply()})),e=a(d[t],e)):m[t]&&(e=m[t](e)),i.sortable("option",t,e)})},!0),angular.forEach(d,function(e,t){c[t]=a(e,c[t])})):n.info("ui.sortable: ngModel not provided!",i),void i.sortable(c)):void n.error("ui.sortable: jQuery should be included before AngularJS!")}}}]),t});!function(t){"function"==typeof define&&define.amd?define("jquery-sortable",["jquery"],t):t(jQuery)}(function(t){function e(e,s){var n,o,r,h=e.nodeName.toLowerCase();return"area"===h?(n=e.parentNode,o=n.name,e.href&&o&&"map"===n.nodeName.toLowerCase()?(r=t("img[usemap='#"+o+"']")[0],!!r&&i(r)):!1):(/^(input|select|textarea|button|object)$/.test(h)?!e.disabled:"a"===h?e.href||s:s)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(e){var i=this.css("position"),s="absolute"===i,n=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return s&&"static"===e.css("position")?!1:n.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&o.length?o:t(this[0].ownerDocument||document)},uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])},focusable:function(i){return e(i,!isNaN(t.attr(i,"tabindex")))},tabbable:function(i){var s=t.attr(i,"tabindex"),n=isNaN(s);return(n||s>=0)&&e(i,!n)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,i){function s(e,i,s,o){return t.each(n,function(){i-=parseFloat(t.css(e,"padding"+this))||0,s&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(e){return void 0===e?r["inner"+i].call(this):this.each(function(){t(this).css(o,s(this,e)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?r["outer"+i].call(this,e):this.each(function(){t(this).css(o,s(this,e,!0,n)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:function(e){return function(i,s){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),s&&s.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var i,s,n=t(this[0]);n.length&&n[0]!==document;){if(i=n.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0}}),t.ui.plugin={add:function(e,i,s){var n,o=t.ui[e].prototype;for(n in s)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([i,s[n]])},call:function(t,e,i,s){var n,o=t.plugins[e];if(o&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(n=0;n<o.length;n++)t.options[o[n][0]]&&o[n][1].apply(t.element,i)}};var s=0,n=Array.prototype.slice;t.cleanData=function(e){return function(i){var s,n,o;for(o=0;null!=(n=i[o]);o++)try{s=t._data(n,"events"),s&&s.remove&&t(n).triggerHandler("remove")}catch(r){}e(i)}}(t.cleanData),t.widget=function(e,i,s){var n,o,r,h,a={},c=e.split(".")[0];return e=e.split(".")[1],n=c+"-"+e,s||(s=i,i=t.Widget),t.expr[":"][n.toLowerCase()]=function(e){return!!t.data(e,n)},t[c]=t[c]||{},o=t[c][e],r=t[c][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new r(t,e)},t.extend(r,o,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),h=new i,h.options=t.widget.extend({},h.options),t.each(s,function(e,s){return t.isFunction(s)?void(a[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},n=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=n,e=s.apply(this,arguments),this._super=i,this._superApply=o,e}}()):void(a[e]=s)}),r.prototype=t.widget.extend(h,{widgetEventPrefix:o?h.widgetEventPrefix||e:e},a,{constructor:r,namespace:c,widgetName:e,widgetFullName:n}),o?(t.each(o._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,r,i._proto)}),delete o._childConstructors):i._childConstructors.push(r),t.widget.bridge(e,r),r},t.widget.extend=function(e){for(var i,s,o=n.call(arguments,1),r=0,h=o.length;h>r;r++)for(i in o[r])s=o[r][i],o[r].hasOwnProperty(i)&&void 0!==s&&(e[i]=t.isPlainObject(s)?t.isPlainObject(e[i])?t.widget.extend({},e[i],s):t.widget.extend({},s):s);return e},t.widget.bridge=function(e,i){var s=i.prototype.widgetFullName||e;t.fn[e]=function(o){var r="string"==typeof o,h=n.call(arguments,1),a=this;return r?this.each(function(){var i,n=t.data(this,s);return"instance"===o?(a=n,!1):n?t.isFunction(n[o])&&"_"!==o.charAt(0)?(i=n[o].apply(n,h),i!==n&&void 0!==i?(a=i&&i.jquery?a.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")}):(h.length&&(o=t.widget.extend.apply(null,[o].concat(h))),this.each(function(){var e=t.data(this,s);e?(e.option(o||{}),e._init&&e._init()):t.data(this,s,new i(o,this))})),a}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=s++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,n,o,r=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(r={},s=e.split("."),e=s.shift(),s.length){for(n=r[e]=t.widget.extend({},this.options[e]),o=0;o<s.length-1;o++)n[s[o]]=n[s[o]]||{},n=n[s[o]];if(e=s.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];r[e]=i}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,i,s){var n,o=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=n=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),t.each(s,function(s,r){function h(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof r?o[r]:r).apply(o,arguments):void 0}"string"!=typeof r&&(h.guid=r.guid=r.guid||h.guid||t.guid++);var a=s.match(/^([\w:-]*)\s*(.*)$/),c=a[1]+o.eventNamespace,l=a[2];l?n.delegate(l,c,h):i.bind(c,h)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(i).undelegate(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,s){var n,o,r=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(r)&&r.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var r,h=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),r=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),r&&t.effects&&t.effects.effect[h]?s[e](n):h!==e&&s[h]?s[h](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}});var o=(t.widget,!1);t(document).mouseup(function(){o=!1});t.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!o){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,s=1===e.which,n="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),o=!0,!0)):!0}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),o=!1,!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.widget("ui.sortable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&e+i>t},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),t.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,i){var s=null,n=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(s=t(this),!1):void 0}),t.data(e.target,o.widgetName+"-item")===o&&(s=t(e.target)),s&&(!this.options.handle||i||(t(this.options.handle,s).find("*").addBack().each(function(){this===e.target&&(n=!0)}),n))?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(e,i,s){var n,o,r=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",r.cursor),this.storedStylesheet=t("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(o)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,s,n,o,r=this.options,h=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+r.scrollSpeed:e.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+r.scrollSpeed:e.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(e.pageY-this.document.scrollTop()<r.scrollSensitivity?h=this.document.scrollTop(this.document.scrollTop()-r.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<r.scrollSensitivity&&(h=this.document.scrollTop(this.document.scrollTop()+r.scrollSpeed)),e.pageX-this.document.scrollLeft()<r.scrollSensitivity?h=this.document.scrollLeft(this.document.scrollLeft()-r.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<r.scrollSensitivity&&(h=this.document.scrollLeft(this.document.scrollLeft()+r.scrollSpeed))),h!==!1&&t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],o=this._intersectsWithPointer(s),o&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==n&&!t.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],n):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset(),o=this.options.axis,r={};o&&"x"!==o||(r.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(r.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=t.left,r=o+t.width,h=t.top,a=h+t.height,c=this.offset.click.top,l=this.offset.click.left,u="x"===this.options.axis||s+c>h&&a>s+c,p="y"===this.options.axis||e+l>o&&r>e+l,d=u&&p;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?d:o<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<r&&h<s+this.helperProportions.height/2&&n-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),s=e&&i,n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return s?this.floating?o&&"right"===o||"down"===n?2:1:n&&("down"===n?2:1):!1},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&e||"up"===s&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function i(){h.push(this)}var s,n,o,r,h=[],a=[],c=this._connectWith();if(c&&e)for(s=c.length-1;s>=0;s--)for(o=t(c[s],this.document[0]),n=o.length-1;n>=0;n--)r=t.data(o[n],this.widgetFullName),r&&r!==this&&!r.options.disabled&&a.push([t.isFunction(r.options.items)?r.options.items.call(r.element):t(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);for(a.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=a.length-1;s>=0;s--)a[s][0].each(i);return t(h)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;i<e.length;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,n,o,r,h,a,c,l=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],p=this._connectWith();if(p&&this.ready)for(i=p.length-1;i>=0;i--)for(n=t(p[i],this.document[0]),s=n.length-1;s>=0;s--)o=t.data(n[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(u.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=u.length-1;i>=0;i--)for(r=u[i][1],h=u[i][0],s=0,c=h.length;c>s;s++)a=t(h[s]),a.data(this.widgetName+"-item",r),l.push({item:a,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,o;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item,e||(s.width=n.outerWidth(),s.height=n.outerHeight()),o=n.offset(),s.left=o.left,s.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,s=e.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),n=t("<"+s+">",e.document[0]).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===s?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(n)):"tr"===s?e._createTrPlaceholder(e.currentItem,n):"img"===s&&n.attr("src",e.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(t,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),s.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var s=this;e.children().each(function(){t("<td>&#160;</td>",s.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(e){var i,s,n,o,r,h,a,c,l,u,p=null,d=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(p&&t.contains(this.containers[i].element[0],p.element[0]))continue;p=this.containers[i],d=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",e,this._uiHash(this)),this.containers[i].containerCache.over=0);if(p)if(1===this.containers.length)this.containers[d].containerCache.over||(this.containers[d]._trigger("over",e,this._uiHash(this)),this.containers[d].containerCache.over=1);else{for(n=1e4,o=null,l=p.floating||this._isFloating(this.currentItem),r=l?"left":"top",h=l?"width":"height",u=l?"clientX":"clientY",s=this.items.length-1;s>=0;s--)t.contains(this.containers[d].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(a=this.items[s].item.offset()[r],c=!1,e[u]-a>this.items[s][h]/2&&(c=!0),Math.abs(e[u]-a)<n&&(n=Math.abs(e[u]-a),o=this.items[s],this.direction=c?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[d])return void(this.currentContainer.containerCache.over||(this.containers[d]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[d].element,!0),this._trigger("change",e,this._uiHash()),this.containers[d]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[d],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",e,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=t(n.containment)[0],i=t(n.containment).offset(),s="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*s}},_generatePosition:function(e){var i,s,n=this.options,o=e.pageX,r=e.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(h[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((r-this.originalPageY)/n.grid[1])*n.grid[1],r=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0],o=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:h.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:h.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){function i(t,e,i){return function(s){i._trigger(t,s,e._uiHash(e))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)e||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(s=0;s<n.length;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}});!function(){function e(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var i=t.originalEvent.changedTouches[0],s=document.createEvent("MouseEvents");s.initMouseEvent(e,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(s)}}if(t.support.touch="ontouchend"in document,t.support.touch){var i,s=t.ui.mouse.prototype,n=s._mouseInit,o=s._mouseDestroy;s._touchStart=function(t){var s=this;!i&&s._mouseCapture(t.originalEvent.changedTouches[0])&&(i=!0,s._touchMoved=!1,e(t,"mouseover"),e(t,"mousemove"),e(t,"mousedown"))},s._touchMove=function(t){i&&(this._touchMoved=!0,e(t,"mousemove"))},s._touchEnd=function(t){i&&(e(t,"mouseup"),e(t,"mouseout"),this._touchMoved||e(t,"click"),i=!1)},s._mouseInit=function(){var e=this;e.element.bind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")}),n.call(e)},s._mouseDestroy=function(){var e=this;e.element.unbind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")}),o.call(e)}}}()});define(rA[300][0],["moduleDefiner",rA[351][0]],function(t,o){"use strict";var e=t("infrastruct.ui.sticky",[o]);return e.directive("uiSticky",["$parse","$window","$timeout","TOUCHSUPPORTED",function(t,o,e,n){function f(t,o){t&&angular.forEach(r,function(e){t.addEventListener(e,o,!1)})}function c(t,o){t&&angular.forEach(r,function(e){t.removeEventListener(e,o,!1)})}function i(i,r,a){var s,u,l="uiSticky",d=0,m=0,v=!1,h=r,p=t(a[l])(i,{}),T=function(t){u&&e.cancel(u),u=e(function(){y(t)},100)};if(void 0!==p){var E=function(t){m=s.scrollTop,m>d?v||(v=!0,h.addClass(p["class"])):v&&(v=!1,h.removeClass(p["class"])),n&&(u&&e.cancel(u),u=e(function(){E(t)},100,!1))},y=function(t){return t&&h.removeData("offsetTop"),0===h[0].offsetTop||h.data("offsetTop")||h.data("offsetTop",h[0].offsetTop),d=h.data("offsetTop")+p.offset,s=angular.element(p.offsetFrom)[0],s?!0:!1};p["class"]=p["class"]||"ui-fixed-doFixed",p.offsetFrom=p.offsetFrom||"body",p.offset=p.offset||0,e(function(){(!p.childEl||(h=r.find(p.childEl),h[0]))&&y()!==!1&&f(s,E)},100),angular.element(o).on("resize."+l,T),i.$on("ui-sticky.Update",function(){T(!0)}),i.$on("$destroy",function(){e.cancel(u),angular.element(o).off("resize."+l),s&&c(s,E)})}}var r=["scroll"];return n&&(r=["touchstart","touchmove","touchend","touchcancel"]),{link:i,restrict:"AE"}}]),e});define(rA[286][0],["moduleDefiner"],function(t){"use strict";var e=t("infrastruct.ui.tooltip");return e.directive("uiTooltip",["$parse","$window","$rootScope","$timeout",function(t,e,i,o){return{controller:["$scope","$element",function(){}],link:function(e,i,n){i.addClass("ui-tooltip");var l=null,f=null,r=function(t){var e=t.offsetLeft,i=t.offsetTop,o=t.offsetWidth,n=t.offsetHeight;return{left:e,top:i,width:o,height:n,mid_x:e+o/2,mid_y:i+n/2}},s=function(){l.css("display","block"),l.removeClass("right left");var t=r(l[0]),e=r(i[0]),o={width:f[0].clientWidth,height:f[0].clientHeight},n=0;t.width>o.width?(t.left=0,t.width=o.width):e.mid_x+n+t.width>o.width?(t.left=e.left-t.width,l.addClass("left")):(t.left=e.left+e.width+n,l.addClass("right")),l.css({left:t.left+"px"})},u=function(){l.css("display","none")},d={tooltip:"",offsetFromEl:"html"};o(function(){var o=t(n.uiTooltipOptions)(e,{});if(void 0!==o&&angular.extend(d,o),l=angular.element(d.tooltip),!l||!l[0])throw"Unable to find the tooltip";f=angular.element(d.offsetFromEl),f&&f[0]||(f=angular.element(document.getElementsByTagName("html")[0])),l.hide(),i.on("mouseover",function(){s()}),i.on("mouseout blur",function(){u()})}),e.$watch("show",function(t,e){t!==e&&(1===t?s():0===t&&u())})},restrict:"AE",scope:{show:"@"}}}]),e});define(rA[463][0],["angular","underscore","moduleDefiner",rA[351][0]],function(n,c,t,e){"use strict";var o=t("infrastruct.ui.funScroll",[e]);return o.directive("uiFunScroll",["$parse","$window","$timeout","TOUCHSUPPORTED","$log",function(t,e,o,r,i){function l(c,t){c&&n.forEach(a,function(n){c.addEventListener(n,t,!1)})}function u(c,t){c&&n.forEach(a,function(n){c.removeEventListener(n,t,!1)})}function s(s,a,f){var d,v,h,S,m,E=c.uniqueId("uiFunScroll"),C=100,F=0,$=!1,g=0,O=t(f.uiFunScroll)(s,{});if(void 0!==O){var A=function(n){F=d.scrollTop,m=d.scrollHeight-(g+d.offsetHeight+C+10),F>0&&(F>C&&m>C||$&&F>m)?$||($=!0,v.addClass(O["class"])):$&&($=!1,v.removeClass(O["class"])),r&&(h&&o.cancel(h),h=o(function(){A(n)},100,!1))};O["class"]||(O["class"]="ui-uiFunScroll-active"),O.setClassAtScroll&&(C=Number(O.setClassAtScroll)),O.staticOffset&&(g=Number(O.staticOffset)),S=o(function(){if(O.scrollContainer&&(d=a.find(O.scrollContainer)[0]),O.classEl&&(v=a.find(O.classEl)),d){if(!v)return void i.error("uiFunScroll - classEl does not found");n.element(e).on("resize."+E,function(n){h&&o.cancel(h),h=o(function(){A(n)},400,!1)}),l(d,A)}},1e3),s.$on("$destroy",function(){o.cancel(h),o.cancel(S),u(d,A),n.element(e).off("resize."+E)})}}var a=["scroll"];return r&&(a=["touchstart","touchmove","touchend","touchcancel"]),{link:s,restrict:"AE"}}]),o});define(rA[460][0],["moduleDefiner","underscore",rA[351][0],rA[91][0],rA[498][0],rA[433][0]],function(e,r,n,t,o,u){var i,a=e("infrastruct.ui.inputNumberIncrementer",[n,o,u]),c={ENTER:13,ESCAPE:27},l=!1,s={toNumber:function(e){return parseToFloat(e)},numberValidator:function(e,r){if(null===r||void 0===r)return!1;var n=r.toString().replace(/[^0-9\-\.]+/g,"");return!!n&&!isNaN(n)}},d={currency:{parser:s.toNumber,formatter:function(e,r){return null===e||void 0===e?e:(e=parseToFloat(e),l?parseToFloat(i("number")(e,r?r.precision:0)):i("currencyparser")(e,r?r.precision:0))},validator:s.numberValidator},percent:{parser:s.toNumber,formatter:function(e,r){return null===e||void 0===e?e:(e=parseToFloat(e),l?parseToFloat(i("number")(e,r?r.precision:0)):i("percentageparser")(e,r?r.precision:0))},validator:s.numberValidator},rate:{parser:s.toNumber,formatter:function(e,n){var t=n&&n.getInstrumentPrecisionByRate&&n.getInstrumentPrecisionByRate(e)||n&&n.precision||0;return null===e||void 0===e?e:r.isNaN(e)?null:l?toFixed(e,t):(e=parseToFloat(e),i("tofixed")(e,t))},validator:s.numberValidator},number:{parser:s.toNumber,formatter:function(e,n){return null===e||void 0===e?e:r.isNaN(e)?null:l?toFixed(e,n?n.precision:0):(e=parseToFloat(e),i("number")(e,n?n.precision:0))},validator:s.numberValidator}};return a.run(["TOUCHSUPPORTED",function(e){l=e}]),a.directive("uiInputNumberIncrementer",["$filter",function(e){return i=e,{scope:{},bindToController:{inputValue:"=inputBinding",inputReadonly:"@",formatter:"@",formatterOptions:"&",onChange:"&",onFocus:"&",onBlur:"&",onDefocus:"&"},transclude:!0,controllerAs:"uiInputNumberIncrementerCtrl",controller:["$scope","$transclude","$attrs","$element",function(e,r,n,t){var o=this,u=0;o.$attrs=n,o.isTouchSupported=l,o.inputNgModel=null,o.setInputNgModel=function(e){o.inputNgModel=e},r(function(e){angular.forEach(e,function(e){if(!e.attributes&&e.remove)return void e.remove();if(e.attributes){var r=e.attributes["data-area"].value,n=angular.element(t[0].querySelector("[transclude-area='"+r+"']"));n.length?n.append(e):e.remove()}})}),e.$on("$destroy",function(){clearInterval(u)})}],templateUrl:t.name}}]),a.directive("inputBox",[function(){return{require:["^uiInputNumberIncrementer","ngModel"],link:function(e,r,n,t){function o(){u!==l.$viewValue&&(l.$viewValue=d[f].formatter(l.$viewValue,m),l.$render())}var u,i,a=t[0],l=t[1],s=!1,f=a.formatter,m=a.formatterOptions(),p=a.onChange(),v=a.onFocus(),h=a.onBlur(),$=a.onDefocus();viewValueChangeListener=function(){l.$valid?o():(l.$setViewValue(u),l.$commitViewValue(),l.$rollbackViewValue())},a.setInputNgModel(l),f&&d[f].formatter&&(l.$formatters.push(function(e){return d[f].formatter(e,m)}),d[f].parser&&l.$parsers.push(d[f].parser),d[f].validator&&(l.$validators[f+"Validator"]=d[f].validator)),e.focus=function(){u=l.$viewValue,i=l.$modelValue,s=!0,angular.isFunction(v)&&v(i)},e.blur=function(){o(),l.$dirty&&(s=!0),angular.isFunction(h)&&h(l.$dirty,l.$modelValue)},e.defocus=function(){o(),l.$dirty&&(s=!0),angular.isFunction($)&&$(l.$dirty,l.$modelValue)},e.keydown=function(e){switch(e.keyCode){case c.ENTER:r.blur();break;case c.ESCAPE:l.$rollbackViewValue(),r.blur();break;default:s=!0}},e.$watch(function(){return l.$modelValue},function(e,r){e!==r&&s&&(s=!1,angular.isFunction(p)&&p(null,e,r))}),l.$viewChangeListeners.push(viewValueChangeListener)}}}]),a.directive("action",[function(){return{require:"^uiInputNumberIncrementer",link:function(e,r,n,t){function o(){e.$evalAsync(function(){t.inputNgModel&&t.inputNgModel.$setDirty(),angular.isFunction(c)&&c(l?"+":"-")})}function u(){i&&clearInterval(i)}var i,a=150,c=t.onChange(),l="up"===n.action;r.on("click",function(){u(),o()}).on("mousedown",function(){i=setInterval(function(){o()},a)}).on("mouseup mouseleave touchend",u),e.$on("$destroy",function(){r.off("click mousedown mouseup mouseleave touchend")}),/iphone|ipad|ipod/.test(window.navigator.userAgent.toLowerCase())&&r.on("touchstart",function(){i=setInterval(function(){o()},a)}),e.$on("$destroy",function(){r.off("touchstart"),u()})}}}]),a.directive("number",function(){var e=[8,9,13,39,46,45];return{require:"ngModel",restrict:"A",link:function(r,n){n.bind("keypress",function(r){var n=r.charCode?r.charCode:r.keyCode?r.keyCode:0,t=".",o=!0;if(48>n||n>57){var u=this.value;n===t.charCodeAt(0)&&-1!==u.indexOf(t)&&(o=!1),-1===e.indexOf(n)?o=!1:"undefined"!=typeof r.charCode&&(r.keyCode===r.which&&0!==r.which?(o=!0,46===r.which&&(o=!1)):0!==r.keyCode&&0===r.charCode&&0===r.which&&(o=!0)),n===t.charCodeAt(0)&&(o=-1===u.indexOf(t)?!0:!1)}else o=!0;o||r.preventDefault()})}}}),a});define(rA[91][0] , [rA[428][0]],function(f){var o={"name":"/etoro/infrastruct/ui/inputNumberIncrementer/inputNumberIncrementer.view.html","text":"<div class=\"stepper-ph\">    <div class=\"stepper-label\" transclude-area=\"title\"></div>    <div class=\"stepper\">        <div class=\"stepper-minus\" data-action=\"down\" data-etoro-automation-id=\"minus-button\">            <span class=\"btn-icon sprite\"></span>        </div>        <input ng-if=\":: !uiInputNumberIncrementerCtrl.isTouchSupported\" type=\"text\" class=\"stepper-value\" ng-model=\"uiInputNumberIncrementerCtrl.inputValue\"                ng-model-options=\"{updateOn: 'blur' }\"                data-input-box=\"\"                ng-focus=\"focus($event)\"                ng-keydown=\"keydown($event)\"                ng-change=\"blur($event)\"                ng-blur=\"defocus($event)\"                data-maxchars=\"12\"                data-number=\"\" data-input-scrollto=\"\"                data-etoro-automation-id=\"input\"/>        <input ng-if=\":: uiInputNumberIncrementerCtrl.isTouchSupported\" type=\"number\" class=\"stepper-value\" ng-model=\"uiInputNumberIncrementerCtrl.inputValue\"               ng-model-options=\"{updateOn: 'blur' }\"               data-input-box=\"\"               ng-focus=\"focus($event)\"               ng-keydown=\"keydown($event)\"               ng-change=\"blur($event)\"               ng-blur=\"defocus($event)\"               data-maxchars=\"12\" data-input-scrollto=\"\"               data-etoro-automation-id=\"input\"/>        <div class=\"stepper-plus\" data-action=\"up\" data-etoro-automation-id=\"plus-button\">            <span class=\"btn-icon sprite\"></span>        </div>    </div>    <div class=\"stepper-switch\" transclude-area=\"side\"></div></div><div transclude-area=\"bottom\"></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[433][0],["moduleDefiner","angular",rA[186][0]],function(t,o,n){"use strict";var e=t("infrastruct.ui.inputScrollto");return e.directive("inputScrollto",["$timeout",function(t){function e(t){for(var n=t.parentNode,e=["auto","scroll"];null!==n&&-1===e.indexOf(window.getComputedStyle(n,null).getPropertyValue("overflow-y"));){var r=n;n=r.parentNode}return n?o.element(n):null}var r=new n,u=r.getResult(),i=u.os&&u.os.name&&"android"===u.os.name.toLowerCase();return{restrict:"A",link:function(o,n){var r;i&&(t(function(){var t,o,u,i=e(n[0]);r=function(){setTimeout(function(){t=n.offset().top+i[0].scrollTop,o=i.offset().top,u=t-o-10,0!==u&&i.animate({scrollTop:u},700)},250)},i&&n.on("focus",r)},50),o.$on("$destroy",function(){n.off("focus",r)}))}}}]),e});define(rA[388][0],["angular","underscore"],function(i,e){"use strict";function t(i,t){this.$window=i,this.$rootScope=t,this._refresh(),i.onresize=e.throttle(this._refresh.bind(this),300)}function n(i,e){function t(i){var e=i[0],t=i[i.length-1],n=[e];do{if(e=e.nextSibling,!e)break;n.push(e)}while(e!==t);return $(n)}return{multiElement:!0,transclude:"element",priority:599,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,o,u,c){function s(i){var t,n,r,o=/^\s*(!?mobile|!?device)\s*((&&|\|\|)\s*(!?mobile|!?device))?\s*$/i,u=o.exec(i),c=!1;return u?(-1!=u[1].indexOf("mobile")?(c=!0,t="mobile"===u[1]):n="device"===u[1],u[2]&&(r=u[3],-1!=u[4].indexOf("mobile")?t="mobile"===u[4]:n="device"===u[4]),r&&"&&"===r?function(){return e.isMobile===t&&e.isDevice===n}:r&&"||"===r?function(){return e.isMobile===t||e.isDevice===n}:function(){return c?e.isMobile===t:e.isDevice===n}):function(){return!1}}var f,l,h,a,d=o.uiIfBreakpoint;a=s(d),n.$watch(function(){return a()},function(e){e?l||c(function(e,t){l=t,e[e.length++]=document.createComment(" end ngUIIfBreakpoint: "+o.uiIfBreakpoint+" "),f={clone:e},i.enter(e,r.parent(),r)}):(h&&(h.remove(),h=null),l&&(l.$destroy(),l=null),f&&(h=t(f.clone),i.leave(h).then(function(){h=null}),f=null))})}}}var r=i.module("infrastruct.ui.uiIfBreakpoint",[]);return r.directive("uiIfBreakpoint",n),r.service("infrastruct.ui.uiIfBreakpoint",t),t.$inject=["$window","$rootScope"],t.prototype={get isMobile(){return this._isMobile},get isDevice(){return this._isDevice},get currentWidth(){return this._width},_refresh:function(){requestAnimationFrame(function(){this.$rootScope.$evalAsync(function(){this._width=this.$window.innerWidth,this._isMobile=this._width<=740,this._isDevice=this._width<=1023}.bind(this))}.bind(this))}},n.$inject=["$animate","infrastruct.ui.uiIfBreakpoint"],r});define(rA[349][0],["angular"],function(e){"use strict";function o(){return{require:"ngModel",scope:{otherModelValue:"=uiCompareTo"},link:function(e,o,r,u){u.$validators.uiCompareTo=function(o){return o==e.otherModelValue},e.$watch("otherModelValue",function(){u.$validate()})}}}var r=e.module("infrastruct.ui.compareTo",[]);return r.directive("uiCompareTo",o),r});define(rA[489][0],["moduleDefiner","angular","underscore",rA[95][0],rA[93][0],rA[94][0],rA[487][0]],function(t,e,i,n,s,a,l){function r(t,n,s,a,l,r){function c(t,e){o.titles[e]&&o.selectTab(o.titles[e])}var o=this;this.tabs=[],this.titles=[];var u,b=0,d=0,f=t.activeTab||r.current.$$route.activeTab,h=!0,m=!1;this.selectTab=function(t,i){i&&i.preventDefault(),!e.isDefined(t.disabled)&&(!e.isDefined(u)||o.titles[u]&&o.tabs[u])&&(e.isDefined(u)&&(o.titles[u].selected=!1,o.tabs[u].selected=!1),t.selected=!0,o.tabs[t.index].selected=!0,this.name&&t.index!==u&&l.$broadcast("ui-tab-clicked."+this.name,this.titles[u],t),u=t.index,t.url&&!h&&n.path(t.url).search("innerTabRoute",null).replace())},this.addTab=function(t){t.index=b++,o.tabs.push(t)},this.addTitle=function(t){t.index=d++,o.titles.push(t),t.name!==f||m||-1===Number(this.selectedIndex)||(u=t.index,m=!0)},this.$postLink=function(){var t=s(function(){e.isDefined(u)&&o.selectTab(o.titles[u]),h=!1,s.cancel(t)},50)},a.$on("ui-tab-set",c),a.$on("ui-tab-set-by-name",function(t,e){if(e){var n=i.findWhere(o.titles,{name:e});n&&c(t,n.index)}})}var c=t("infrastruct.ui.tabs",["ngSanitize",l]);return r.$inject=["$routeParams","$location","$timeout","$scope","$rootScope","$route"],c.component("tabs",{transclude:{titlesSlot:"tabstitles",contentSlot:"tabscontent",tabsBeforeSlot:"?tabsbefore",tabsAfterSlot:"?tabsafter",tabsNotSelected:"?tabsnotselected"},bindings:{selectedIndex:"@",name:"@",navClassExp:"="},controller:r,templateUrl:n.name}),c.component("tab",{transclude:!0,require:{tabsCtrl:"^tabs"},controller:function(){this.$onInit=function(){this.tabsCtrl.addTab(this)}},templateUrl:s.name}),c.component("tabtitle",{transclude:!0,require:{tabsCtrl:"^^tabs"},bindings:{disabled:"<",url:"@",name:"@",className:"@"},controller:function(){this.$onInit=function(){this.tabsCtrl.addTitle(this)}},templateUrl:a.name}),c});define(rA[95][0] , [rA[428][0]],function(f){var o={"name":"/etoro/infrastruct/ui/uiTabs/views/tabWrapper.view.html","text":"<div  ng-class=\"$ctrl.navClassExp\">    <div ng-transclude=\"tabsBeforeSlot\"></div>    <div itemscope itemtype=\"http://www.schema.org/SiteNavigationElement\" ng-transclude=\"titlesSlot\"></div>    <div ng-transclude=\"tabsAfterSlot\"></div></div><div class=\"tab-content\" ng-transclude=\"tabsNotSelected\"></div><div class=\"tab-content pie\" ng-transclude=\"contentSlot\"></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[93][0] , [rA[428][0]],function(f){var o={"name":"/etoro/infrastruct/ui/uiTabs/views/tab.view.html","text":"<div class=\"tab-pane\"  ng-if=\"$ctrl.selected\"  ng-transclude=\"\" ng-class=\"{active:$ctrl.selected}\"></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[94][0] , [rA[428][0]],function(f){var o={"name":"/etoro/infrastruct/ui/uiTabs/views/tabTitle.view.html","text":"<a itemprop=\"url\" ng-href=\"{{$ctrl.url}}\" ng-click=\"$ctrl.tabsCtrl.selectTab($ctrl, $event)\">    <span itemprop=\"name\" ng-transclude=\"\" class=\"{{:: $ctrl.className}}\" ng-class=\"{active:$ctrl.selected}\"></span></a>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[347][0],["angular"],function(e){"use strict";var t=e.module("infrastruct.ui.clipboardCopy",[]);return t.directive("uiClipboardCopy",["$window",function(){return{restrict:"A",link:function(e,t,n){var o=n.uiClipboardCopy||"";t.on("click",function(){var e=document.createElement("textarea");e.style.position="fixed",e.style.top=0,e.style.left=0,e.style.width="2em",e.style.height="2em",e.style.padding=0,e.style.border="none",e.style.outline="none",e.style.boxShadow="none",e.style.background="transparent",e.value=o,document.body.appendChild(e),e.select();try{{document.execCommand("copy")}}catch(t){}document.body.removeChild(e)})}}}]),t});define(rA[350][0],["angular"],function(e){"use strict";var r=e.module("infrastruct.ui.iframeOnload",[]);return r.directive("iframeOnload",["infrastruct.services.loader","$rootScope",function(e,r){var a;return{scope:{callBack:"&iframeOnload"},link:{pre:function(e,r,i){i.trackIframePerf&&(a=(new Date).getTime())},post:function(e,i,n){i.on("load",function(){if(n.trackIframePerf){var i=(new Date).getTime(),t=i-a,c={finishtime:t};logger.logJSON("info",n.trackIframePerf+" iFrame load time",c)}r.$evalAsync(function(){e.callBack()})})}},restrict:"A"}}]),r});define(rA[385][0],["angular","underscore"],function(n){"use strict";function t(n){return{restrict:"A",link:function(t,e,u){t.$watch(function(n){return n.$eval(u.uiComponentInclude)},function(u){e.html(u),n(e.contents())(t)})}}}var e=n.module("infrastruct.ui.componentInclude",[]);return t.$inject=["$compile","$parse"],e.directive("uiComponentInclude",t),e});define(rA[462][0],["angular","underscore",rA[387][0],rA[388][0]],function(e,t,i,l){"use strict";function s(i){function l(t,i,l,a){var n,o,r=document.createDocumentFragment(),u=document.createDocumentFragment();for(i=Math.min(t.length,i),o=0;i>o;o++)n=s(l,t[o]),-1!=n&&(r.appendChild(l[n]),u.appendChild(a[n]));return{hFrag:e.element(r),bFrag:e.element(u)}}function s(t,i){var l;for(l=0;t&&l<t.length;l++)if(e.element(t[l]).attr("name")===i)return l;return-1}return{scope:!0,controllerAs:"$ctrl",controller:a,compile:function(s,a){var n=e.element("<div></div>").append(s.children()),o=n.find("ui-table-head-slot ui-table-cell"),r=n.find("ui-table-body-slot ui-table-cell");return s.empty(),n.find("ui-table-head-slot").empty(),n.find("ui-table-body-slot").empty(),a.optionalFields=t.map(o,function(t){return e.element(t).attr("name")}).toString(),function(e,t){function s(){var s=e.$ctrl,d=l(s.currentFields,s.maxFields,o,r);a&&(a.$destroy(),a=null),u&&(u.remove(),u=null),u=n.clone(),a=e.$parent.$new(),u.find("ui-table-head-slot").append(d.hFrag.clone()),u.find("ui-table-body-slot").append(d.bFrag.clone()),t.html(i(u.contents())(a)),t.attr("cols",s.maxFields),d=null}var a,u;e.$ctrl.applyChanges=s,e.$ctrl.isReady=!0,e.$on("$destroy",function(){a=null,u=null}),s()}}}}function a(e,i,l,s,a,n,o,r){this.$rootScope=e,this.$scope=i,this.$attrs=s,this.$analytics=l,this.uiDialog=a,this.uiIfBreakpoint=n,this.localStorage=o,this.abTestingService=r,this.isReady=!1,this.tableId=s.uiTableId||"",this.defaultFields=t.uniq((s.defaultFields||"").replace(/\s*/g,"").split(",")),this.defaultMobileFields=t.uniq((this.shouldUseNewMobileCols()&&s.newMobileFields||s.defaultMobileFields||"").replace(/\s*/g,"").split(",")),this.optionalFields=t.uniq((s.optionalFields||"").replace(/\s*/g,"").split(",")),this.currentFields=this.getSavedFields(),this.shouldPersist="false"!==s.shouldPersist,this.maxFields=this.defaultFields.length,this.uiSortableOptions=s.uiSortableOptions||JSON.stringify({placeholder:"i-browse-main-categories-item",forcePlaceholderSize:!0,revert:100,containment:"parent",cursor:"ns-resize",axis:"y",handle:".i-browse-main-categories-item-parent-title"}),this.reportAbTest(),i.$on("app:ui:table:openEditDialog",this.openFieldsSelectionDialog.bind(this)),i.$watch(function(){return this.getMaxColumns(n.currentWidth)}.bind(this),this.changeFieldMax.bind(this))}var n=e.module("infrastruct.ui.table",[l.name]);return n.directive("uiTable",s),n.component("uiTableEditColumns",i),s.$inject=["$compile"],a.$inject=["$rootScope","$scope","$analytics","$attrs","uiDialog","infrastruct.ui.uiIfBreakpoint","infrastruct.services.localStorage","bl.factories.trading.infra.abTestingService"],a.prototype={getMaxColumns:function(e){return 480>=e?4:740>=e?5:1024>=e?6:1100>=e?6:1400>=e?7:9},resetFields:function(){this.sort(this.defaultFields)},sort:function(e){this.currentFields=e,this.applyChanges(),this.save(),this.$scope.$emit("app:ui:oldAngular:layoutViewChange")},changeFieldMax:function(e){e&&(this.maxFields=Math.min(this.currentFields.length,e),this.applyChanges())},openFieldsSelectionDialog:function(){this.isReady&&(this.uiDialog.open({template:'<ui-table-edit-columns origin-namespace="{{:: uiDialogData.namespace}}" max-fields="uiDialogData.maxFields" current-fields="uiDialogData.currentFields" default-fields="uiDialogData.defaultFields" optional-fields="uiDialogData.optionalFields" ui-sortable-options="uiDialogData.uiSortableOptions"on-update="uiDialogData.onUpdate(fields)" on-close="closeThisDialog()"></ui-table-edit-columns> ',plain:!0,data:{namespace:this.$attrs.uiTableNamespace||"missing attribute uiTableNamespace",maxFields:this.maxFields,currentFields:this.currentFields,defaultFields:this.uiIfBreakpoint.isMobile&&this.defaultMobileFields.length?this.defaultMobileFields:this.defaultFields,optionalFields:this.optionalFields,uiSortableOptions:this.uiSortableOptions,onUpdate:this.sort.bind(this)}}),this.$analytics.eventTrack("Customize Columns - Click",{Table:this.$attrs.uiTableNamespace}))},getSavedFields:function(){var t=this.localStorage.getItem("uiTable");return t&&t[this.tableId]&&this.isValidFields(t[this.tableId])?t[this.tableId]:this.uiIfBreakpoint.isMobile&&this.defaultMobileFields.length?(this.defaultMobileFields.length<this.defaultFields.length&&this.defaultMobileFields.push.apply(this.defaultMobileFields,this.optionalFields.filter(function(e){return this.defaultMobileFields.indexOf(e)<0}.bind(this)).slice(0,this.defaultFields.length-this.defaultMobileFields.length)),e.copy(this.defaultMobileFields)):e.copy(this.defaultFields)},save:function(){var e=this.localStorage.getItem("uiTable")||{};e[this.tableId]=this.currentFields,this.shouldPersist&&(this.localStorage.setItem("uiTable",e),"portfolioOverview"===this.$attrs.uiTableId&&(this.localStorage.removeItem("abColsData"),this.reportAbTest()))},isValidFields:function(e){var t=0;if(!e||e.length!=this.defaultFields.length)return!1;for(t=0;t<e.length;t++)if(-1===this.optionalFields.indexOf(e[t]))return!1;return!0},shouldUseNewMobileCols:function(){return"portfolioOverview"===this.$attrs.uiTableId&&this.uiIfBreakpoint.isMobile?0===this.abTestingService.getAbTestingConfig("portfolioColumns"):!1},reportAbTest:function(){if("portfolioOverview"===this.$attrs.uiTableId&&this.uiIfBreakpoint.isMobile){var e=this.$rootScope.session.user,t=0===this.abTestingService.getAbTestingConfig("portfolioColumns"),i=this.localStorage.getItem("abColsData");if(!i||i.shouldUse!==t||i.username!==e.username){this.localStorage.setItem("abColsData",{shouldUse:t,username:e.username});var l=this.currentFields;if(e&&l){var s={columns:{C1:l[0],C2:l[1],C3:l[2],C4:l[3]},version:t?"B":"A",user:{gcid:e.gcid,countryId:e.countryId,countryName:e.country.name}};this.$analytics.eventTrack("Customize Columns - Apply",s)}else this.$analytics.eventTrack("Customize Columns - Apply - Bad data error")}}}},n});define(rA[387][0],["angular",rA[92][0]],function(i,e){"use strict";function t(){var i=this;this.isDragging=!1,this.selectedField=null,this.fields=null,this.listSort={start:this.onDragStart.bind(this),stop:this.onDragStop.bind(this),get disabled(){return!!i.selectedField}}}return t.$inject=[],t.prototype={get displayedList(){return this.selectedField?this.diffFields:this.selectedFields},$onInit:function(){this._prepareView(this.currentFields)},reset:function(){this._prepareView(this.defaultFields)},discardChanges:function(){this.onClose()},apply:function(){this.onUpdate({fields:this.fields}),this.onClose()},back:function(){this.selectedField=null},select:function(i){return this.isDragging?void(this.isDragging=!1):void(0!==this.diffFields.length&&(this.selectedField?this.replaceWith(i):this.selectedField=i))},replaceWith:function(i){if(this.selectedField!==i){var e=i,t=this.selectedField,s=this.fields.indexOf(t),l=this.fields.indexOf(e);-1!=s&&(this.fields[s]=e,this.fields[l]=t)}this._prepareView(this.fields),this.selectedField=null},onDragStart:function(){this.isDragging=!0},onDragStop:function(){if(!this.selectedField)for(var i=0;i<this.selectedFields.length;i++)this.fields[i]=this.selectedFields[i]},_prepareView:function(e){this.fields=i.copy(e||[]),this.selectedFields=this.fields.slice(0,this.maxFields),this.diffFields=this.optionalFields.filter(function(i){return this.selectedFields.indexOf(i)<0}.bind(this))}},{bindings:{currentFields:"<",defaultFields:"<",maxFields:"<",optionalFields:"<",originNamespace:"@",uiSortableOptions:"<",onClose:"&",onUpdate:"&"},templateUrl:e.name,controller:t}});define(rA[92][0] , [rA[428][0]],function(f){var o={"name":"/etoro/infrastruct/ui/table/editColumns/editColumns.view.html","text":"<div data-etoro-automation-id=\"customize-columns-dialog\"     class=\"w-browse table-sort\" data-etoro-locale-ns=\"uiTable\">    <div data-etoro-automation-id=\"customize-columns-top-header-container\"         class=\"w-browse-head -head-grad\">        <div data-etoro-automation-id=\"customize-columns-top-header-title\"             class=\"w-browse-head-title\">            {{_title_}}        </div>        <div class=\"w-head-buttons-ph\">            <a data-etoro-automation-id=\"customize-columns-top-header-close-button\"               ng-click=\"$ctrl.discardChanges()\" class=\"i-head-button sprite close pointer\"></a>            <a data-etoro-automation-id=\"customize-columns-top-header-back-button\"               ng-click=\"$ctrl.back()\" ng-if=\"$ctrl.selectedField\" class=\"i-head-button sprite back\"></a>            <a data-etoro-automation-id=\"customize-columns-top-header-reset-button\"               ng-click=\"$ctrl.reset(true)\" ng-if=\"!$ctrl.selectedField\" class=\"w-head-button-reset\">{{$root.t.dynamic('discoveryFilters', 'reset')}}</a>        </div>    </div>    <div class=\"w-browse-main\">        <div data-etoro-automation-id=\"customize-columns-content-container\"             class=\"w-browse-main-categories\" ng-class=\"{'sortable': !$ctrl.selectedField, 'replaceable': !$ctrl.selectedField && !!$ctrl.diffFields.length}\">            <div data-etoro-automation-id=\"customize-columns-content-title-not-selected\"                 class=\"filter-category-title\" style=\"text-transform: none\" ng-if=\"!$ctrl.selectedField\">{{_description_}}</div>            <div data-etoro-automation-id=\"customize-columns-content-title-selected\"                 class=\"filter-category-title\" style=\"text-transform: none\" ng-if=\"$ctrl.selectedField\">{{::$root.t.dynamic(\"uiTable\", \"changeDescription\", {column: $root.t.dynamic($ctrl.originNamespace, $ctrl.selectedField)})}}</div>            <div ng-model=\"$ctrl.selectedFields\" data-ui-sortable=\"$ctrl.listSort\" data-ui-sortable-options=\"{{$ctrl.uiSortableOptions}}\">                <div data-etoro-automation-id=\"customize-columns-content-row-{{:: col}}\"                     class=\"i-browse-main-categories-item\" ng-repeat=\"col in $ctrl.displayedList\" ng-click=\"$ctrl.select(col)\">                    <span class=\"sprite dots\"></span>                    <div class=\"i-browse-main-categories-item-parent\">                        <div class=\"i-browse-main-categories-item-parent-title\">{{:: $root.t.dynamic($ctrl.originNamespace, col)}}</div>                        <div ng-if=\"!!$ctrl.selectedField == false\" class=\"replace-btn\">                            <span class=\"sprite\"></span>                        </div>                    </div>                </div>            </div>        </div>        <a automation-id=\"ui-table-edit-columns-customize-columns-btn-apply\" class=\"filter-action-btn\" ng-click=\"$ctrl.apply()\">{{$root.t.dynamic('discoveryFilters', 'apply')}}</a>    </div></div>"};f.replaceStaticIncludes(o, [].splice.call(arguments,1));f.put(o);return o});define(rA[298][0],["moduleDefiner",rA[351][0]],function(t,e){"use strict";var i=t("infrastruct.ui.mobileInputType",[e]);return i.directive("mobileInputType",["TOUCHSUPPORTED",function(t){return{require:"ngModel",restrict:"A",link:{pre:function(e,i,r){i.attr("type",t?r.mobileInputType:"text")}}}}]),i});define(rA[436][0],["angular","underscore",rA[351][0]],function(e,t,i){"use strict";function s(){this.subscribers={}}function r(e,i,s,r,c){this.$element=i,this.$timeout=s,this.reactToScrollService=r,this.scrollEvents=e?["touchstart","touchmove","touchend","touchcancel","scroll"]:["scroll"],this.TOUCHSUPPORTED=e,this._windowResizeFn=t.debounce(this._windowResize.bind(this),400),window.addEventListener("resize",this._windowResizeFn),this.addEvent(this.$element,this.onScroll.bind(this)),this._routeChangeListener=c.$on("$routeChangeSuccess",this._routeChange.bind(this)),this._viewKeeperChangeSuccessListener=c.$on("viewKeeperChangeSuccess",this._routeChange.bind(this))}function c(i){return{restrict:"AE",link:function(s,r,c){var n=e.isDefined(c.activeClassName)?c.activeClassName:"",o=t.uniqueId("reactToScroll");n&&(i.subscribe({el:r,id:o,event:function(e){e?r.addClass(n):r.removeClass(n)}}),s.$on("$destroy",function(){i.unsubscribe(o)}))}}}var n=e.module("infrastruct.ui.reactToScroll",[i.name]);return s.prototype={subscribe:function(e){return e&&e.el?(this.subscribers[e.id]&&this.unsubscribe(e.id),this.subscribers[e.id]=e,this.subscribers[e.id]):void 0},unsubscribe:function(e){this.subscribers[e]&&(this.subscribers[e].event&&this.subscribers[e].event(!1),delete this.subscribers[e])},unsubscribeAll:function(){t.each(this.subscribers,function(e){this.unsubscribe(e.id)},this)},broadcast:function(e){t.each(this.subscribers,function(t){t.event&&t.event(e)})}},r.$inject=["TOUCHSUPPORTED","$element","$timeout","infrastruct.ui.reactToScroll.service","$rootScope"],r.prototype={link:function(t,i,s,r){r._scrollTrigger=e.isDefined(s.activateOnScroll)?Number(s.activateOnScroll):100,r._staticOffset=e.isDefined(s.staticOffset)?Number(s.staticOffset):0,r.activeClassName=e.isDefined(s.activeClassName)?s.activeClassName:"",r.onScrollFn=r.onScroll.bind(r),r.addEvent(r.$element,r.onScrollFn),r.isActive=!0,r.onScrollFn(),t.$on("$destroy",function(){r.removeEvent(r.$element,r.onScrollFn),window.removeEventListener("resize",r._windowResizeFn),r._routeChangeListener&&r._routeChangeListener(),r._viewKeeperChangeSuccessListener&&r._viewKeeperChangeSuccessListener()})},addEvent:function(t,i){if(t){var s=e.element(t).get(0);e.forEach(this.scrollEvents,function(e){s.addEventListener(e,i,!1)})}},removeEvent:function(t,i){if(t){var s=e.element(t).get(0);e.forEach(this.scrollEvents,function(e){s.removeEventListener(e,i,!1)})}},onScroll:function(e){var t=this.$element.get(0),i=t.scrollTop||0,s=t.scrollHeight-(this._staticOffset+t.offsetHeight+this._scrollTrigger+10);this.TOUCHSUPPORTED&&e?"touchstart"===e.type?this._currectTouchScrollPosition=i:(this._tempTimer&&clearTimeout(this._tempTimer),this._tempTimer=setTimeout(function(){i=t.scrollTop||0,0===i&&this.isActive?this._reactToScroll(!1):!this.isActive&&i>0&&i>this._currectTouchScrollPosition&&s>this._scrollTrigger&&this._reactToScroll(!0)}.bind(this),10)):i>0&&(i>this._scrollTrigger&&s>this._scrollTrigger||this.isActive&&i>s)?this.isActive||this._reactToScroll(!0):(this.isActive||0>s)&&this._reactToScroll(!1)},_windowResize:function(){this.onScroll()},_routeChange:function(){this._routeChangeTimeout&&this.$timeout.cancel(this._routeChangeTimeout),this._routeChangeTimeout=this.$timeout(function(){this.onScroll()}.bind(this),100)},_reactToScroll:function(e){this.isActive=e,this.activeClassName&&this.$element.removeClass(this.activeClassName),this.reactToScrollService.broadcast(this.isActive)}},c.$inject=["infrastruct.ui.reactToScroll.service"],n.service("infrastruct.ui.reactToScroll.service",s),n.directive("reactToScroll",c),n.directive("reactToScrollContainer",function(){return{controller:r,link:r.prototype.link,restrict:"A"}}),n});define(rA[488][0],["angular","underscore",rA[351][0],rA[487][0],rA[174][0],rA[438][0],rA[437][0]],function(i,e,t,r,u,n,c){var s=i.module("infrastruct.ui.swipeActions",[t.name,r.name]);return s.directive("uiSwipeActions",c),s.directive("uiSwipe",n),s});!function(t,e,n,i){"use strict";function r(t,e,n){return setTimeout(h(t,n),e)}function s(t,e,n){return Array.isArray(t)?(o(t,n[e],n),!0):!1}function o(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==i)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function a(e,n,i){var r="DEPRECATED METHOD: "+n+"\n"+i+" AT \n";return function(){var n=new Error("get-stack-trace"),i=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=t.console&&(t.console.warn||t.console.log);return s&&s.call(t.console,r,i),e.apply(this,arguments)}}function u(t,e,n){var i,r=e.prototype;i=t.prototype=Object.create(r),i.constructor=t,i._super=r,n&&le(i,n)}function h(t,e){return function(){return t.apply(e,arguments)}}function c(t,e){return typeof t==de?t.apply(e?e[0]||i:i,e):t}function l(t,e){return t===i?e:t}function p(t,e,n){o(m(e),function(e){t.addEventListener(e,n,!1)})}function f(t,e,n){o(m(e),function(e){t.removeEventListener(e,n,!1)})}function d(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function v(t,e){return t.indexOf(e)>-1}function m(t){return t.trim().split(/\s+/g)}function g(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function T(t){return Array.prototype.slice.call(t,0)}function y(t,e,n){for(var i=[],r=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];g(r,o)<0&&i.push(t[s]),r[s]=o,s++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function E(t,e){for(var n,r,s=e[0].toUpperCase()+e.slice(1),o=0;o<pe.length;){if(n=pe[o],r=n?n+s:e,r in t)return r;o++}return i}function I(){return Ee++}function A(e){var n=e.ownerDocument||e;return n.defaultView||n.parentWindow||t}function _(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){c(t.options.enable,[t])&&n.handler(e)},this.init()}function b(t){var e,n=t.options.inputClass;return new(e=n?n:_e?F:be?k:Ae?L:Y)(t,C)}function C(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,s=e&we&&i-r===0,o=e&(Re|Me)&&i-r===0;n.isFirst=!!s,n.isFinal=!!o,s&&(t.session={}),n.eventType=e,S(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function S(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=x(e)),r>1&&!n.firstMultiple?n.firstMultiple=x(e):1===r&&(n.firstMultiple=!1);var s=n.firstInput,o=n.firstMultiple,a=o?o.center:s.center,u=e.center=w(i);e.timeStamp=ge(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=z(a,u),e.distance=M(a,u),P(n,e),e.offsetDirection=R(e.deltaX,e.deltaY);var h=O(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=h.x,e.overallVelocityY=h.y,e.overallVelocity=me(h.x)>me(h.y)?h.x:h.y,e.scale=o?X(o.pointers,i):1,e.rotation=o?N(o.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,D(n,e);var c=t.element;d(e.srcEvent.target,c)&&(c=e.srcEvent.target),e.target=c}function P(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};e.eventType!==we&&s.eventType!==Re||(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y)}function D(t,e){var n,r,s,o,a=t.lastInterval||e,u=e.timeStamp-a.timeStamp;if(e.eventType!=Me&&(u>xe||a.velocity===i)){var h=e.deltaX-a.deltaX,c=e.deltaY-a.deltaY,l=O(u,h,c);r=l.x,s=l.y,n=me(l.x)>me(l.y)?l.x:l.y,o=R(h,c),t.lastInterval=e}else n=a.velocity,r=a.velocityX,s=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=s,e.direction=o}function x(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:ve(t.pointers[n].clientX),clientY:ve(t.pointers[n].clientY)},n++;return{timeStamp:ge(),pointers:e,center:w(e),deltaX:t.deltaX,deltaY:t.deltaY}}function w(t){var e=t.length;if(1===e)return{x:ve(t[0].clientX),y:ve(t[0].clientY)};for(var n=0,i=0,r=0;e>r;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:ve(n/e),y:ve(i/e)}}function O(t,e,n){return{x:e/t||0,y:n/t||0}}function R(t,e){return t===e?ze:me(t)>=me(e)?0>t?Ne:Xe:0>e?Ye:Fe}function M(t,e,n){n||(n=He);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function z(t,e,n){n||(n=He);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI}function N(t,e){return z(e[1],e[0],Le)+z(t[1],t[0],Le)}function X(t,e){return M(e[0],e[1],Le)/M(t[0],t[1],Le)}function Y(){this.evEl=Ve,this.evWin=je,this.pressed=!1,_.apply(this,arguments)}function F(){this.evEl=Be,this.evWin=$e,_.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function W(){this.evTarget=Ke,this.evWin=Qe,this.started=!1,_.apply(this,arguments)}function q(t,e){var n=T(t.touches),i=T(t.changedTouches);return e&(Re|Me)&&(n=y(n.concat(i),"identifier",!0)),[n,i]}function k(){this.evTarget=en,this.targetIds={},_.apply(this,arguments)}function H(t,e){var n=T(t.touches),i=this.targetIds;if(e&(we|Oe)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,s,o=T(t.changedTouches),a=[],u=this.target;if(s=n.filter(function(t){return d(t.target,u)}),e===we)for(r=0;r<s.length;)i[s[r].identifier]=!0,r++;for(r=0;r<o.length;)i[o[r].identifier]&&a.push(o[r]),e&(Re|Me)&&delete i[o[r].identifier],r++;return a.length?[y(s.concat(a),"identifier",!0),a]:void 0}function L(){_.apply(this,arguments);var t=h(this.handler,this);this.touch=new k(this.manager,t),this.mouse=new Y(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function U(t,e){t&we?(this.primaryTouch=e.changedPointers[0].identifier,V.call(this,e)):t&(Re|Me)&&V.call(this,e)}function V(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches,r=function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)};setTimeout(r,nn)}}function j(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],s=Math.abs(e-r.x),o=Math.abs(n-r.y);if(rn>=s&&rn>=o)return!0}return!1}function G(t,e){this.manager=t,this.set(e)}function Z(t){if(v(t,cn))return cn;var e=v(t,ln),n=v(t,pn);return e&&n?cn:e||n?e?ln:pn:v(t,hn)?hn:un}function B(){if(!on)return!1;var e={},n=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){e[i]=n?t.CSS.supports("touch-action",i):!0}),e}function $(t){this.options=le({},this.defaults,t||{}),this.id=I(),this.manager=null,this.options.enable=l(this.options.enable,!0),this.state=dn,this.simultaneous={},this.requireFail=[]}function J(t){return t&yn?"cancel":t&gn?"end":t&mn?"move":t&vn?"start":""}function K(t){return t==Fe?"down":t==Ye?"up":t==Ne?"left":t==Xe?"right":""}function Q(t,e){var n=e.manager;return n?n.get(t):t}function te(){$.apply(this,arguments)}function ee(){te.apply(this,arguments),this.pX=null,this.pY=null}function ne(){te.apply(this,arguments)}function ie(){$.apply(this,arguments),this._timer=null,this._input=null}function re(){te.apply(this,arguments)}function se(){te.apply(this,arguments)}function oe(){$.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ae(t,e){return e=e||{},e.recognizers=l(e.recognizers,ae.defaults.preset),new ue(t,e)}function ue(t,e){this.options=le({},ae.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=b(this),this.touchAction=new G(this,this.options.touchAction),he(this,!0),o(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function he(t,e){var n=t.element;if(n.style){var i;o(t.options.cssProps,function(r,s){i=E(n.style,s),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={})}}function ce(t,n){var i=e.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=n,n.target.dispatchEvent(i)}var le,pe=["","webkit","Moz","MS","ms","o"],fe=e.createElement("div"),de="function",ve=Math.round,me=Math.abs,ge=Date.now;le="function"!=typeof Object.assign?function(t){if(t===i||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==i&&null!==r)for(var s in r)r.hasOwnProperty(s)&&(e[s]=r[s])}return e}:Object.assign;var Te=a(function(t,e,n){for(var r=Object.keys(e),s=0;s<r.length;)(!n||n&&t[r[s]]===i)&&(t[r[s]]=e[r[s]]),s++;return t},"extend","Use `assign`."),ye=a(function(t,e){return Te(t,e,!0)},"merge","Use `assign`."),Ee=1,Ie=/mobile|tablet|ip(ad|hone|od)|android/i,Ae="ontouchstart"in t,_e=E(t,"PointerEvent")!==i,be=Ae&&Ie.test(navigator.userAgent),Ce="touch",Se="pen",Pe="mouse",De="kinect",xe=25,we=1,Oe=2,Re=4,Me=8,ze=1,Ne=2,Xe=4,Ye=8,Fe=16,We=Ne|Xe,qe=Ye|Fe,ke=We|qe,He=["x","y"],Le=["clientX","clientY"];_.prototype={handler:function(){},init:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(A(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(A(this.element),this.evWin,this.domHandler)}};var Ue={mousedown:we,mousemove:Oe,mouseup:Re},Ve="mousedown",je="mousemove mouseup";u(Y,_,{handler:function(t){var e=Ue[t.type];e&we&&0===t.button&&(this.pressed=!0),e&Oe&&1!==t.which&&(e=Re),this.pressed&&(e&Re&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Pe,srcEvent:t}))}});var Ge={pointerdown:we,pointermove:Oe,pointerup:Re,pointercancel:Me,pointerout:Me},Ze={2:Ce,3:Se,4:Pe,5:De},Be="pointerdown",$e="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(Be="MSPointerDown",$e="MSPointerMove MSPointerUp MSPointerCancel"),u(F,_,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=Ge[i],s=Ze[t.pointerType]||t.pointerType,o=s==Ce,a=g(e,t.pointerId,"pointerId");r&we&&(0===t.button||o)?0>a&&(e.push(t),a=e.length-1):r&(Re|Me)&&(n=!0),0>a||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),n&&e.splice(a,1))}});var Je={touchstart:we,touchmove:Oe,touchend:Re,touchcancel:Me},Ke="touchstart",Qe="touchstart touchmove touchend touchcancel";u(W,_,{handler:function(t){var e=Je[t.type];if(e===we&&(this.started=!0),this.started){var n=q.call(this,t,e);e&(Re|Me)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Ce,srcEvent:t})}}});var tn={touchstart:we,touchmove:Oe,touchend:Re,touchcancel:Me},en="touchstart touchmove touchend touchcancel";u(k,_,{handler:function(t){var e=tn[t.type],n=H.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Ce,srcEvent:t})}});var nn=2500,rn=25;u(L,_,{handler:function(t,e,n){var i=n.pointerType==Ce,r=n.pointerType==Pe;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)U.call(this,e,n);else if(r&&j.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var sn=E(fe.style,"touchAction"),on=sn!==i,an="compute",un="auto",hn="manipulation",cn="none",ln="pan-x",pn="pan-y",fn=B();G.prototype={set:function(t){t==an&&(t=this.compute()),on&&this.manager.element.style&&fn[t]&&(this.manager.element.style[sn]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return o(this.manager.recognizers,function(e){c(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Z(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var i=this.actions,r=v(i,cn)&&!fn[cn],s=v(i,pn)&&!fn[pn],o=v(i,ln)&&!fn[ln];if(r){var a=1===t.pointers.length,u=t.distance<2,h=t.deltaTime<250;if(a&&u&&h)return}return o&&s?void 0:r||s&&n&We||o&&n&qe?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var dn=1,vn=2,mn=4,gn=8,Tn=gn,yn=16,En=32;$.prototype={defaults:{},set:function(t){return le(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(s(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=Q(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return s(t,"dropRecognizeWith",this)?this:(t=Q(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(s(t,"requireFailure",this))return this;var e=this.requireFail;return t=Q(t,this),-1===g(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(s(t,"dropRequireFailure",this))return this;t=Q(t,this);var e=g(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,i=this.state;gn>i&&e(n.options.event+J(i)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),i>=gn&&e(n.options.event+J(i))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=En)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(En|dn)))return!1;t++}return!0},recognize:function(t){var e=le({},t);return c(this.options.enable,[this,e])?(this.state&(Tn|yn|En)&&(this.state=dn),this.state=this.process(e),void(this.state&(vn|mn|gn|yn)&&this.tryEmit(e))):(this.reset(),void(this.state=En))},process:function(){},getTouchAction:function(){},reset:function(){}},u(te,$,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(vn|mn),r=this.attrTest(t);return i&&(n&Me||!r)?e|yn:i||r?n&Re?e|gn:e&vn?e|mn:vn:En}}),u(ee,te,{defaults:{event:"pan",threshold:10,pointers:1,direction:ke},getTouchAction:function(){var t=this.options.direction,e=[];return t&We&&e.push(pn),t&qe&&e.push(ln),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,s=t.deltaX,o=t.deltaY;return r&e.direction||(e.direction&We?(r=0===s?ze:0>s?Ne:Xe,n=s!=this.pX,i=Math.abs(t.deltaX)):(r=0===o?ze:0>o?Ye:Fe,n=o!=this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},attrTest:function(t){return te.prototype.attrTest.call(this,t)&&(this.state&vn||!(this.state&vn)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=K(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),u(ne,te,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[cn]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&vn)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),u(ie,$,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[un]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,s=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(Re|Me)&&!s)this.reset();else if(t.eventType&we)this.reset(),this._timer=r(function(){this.state=Tn,this.tryEmit()},e.time,this);else if(t.eventType&Re)return Tn;return En},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Tn&&(t&&t.eventType&Re?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=ge(),this.manager.emit(this.options.event,this._input)))}}),u(re,te,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[cn]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&vn)}}),u(se,te,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:We|qe,pointers:1},getTouchAction:function(){return ee.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(We|qe)?e=t.overallVelocity:n&We?e=t.overallVelocityX:n&qe&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&me(e)>this.options.velocity&&t.eventType&Re},emit:function(t){var e=K(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),u(oe,$,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[hn]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,s=t.deltaTime<e.time;if(this.reset(),t.eventType&we&&0===this.count)return this.failTimeout();if(i&&s&&n){if(t.eventType!=Re)return this.failTimeout();var o=this.pTime?t.timeStamp-this.pTime<e.interval:!0,a=!this.pCenter||M(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t;var u=this.count%e.taps;if(0===u)return this.hasRequireFailures()?(this._timer=r(function(){this.state=Tn,this.tryEmit()},e.interval,this),vn):Tn}return En},failTimeout:function(){return this._timer=r(function(){this.state=En},this.options.interval,this),En},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Tn&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ae.VERSION="2.0.8",ae.defaults={domEvents:!1,touchAction:an,enable:!0,inputTarget:null,inputClass:null,preset:[[re,{enable:!1}],[ne,{enable:!1},["rotate"]],[se,{direction:We}],[ee,{direction:We},["swipe"]],[oe],[oe,{event:"doubletap",taps:2},["tap"]],[ie]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var In=1,An=2;ue.prototype={set:function(t){return le(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?An:In},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,i=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&Tn)&&(r=e.curRecognizer=null);for(var s=0;s<i.length;)n=i[s],e.stopped===An||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&n.state&(vn|mn|gn)&&(r=e.curRecognizer=n),s++}},get:function(t){if(t instanceof $)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(s(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(s(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=g(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==i&&e!==i){var n=this.handlers;return o(m(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==i){var n=this.handlers;return o(m(t),function(t){e?n[t]&&n[t].splice(g(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&ce(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&he(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},le(ae,{INPUT_START:we,INPUT_MOVE:Oe,INPUT_END:Re,INPUT_CANCEL:Me,STATE_POSSIBLE:dn,STATE_BEGAN:vn,STATE_CHANGED:mn,STATE_ENDED:gn,STATE_RECOGNIZED:Tn,STATE_CANCELLED:yn,STATE_FAILED:En,DIRECTION_NONE:ze,DIRECTION_LEFT:Ne,DIRECTION_RIGHT:Xe,DIRECTION_UP:Ye,DIRECTION_DOWN:Fe,DIRECTION_HORIZONTAL:We,DIRECTION_VERTICAL:qe,DIRECTION_ALL:ke,Manager:ue,Input:_,TouchAction:G,TouchInput:k,MouseInput:Y,PointerEventInput:F,TouchMouseInput:L,SingleTouchInput:W,Recognizer:$,AttrRecognizer:te,Tap:oe,Pan:ee,Swipe:se,Pinch:ne,Rotate:re,Press:ie,on:p,off:f,each:o,merge:ye,extend:Te,assign:le,inherit:u,bindFn:h,prefixed:E});var _n="undefined"!=typeof t?t:"undefined"!=typeof self?self:{};_n.Hammer=ae,"function"==typeof define&&define.amd?define(rA[174][0],[],function(){return ae}):"undefined"!=typeof module&&module.exports?module.exports=ae:t[n]=ae}(window,document,"Hammer");define(rA[438][0],["angular","underscore",rA[174][0]],function(e,n,i){"use strict";function t(t,a,o){function s(n,i){var t=e.element(i).data("swipeId");if(t)return{el:e.element(i),id:t};for(var r=i.parentNode;null!==r&&!(t=e.element(r).data("swipeId"))&&r!==n[0];){var a=r;r=a.parentNode}return{el:r?e.element(r):null,id:t}}return r=function(){return!t||o.innerWidth>740||a.userAgent.browser&&"Mobile Safari"===a.userAgent.browser.name&&"iOS"===a.userAgent.os.name&&!a.dynamics.isWrapper?!1:!0}(),{restrict:"A",controller:["$element","$scope",function(e,t){var r={};this.register=function(e,n){r[e]=n},this.unregister=function(e){delete r[e]},this._hammerManager=new i.Manager(e[0],{domEvents:!0,touchAction:"pan-y"});var a={threshold:50};this._hammerManager.add(new i.Pan(a)),this._hammerManager.add(new i.Swipe(n.extend({},a,{velocity:30}))).recognizeWith(this._hammerManager.get("pan"));var o;this._hammerManager.on("panstart",function(n){if(-1===["panup","pandown","swipeup","swipedown"].indexOf(n.additionalEvent)&&0!==Math.abs(n.velocityX)){var i=s(e,n.target);i&&o&&o!==r[i.id]&&o.uiSwipeActions.resetPosition(),o=void 0,i.el&&r[i.id]&&(o=r[i.id]),o&&o.uiSwipeActions.handleMoveStart(n)}}),this._hammerManager.on("panleft panright",function(e){o&&o.uiSwipeActions.handleMove(e)}),this._hammerManager.on("swipe panend pancancel",function(e){o&&o.uiSwipeActions.handleMoveEnd(e)}),t.$on("$destroy",function(){n.each(r,function(e){e.uiSwipeActions.destroy()})})}]}}var r=!1;return t.$inject=["TOUCHSUPPORTED","infrastruct.services.config","$window"],t});define(rA[437][0],["angular","underscore",rA[301][0]],function(i,e,n){"use strict";function t(t,u,r,s,c){var o=function(){return!t||c.innerWidth>740||s.userAgent.browser&&"Mobile Safari"===s.userAgent.browser.name&&"iOS"===s.userAgent.os.name&&!s.dynamics.isWrapper?!1:!0}();return{restrict:"AE",require:"^uiSwipe",link:function(t,s,c,f){if(o){var w,a=e.uniqueId("uiSwipe_"),p=r(function(){var e=s.find(c.uiSwipeMenuRight),r=s.find(c.uiSwipeMenuLeft),o=s.find(c.uiSwipeActions),p=i.isDefined(c.uiSwipeSwiperightAction)?u(c.uiSwipeSwiperightAction):null,d=i.isDefined(c.uiSwipeSwipeleftAction)?u(c.uiSwipeSwipeleftAction):null;if((0!==e.length||0!==r.length)&&0!==o.length){if(p)var S=function(){p(t)};if(d)var l=function(){d(t)};o.data("swipeId",a),w=new n(o,r,e,S,l),f.register(a,{uiSwipeActions:w}),i.isDefined(c.uiSwipeIsDisabled)&&("true"===c.uiSwipeIsDisabled&&w.setTouchMode(!1),c.$observe("uiSwipeIsDisabled",function(i){w.setTouchMode("true"===i?!1:!0)}))}},100,!1);t.$on("$destroy",function(){w&&w.destroy(),f.unregister(a),p&&r.cancel(p)})}}}}return t.$inject=["TOUCHSUPPORTED","$parse","$timeout","infrastruct.services.config","$window"],t});define(rA[301][0],["underscore",rA[174][0]],function(t,i){"use strict";function s(t,i,s,n,e){this._isTouchEnabled=!0,this.draggableEl=t,this.leftActionsEl=i,this.rightActionsEl=s,this.rightwipeCallBack=n,this.leftSwipeCallBack=e,this._leftActionsElWidth=i.width(),this._rightActionsElWidth=s.width(),this._leftActions=i.find(".swipe-action-button"),this._rightActions=s.find(".swipe-action-button"),this._resetPositionEvent=this.resetPosition.bind(this),this.leftActionsEl.get(0)&&this.leftActionsEl.get(0).addEventListener("click",this._resetPositionEvent,!0),this.rightActionsEl.get(0)&&this.rightActionsEl.get(0).addEventListener("click",this._resetPositionEvent,!0),this._leftActionsCount=this._leftActions.length,this._rightActionsCount=this._rightActions.length,this._leftActionsBgEl=this._addBgElement(this.leftActionsEl,this._leftActions,"left"),this._rightActionsBgEl=this._addBgElement(this.rightActionsEl,this._rightActions,"right"),this._originalTransition=null,this._hammerManager=null,this._initx=0,this._isScrolling=!1,this._dragWeight=1.5,this._revealPercent=5,this._onTransitionEndEvents=[]}return s.prototype={applyTransform:function(t,i,s,n){var e={transform:null===i?"none":"translateX("+i+"px)"};s&&(e.transition=s),t.css(e),n&&this._addTransitionEndListener(t,n)},hide:function(t){return t.css("opacity","0"),t},show:function(t){return t.css("opacity","1"),t},destroy:function(){this._hammerManager&&this._hammerManager.destroy(),this._removeAllTransitionListeners(),this.leftActionsEl.get(0)&&this.leftActionsEl.get(0).removeEventListener("click",this._resetPositionEvent,!0),this.rightActionsEl.get(0)&&this.rightActionsEl.get(0).removeEventListener("click",this._resetPositionEvent,!0)},setTouchMode:function(t){this._isTouchEnabled=t},resetPosition:function(t,i,s,n,e){console.log("resetPosition",i);var o=this;(this._rightActionsVisible||this._leftActionsVisible||n)&&(i=i||(this._rightActionsVisible?this.rightActionsEl:this.leftActionsEl),s=s||(this._rightActionsVisible?this._rightActionsElWidth:this._leftActionsElWidth),e=e||(this._rightActionsVisible?this._rightActionsBgEl:this._leftActionsBgEl),this._leftActionsVisible=!1,this._rightActionsVisible=!1,this.applyTransform(this.draggableEl,null,this._originalTransition,function(){i.width(s),o.applyTransform(e,null),o.hide(o.leftActionsEl),o.hide(o.rightActionsEl)}),this._initx=0)},handleMoveStart:function(t){console.log("panstart",t),this._isTouchEnabled&&(-1!==["panup","pandown","swipeup","swipedown"].indexOf(t.additionalEvent)||0===Math.abs(t.velocityX)?(this._isScrolling=!0,this.resetPosition(t)):(this._preventDefault(t),this.hide(this._leftActionsBgEl),this.hide(this._rightActionsBgEl),this.show(this.leftActionsEl),this.show(this.leftActionsEl),this._originalTransition=this.draggableEl.css("transition"),this.draggableEl.css({transition:"none"})))},handleMove:function(t){if(!this._isScrolling&&this._isTouchEnabled){this._preventDefault(t);var s=this._initx+t.deltaX/this._dragWeight,n=this._getDirection(t);n===i.DIRECTION_LEFT&&0===this._rightActionsCount&&0>=s||n===i.DIRECTION_RIGHT&&0===this._leftActionsCount&&s>=0||(this.applyTransform(this.draggableEl,s),n===i.DIRECTION_LEFT&&this._rightActionsCount>0?0>s?(this.show(this.rightActionsEl),this.hide(this.leftActionsEl),Math.abs(s)>=this._rightActionsElWidth&&(this.show(this._rightActionsBgEl),this._rightActionsBgEl.css("transform","scaleX("+Math.abs(s)+")"))):this.hide(this._rightActionsBgEl):n===i.DIRECTION_RIGHT&&this._leftActionsCount>0&&(s>0?(this.show(this.leftActionsEl),this.hide(this.rightActionsEl),Math.abs(s)>=this._leftActionsElWidth&&(this.show(this._leftActionsBgEl),this._leftActionsBgEl.css("transform","scaleX("+Math.abs(s)+")"))):this.hide(this._leftActionsBgEl)))}},handleMoveEnd:function(t){console.log("end",t);var s=this;if(this._isTouchEnabled){this._preventDefault(t),this._isScrolling=!1;var n=this._getDirection(t),e=this.draggableEl.position().left,o=Math.abs(t.velocityX)>=.3&&(Math.abs(t.delataX)>150||Math.abs(t.delataY)>150);this._rightActionsVisible=!1,this._leftActionsVisible=!1,n===i.DIRECTION_LEFT&&this._rightActionsCount>0&&0>=e&&Math.abs(e)>=this._rightActionsElWidth*this._revealPercent/100?(this._rightActionsVisible=!0,this._leftActionsVisible=!1,this._validatePosition(t,n,e,o)):n===i.DIRECTION_RIGHT&&this._leftActionsCount>0&&Math.abs(e)>=this._leftActionsElWidth*this._revealPercent/100?(this._rightActionsVisible=!1,this._leftActionsVisible=!0,this._validatePosition(t,n,e,o)):(this.applyTransform(this.draggableEl,null,this._originalTransition,function(){s.rightActionsEl.width(s._rightActionsElWidth),s.leftActionsEl.width(s._leftActionsElWidth),s.applyTransform(this._rightActionsBgEl,null),s.applyTransform(this._leftActionsBgEl,null),s.hide(s.leftActionsEl),s.hide(s.rightActionsEl)}),this._initx=0)}},_validatePosition:function(t,s,n,e){var o=this._rightActionsCount,h=this.rightActionsEl,l=this._rightActionsElWidth,r=this._rightActionsBgEl,a=-1*this._rightActionsElWidth,c=this.leftSwipeCallBack,g=0>=n&&Math.abs(n)>=l&&!this._leftActionsVisible;s===i.DIRECTION_RIGHT&&(o=this._leftActionsCount,h=this.leftActionsEl,l=this._leftActionsElWidth,r=this._leftActionsBgEl,a=this._leftActionsElWidth,c=this.rightwipeCallBack,g=Math.abs(n)>=l&&!this._rightActionsVisible),e&&1===o&&c&&g||1===o&&c&&window.screen.width/2<=Math.abs(n)?(console.log("swipe"),c(),this.resetPosition(t,h,l,e,r)):e&&!g?this._validatePosition(t,s,n):(this.applyTransform(this.draggableEl,a,this._originalTransition,function(){h.width(l),this.applyTransform(r,null)}.bind(this)),this._initx=a)},_addTransitionEndListener:function(i,s){function n(t){s.call(e,t),e._removeTransitionListener(i,n)}var e=this,o=this._getSupportedTransition(i),h=t.find(this._onTransitionEndEvents,function(t){return t.event===s&&t.el===i});h||(o&&i[0].addEventListener(o,n),this._onTransitionEndEvents.push({el:i,name:o,event:n}))},_removeAllTransitionListeners:function(){this._onTransitionEndEvents.forEach(function(t){t.el&&t.el[0].removeEventListener(t.name,t.event)})},_removeTransitionListener:function(i,s){var n=t.findIndex(this._onTransitionEndEvents,function(t){return t.event===s&&t.el===i});if(-1!==n){var e=this._onTransitionEndEvents[n];e.el[0].removeEventListener(e.name,e.event),this._onTransitionEndEvents.splice(n,1)}},_getSupportedTransition:function(t){var i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var s in i)if(void 0!==t[0].style[s])return i[s]},_getDirection:function(t){return t.deltaX?t.offsetDirection:i.DIRECTION_NONE},_addBgElement:function(t,i,s){var n=document.createElement("DIV");return 0===i.length?angular.element(n):(n.style.backgroundColor=i.last().css("background-color"),n.style.transformOrigin="left"===s?"left":"right",n.className="bg-item",t.append(n),angular.element(n))},_preventDefault:function(t){t&&(t.preventDefault(),t.srcEvent&&t.srcEvent.preventDefault&&t.srcEvent.preventDefault(),t.srcEvent&&t.srcEvent.stopPropagation&&t.srcEvent.stopPropagation(),t.srcEvent&&t.srcEvent.stopImmediatePropagation&&t.srcEvent.stopImmediatePropagation())}},s});define(rA[285][0],["moduleDefiner"],function(e){"use strict";var t=e("infrastruct.ui.clickOutside");return t.directive("clickOutside",["$timeout",function(e){function t(e){c.forEach(function(t){$(e.target).closest(t.el).length||t.scope.clickOutside()})}function n(e,n){c.push({scope:e,el:n}),1==c.length&&document.addEventListener("click",t)}function i(e){var n=c.findIndex(function(t){return t.el===e});-1!==n&&c.splice(n,1),0==c.length&&document.removeEventListener("click",t)}var c=[];return{link:function(t,c){e(function(){n(t,c)}),t.$on("$destroy",function(){i(c)})},restrict:"A",scope:{clickOutside:"&"}}}]),t});define(rA[399][0],["angular",rA[477][0],rA[290][0]],function(i,n,t){"use strict";var a=i.module("settingsApp",[n.name]);return t(a,"apps.trader.oneClickTrading.editOneClickTrading"),a});define(rA[290][0],["moduleDefiner","underscore"],function(t,i){function e(t,i,e,n,s,o,a,r,u,c){var l=this;l.oneClickModel=!0,l.oneClickTradingFactory=n,l.executionCalculator=s,l.$scope=t,l.$rootScope=i,l.config=o,l.errors={},l.isBuy=!0,l.showInfo=!0,l.loading=!0,l.amountView="",l.unitsView="",l.isAmounInputFocus=!1,l.inUnitsMode=!1,l.amountEditMode=null,l.amountEditOptions={Amount:"Amount",Units:"Units"},l.displayLeveragesShowInfo=!1,l.displayLeveragesMessage="",l.kycProvider=a,l.$interpolate=r,l.localizeFactory=u,l.$injector=c,t.amountFocus=function(){l.isAmounInputFocus=!0,l.amountEditMode=l.amountEditOptions.Amount},t.amountChange=function(t,i){l.isAmounInputFocus=!1,l.amountEditMode=l.amountEditOptions.Amount,t?(l.clearErrors("amount"),l.clearErrors("leverage")):l.amount.amount=i,l._recalculateAmountAndUnitsOneClick(t),l.syncAmountInput()},t.amountBlur=function(t){t&&(l.clearErrors("amount"),l.clearErrors("leverage")),l.isAmounInputFocus=!1},t.amountDefocus=function(){l.isAmounInputFocus=!1},t.unitsFocus=function(){l.isAmounInputFocus=!0,l.amountEditMode=l.amountEditOptions.Units},t.unitsChange=function(t,i){l.isAmounInputFocus=!1,l.amountEditMode=l.amountEditOptions.Units,t?(l.clearErrors("amount"),l.clearErrors("leverage")):l.amount.units=i,l._recalculateAmountAndUnitsOneClick(t),l.syncAmountInput()},t.unitsBlur=function(t){t&&(l.clearErrors("amount"),l.clearErrors("leverage")),l.isAmounInputFocus=!1},t.unitsDefocus=function(){l.isAmounInputFocus=!1},t.uiDialogData&&(l.instrument=t.uiDialogData.instrument,e.getPromiseById(l.instrument).then(function(){e.subscribe(l.instrument),l.loading=!1,l.init();var i=t.$on("ui-tab-clicked.OneClickTradingTabs",function(){l.showInfo=!1,i()})})["catch"](function(t,i){new AppError("Unable to get rate","getPromiseById",!1,t,i)}))}return e.$inject=["$scope","$rootScope","bl.factories.trading.instruments.rates.ratesFactory","bl.factories.trading.oneClickTrading","bl.factories.trading.execution.executionCalculator","infrastruct.services.config","bl.factories.payments.kycProvider","$interpolate","infrastruct.services.localization.localizeFactory","$injector"],e.prototype={get rateOptions(){return i.values(this.oneClickTradingFactory.getRateOptions())},getComplianceTradingFlowsService:function(){return this.$injector.get("bl.factories.compliance.tradingFlowsService")},init:function(){var t,i,e=this.oneClickTradingFactory.getInstrumentSettings(this.instrument.InstrumentID),n=e.octSettings,s=this,o=s.instrument.getUnitMargin(!1);this.inUnitsMode=!!n.inUnitsMode,this.inUnitsMode?(t=s.executionCalculator.calculateAmount(n.units,o,n.leverage),i=n.units):(t=n.amount,i=s.executionCalculator.calculateUnits(o,n.amount,n.leverage)),this.amount={amount:t,units:i,exposure:t*n.leverage},this.leverages=this.executionCalculator.setLeverageList(this.instrument,n.leverage),this.displayLeverages=this.instrument.mergedLeveragesList||this.leverages.leverageList||[],this.risk={amount:this.leverages.selectedLeverage},this.stopLoss=n.stopLoss,this.takeProfit=n.takeProfit,this.isTslEnabled=n.isTslEnabled,this.user=this.$rootScope.session.user,this.isRealAccount="real"===this.user.portfolio.account.type.toLowerCase(),this.isTSLFeatureEnabled=this.isRealAccount?this.config.dynamics.portfolio.real.tsl:this.config.dynamics.portfolio.demo.tsl,this.$scope.$on("trading:executionCalculator:error",function(t,i){var e={};e[i.message]=!0,e.data=i.data,s.errors[i.property]=e}),this.$scope.$watch(function(){return s.instrument&&s.instrument.rate?s.instrument.getUnitMargin(!1):void 0},function(t,i){if(t!==i){{s.isEditByUnit()}s._recalculateAmountAndUnitsOneClick(),s.syncAmountInput()}}),this.syncAmountInput()},isDiscountedRate:function(){var t=this;return t.executionCalculator.isDiscountedRate(t.instrument,t.isBuy,t.leverage)},setRate:function(t,i){i?this.stopLoss=t:this.takeProfit=t},setLeverage:function(t){if(this.displayLeveragesShowInfo=!1,this.instrument.isPotentialDisplayLeverage(t)){var i=this.$scope.session.user.tradingRiskStatusId||3;1===i?this.getComplianceTradingFlowsService().getPotentialLeverageFlowDialog().then(function(i){if(i&&i.tradingRiskStatusId)this.handleTradingRiskStatus(i.tradingRiskStatusId,t);else{var e=3;this.handleTradingRiskStatus(e,t)}}.bind(this))["catch"](function(){var i=3;this.handleTradingRiskStatus(i,t)}.bind(this)):this.handleTradingRiskStatus(i,t)}else this._setLeverage(t)},handleTradingRiskStatus:function(t,i){if(2===t)this.displayLeveragesShowInfo=!0,this.displayLeveragesMessage=this.localizeFactory.getLocale("portfolioOpenPosition.statusPending");else if(4===t){var e=this.instrument.mergedLeveragesList||this.leverages||[];this.instrument.Leverages=e,this._setLeverage(i)}else{this.displayLeveragesShowInfo=!0;var n=this.instrument.Leverages||this.leverages||[];if(n.length>0){var s=n[n.length-1];s&&(this.displayLeveragesMessage=this.$interpolate(this.localizeFactory.getResource("portfolioOpenPosition.statusLow",!1,!0))({leverage:s}))}}},_setLeverage:function(t){this.clearErrors("leverage"),this.clearErrors("amount");var i=this.isEditByUnit(),e=this.executionCalculator.changeLeverage(this,t,i);e&&(this.leverage=t,this._recalculateAmountAndUnitsOneClick(),this.syncAmountInput())},clearErrors:function(t){this.errors[t]=null},clearAllErrors:function(){i.each(this.errors,function(t,i){this.clearErrors(i)}.bind(this))},update:function(){this.oneClickTradingFactory.addOrUpdateInstrument(this.instrument,{leverage:this.risk.amount,stopLoss:this.stopLoss,takeProfit:this.takeProfit,amount:parseToFloat(this.amount.amount),isTslEnabled:this.isTslEnabled,units:this.amount.units,inUnitsMode:this.isEditByUnit()}),this.$scope.closeThisDialog()},removeItem:function(){this.oneClickTradingFactory.removeInstrument(this.instrument),this.$scope.closeThisDialog()},switchAmountMode:function(){this.inUnitsMode=!this.inUnitsMode,this.isAmounInputFocus=!1},syncAmountInput:function(t){(!this.isAmounInputFocus||t)&&(this.amountView=this.amount.amount,this.unitsView=this.amount.units)},isEditByUnit:function(){var t=!1;return this.amountEditMode?this.amountEditMode===this.amountEditOptions.Amount?t=!1:this.amountEditMode===this.amountEditOptions.Units&&(t=!0):t=this.inUnitsMode,t},_recalculateAmountAndUnitsOneClick:function(t){var i=this.isEditByUnit();this.executionCalculator.recalculateAmountAndUnitsOneClick(this,i,t),this.executionCalculator.updateExposure(this)}},function(i,n){return t(i,[]).controller(n,e)}});define(rA[369][0],["angular",rA[321][0]],function(e,c){"use strict";var s=e.module("bl.factories.expressCheckout",[]);return s.service("bl.factories.expressCheckoutService",c),s.run(["bl.factories.expressCheckoutService",function(){}]),s});define(rA[321][0],["angular"],function(){"use strict";function t(t,e,s,o,i,n,r){this.$q=t,this.$rootScope=e,this.$interval=s,this.instrumentsFactory=o,this.usersFactory=i,this.portfolioActionsEvents=n,this.appDataService=function(){return r.get("infrastruct.services.appDataService")},this.ENTITY_TYPE={INSTRUMENT:1,MIRROR:2},this._active=!1,this.$rootScope.$on("login:success",function(){this._expressCheckoutData=null}.bind(this)),this.$rootScope.$on("logout:success",function(){this._expressCheckoutData=null,this._active=!1}.bind(this)),this.$rootScope.$on("expresscheckout:save:data",function(t,e){this._saveExpressCheckoutData(e)}.bind(this)),this.$rootScope.$on("expresscheckout:persist:data",function(){this._persistExpressCheckoutData()}.bind(this)),this.$rootScope.$on("expresscheckout:get:data",function(){this._getExpressCheckoutData()}.bind(this)),this.$rootScope.$on("expresscheckout:remove:data",function(){this._removeExpressCheckoutData()}.bind(this))}return t.$inject=["$q","$rootScope","$interval","bl.factories.trading.instruments.instrumentsFactory","bl.factories.trading.users.usersFactory","apps.trader.portfolio.portfolioActionsEvents","$injector"],t.prototype={isActive:function(){return this._active},_saveExpressCheckoutData:function(t){this._expressCheckoutData=t,this._active=!0},_persistExpressCheckoutData:function(){var t=this;return t.$q(function(e,s){var o=t.$rootScope.session.user;return t._expressCheckoutData&&o?void o.isValidForExpressCheckout().then(function(o){o?(t.appDataService().setItem("expressCheckout",t._expressCheckoutData),e()):s()})["catch"](s):void s()})},_getExpressCheckoutData:function(){var t=this;return t.$q(function(){t.appDataService().getItem("expressCheckout").then(function(e){if(e){if(e.entityType===t.ENTITY_TYPE.INSTRUMENT)var s=t.instrumentsFactory.getById(e.entityId),o=t.$interval(function(){t.portfolioActionsEvents.isTradingConnectionAvailable()&&(t.portfolioActionsEvents.openPosition(s,e.isBuy,null,!0,null,!1,!1,!1,"ExpressCheckout"),t.$interval.cancel(o))},100);else e.entityType===t.ENTITY_TYPE.MIRROR&&t.usersFactory.getById(e.entityId).then(function(e){var s=t.$interval(function(){t.portfolioActionsEvents.isTradingConnectionAvailable()&&(t.portfolioActionsEvents.copyTrade(e,null,!1,!1,"ExpressCheckout"),t.$interval.cancel(s))},100)});t._removeExpressCheckoutData()}})["catch"](function(){})})},_removeExpressCheckoutData:function(){this.appDataService().deleteItem("expressCheckout"),this._active=!1}},t});;try{
requirejs.s.contexts.etoro.takeGlobalQueue();}catch(e){}})();